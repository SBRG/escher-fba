!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/escher-fba/",t(t.s=334)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(45);n.d(t,"creator",function(){return i.a});var r=n(248);n.d(t,"local",function(){return r.a});var o=n(106);n.d(t,"matcher",function(){return o.a});var a=n(249);n.d(t,"mouse",function(){return a.a});var l=n(46);n.d(t,"namespace",function(){return l.a});var s=n(47);n.d(t,"namespaces",function(){return s.a});var u=n(250);n.d(t,"select",function(){return u.a});var c=n(251);n.d(t,"selectAll",function(){return c.a});var _=n(4);n.d(t,"selection",function(){return _.a});var d=n(50);n.d(t,"selector",function(){return d.a});var f=n(110);n.d(t,"selectorAll",function(){return f.a});var b=n(109);n.d(t,"style",function(){return b.a});var p=n(278);n.d(t,"touch",function(){return p.a});var m=n(279);n.d(t,"touches",function(){return m.a});var h=n(52);n.d(t,"window",function(){return h.a});var g=n(49);n.d(t,"event",function(){return g.a}),n.d(t,"customEvent",function(){return g.b})},function(e,t,n){"use strict";function i(){try{new Blob}catch(e){alert("Blob not supported")}}function r(e,t,n){if(void 0===e||null===e)return t;var i={};for(var r in t){var o=r in e&&null!==e[r]&&void 0!==e[r],a=o?e[r]:t[r];n&&r in n&&(a=parseFloat(a),isNaN(a)&&(o?(console.warn("Bad float for option "+r),a=parseFloat(t[r]),isNaN(a)&&(console.warn("Bad float for default "+r),a=null)):(console.warn("Bad float for default "+r),a=null))),i[r]=a}return i}function o(e){for(var t=e.node();t.hasChildNodes();)t.removeChild(t.lastChild)}function a(e,t){var n="";return e&&oe(e,function(e,i){e&&console.warn(e),n=i,t(n)}),!1}function l(e,t){return-1!==e.indexOf(t,e.length-t.length)}function s(e,t,n,i){return i?(t&&console.warn("File "+t+" overridden by value."),void n.call(e,null,i)):t?void(l(t,"json")?re(t,function(t,i){n.call(e,t,i)}):l(t,"css")?oe(t,function(t,i){n.call(e,t,i)}):n.call(e,"Unrecognized file type",null)):void n.call(e,"No filename",null)}function u(e,t,n){0===t.length&&n.call(e);for(var i=-1,r=t.length;++i<t.length;)s(e,t[i].file,function(t,i){this.call(e,t,i),--r||n.call(e)}.bind(t[i].callback),t[i].value)}function c(){var e,t=function t(n){if(!(this instanceof t)){e=!0;var i=new t(arguments);return e=!1,i}"function"===typeof this.init&&this.init.apply(this,e?n:arguments)};return t}function _(e,t){e.select("defs").remove();var n=e.append("defs"),i=n.node();return i.parentNode.insertBefore(i,i.parentNode.firstChild),n.append("style").attr("type","text/css").text(t),n}function d(e,t,n,i,r,o,a,l){var s={};for(var u in i)void 0===i[u]?console.warn("Undefined value for id "+u+" in object. Ignoring."):s[u]=i[u];var c=e.select(t).selectAll(n).data(p(s,r),function(e){return e[r]}),_=o?o(c.enter()).merge(c):c;a&&_.call(a),l&&c.exit().call(l)}function f(e,t,n,i,r,o,a){var l=e.selectAll(t).data(function(e){return p(e[n],i)},function(e){return e[i]}),s=r?r(l.enter()).merge(l):l;o&&s.call(o),a&&l.exit().call(a)}function b(e,t){var n=[];for(var i in e){var r=g(e[i]);r[t]=i,n.push(r)}return n}function p(e,t){var n=[];for(var i in e){var r=e[i];r[t]=i,n.push(r)}return n}function m(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!=t[n])return!1;return!0}function h(e){for(var t={},n=0,i=e.length;n<i;n++)for(var r=e[n],o=Object.keys(r),a=0,l=o.length;a<l;a++){var s=o[a];if(s in t)t[s][n]=r[s];else{for(var u=[],c=0;c<i;c++)u[c]=null;u[n]=r[s],t[s]=u}}return t}function g(e){return ie.isArray(e)?ie.map(e,function(e){return g(e)}):ie.isObject(e)?ie.mapObject(e,function(e,t){return g(e)}):e}function v(e,t,n){void 0===n&&(n=!1);for(var i in t){if(i in e&&!n)throw new Error("Attribute "+i+" already in object.");e[i]=t[i]}}function y(e){var t=[];return e.forEach(function(e){e.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),t}function x(e){for(var t=[],n=0,i=e.length;n<i;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function w(e,t,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||e.apply(r,o)},l=n&&!i;clearTimeout(i),i=setTimeout(a,t),l&&e.apply(r,o)}}function k(e,t){for(var n={},i=-1;++i<t.length;)n[t[i]]=g(e[t[i]]);return t.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset"),n}function M(e,t){for(var n={},i=-1;++i<t.length;)n[t[i]]=e[t[i]];return t.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset"),n}function A(e,t){return null===e||null===t||void 0===e||void 0===t?null:{x:e.x+t.x,y:e.y+t.y}}function E(e,t){return null===e||null===t||void 0===e||void 0===t?null:{x:e.x-t.x,y:e.y-t.y}}function P(e,t){return{x:e.x*t,y:e.y*t}}function j(e,t){i();var n=JSON.stringify(e),r=new Blob([n],{type:"application/json"});se(r,t+".json")}function O(e,t,n,i){window.File&&window.FileReader&&window.FileList&&window.Blob||t("The File APIs are not fully supported in this browser.",null);var r=new window.FileReader;if(r.onload=function(e){var n,i=e.target.result;try{n=JSON.parse(i)}catch(e){return void t(e,null)}t(null,n)},void 0!==n&&null!==n)try{n()}catch(e){console.warn(e)}r.onabort=function(e){try{i()}catch(e){console.warn(e)}},r.onerror=function(e){try{i()}catch(e){console.warn(e)}},r.readAsText(e)}function C(e,t,n,i,r,o){var a=function(e){var i,r,o=e.target.result;try{i=JSON.parse(o)}catch(e){r="JSON error: "+e;try{i=t(ae(o))}catch(e){return void n(r+"\nCSV error: "+e,null)}}n(null,i)};if(void 0!==o&&null!==o)return console.warn("Debugging load_json_or_csv"),a(o);window.File&&window.FileReader&&window.FileList&&window.Blob||n("The File APIs are not fully supported in this browser.",null);var l=new window.FileReader;if(void 0!==i&&null!==i)try{i()}catch(e){console.warn(e)}l.onabort=function(e){try{r()}catch(e){console.warn(e)}},l.onerror=function(e){try{r()}catch(e){console.warn(e)}},l.onload=a,l.readAsText(e)}function S(e,t,n){i();var r=(new XMLSerializer).serializeToString(t.node());n&&(r=ne.xml(r)),r='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+r;var o=new Blob([r],{type:"image/svg+xml"});se(o,e+".svg")}function z(e,t,n){i();var r=(new XMLSerializer).serializeToString(t.node());n&&(r=ne.xml(r)),r='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+r;var o=document.createElement("canvas"),a=o.getContext("2d"),l=t.node().getBBox(),s=l.width+l.x,u=l.height+l.y;s<1e4&&u<1e4?(o.width=s,o.height=u):o.width>o.height?(o.width=1e4,o.height=u/s*1e4):(o.width=s/u*1e4,o.height=1e4);var c=new Image;c.src="data:image/svg+xml;base64,"+btoa(r),c.onload=function(){a.fillStyle="#FFF",a.fillRect(0,0,o.width,o.height),a.drawImage(c,0,0,o.width,o.height),o.toBlob(function(t){se(t,e+".png")})}}function N(e,t,n){return e.map(function(e){return L(e,t,n)})}function L(e,t,n){return{x:Math.cos(-t)*(e.x-n.x)+Math.sin(-t)*(e.y-n.y)+n.x-e.x,y:-Math.sin(-t)*(e.x-n.x)+Math.cos(-t)*(e.y-n.y)+n.y-e.y}}function T(e){var t=e[1].x-e[0].x,n=e[1].y-e[0].y;return 0===t&&n>=0?Math.PI/2:0===t&&n<0?3*Math.PI/2:t>=0&&n>=0?Math.atan(n/t):t>=0?Math.atan(n/t)+2*Math.PI:Math.atan(n/t)+Math.PI}function I(e){return 180*e/Math.PI}function D(e){return e<-Math.PI?e+=2*Math.ceil(e/(-2*Math.PI))*Math.PI:e>Math.PI&&(e-=2*Math.ceil(e/(2*Math.PI))*Math.PI),e}function F(e){return D(Math.PI/180*e)}function R(e,t,n){var i=Math.atan2(t.x-n.x,n.y-t.y);return Math.atan2(t.x-n.x+e.x,n.y-t.y-e.y)-i}function U(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function B(e,t){t.map(function(n,i){void 0===e[i]&&console.error("Argument is undefined: "+String(t[i]))})}function q(e,t){return e+"_"+t}function H(e){var t=/(.*)_([a-z0-9]{1,2})$/,n=t.exec(e);return null!==n?n.slice(1,3):[e,null]}function G(e){return e.reduce(function(e,t){return e+t})/e.length}function V(e){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2==1?e[t]:(e[t-1]+e[t])/2}function X(e){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return 1===e.length?[e[0],e[0],e[0]]:e.length%2===1?[V(e.slice(0,t)),e[t],V(e.slice(t+1))]:[V(e.slice(0,t)),(e[t-1]+e[t])/2,V(e.slice(t))]}function K(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function W(){return K(12)}function Y(e,t){for(e instanceof le&&(e=e.node());null!==e.parentNode;)if(e=e.parentNode,void 0!==e.tagName&&e.tagName.toLowerCase()===t.toLowerCase())return!0;return!1}function J(e,t){return void 0!==t&&null!==t&&(t=t.replace(/^\/|\/$/g,""),e=[t,e].join("/")),e.replace(/^\/|\/$/g,"")+".json"}function $(e,t){ie.isUndefined(t)&&(t={});for(var n=e.location.search.substring(1),i=n.split("&"),r=0,o=i.length;r<o;r++){var a=i[r].split("="),l=decodeURIComponent(a[1]);if(a[0].indexOf("[]")===a[0].length-2){var s=a[0].replace("[]","");s in t||(t[s]=[]),t[s].push(l)}else t[a[0]]=l}return t}function Z(e){return e.ownerDocument}function Q(e){return Z(e).defaultView}function ee(e){if(-1!==e.indexOf("skew")||-1!==e.indexOf("matrix"))throw new Error("d3_transform_catch does not work with skew or matrix");var t=/translate\s*\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)/.exec(e),n=ie.isNull(t),i=n?0:Number(t[1]),r=n?0:Number(t[2]),o=/rotate\s*\(\s*([0-9.-]+)\s*\)/.exec(e),a=ie.isNull(o),l=a?0:Number(o[1]),s=/scale\s*\(\s*([0-9.-]+)\s*\)/.exec(e);return{translate:[i,r],rotate:l,scale:ie.isNull(s)?0:Number(s[1])}}function te(e){try{return function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}().toLowerCase().indexOf(e)>-1}catch(e){return!1}}var ne=n(120),ie=n(2),re=n(18).json,oe=n(18).text,ae=n(90).csvParseRows,le=n(0).selection;try{var se=n(321).saveAs}catch(e){console.warn("Not a browser, so FileSaver.js not available.")}e.exports={set_options:r,remove_child_nodes:o,load_css:a,load_files:u,load_the_file:s,make_class:c,setup_defs:_,draw_an_object:d,draw_a_nested_object:f,make_array:b,make_array_ref:p,compare_arrays:m,array_to_object:h,clone:g,extend:v,unique_concat:y,unique_strings_array:x,debounce:w,object_slice_for_ids:k,object_slice_for_ids_ref:M,c_plus_c:A,c_minus_c:E,c_times_scalar:P,download_json:j,load_json:O,load_json_or_csv:C,download_svg:S,download_png:z,rotate_coords_recursive:N,rotate_coords:L,get_angle:T,to_degrees:I,to_radians_norm:F,angle_for_event:R,distance:U,check_undefined:B,compartmentalize:q,decompartmentalize:H,mean:G,median:V,quartiles:X,random_characters:K,generate_map_id:W,check_for_parent_tag:Y,name_to_url:J,parse_url_components:$,get_document:Z,get_window:Q,d3_transform_catch:ee,check_browser:te}},function(e,t,n){var i,r;(function(){function n(e){function t(t,n,i,r,o,a){for(;o>=0&&o<a;o+=e){var l=r?r[o]:o;i=n(i,t[l],l,t)}return i}return function(n,i,r,o){i=k(i,o,4);var a=!C(n)&&w.keys(n),l=(a||n).length,s=e>0?0:l-1;return arguments.length<3&&(r=n[a?a[s]:s],s+=e),t(n,i,r,a,s,l)}}function o(e){return function(t,n,i){n=M(n,i);for(var r=O(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(n(t[o],o,t))return o;return-1}}function a(e,t,n){return function(i,r,o){var a=0,l=O(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=t(b.call(i,a,l),w.isNaN),o>=0?o+a:-1;for(o=e>0?a:l-1;o>=0&&o<l;o+=e)if(i[o]===r)return o;return-1}}function l(e,t){var n=T.length,i=e.constructor,r=w.isFunction(i)&&i.prototype||_,o="constructor";for(w.has(e,o)&&!w.contains(t,o)&&t.push(o);n--;)(o=T[n])in e&&e[o]!==r[o]&&!w.contains(t,o)&&t.push(o)}var s=this,u=s._,c=Array.prototype,_=Object.prototype,d=Function.prototype,f=c.push,b=c.slice,p=_.toString,m=_.hasOwnProperty,h=Array.isArray,g=Object.keys,v=d.bind,y=Object.create,x=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};"undefined"!==typeof e&&e.exports&&(t=e.exports=w),t._=w,w.VERSION="1.8.3";var k=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},M=function(e,t,n){return null==e?w.identity:w.isFunction(e)?k(e,t,n):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return M(e,t,1/0)};var A=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=e(o),l=a.length,s=0;s<l;s++){var u=a[s];t&&void 0!==n[u]||(n[u]=o[u])}return n}},E=function(e){if(!w.isObject(e))return{};if(y)return y(e);x.prototype=e;var t=new x;return x.prototype=null,t},P=function(e){return function(t){return null==t?void 0:t[e]}},j=Math.pow(2,53)-1,O=P("length"),C=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=j};w.each=w.forEach=function(e,t,n){t=k(t,n);var i,r;if(C(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=w.keys(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e},w.map=w.collect=function(e,t,n){t=M(t,n);for(var i=!C(e)&&w.keys(e),r=(i||e).length,o=Array(r),a=0;a<r;a++){var l=i?i[a]:a;o[a]=t(e[l],l,e)}return o},w.reduce=w.foldl=w.inject=n(1),w.reduceRight=w.foldr=n(-1),w.find=w.detect=function(e,t,n){var i;if(void 0!==(i=C(e)?w.findIndex(e,t,n):w.findKey(e,t,n))&&-1!==i)return e[i]},w.filter=w.select=function(e,t,n){var i=[];return t=M(t,n),w.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},w.reject=function(e,t,n){return w.filter(e,w.negate(M(t)),n)},w.every=w.all=function(e,t,n){t=M(t,n);for(var i=!C(e)&&w.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},w.some=w.any=function(e,t,n){t=M(t,n);for(var i=!C(e)&&w.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,n,i){return C(e)||(e=w.values(e)),("number"!=typeof n||i)&&(n=0),w.indexOf(e,t,n)>=0},w.invoke=function(e,t){var n=b.call(arguments,2),i=w.isFunction(t);return w.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,n){var i,r,o=-1/0,a=-1/0;if(null==t&&null!=e){e=C(e)?e:w.values(e);for(var l=0,s=e.length;l<s;l++)(i=e[l])>o&&(o=i)}else t=M(t,n),w.each(e,function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&o===-1/0)&&(o=e,a=r)});return o},w.min=function(e,t,n){var i,r,o=1/0,a=1/0;if(null==t&&null!=e){e=C(e)?e:w.values(e);for(var l=0,s=e.length;l<s;l++)(i=e[l])<o&&(o=i)}else t=M(t,n),w.each(e,function(e,n,i){((r=t(e,n,i))<a||r===1/0&&o===1/0)&&(o=e,a=r)});return o},w.shuffle=function(e){for(var t,n=C(e)?e:w.values(e),i=n.length,r=Array(i),o=0;o<i;o++)t=w.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},w.sample=function(e,t,n){return null==t||n?(C(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,n){return t=M(t,n),w.pluck(w.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var S=function(e){return function(t,n,i){var r={};return n=M(n,i),w.each(t,function(i,o){var a=n(i,o,t);e(r,i,a)}),r}};w.groupBy=S(function(e,t,n){w.has(e,n)?e[n].push(t):e[n]=[t]}),w.indexBy=S(function(e,t,n){e[n]=t}),w.countBy=S(function(e,t,n){w.has(e,n)?e[n]++:e[n]=1}),w.toArray=function(e){return e?w.isArray(e)?b.call(e):C(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:C(e)?e.length:w.keys(e).length},w.partition=function(e,t,n){t=M(t,n);var i=[],r=[];return w.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},w.first=w.head=w.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,n){return b.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},w.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,n){return b.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var z=function(e,t,n,i){for(var r=[],o=0,a=i||0,l=O(e);a<l;a++){var s=e[a];if(C(s)&&(w.isArray(s)||w.isArguments(s))){t||(s=z(s,t,n));var u=0,c=s.length;for(r.length+=c;u<c;)r[o++]=s[u++]}else n||(r[o++]=s)}return r};w.flatten=function(e,t){return z(e,t,!1)},w.without=function(e){return w.difference(e,b.call(arguments,1))},w.uniq=w.unique=function(e,t,n,i){w.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=M(n,i));for(var r=[],o=[],a=0,l=O(e);a<l;a++){var s=e[a],u=n?n(s,a,e):s;t?(a&&o===u||r.push(s),o=u):n?w.contains(o,u)||(o.push(u),r.push(s)):w.contains(r,s)||r.push(s)}return r},w.union=function(){return w.uniq(z(arguments,!0,!0))},w.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=O(e);i<r;i++){var o=e[i];if(!w.contains(t,o)){for(var a=1;a<n&&w.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},w.difference=function(e){var t=z(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,O).length||0,n=Array(t),i=0;i<t;i++)n[i]=w.pluck(e,i);return n},w.object=function(e,t){for(var n={},i=0,r=O(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},w.findIndex=o(1),w.findLastIndex=o(-1),w.sortedIndex=function(e,t,n,i){n=M(n,i,1);for(var r=n(t),o=0,a=O(e);o<a;){var l=Math.floor((o+a)/2);n(e[l])<r?o=l+1:a=l}return o},w.indexOf=a(1,w.findIndex,w.sortedIndex),w.lastIndexOf=a(-1,w.findLastIndex),w.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r};var N=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=E(e.prototype),a=e.apply(o,r);return w.isObject(a)?a:o};w.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,b.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var n=b.call(arguments,2),i=function(){return N(e,i,t,this,n.concat(b.call(arguments)))};return i},w.partial=function(e){var t=b.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),a=0;a<r;a++)o[a]=t[a]===w?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return N(e,n,this,this,o)};return n},w.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)n=arguments[t],e[n]=w.bind(e[n],e);return e},w.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return w.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},w.delay=function(e,t){var n=b.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,n){var i,r,o,a=null,l=0;n||(n={});var s=function(){l=!1===n.leading?0:w.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var u=w.now();l||!1!==n.leading||(l=u);var c=t-(u-l);return i=this,r=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),l=u,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(s,c)),o}},w.debounce=function(e,t,n){var i,r,o,a,l,s=function(){var u=w.now()-a;u<t&&u>=0?i=setTimeout(s,t-u):(i=null,n||(l=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=w.now();var u=n&&!i;return i||(i=setTimeout(s,t)),u&&(l=e.apply(o,r),o=r=null),l}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},w.once=w.partial(w.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(g)return g(e);var t=[];for(var n in e)w.has(e,n)&&t.push(n);return L&&l(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var n in e)t.push(n);return L&&l(e,t),t},w.values=function(e){for(var t=w.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},w.mapObject=function(e,t,n){t=M(t,n);for(var i,r=w.keys(e),o=r.length,a={},l=0;l<o;l++)i=r[l],a[i]=t(e[i],i,e);return a},w.pairs=function(e){for(var t=w.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},w.invert=function(e){for(var t={},n=w.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},w.functions=w.methods=function(e){var t=[];for(var n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=A(w.allKeys),w.extendOwn=w.assign=A(w.keys),w.findKey=function(e,t,n){t=M(t,n);for(var i,r=w.keys(e),o=0,a=r.length;o<a;o++)if(i=r[o],t(e[i],i,e))return i},w.pick=function(e,t,n){var i,r,o={},a=e;if(null==a)return o;w.isFunction(t)?(r=w.allKeys(a),i=k(t,n)):(r=z(arguments,!1,!1,1),i=function(e,t,n){return t in n},a=Object(a));for(var l=0,s=r.length;l<s;l++){var u=r[l],c=a[u];i(c,u,a)&&(o[u]=c)}return o},w.omit=function(e,t,n){if(w.isFunction(t))t=w.negate(t);else{var i=w.map(z(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(i,t)}}return w.pick(e,t,n)},w.defaults=A(w.allKeys,!0),w.create=function(e,t){var n=E(e);return t&&w.extendOwn(n,t),n},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var n=w.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0};var I=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var r=p.call(e);if(r!==p.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,l=t.constructor;if(a!==l&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var s=n.length;s--;)if(n[s]===e)return i[s]===t;if(n.push(e),i.push(t),o){if((s=e.length)!==t.length)return!1;for(;s--;)if(!I(e[s],t[s],n,i))return!1}else{var u,c=w.keys(e);if(s=c.length,w.keys(t).length!==s)return!1;for(;s--;)if(u=c[s],!w.has(t,u)||!I(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0};w.isEqual=function(e,t){return I(e,t)},w.isEmpty=function(e){return null==e||(C(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length)},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=h||function(e){return"[object Array]"===p.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&m.call(e,t)},w.noConflict=function(){return s._=u,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=P,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,n){var i=Array(Math.max(0,e));t=k(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=w.invert(D),R=function(e){var t=function(t){return e[t]},n="(?:"+w.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};w.escape=R(D),w.unescape=R(F),w.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),w.isFunction(i)?i.call(e):i};var U=0;w.uniqueId=function(e){var t=++U+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,G=function(e){return"\\"+q[e]};w.template=function(e,t,n){!t&&n&&(t=n),t=w.defaults({},t,w.templateSettings);var i=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,a,l){return o+=e.slice(r,l).replace(H,G),r=l+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var l=function(e){return a.call(this,e,w)};return l.source="function("+(t.variable||"obj")+"){\n"+o+"}",l},w.chain=function(e){var t=w(e);return t._chain=!0,t};var V=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var n=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),V(this,n.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];w.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],V(this,n)}}),w.each(["concat","join","slice"],function(e){var t=c[e];w.prototype[e]=function(){return V(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},i=[],void 0!==(r=function(){return w}.apply(t,i))&&(e.exports=r)}).call(this)},function(e,t,n){"use strict";function i(e,t,n,a){function l(t){return e(t=new Date(+t)),t}return l.floor=l,l.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},l.round=function(e){var t=l(e),n=l.ceil(e);return e-t<n-e?t:n},l.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},l.range=function(n,i,r){var o=[];if(n=l.ceil(n),r=null==r?1:Math.floor(r),!(n<i)||!(r>0))return o;do{o.push(new Date(+n))}while(t(n,r),e(n),n<i);return o},l.filter=function(n){return i(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})},n&&(l.count=function(t,i){return r.setTime(+t),o.setTime(+i),e(r),e(o),Math.floor(n(r,o))},l.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?l.filter(a?function(t){return a(t)%e===0}:function(t){return l.count(0,t)%e===0}):l:null}),l}t.a=i;var r=new Date,o=new Date},function(e,t,n){"use strict";function i(e,t){this._groups=e,this._parents=t}function r(){return new i([[document.documentElement]],L)}n.d(t,"c",function(){return L}),t.b=i;var o=n(273),a=n(274),l=n(262),s=n(256),u=n(107),c=n(261),_=n(266),d=n(269),f=n(276),b=n(254),p=n(268),m=n(267),h=n(275),g=n(260),v=n(259),y=n(253),x=n(109),w=n(270),k=n(255),M=n(277),A=n(263),E=n(271),P=n(265),j=n(252),O=n(264),C=n(272),S=n(257),z=n(49),N=n(258),L=[null];i.prototype=r.prototype={constructor:i,select:o.a,selectAll:a.a,filter:l.a,data:s.a,enter:u.a,exit:c.a,merge:_.a,order:d.a,sort:f.a,call:b.a,nodes:p.a,node:m.a,size:h.a,empty:g.a,each:v.a,attr:y.a,style:x.b,property:w.a,classed:k.a,text:M.a,html:A.a,raise:E.a,lower:P.a,append:j.a,insert:O.a,remove:C.a,datum:S.a,on:z.c,dispatch:N.a},t.a=r},function(e,t,n){"use strict";function i(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>_)throw new Error("too late");return n}function r(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>f)throw new Error("too late");return n}function o(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("too late");return n}function a(e,t,i){function r(e){i.state=d,i.timer.restart(o,i.delay,i.time),i.delay<=e&&o(e-i.delay)}function o(r){var _,m,g,v;if(i.state!==d)return l();for(_ in c)if(v=c[_],v.name===i.name){if(v.state===b)return n.i(s.b)(o);v.state===p?(v.state=h,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete c[_]):+_<t&&(v.state=h,v.timer.stop(),delete c[_])}if(n.i(s.b)(function(){i.state===b&&(i.state=p,i.timer.restart(a,i.delay,i.time),a(r))}),i.state=f,i.on.call("start",e,e.__data__,i.index,i.group),i.state===f){for(i.state=b,u=new Array(g=i.tween.length),_=0,m=-1;_<g;++_)(v=i.tween[_].value.call(e,e.__data__,i.index,i.group))&&(u[++m]=v);u.length=m+1}}function a(t){for(var n=t<i.duration?i.ease.call(null,t/i.duration):(i.timer.restart(l),i.state=m,1),r=-1,o=u.length;++r<o;)u[r].call(null,n);i.state===m&&(i.on.call("end",e,e.__data__,i.index,i.group),l())}function l(){i.state=h,i.timer.stop(),delete c[t];for(var n in c)return;delete e.__transition}var u,c=e.__transition;c[t]=i,i.timer=n.i(s.a)(r,0,i.time)}n.d(t,"d",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h}),t.g=i,t.e=r,t.f=o;var l=n(21),s=n(114),u=n.i(l.dispatch)("start","end","interrupt"),c=[],_=0,d=1,f=2,b=3,p=4,m=5,h=6;t.h=function(e,t,n,i,r,o){var l=e.__transition;if(l){if(n in l)return}else e.__transition={};a(e,n,{name:t,index:i,group:r,on:u,tween:c,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:_})}},function(e,t,n){"use strict";var i=n(42);n.d(t,"g",function(){return i.a});var r=(n(95),n(41),n(96),n(98),n(28));n.d(t,"c",function(){return r.a});var o=(n(99),n(225));n.d(t,"h",function(){return o.a});var a=n(101);n.d(t,"e",function(){return a.a});var l=n(227);n.d(t,"b",function(){return l.a}),n.d(t,"f",function(){return l.b});var s=n(229);n.d(t,"a",function(){return s.a});var u=n(100);n.d(t,"d",function(){return u.a});var c=(n(222),n(223),n(221),n(220));n.d(t,"i",function(){return c.a});n(224)},function(e,t,n){"use strict";var i=n(74);n.d(t,"c",function(){return i.a});var r=n(15);n.d(t,"g",function(){return r.a});var o=n(75);n.d(t,"e",function(){return o.a});var a=(n(168),n(169),n(76),n(77),n(170),n(180),n(181),n(81),n(172),n(173),n(174),n(175),n(78),n(79),n(176),n(35));n.d(t,"f",function(){return a.a});var l=n(80);n.d(t,"h",function(){return l.a});var s=(n(177),n(178),n(179),n(82));n.d(t,"a",function(){return s.a}),n.d(t,"b",function(){return s.b}),n.d(t,"d",function(){return s.c});n(83),n(84),n(182)},function(e,t,n){"use strict";var i=n(37);n.d(t,"a",function(){return i.a}),n.d(t,"f",function(){return i.h}),n.d(t,"e",function(){return i.g});var r=n(193);n.d(t,"d",function(){return r.b}),n.d(t,"c",function(){return r.a});var o=n(192);n.d(t,"b",function(){return o.a})},function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return l});var i=1e3,r=6e4,o=36e5,a=864e5,l=6048e5},function(e,t,n){"use strict";function i(){}function r(e,t){return void 0===this.callbacks&&(this.callbacks={}),void 0===this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t),this}function o(e){return void 0!==this.callbacks&&0!=Object.keys(this.callbacks).length||console.warn("No callbacks to remove"),delete this.callbacks[e],this}function a(e,t){if(s.isUndefined(this.callbacks))return this;s.isUndefined(t)&&(t=null);var n=Array.prototype.slice.call(arguments,2);for(var i in this.callbacks){i.split(".")[0]==e&&this.callbacks[i].forEach(function(e){e.apply(t,n)})}return this}var l=n(1),s=n(2),u=l.make_class();u.prototype={init:i,set:r,remove:o,run:a},e.exports=u},function(e,t,n){"use strict";function i(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function r(e){return n.i(a.selection)().transition(e)}function o(){return++M}t.a=i,t.b=o;var a=n(0),l=n(301),s=n(302),u=n(303),c=n(304),_=n(305),d=n(306),f=n(307),b=n(308),p=n(309),m=n(310),h=n(311),g=n(312),v=n(313),y=n(314),x=n(315),w=n(316),k=n(30),M=0,A=a.selection.prototype;i.prototype=r.prototype={constructor:i,select:m.a,selectAll:h.a,filter:d.a,merge:f.a,selection:g.a,transition:w.a,call:A.call,nodes:A.nodes,node:A.node,size:A.size,empty:A.empty,each:A.each,on:b.a,attr:l.a,attrTween:s.a,style:v.a,styleTween:y.a,text:x.a,remove:p.a,tween:k.a,delay:u.a,duration:c.a,ease:_.a}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=Array.prototype,r=i.map,o=i.slice},function(e,t,n){"use strict";function i(){}function r(e,t){var n,r,o,a,l=T;for(a=arguments.length;a-- >2;)L.push(arguments[a]);for(t&&null!=t.children&&(L.length||L.push(t.children),delete t.children);L.length;)if((r=L.pop())&&void 0!==r.pop)for(a=r.length;a--;)L.push(r[a]);else"boolean"===typeof r&&(r=null),(o="function"!==typeof e)&&(null==r?r="":"number"===typeof r?r=String(r):"string"!==typeof r&&(o=!1)),o&&n?l[l.length-1]+=r:l===T?l=[r]:l.push(r),n=o;var s=new i;return s.nodeName=e,s.children=l,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==N.vnode&&N.vnode(s),s}function o(e,t){for(var n in t)e[n]=t[n];return e}function a(e,t){return r(e.nodeName,o(o({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function l(e){!e._dirty&&(e._dirty=!0)&&1==F.push(e)&&(N.debounceRendering||I)(s)}function s(){var e,t=F;for(F=[];e=t.pop();)e._dirty&&j(e)}function u(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&c(e,t.nodeName):n||e._componentConstructor===t.nodeName}function c(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function _(e){var t=o({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);return t}function d(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n,i,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),i&&i(e);else if("class"!==t||r)if("style"===t){if(i&&"string"!==typeof i&&"string"!==typeof n||(e.style.cssText=i||""),i&&"object"===typeof i){if("string"!==typeof n)for(var o in n)o in i||(e.style[o]="");for(var o in i)e.style[o]="number"===typeof i[o]&&!1===D.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===t)i&&(e.innerHTML=i.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),i?n||e.addEventListener(t,m,a):e.removeEventListener(t,m,a),(e._listeners||(e._listeners={}))[t]=i}else if("list"!==t&&"type"!==t&&!r&&t in e)p(e,t,null==i?"":i),null!=i&&!1!==i||e.removeAttribute(t);else{var l=r&&t!==(t=t.replace(/^xlink\:?/,""));null==i||!1===i?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof i&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):e.setAttribute(t,i))}else e.className=i||""}function p(e,t,n){try{e[t]=n}catch(e){}}function m(e){return this._listeners[e.type](N.event&&N.event(e)||e)}function h(){for(var e;e=R.pop();)N.afterMount&&N.afterMount(e),e.componentDidMount&&e.componentDidMount()}function g(e,t,n,i,r,o){U++||(B=null!=r&&void 0!==r.ownerSVGElement,q=null!=e&&!("__preactattr_"in e));var a=v(e,t,n,i,o);return r&&a.parentNode!==r&&r.appendChild(a),--U||(q=!1,o||h()),a}function v(e,t,n,i,r){var o=e,a=B;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),x(e,!0))),o.__preactattr_=!0,o;var l=t.nodeName;if("function"===typeof l)return O(e,t,n,i);if(B="svg"===l||"foreignObject"!==l&&B,l=String(l),(!e||!c(e,l))&&(o=d(l,B),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),x(e,!0)}var s=o.firstChild,u=o.__preactattr_,_=t.children;if(null==u){u=o.__preactattr_={};for(var f=o.attributes,b=f.length;b--;)u[f[b].name]=f[b].value}return!q&&_&&1===_.length&&"string"===typeof _[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=_[0]&&(s.nodeValue=_[0]):(_&&_.length||null!=s)&&y(o,_,n,i,q||null!=u.dangerouslySetInnerHTML),k(o,t.attributes,u),B=a,o}function y(e,t,n,i,r){var o,a,l,s,c,_=e.childNodes,d=[],b={},p=0,m=0,h=_.length,g=0,y=t?t.length:0;if(0!==h)for(var w=0;w<h;w++){var k=_[w],M=k.__preactattr_,A=y&&M?k._component?k._component.__key:M.key:null;null!=A?(p++,b[A]=k):(M||(void 0!==k.splitText?!r||k.nodeValue.trim():r))&&(d[g++]=k)}if(0!==y)for(var w=0;w<y;w++){s=t[w],c=null;var A=s.key;if(null!=A)p&&void 0!==b[A]&&(c=b[A],b[A]=void 0,p--);else if(!c&&m<g)for(o=m;o<g;o++)if(void 0!==d[o]&&u(a=d[o],s,r)){c=a,d[o]=void 0,o===g-1&&g--,o===m&&m++;break}c=v(c,s,n,i),l=_[w],c&&c!==e&&c!==l&&(null==l?e.appendChild(c):c===l.nextSibling?f(l):e.insertBefore(c,l))}if(p)for(var w in b)void 0!==b[w]&&x(b[w],!1);for(;m<=g;)void 0!==(c=d[g--])&&x(c,!1)}function x(e,t){var n=e._component;n?C(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||f(e),w(e))}function w(e){for(e=e.lastChild;e;){var t=e.previousSibling;x(e,!0),e=t}}function k(e,t,n){var i;for(i in n)t&&null!=t[i]||null==n[i]||b(e,i,n[i],n[i]=void 0,B);for(i in t)"children"===i||"innerHTML"===i||i in n&&t[i]===("value"===i||"checked"===i?e[i]:n[i])||b(e,i,n[i],n[i]=t[i],B)}function M(e){var t=e.constructor.name;(H[t]||(H[t]=[])).push(e)}function A(e,t,n){var i,r=H[e.name];if(e.prototype&&e.prototype.render?(i=new e(t,n),S.call(i,t,n)):(i=new S(t,n),i.constructor=e,i.render=E),r)for(var o=r.length;o--;)if(r[o].constructor===e){i.nextBase=r[o].nextBase,r.splice(o,1);break}return i}function E(e,t,n){return this.constructor(e,n)}function P(e,t,n,i,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===N.syncComponentUpdates&&e.base?l(e):j(e,1,r)),e.__ref&&e.__ref(e))}function j(e,t,n,i){if(!e._disable){var r,a,l,s=e.props,u=e.state,c=e.context,d=e.prevProps||s,f=e.prevState||u,b=e.prevContext||c,p=e.base,m=e.nextBase,v=p||m,y=e._component,w=!1;if(p&&(e.props=d,e.state=f,e.context=b,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,u,c)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(s,u,c),e.props=s,e.state=u,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){r=e.render(s,u,c),e.getChildContext&&(c=o(o({},c),e.getChildContext()));var k,M,E=r&&r.nodeName;if("function"===typeof E){var O=_(r);a=y,a&&a.constructor===E&&O.key==a.__key?P(a,O,1,c,!1):(k=a,e._component=a=A(E,O,c),a.nextBase=a.nextBase||m,a._parentComponent=e,P(a,O,0,c,!1),j(a,1,n,!0)),M=a.base}else l=v,k=y,k&&(l=e._component=null),(v||1===t)&&(l&&(l._component=null),M=g(l,r,c,n||!p,v&&v.parentNode,!0));if(v&&M!==v&&a!==y){var S=v.parentNode;S&&M!==S&&(S.replaceChild(M,v),k||(v._component=null,x(v,!1)))}if(k&&C(k),e.base=M,M&&!i){for(var z=e,L=e;L=L._parentComponent;)(z=L).base=M;M._component=z,M._componentConstructor=z.constructor}}if(!p||n?R.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,f,b),N.afterUpdate&&N.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);U||i||h()}}function O(e,t,n,i){for(var r=e&&e._component,o=r,a=e,l=r&&e._componentConstructor===t.nodeName,s=l,u=_(t);r&&!s&&(r=r._parentComponent);)s=r.constructor===t.nodeName;return r&&s&&(!i||r._component)?(P(r,u,3,n,i),e=r.base):(o&&!l&&(C(o),e=a=null),r=A(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,a=null),P(r,u,1,n,i),e=r.base,a&&e!==a&&(a._component=null,x(a,!1))),e}function C(e){N.beforeUnmount&&N.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?C(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,f(t),M(e),w(t)),e.__ref&&e.__ref(null)}function S(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function z(e,t,n){return g(n,e,{},!1,t,!1)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"h",function(){return r}),n.d(t,"createElement",function(){return r}),n.d(t,"cloneElement",function(){return a}),n.d(t,"Component",function(){return S}),n.d(t,"render",function(){return z}),n.d(t,"rerender",function(){return s}),n.d(t,"options",function(){return N});var N={},L=[],T=[],I="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,F=[],R=[],U=0,B=!1,q=!1,H={};o(S.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=o({},n)),o(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),l(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),j(this,2)},render:function(){}});var G={h:r,createElement:r,cloneElement:a,Component:S,render:z,rerender:s,options:N};t.default=G},function(e,t,n){"use strict";function i(e,t){var n={},i=[null];for(var r in e){i=e[r].map(function(){return null});break}for(var o in t){var a=t[o],l=a.bigg_id,s={};a.genes.forEach(function(t){["bigg_id","name"].forEach(function(n){var r=e[t[n]]||h.clone(i),o=s[t.bigg_id];if("undefined"===typeof o)s[t.bigg_id]=r;else for(var a=0;a<r.length;a++){var l=r[a];null!==l&&(o[a]=l)}})}),n[l]=s}return n}function r(e,t,n){if(null===e)return null;if(-1===["reaction_data","metabolite_data","gene_data"].indexOf(t))throw new Error("Invalid name argument: "+t);e instanceof Array||(e=[e]);if(function(){null===e||(1===e.length||(2===e.length||console.warn("Bad data style: "+t)))}(),e=h.array_to_object(e),"gene_data"===t){if(void 0===n)throw new Error("Must pass all_reactions argument for gene_data");e=i(e,n)}return e}function o(e,t,n){function i(e){return isFinite(e)?e:null}if(null===e)return null;var r=-1!=t.indexOf("abs");if(1==e.length){var o=m(e[0]);return null===o?null:function(e,t){return t?Math.abs(e):e}(o,r)}if(2!=e.length)throw new Error("Data array must be of length 1 or 2");var a=e.map(m);if(null===a[0]||null===a[1])return null;if("diff"==n)return function(e,t,n){return n?Math.abs(t-e):t-e}(a[0],a[1],r);if("fold"==n)return i(function(e,t,n){if(0==e||0==t)return null;var i=t>=e?t/e:-e/t;return n?Math.abs(i):i}(a[0],a[1],r));if("log2_fold"==n)return i(function(e,t,n){if(0==e)return null;if(t/e<0)return null;var i=Math.log(t/e)/Math.log(2);return n?Math.abs(i):i}(a[0],a[1],r));throw new Error("Bad data compare_style: "+n)}function a(e){return null!==e&&null!==e[0]&&e[0]<0}function l(e,t,n,i,r,a){function l(e,t){return null===e?"nd":t(e)}var s=e,u=null===t,c={};return n.forEach(function(e){var n=e.bigg_id;if(!(n in c))if(c[n]=!0,u)s=d(s,n,n+"\n");else{if(!(n in t))return;var r=t[n],_=o(r,i,a),f=null===_?y:v(".3g");if(1===r.length)s=d(s,n,n+" ("+l(r[0],f)+")\n");else if(2===r.length){var b,p=g.any(r,function(e){return null!==m(e)});b=p?n+" ("+l(r[0],f)+", "+l(r[1],f)+": "+l(_,f)+")\n":n+" ("+l(r[0],f)+", "+l(r[1],f)+")\n",s=d(s,n,b)}}}),s=s.replace(w,"\n").replace(k,"$1"),s.split("\n").map(function(e){for(var t=0,i=n.length;t<i;t++){var o=n[t];if(-1!==e.indexOf(o.bigg_id))return"name"===r&&(e=d(e,o.bigg_id,o.name)),{bigg_id:o.bigg_id,name:o.name,text:e}}return{bigg_id:null,name:null,text:e}})}function s(e,t){function n(e,t){return null===e?"(nd)":t(e)}if(null===e)return n(null);if(1===e.length){var i=null===t?y:v(".3g");return n(e[0],i)}if(2===e.length){var i=null===t?y:v(".3g"),r=n(e[0],i);return r+=", "+n(e[1],i),r+=": "+n(t,i)}return""}function u(e){var t=e[0].length,n=[];if(t<2||t>3)throw new Error("CSV file must have 2 or 3 columns");for(var i=1;i<t;i++)n[i-1]={};return e.slice(1).forEach(function(e){for(var t=1,i=e.length;t<i;t++)n[t-1][e[0]]=e[t]}),n}function c(e){var t=e.replace(M,"$1$2").replace(A,"").split(" ").filter(function(e){return""!=e});return h.unique_strings_array(t)}function _(e,t,n){var i=[null],r=1;for(var o in t){i=t[o].map(function(){return null}),r=i.length;break}if(""==e)return h.clone(i);for(var a=[],l=0;l<r;l++){var s=e,u=!0;for(var o in t){var c=m(t[o][l]);null===c?c=0:u=!1,s=d(s,o,c)}if(u)a.push(null);else{for(;;){var _=s;if(_=_.replace(E," $1 "),_=_.replace(O,function(e,t,n,i){return t+n.split(P).map(parseFloat).reduce(function(e,t){return e+t})+i}),(_=_.replace(C,function(e,t,i,r){var o=i.split(j).map(parseFloat);return t+("min"==n?Math.min.apply(null,o):o.reduce(function(e,t){return e+t})/o.length)+r}))==s)break;s=_}var f=Number(s);isNaN(f)?(console.warn("Could not evaluate "+e),a.push(null)):a.push(f)}}return a}function d(e,t,n){var i="(^|[\\s\\(\\)])"+function(e){return e.replace(x,"\\$1")}(t)+"([\\s\\(\\)]|$)";return e.replace(new RegExp(i,"g"),"$1"+n+"$2")}function f(e,t,n,i,r){g.isUndefined(r)&&(r=Object.keys(e));var l,u,c;return null===t?(r.map(function(t){l=e[t],l.data=null,l.data_string="";for(u in l.segments)c=l.segments[u],c.data=null;l.gene_string=null}),!1):(r.map(function(r){l=e[r];var _=t[l.bigg_id]||t[l.name]||null,d=o(_,n,i),f=a(_),b=s(_,d);l.data=d,l.data_string=b,l.reverse_flux=f,l.gene_string=null;for(u in l.segments)c=l.segments[u],c.data=l.data,c.reverse_flux=l.reverse_flux}),!0)}function b(e,t,n,i,r){g.isUndefined(r)&&(r=Object.keys(e));return null===t?(r.map(function(t){e[t].data=null,e[t].data_string=""}),!1):(r.map(function(r){var a=e[r],l=t[a.bigg_id]||t[a.name]||null,u=o(l,n,i),c=s(l,u);a.data=u,a.data_string=c}),!0)}function p(e,t,n,i,r,u,c){if(g.isUndefined(c)&&(c=Object.keys(e)),null===t)return c.map(function(t){var n=e[t];n.data=null,n.data_string="",n.reverse_flux=!1;for(var i in n.segments){n.segments[i].data=null}n.gene_string=null}),!1;var d=[null];for(var f in t){for(var b in t[f]){d=t[f][b].map(function(){return null});break}break}return c.map(function(c){var f,b,p=e[c],m=p.gene_reaction_rule,v=t[p.bigg_id];g.isUndefined(v)?(b={},f=h.clone(d)):(b=v,f=_(m,b,u));var y=o(f,n,r),x=a(f),w=s(f,y);p.data=y,p.data_string=w,p.reverse_flux=x;for(var k in p.segments){var M=p.segments[k];M.data=p.data,M.reverse_flux=p.reverse_flux}p.gene_string=l(m,b,p.genes,n,i,r)}),!0}function m(e){var t=Number(e);return isNaN(t)||parseFloat(e)!=t?null:t}var h=n(1),g=n(2),v=n(17).format;e.exports={import_and_check:r,text_for_data:s,float_for_data:o,reverse_flux_for_data:a,gene_string_for_data:l,csv_converter:u,genes_for_gene_reaction_rule:c,evaluate_gene_reaction_rule:_,replace_gene_in_rule:d,apply_reaction_data_to_reactions:f,apply_metabolite_data_to_nodes:b,apply_gene_data_to_reactions:p};var y=function(e){return e},x=/([.*+?^=!:${}()|\[\]\/\\])/g,w=/\n\s*\n/g,k=/\n\s*(\)*)\s*$/,M=/([\(\) ])(?:and|or)([\)\( ])/gi,A=/[\(\)]/g,E=/\(\s*(\S+)\s*\)/g,P=/\s+or\s+/i,j=/\s+and\s+/i,O=/(^|\()(\s*-?[0-9.]+\s+(?:or\s+-?[0-9.]+\s*)+)(\)|$)/gi,C=/(^|\(|or\s)(\s*-?[0-9.]+\s+(?:and\s+-?[0-9.]+\s*)+)(\sor|\)|$)/gi},function(e,t,n){"use strict";t.a=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(196);n.d(t,"drag",function(){return i.a});var r=n(88);n.d(t,"dragDisable",function(){return r.a}),n.d(t,"dragEnable",function(){return r.b})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(211);n.d(t,"formatDefaultLocale",function(){return i.a}),n.d(t,"format",function(){return i.b}),n.d(t,"formatPrefix",function(){return i.c});var r=n(94);n.d(t,"formatLocale",function(){return r.a});var o=n(92);n.d(t,"formatSpecifier",function(){return o.a});var a=n(217);n.d(t,"precisionFixed",function(){return a.a});var l=n(218);n.d(t,"precisionPrefix",function(){return l.a});var s=n(219);n.d(t,"precisionRound",function(){return s.a})},function(e,t,n){!function(e,i){i(t,n(86),n(21),n(90))}(0,function(e,t,n,i){"use strict";function r(e){return function(t,n){e(null==t?n:null)}}function o(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function a(e,t){return function(n){return e(n.responseText,t)}}var l=function(e,i){function a(e){var t,n=f.status;if(!n&&o(f)||n>=200&&n<300||304===n){if(u)try{t=u.call(l,f)}catch(e){return void _.call("error",l,e)}else t=f;_.call("load",l,t)}else _.call("error",l,e)}var l,s,u,c,_=n.dispatch("beforesend","progress","load","error"),d=t.map(),f=new XMLHttpRequest,b=null,p=null,m=0;if("undefined"===typeof XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(e)||(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=f.ontimeout=a:f.onreadystatechange=function(e){f.readyState>3&&a(e)},f.onprogress=function(e){_.call("progress",l,e)},l={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?d.get(e):(null==t?d.remove(e):d.set(e,t+""),l)},mimeType:function(e){return arguments.length?(s=null==e?null:e+"",l):s},responseType:function(e){return arguments.length?(c=e,l):c},timeout:function(e){return arguments.length?(m=+e,l):m},user:function(e){return arguments.length<1?b:(b=null==e?null:e+"",l)},password:function(e){return arguments.length<1?p:(p=null==e?null:e+"",l)},response:function(e){return u=e,l},get:function(e,t){return l.send("GET",e,t)},post:function(e,t){return l.send("POST",e,t)},send:function(t,n,i){return f.open(t,e,!0,b,p),null==s||d.has("accept")||d.set("accept",s+",*/*"),f.setRequestHeader&&d.each(function(e,t){f.setRequestHeader(t,e)}),null!=s&&f.overrideMimeType&&f.overrideMimeType(s),null!=c&&(f.responseType=c),m>0&&(f.timeout=m),null==i&&"function"===typeof n&&(i=n,n=null),null!=i&&1===i.length&&(i=r(i)),null!=i&&l.on("error",i).on("load",function(e){i(null,e)}),_.call("beforesend",l,f),f.send(null==n?null:n),l},abort:function(){return f.abort(),l},on:function(){var e=_.on.apply(_,arguments);return e===_?l:e}},null!=i){if("function"!==typeof i)throw new Error("invalid callback: "+i);return l.get(i)}return l},s=function(e,t){return function(n,i){var r=l(n).mimeType(e).response(t);if(null!=i){if("function"!==typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}},u=s("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),c=s("application/json",function(e){return JSON.parse(e.responseText)}),_=s("text/plain",function(e){return e.responseText}),d=s("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}),f=function(e,t){return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=l(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(a(t,i=e)):i},o.row(i),r?o.get(r):o}},b=f("text/csv",i.csvParse),p=f("text/tab-separated-values",i.tsvParse);e.request=l,e.html=u,e.json=c,e.text=_,e.xml=d,e.csv=b,e.tsv=p,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";function i(){}function r(e,t){var n,r,o,a,l=T;for(a=arguments.length;a-- >2;)L.push(arguments[a]);for(t&&null!=t.children&&(L.length||L.push(t.children),delete t.children);L.length;)if((r=L.pop())&&void 0!==r.pop)for(a=r.length;a--;)L.push(r[a]);else"boolean"===typeof r&&(r=null),(o="function"!==typeof e)&&(null==r?r="":"number"===typeof r?r=String(r):"string"!==typeof r&&(o=!1)),o&&n?l[l.length-1]+=r:l===T?l=[r]:l.push(r),n=o;var s=new i;return s.nodeName=e,s.children=l,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==N.vnode&&N.vnode(s),s}function o(e,t){for(var n in t)e[n]=t[n];return e}function a(e,t){return r(e.nodeName,o(o({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function l(e){!e._dirty&&(e._dirty=!0)&&1==F.push(e)&&(N.debounceRendering||I)(s)}function s(){var e,t=F;for(F=[];e=t.pop();)e._dirty&&j(e)}function u(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&c(e,t.nodeName):n||e._componentConstructor===t.nodeName}function c(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function _(e){var t=o({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);return t}function d(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n,i,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),i&&i(e);else if("class"!==t||r)if("style"===t){if(i&&"string"!==typeof i&&"string"!==typeof n||(e.style.cssText=i||""),i&&"object"===typeof i){if("string"!==typeof n)for(var o in n)o in i||(e.style[o]="");for(var o in i)e.style[o]="number"===typeof i[o]&&!1===D.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===t)i&&(e.innerHTML=i.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),i?n||e.addEventListener(t,m,a):e.removeEventListener(t,m,a),(e._listeners||(e._listeners={}))[t]=i}else if("list"!==t&&"type"!==t&&!r&&t in e)p(e,t,null==i?"":i),null!=i&&!1!==i||e.removeAttribute(t);else{var l=r&&t!==(t=t.replace(/^xlink\:?/,""));null==i||!1===i?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof i&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):e.setAttribute(t,i))}else e.className=i||""}function p(e,t,n){try{e[t]=n}catch(e){}}function m(e){return this._listeners[e.type](N.event&&N.event(e)||e)}function h(){for(var e;e=R.pop();)N.afterMount&&N.afterMount(e),e.componentDidMount&&e.componentDidMount()}function g(e,t,n,i,r,o){U++||(B=null!=r&&void 0!==r.ownerSVGElement,q=null!=e&&!("__preactattr_"in e));var a=v(e,t,n,i,o);return r&&a.parentNode!==r&&r.appendChild(a),--U||(q=!1,o||h()),a}function v(e,t,n,i,r){var o=e,a=B;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),x(e,!0))),o.__preactattr_=!0,o;var l=t.nodeName;if("function"===typeof l)return O(e,t,n,i);if(B="svg"===l||"foreignObject"!==l&&B,l=String(l),(!e||!c(e,l))&&(o=d(l,B),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),x(e,!0)}var s=o.firstChild,u=o.__preactattr_,_=t.children;if(null==u){u=o.__preactattr_={};for(var f=o.attributes,b=f.length;b--;)u[f[b].name]=f[b].value}return!q&&_&&1===_.length&&"string"===typeof _[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=_[0]&&(s.nodeValue=_[0]):(_&&_.length||null!=s)&&y(o,_,n,i,q||null!=u.dangerouslySetInnerHTML),k(o,t.attributes,u),B=a,o}function y(e,t,n,i,r){var o,a,l,s,c,_=e.childNodes,d=[],b={},p=0,m=0,h=_.length,g=0,y=t?t.length:0;if(0!==h)for(var w=0;w<h;w++){var k=_[w],M=k.__preactattr_,A=y&&M?k._component?k._component.__key:M.key:null;null!=A?(p++,b[A]=k):(M||(void 0!==k.splitText?!r||k.nodeValue.trim():r))&&(d[g++]=k)}if(0!==y)for(var w=0;w<y;w++){s=t[w],c=null;var A=s.key;if(null!=A)p&&void 0!==b[A]&&(c=b[A],b[A]=void 0,p--);else if(!c&&m<g)for(o=m;o<g;o++)if(void 0!==d[o]&&u(a=d[o],s,r)){c=a,d[o]=void 0,o===g-1&&g--,o===m&&m++;break}c=v(c,s,n,i),l=_[w],c&&c!==e&&c!==l&&(null==l?e.appendChild(c):c===l.nextSibling?f(l):e.insertBefore(c,l))}if(p)for(var w in b)void 0!==b[w]&&x(b[w],!1);for(;m<=g;)void 0!==(c=d[g--])&&x(c,!1)}function x(e,t){var n=e._component;n?C(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||f(e),w(e))}function w(e){for(e=e.lastChild;e;){var t=e.previousSibling;x(e,!0),e=t}}function k(e,t,n){var i;for(i in n)t&&null!=t[i]||null==n[i]||b(e,i,n[i],n[i]=void 0,B);for(i in t)"children"===i||"innerHTML"===i||i in n&&t[i]===("value"===i||"checked"===i?e[i]:n[i])||b(e,i,n[i],n[i]=t[i],B)}function M(e){var t=e.constructor.name;(H[t]||(H[t]=[])).push(e)}function A(e,t,n){var i,r=H[e.name];if(e.prototype&&e.prototype.render?(i=new e(t,n),S.call(i,t,n)):(i=new S(t,n),i.constructor=e,i.render=E),r)for(var o=r.length;o--;)if(r[o].constructor===e){i.nextBase=r[o].nextBase,r.splice(o,1);break}return i}function E(e,t,n){return this.constructor(e,n)}function P(e,t,n,i,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===N.syncComponentUpdates&&e.base?l(e):j(e,1,r)),e.__ref&&e.__ref(e))}function j(e,t,n,i){if(!e._disable){var r,a,l,s=e.props,u=e.state,c=e.context,d=e.prevProps||s,f=e.prevState||u,b=e.prevContext||c,p=e.base,m=e.nextBase,v=p||m,y=e._component,w=!1;if(p&&(e.props=d,e.state=f,e.context=b,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,u,c)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(s,u,c),e.props=s,e.state=u,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){r=e.render(s,u,c),e.getChildContext&&(c=o(o({},c),e.getChildContext()));var k,M,E=r&&r.nodeName;if("function"===typeof E){var O=_(r);a=y,a&&a.constructor===E&&O.key==a.__key?P(a,O,1,c,!1):(k=a,e._component=a=A(E,O,c),a.nextBase=a.nextBase||m,a._parentComponent=e,P(a,O,0,c,!1),j(a,1,n,!0)),M=a.base}else l=v,k=y,k&&(l=e._component=null),(v||1===t)&&(l&&(l._component=null),M=g(l,r,c,n||!p,v&&v.parentNode,!0));if(v&&M!==v&&a!==y){var S=v.parentNode;S&&M!==S&&(S.replaceChild(M,v),k||(v._component=null,x(v,!1)))}if(k&&C(k),e.base=M,M&&!i){for(var z=e,L=e;L=L._parentComponent;)(z=L).base=M;M._component=z,M._componentConstructor=z.constructor}}if(!p||n?R.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,f,b),N.afterUpdate&&N.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);U||i||h()}}function O(e,t,n,i){for(var r=e&&e._component,o=r,a=e,l=r&&e._componentConstructor===t.nodeName,s=l,u=_(t);r&&!s&&(r=r._parentComponent);)s=r.constructor===t.nodeName;return r&&s&&(!i||r._component)?(P(r,u,3,n,i),e=r.base):(o&&!l&&(C(o),e=a=null),r=A(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,a=null),P(r,u,1,n,i),e=r.base,a&&e!==a&&(a._component=null,x(a,!1))),e}function C(e){N.beforeUnmount&&N.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?C(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,f(t),M(e),w(t)),e.__ref&&e.__ref(null)}function S(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function z(e,t,n){return g(n,e,{},!1,t,!1)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"h",function(){return r}),n.d(t,"createElement",function(){return r}),n.d(t,"cloneElement",function(){return a}),n.d(t,"Component",function(){return S}),n.d(t,"render",function(){return z}),n.d(t,"rerender",function(){return s}),n.d(t,"options",function(){return N});var N={},L=[],T=[],I="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,F=[],R=[],U=0,B=!1,q=!1,H={};o(S.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=o({},n)),o(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),l(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),j(this,2)},render:function(){}});var G={h:r,createElement:r,cloneElement:a,Component:S,render:z,rerender:s,options:N};t.default=G},function(e,t,n){"use strict";t.a=function(e){return null===e?NaN:+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(194);n.d(t,"dispatch",function(){return i.a})},function(e,t,n){"use strict";function i(e,t){return function(n){return e+n*t}}function r(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function o(e,t){var r=t-e;return r?i(e,r>180||r<-180?r-360*Math.round(r/360):r):n.i(s.a)(isNaN(e)?t:e)}function a(e){return 1===(e=+e)?l:function(t,i){return i-t?r(t,i,e):n.i(s.a)(isNaN(t)?i:t)}}function l(e,t){var r=t-e;return r?i(e,r):n.i(s.a)(isNaN(e)?t:e)}t.b=o,t.c=a,t.a=l;var s=n(97)},function(e,t,n){"use strict";t.a=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}},function(e,t,n){"use strict";function i(e){var t=e.domain;return e.ticks=function(e){var i=t();return n.i(o.a)(i[0],i[i.length-1],null==e?10:e)},e.tickFormat=function(e,i){return n.i(s.a)(t(),e,i)},e.nice=function(i){null==i&&(i=10);var r,a=t(),l=0,s=a.length-1,u=a[l],c=a[s];return c<u&&(r=u,u=c,c=r,r=l,l=s,s=r),r=n.i(o.b)(u,c,i),r>0?(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,r=n.i(o.b)(u,c,i)):r<0&&(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,r=n.i(o.b)(u,c,i)),r>0?(a[l]=Math.floor(u/r)*r,a[s]=Math.ceil(c/r)*r,t(a)):r<0&&(a[l]=Math.ceil(u*r)/r,a[s]=Math.floor(c*r)/r,t(a)),e},e}function r(){var e=n.i(l.a)(l.b,a.c);return e.copy=function(){return n.i(l.c)(e,r())},i(e)}t.b=i,t.a=r;var o=n(7),a=n(6),l=n(29),s=n(244)},function(e,t,n){"use strict";function i(){}function r(e,t){var n,r,o,a,l=L;for(a=arguments.length;a-- >2;)N.push(arguments[a]);for(t&&null!=t.children&&(N.length||N.push(t.children),delete t.children);N.length;)if((r=N.pop())&&void 0!==r.pop)for(a=r.length;a--;)N.push(r[a]);else"boolean"===typeof r&&(r=null),(o="function"!==typeof e)&&(null==r?r="":"number"===typeof r?r=String(r):"string"!==typeof r&&(o=!1)),o&&n?l[l.length-1]+=r:l===L?l=[r]:l.push(r),n=o;var s=new i;return s.nodeName=e,s.children=l,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==z.vnode&&z.vnode(s),s}function o(e,t){for(var n in t)e[n]=t[n];return e}function a(e){!e._dirty&&(e._dirty=!0)&&1==D.push(e)&&(z.debounceRendering||T)(l)}function l(){var e,t=D;for(D=[];e=t.pop();)e._dirty&&P(e)}function s(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&u(e,t.nodeName):n||e._componentConstructor===t.nodeName}function u(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function c(e){var t=o({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===t[i]&&(t[i]=n[i]);return t}function _(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,n,i,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),i&&i(e);else if("class"!==t||r)if("style"===t){if(i&&"string"!==typeof i&&"string"!==typeof n||(e.style.cssText=i||""),i&&"object"===typeof i){if("string"!==typeof n)for(var o in n)o in i||(e.style[o]="");for(var o in i)e.style[o]="number"===typeof i[o]&&!1===I.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===t)i&&(e.innerHTML=i.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),i?n||e.addEventListener(t,p,a):e.removeEventListener(t,p,a),(e._listeners||(e._listeners={}))[t]=i}else if("list"!==t&&"type"!==t&&!r&&t in e)b(e,t,null==i?"":i),null!=i&&!1!==i||e.removeAttribute(t);else{var l=r&&t!==(t=t.replace(/^xlink\:?/,""));null==i||!1===i?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof i&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):e.setAttribute(t,i))}else e.className=i||""}function b(e,t,n){try{e[t]=n}catch(e){}}function p(e){return this._listeners[e.type](z.event&&z.event(e)||e)}function m(){for(var e;e=F.pop();)z.afterMount&&z.afterMount(e),e.componentDidMount&&e.componentDidMount()}function h(e,t,n,i,r,o){R++||(U=null!=r&&void 0!==r.ownerSVGElement,B=null!=e&&!("__preactattr_"in e));var a=g(e,t,n,i,o);return r&&a.parentNode!==r&&r.appendChild(a),--R||(B=!1,o||m()),a}function g(e,t,n,i,r){var o=e,a=U;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),y(e,!0))),o.__preactattr_=!0,o;var l=t.nodeName;if("function"===typeof l)return j(e,t,n,i);if(U="svg"===l||"foreignObject"!==l&&U,l=String(l),(!e||!u(e,l))&&(o=_(l,U),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),y(e,!0)}var s=o.firstChild,c=o.__preactattr_,d=t.children;if(null==c){c=o.__preactattr_={};for(var f=o.attributes,b=f.length;b--;)c[f[b].name]=f[b].value}return!B&&d&&1===d.length&&"string"===typeof d[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=d[0]&&(s.nodeValue=d[0]):(d&&d.length||null!=s)&&v(o,d,n,i,B||null!=c.dangerouslySetInnerHTML),w(o,t.attributes,c),U=a,o}function v(e,t,n,i,r){var o,a,l,u,c,_=e.childNodes,f=[],b={},p=0,m=0,h=_.length,v=0,x=t?t.length:0;if(0!==h)for(var w=0;w<h;w++){var k=_[w],M=k.__preactattr_,A=x&&M?k._component?k._component.__key:M.key:null;null!=A?(p++,b[A]=k):(M||(void 0!==k.splitText?!r||k.nodeValue.trim():r))&&(f[v++]=k)}if(0!==x)for(var w=0;w<x;w++){u=t[w],c=null;var A=u.key;if(null!=A)p&&void 0!==b[A]&&(c=b[A],b[A]=void 0,p--);else if(!c&&m<v)for(o=m;o<v;o++)if(void 0!==f[o]&&s(a=f[o],u,r)){c=a,f[o]=void 0,o===v-1&&v--,o===m&&m++;break}c=g(c,u,n,i),l=_[w],c&&c!==e&&c!==l&&(null==l?e.appendChild(c):c===l.nextSibling?d(l):e.insertBefore(c,l))}if(p)for(var w in b)void 0!==b[w]&&y(b[w],!1);for(;m<=v;)void 0!==(c=f[v--])&&y(c,!1)}function y(e,t){var n=e._component;n?O(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||d(e),x(e))}function x(e){for(e=e.lastChild;e;){var t=e.previousSibling;y(e,!0),e=t}}function w(e,t,n){var i;for(i in n)t&&null!=t[i]||null==n[i]||f(e,i,n[i],n[i]=void 0,U);for(i in t)"children"===i||"innerHTML"===i||i in n&&t[i]===("value"===i||"checked"===i?e[i]:n[i])||f(e,i,n[i],n[i]=t[i],U)}function k(e){var t=e.constructor.name;(q[t]||(q[t]=[])).push(e)}function M(e,t,n){var i,r=q[e.name];if(e.prototype&&e.prototype.render?(i=new e(t,n),C.call(i,t,n)):(i=new C(t,n),i.constructor=e,i.render=A),r)for(var o=r.length;o--;)if(r[o].constructor===e){i.nextBase=r[o].nextBase,r.splice(o,1);break}return i}function A(e,t,n){return this.constructor(e,n)}function E(e,t,n,i,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===z.syncComponentUpdates&&e.base?a(e):P(e,1,r)),e.__ref&&e.__ref(e))}function P(e,t,n,i){if(!e._disable){var r,a,l,s=e.props,u=e.state,_=e.context,d=e.prevProps||s,f=e.prevState||u,b=e.prevContext||_,p=e.base,g=e.nextBase,v=p||g,x=e._component,w=!1;if(p&&(e.props=d,e.state=f,e.context=b,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,u,_)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(s,u,_),e.props=s,e.state=u,e.context=_),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){r=e.render(s,u,_),e.getChildContext&&(_=o(o({},_),e.getChildContext()));var k,A,j=r&&r.nodeName;if("function"===typeof j){var C=c(r);a=x,a&&a.constructor===j&&C.key==a.__key?E(a,C,1,_,!1):(k=a,e._component=a=M(j,C,_),a.nextBase=a.nextBase||g,a._parentComponent=e,E(a,C,0,_,!1),P(a,1,n,!0)),A=a.base}else l=v,k=x,k&&(l=e._component=null),(v||1===t)&&(l&&(l._component=null),A=h(l,r,_,n||!p,v&&v.parentNode,!0));if(v&&A!==v&&a!==x){var S=v.parentNode;S&&A!==S&&(S.replaceChild(A,v),k||(v._component=null,y(v,!1)))}if(k&&O(k),e.base=A,A&&!i){for(var N=e,L=e;L=L._parentComponent;)(N=L).base=A;A._component=N,A._componentConstructor=N.constructor}}if(!p||n?F.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(d,f,b),z.afterUpdate&&z.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);R||i||m()}}function j(e,t,n,i){for(var r=e&&e._component,o=r,a=e,l=r&&e._componentConstructor===t.nodeName,s=l,u=c(t);r&&!s&&(r=r._parentComponent);)s=r.constructor===t.nodeName;return r&&s&&(!i||r._component)?(E(r,u,3,n,i),e=r.base):(o&&!l&&(O(o),e=a=null),r=M(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,a=null),E(r,u,1,n,i),e=r.base,a&&e!==a&&(a._component=null,y(a,!1))),e}function O(e){z.beforeUnmount&&z.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?O(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,d(t),k(e),x(t)),e.__ref&&e.__ref(null)}function C(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function S(e,t,n){return h(n,e,{},!1,t,!1)}n.d(t,"b",function(){return r}),n.d(t,"c",function(){return C}),n.d(t,"a",function(){return S});var z={},N=[],L=[],T="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,I=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,D=[],F=[],R=0,U=!1,B=!1,q={};o(C.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=o({},n)),o(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),a(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),P(this,2)},render:function(){}})},function(e,t,n){(function(e,i){var r,o;(function(){function a(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.obs=e,this.sync=t,this.lazy=n,this.queue=[]}function l(){a.apply(this,arguments)}function s(e){a.call(this,e,!0)}function u(e,t,n){this.context=e,this.method=t,this.args=n}function c(e){this.value=e}function _(){this.id=++se}function d(e,t){if(!(this instanceof d))return new d(e,t);_.call(this),!t&&H.isFunction(e)||(null!=e?e._isNext:void 0)?(this.valueF=e,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=e)}function f(e,t){if(!(this instanceof f))return new f(e,t);d.call(this,e,t)}function b(){if(!(this instanceof b))return new b;_.call(this)}function p(e){if(!(this instanceof p))return new p(e);this.error=e,_.call(this)}function m(e){this.desc=e,this.id=++fe,this.initialDesc=this.desc}function h(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.unsubscribe=H.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var t,n=0;n<e.length;n++)t=e[n],this.add(t)}function g(e,t){this._subscribe=e,this._handleEvent=t,this.subscribe=H.bind(this.subscribe,this),this.handleEvent=H.bind(this.handleEvent,this),this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this.subscriptions=[],this.queue=[]}function v(e,t,n){if(!(this instanceof v))return new v(e,t,n);H.isFunction(e)&&(n=t,t=e,e=u.empty),m.call(this,e),T(t),this.dispatcher=new g(t,n),be(this)}function y(e,t,n){g.call(this,t,n),this.property=e,this.subscribe=H.bind(this.subscribe,this),this.current=ae,this.currentValueRootId=void 0,this.propertyEnded=!1}function x(e,t,n){m.call(this,e),T(t),this.dispatcher=new y(this,t,n),be(this)}function w(){if(!(this instanceof w))return new w;this.unsubAll=H.bind(this.unsubAll,this),this.subscribeAll=H.bind(this.subscribeAll,this),this.guardedSink=H.bind(this.guardedSink,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,v.call(this,new E.Desc(E,"Bus",[]),this.subscribeAll)}function k(e){return[e,_e()]}function M(e){this.observable=e}var A=Array.prototype.slice,E={toString:function(){return"Bacon"}};E.version="0.7.95";var P=("undefined"!==typeof e&&null!==e?e:this).Error,j=function(){},O=function(e,t){return e},C=function(e){return e.slice(0)},S=function(e,t){if(!t)throw new P(e)},z=function(e){if((null!=e?e._isObservable:void 0)&&!(null!=e?e._isProperty:void 0))throw new P("Observable is not a Property : "+e)},N=function(e){if(!(null!=e?e._isEventStream:void 0))throw new P("not an EventStream : "+e)},L=function(e){if(!(null!=e?e._isObservable:void 0))throw new P("not an Observable : "+e)},T=function(e){return S("not a function : "+e,H.isFunction(e))},I=Array.isArray||function(e){return e instanceof Array},D=function(e){return e&&e._isObservable},F=function(e){if(!I(e))throw new P("not an array : "+e)},R=function(e){return S("no arguments supported",0===e.length)},U=function(e){for(var t=arguments.length,n=1;1<t?n<t:n>t;1<t?n++:n--)for(var i in arguments[n])e[i]=arguments[n][i];return e},B=function(e,t){var n={}.hasOwnProperty,i=function(){};i.prototype=t.prototype,e.prototype=new i;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e},q=function(e){return"undefined"!==typeof Symbol&&Symbol[e]?Symbol[e]:"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?Symbol[e]=Symbol.for(e):"@@"+e},H={indexOf:function(){return Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n,i=0;i<e.length;i++)if(n=e[i],t===n)return i;return-1}}(),indexWhere:function(e,t){for(var n,i=0;i<e.length;i++)if(n=e[i],t(n))return i;return-1},head:function(e){return e[0]},always:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:function(e){return e.slice(1,e.length)},filter:function(e,t){for(var n,i=[],r=0;r<t.length;r++)n=t[r],e(n)&&i.push(n);return i},map:function(e,t){return function(){for(var n,i=[],r=0;r<t.length;r++)n=t[r],i.push(e(n));return i}()},each:function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t(n,i)}},toArray:function(e){return I(e)?e:[e]},contains:function(e,t){return-1!==H.indexOf(e,t)},id:function(e){return e},last:function(e){return e[e.length-1]},all:function(e){for(var t,n=arguments.length<=1||void 0===arguments[1]?H.id:arguments[1],i=0;i<e.length;i++)if(t=e[i],!n(t))return!1;return!0},any:function(e){for(var t,n=arguments.length<=1||void 0===arguments[1]?H.id:arguments[1],i=0;i<e.length;i++)if(t=e[i],n(t))return!0;return!1},without:function(e,t){return H.filter(function(t){return t!==e},t)},remove:function(e,t){var n=H.indexOf(t,e);if(n>=0)return t.splice(n,1)},fold:function(e,t,n){for(var i,r=0;r<e.length;r++)i=e[r],t=n(t,i);return t},flatMap:function(e,t){return H.fold(t,[],function(t,n){return t.concat(e(n))})},cached:function(e){var t=ae;return function(){return("undefined"!==typeof t&&null!==t?t._isNone:void 0)&&(t=e(),e=void 0),t}},bind:function(e,t){return function(){return e.apply(t,arguments)}},isFunction:function(e){return"function"===typeof e},toString:function(e){var t,n,i={}.hasOwnProperty;try{return G++,null==e?"undefined":H.isFunction(e)?"function":I(e)?G>5?"[..]":"["+H.map(H.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"===typeof e?G>5?"{..}":"{"+function(){var r=[];for(t in e)i.call(e,t)&&(n=function(){try{return e[t]}catch(e){return e}}(),r.push(H.toString(t)+":"+H.toString(n)));return r}()+"}":e}finally{G--}}},G=0;E._=H;var V=E.UpdateBarrier=function(){function e(e){e<=l||(a[e-1]||(a[e-1]=[[],0]),l=e)}function t(e,t){for(var n=0;n<t.length;n++)if(t[n][0].id==e.id)return!0;return!1}function n(){var t=l;if(t)for(;l>=t;){var n=a[l-1];if(!n)throw new p("Unexpected stack top: "+n);var i=n[0],r=n[1];if(!(r<i.length)){n[0]=[],n[1]=0;break}var o=i[r],s=(o[0],o[1]);n[1]++,e(l+1);var u=!1;try{for(s(),u=!0;l>t&&0==a[l-1][0].length;)l--}finally{u||(a=[],l=0)}}}var i,r=[],o={},a=[],l=0,s={},u=function(r,o){if(!i&&!a.length)return o();e(1);for(var s=0;s<l-1&&!t(r,a[s][0]);)s++;a[s][0].push([r,o]),i||n()},c=function(e,t){if(i){var n=o[e.id];return"undefined"===typeof n||null===n?(n=o[e.id]=[t],r.push(e)):n.push(t)}return t()},_=function(){for(;r.length>0;)d(0,!0);s={}},d=function(e,t){var n=r[e],i=n.id,a=o[i];r.splice(e,1),delete o[i],t&&r.length>0&&f(n);for(var l=0;l<a.length;l++)(0,a[l])()},f=function(e){if(!s[e.id]){for(var t,n=e.internalDeps(),i=0;i<n.length;i++)if(t=n[i],f(t),o[t.id]){var a=H.indexOf(r,t);d(a,!1)}s[e.id]=!0}},b=function(e,t,r,o){if(i)return r.apply(t,o);i=e;try{var a=r.apply(t,o);_()}finally{i=void 0,n()}return a},m=function(){return i?i.id:void 0},h=function(e,t){var n=!1,i=!1,r=function(){return i=!0},o=function(){return n=!0,r()};return r=e.dispatcher.subscribe(function(i){return u(e,function(){if(!n){if(t(i)===E.noMore)return o()}})}),i&&r(),o};return{whenDoneWith:c,hasWaiters:function(){return r.length>0},inTransaction:b,currentEventId:m,wrappedSubscribe:h,afterTransaction:u}}();U(a.prototype,{_isSource:!0,subscribe:function(e){return this.obs.dispatcher.subscribe(e)},toString:function(){return this.obs.toString()},markEnded:function(){return this.ended=!0,!0},consume:function(){return this.lazy?{value:H.always(this.queue[0])}:this.queue[0]},push:function(e){return this.queue=[e],[e]},mayHave:function(){return!0},hasAtLeast:function(){return this.queue.length},flatten:!0}),B(l,a),U(l.prototype,{consume:function(){return this.queue.shift()},push:function(e){return this.queue.push(e)},mayHave:function(e){return!this.ended||this.queue.length>=e},hasAtLeast:function(e){return this.queue.length>=e},flatten:!1}),B(s,a),U(s.prototype,{consume:function(){var e=this.queue;return this.queue=[],{value:function(){return e}}},push:function(e){return this.queue.push(e.value())},hasAtLeast:function(){return!0}}),a.isTrigger=function(e){return(null!=e?e._isSource:void 0)?e.sync:null!=e?e._isEventStream:void 0},a.fromObservable=function(e){return(null!=e?e._isSource:void 0)?e:(null!=e?e._isProperty:void 0)?new a(e,!1):new l(e,!0)},U(u.prototype,{_isDesc:!0,deps:function(){return this.cached||(this.cached=W([this.context].concat(this.args))),this.cached},toString:function(){return H.toString(this.context)+"."+H.toString(this.method)+"("+H.map(H.toString,this.args)+")"}});var X=function(e,t){var n=e||t;if(n&&n._isDesc)return e||t;for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return new u(e,t,r)},K=function(e,t){return t.desc=e,t},W=function(e){return I(e)?H.flatMap(W,e):D(e)?[e]:("undefined"!==typeof e&&null!==e?e._isSource:void 0)?[e.obs]:[]};E.Desc=u,E.Desc.empty=new E.Desc("","",[]);var Y=function(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if("object"===typeof t&&i.length){var o=t,a=i[0];t=function(){return o[a].apply(o,arguments)},i=i.slice(1)}return e.apply(void 0,[t].concat(i))}},J=function(e){return e=Array.prototype.slice.call(e),te.apply(void 0,e)},$=function(e,t){return function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(void 0,t.concat(i))}},Z=function(e){return function(t){return function(n){if("undefined"!==typeof n&&null!==n){var i=n[t];return H.isFunction(i)?i.apply(n,e):i}}}},Q=function(e,t){var n=e.slice(1).split("."),i=H.map(Z(t),n);return function(e){for(var t,n=0;n<i.length;n++)t=i[n],e=t(e);return e}},ee=function(e){return"string"===typeof e&&e.length>1&&"."===e.charAt(0)},te=Y(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return H.isFunction(e)?n.length?$(e,n):e:ee(e)?Q(e,n):H.always(e)}),ne=function(e,t){return te.apply(void 0,[e].concat(t))},ie=function(e,t,n,i){if("undefined"!==typeof t&&null!==t?t._isProperty:void 0){var r=t.sampledBy(e,function(e,t){return[e,t]});return i.call(r,function(e){var t=e[0];e[1];return t}).map(function(e){e[0];return e[1]})}return t=ne(t,n),i.call(e,t)},re=function(e){if(H.isFunction(e))return e;if(ee(e)){var t=oe(e);return function(e,n){return e[t](n)}}throw new P("not a function or a field key: "+e)},oe=function(e){return e.slice(1)};U(c.prototype,{_isSome:!0,getOrElse:function(){return this.value},get:function(){return this.value},filter:function(e){return e(this.value)?new c(this.value):ae},map:function(e){return new c(e(this.value))},forEach:function(e){return e(this.value)},isDefined:!0,toArray:function(){return[this.value]},inspect:function(){return"Some("+this.value+")"},toString:function(){return this.inspect()}});var ae={_isNone:!0,getOrElse:function(e){return e},filter:function(){return ae},map:function(){return ae},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},le=function(e){return("undefined"!==typeof e&&null!==e?e._isSome:void 0)||("undefined"!==typeof e&&null!==e?e._isNone:void 0)?e:new c(e)};E.noMore="<no-more>",E.more="<more>";var se=0;_.prototype._isEvent=!0,_.prototype.isEvent=function(){return!0},_.prototype.isEnd=function(){return!1},_.prototype.isInitial=function(){return!1},_.prototype.isNext=function(){return!1},_.prototype.isError=function(){return!1},_.prototype.hasValue=function(){return!1},_.prototype.filter=function(){return!0},_.prototype.inspect=function(){return this.toString()},_.prototype.log=function(){return this.toString()},B(d,_),d.prototype.isNext=function(){return!0},d.prototype.hasValue=function(){return!0},d.prototype.value=function(){var e;return(null!=(e=this.valueF)?e._isNext:void 0)?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},d.prototype.fmap=function(e){var t,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return e(n)})):(t=this,this.apply(function(){return e(t.value())}))},d.prototype.apply=function(e){return new d(e)},d.prototype.filter=function(e){return e(this.value())},d.prototype.toString=function(){return H.toString(this.value())},d.prototype.log=function(){return this.value()},d.prototype._isNext=!0,B(f,d),f.prototype._isInitial=!0,f.prototype.isInitial=function(){return!0},f.prototype.isNext=function(){return!1},f.prototype.apply=function(e){return new f(e)},f.prototype.toNext=function(){return new d(this)},B(b,_),b.prototype.isEnd=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<end>"},B(p,_),p.prototype.isError=function(){return!0},p.prototype.fmap=function(){return this},p.prototype.apply=function(){return this},p.prototype.toString=function(){return"<error> "+H.toString(this.error)},E.Event=_,E.Initial=f,E.Next=d,E.End=b,E.Error=p;var ue=function(e){return new f(e,!0)},ce=function(e){return new d(e,!0)},_e=function(){return new b},de=function(e){return e&&e._isEvent?e:ce(e)},fe=0,be=function(){};U(m.prototype,{_isObservable:!0,subscribe:function(e){return V.wrappedSubscribe(this,e)},subscribeInternal:function(e){return this.dispatcher.subscribe(e)},onValue:function(){var e=J(arguments);return this.subscribe(function(t){if(t.hasValue())return e(t.value())})},onValues:function(e){return this.onValue(function(t){return e.apply(void 0,t)})},onError:function(){var e=J(arguments);return this.subscribe(function(t){if(t.isError())return e(t.error)})},onEnd:function(){var e=J(arguments);return this.subscribe(function(t){if(t.isEnd())return e()})},name:function(e){return this._name=e,this},withDescription:function(){return this.desc=X.apply(void 0,arguments),this},toString:function(){return this._name?this._name:this.desc.toString()},deps:function(){return this.desc.deps()},internalDeps:function(){return this.initialDesc.deps()}}),m.prototype.assign=m.prototype.onValue,m.prototype.forEach=m.prototype.onValue,m.prototype.inspect=m.prototype.toString,E.Observable=m,U(h.prototype,{add:function(e){var t=this;if(!this.unsubscribed){var n=!1,i=j;this.starting.push(e);var r=function(){if(!t.unsubscribed)return n=!0,t.remove(i),H.remove(e,t.starting)};return i=e(this.unsubscribe,r),this.unsubscribed||n?i():this.subscriptions.push(i),H.remove(e,this.starting),i}},remove:function(e){if(!this.unsubscribed)return void 0!==H.remove(e,this.subscriptions)?e():void 0},unsubscribe:function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var e=this.subscriptions,t=0;t<e.length;t++)e[t]();return this.subscriptions=[],this.starting=[],[]}},count:function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},empty:function(){return 0===this.count()}}),E.CompositeUnsubscribe=h,g.prototype.hasSubscribers=function(){return this.subscriptions.length>0},g.prototype.removeSub=function(e){return this.subscriptions=H.without(e,this.subscriptions),this.subscriptions},g.prototype.push=function(e){return e.isEnd()&&(this.ended=!0),V.inTransaction(e,this,this.pushIt,[e])},g.prototype.pushToSubscriptions=function(e){try{for(var t=this.subscriptions,n=t.length,i=0;i<n;i++){var r=t[i];(r.sink(e)===E.noMore||e.isEnd())&&this.removeSub(r)}return!0}catch(e){throw this.pushing=!1,this.queue=[],e}},g.prototype.pushIt=function(e){if(this.pushing)return this.queue.push(e),E.more;if(e!==this.prevError){for(e.isError()&&(this.prevError=e),this.pushing=!0,this.pushToSubscriptions(e),this.pushing=!1;this.queue.length;)e=this.queue.shift(),this.push(e);return this.hasSubscribers()?E.more:(this.unsubscribeFromSource(),E.noMore)}},g.prototype.handleEvent=function(e){return this._handleEvent?this._handleEvent(e):this.push(e)},g.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},g.prototype.subscribe=function(e){var t;return this.ended?(e(_e()),j):(T(e),t={sink:e},this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),T(this.unsubSrc)),function(e){return function(){if(e.removeSub(t),!e.hasSubscribers())return e.unsubscribeFromSource()}}(this))},E.Dispatcher=g,B(v,m),U(v.prototype,{_isEventStream:!0,toProperty:function(e){var t=0===arguments.length?ae:le(function(){return e}),n=this.dispatcher;return new x(new E.Desc(this,"toProperty",[e]),function(e){var i=!1,r=!1,o=j,a=E.more,l=function(){if(!i)return t.forEach(function(t){if(i=!0,(a=e(new f(t)))===E.noMore)return o(),o=j,j})};return o=n.subscribe(function(n){return n.hasValue()?n.isInitial()&&!r?(t=new c(function(){return n.value()}),E.more):(n.isInitial()||l(),i=!0,t=new c(n),e(n)):(n.isEnd()&&(a=l()),a!==E.noMore?e(n):void 0)}),r=!0,l(),o})},toEventStream:function(){return this},withHandler:function(e){return new v(new E.Desc(this,"withHandler",[e]),this.dispatcher.subscribe,e)}}),E.EventStream=v,E.never=function(){return new v(X(E,"never"),function(e){return e(_e()),j})},E.when=function(){if(0===arguments.length)return E.never();var e=arguments.length;S("when: expecting arguments in the form (Observable+,function)+",e%2===0);for(var t=[],n=[],i=0,r=[];i<e;){r[i]=arguments[i],r[i+1]=arguments[i+1];for(var o,l=H.toArray(arguments[i]),s=me(arguments[i+1]),u={f:s,ixs:[]},c=!1,_=0;_<l.length;_++){o=l[_];var d=H.indexOf(t,o);c||(c=a.isTrigger(o)),d<0&&(t.push(o),d=t.length-1);for(var f,b=0;b<u.ixs.length;b++)f=u.ixs[b],f.index===d&&f.count++;u.ixs.push({index:d,count:1})}S("At least one EventStream required",c||!l.length),l.length>0&&n.push(u),i+=2}if(!t.length)return E.never();t=H.map(a.fromObservable,t);var p=H.any(t,function(e){return e.flatten})&&pe(H.map(function(e){return e.obs},t)),m=new E.Desc(E,"when",r),h=new v(m,function(e){var i=[],r=!1,o=function(e){for(var n,i=0;i<e.ixs.length;i++)if(n=e.ixs[i],!t[n.index].hasAtLeast(n.count))return!1;return!0},a=function(e){return!e.sync||e.ended},l=function(e){for(var n,i=0;i<e.ixs.length;i++)if(n=e.ixs[i],!t[n.index].mayHave(n.count))return!0},s=function(e){return!e.source.flatten},u=function(u){return function(c){var _=function(){return V.whenDoneWith(h,f)},d=function(){if(!(i.length>0))return E.more;for(var r,a=E.more,l=i.pop(),u=0;u<n.length;u++)if(r=n[u],o(r)){var c=function(){for(var e,n=[],i=0;i<r.ixs.length;i++)e=r.ixs[i],n.push(t[e.index].consume());return n}();return a=e(l.e.apply(function(){var e,t=function(){for(var e,t=[],n=0;n<c.length;n++)e=c[n],t.push(e.value());return t}();return(e=r).f.apply(e,t)})),i.length&&(i=H.filter(s,i)),a===E.noMore?a:d()}},f=function(){var i=d();return r&&(H.all(t,a)||H.all(n,l))&&(i=E.noMore,e(_e())),i===E.noMore&&c(),i};return u.subscribe(function(t){if(t.isEnd())r=!0,u.markEnded(),_();else if(t.isError())var n=e(t);else u.push(t),u.sync&&(i.push({source:u,e:t}),p||V.hasWaiters()?_():f());return n===E.noMore&&c(),n||E.more})}};return new E.CompositeUnsubscribe(function(){for(var e,n=[],i=0;i<t.length;i++)e=t[i],n.push(u(e));return n}()).unsubscribe});return h};var pe=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=function(e){if(H.contains(t,e))return!0;var i=e.internalDeps();return i.length?(t.push(e),H.any(i,n)):(t.push(e),!1)};return H.any(e,n)},me=function(e){return H.isFunction(e)?e:H.always(e)};E.groupSimultaneous=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&I(t[0])&&(t=t[0]);var i=function(){for(var e,n=[],i=0;i<t.length;i++)e=t[i],n.push(new s(e));return n}();return K(new E.Desc(E,"groupSimultaneous",t),E.when(i,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}))},B(y,g),U(y.prototype,{push:function(e){return e.isEnd()&&(this.propertyEnded=!0),e.hasValue()&&(this.current=new c(e),this.currentValueRootId=V.currentEventId()),g.prototype.push.call(this,e)},maybeSubSource:function(e,t){return t===E.noMore?j:this.propertyEnded?(e(_e()),j):g.prototype.subscribe.call(this,e)},subscribe:function(e){var t=this,n=E.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var i=V.currentEventId(),r=this.currentValueRootId;return!this.propertyEnded&&r&&i&&i!==r?(V.whenDoneWith(this.property,function(){if(t.currentValueRootId===r)return e(ue(t.current.get().value()))}),this.maybeSubSource(e,n)):(V.inTransaction(void 0,this,function(){return n=e(ue(this.current.get().value()))},[]),this.maybeSubSource(e,n))}return this.maybeSubSource(e,n)}}),B(x,m),U(x.prototype,{_isProperty:!0,changes:function(){var e=this;return new v(new E.Desc(this,"changes",[]),function(t){return e.dispatcher.subscribe(function(e){if(!e.isInitial())return t(e)})})},withHandler:function(e){return new x(new E.Desc(this,"withHandler",[e]),this.dispatcher.subscribe,e)},toProperty:function(){return R(arguments),this},toEventStream:function(){var e=this;return new v(new E.Desc(this,"toEventStream",[]),function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()&&(e=e.toNext()),t(e)})})}}),E.Property=x,E.constant=function(e){return new x(new E.Desc(E,"constant",[e]),function(t){return t(ue(e)),t(_e()),j})},E.fromBinder=function(e){var t=arguments.length<=1||void 0===arguments[1]?H.id:arguments[1];return new v(new E.Desc(E,"fromBinder",[e,t]),function(n){var i=!1,r=!1,o=function(){if(!i)return"undefined"!==typeof a&&null!==a?(a(),i=!0):r=!0},a=e(function(){for(var e,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var l=t.apply(this,r);I(l)&&(null!=(e=H.last(l))?e._isEvent:void 0)||(l=[l]);for(var s,u=E.more,c=0;c<l.length;c++)if(s=l[c],(u=n(s=de(s)))===E.noMore||s.isEnd())return o(),u;return u});return r&&o(),o})},E.Observable.prototype.map=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ie(this,e,n,function(e){return K(new E.Desc(this,"map",[e]),this.withHandler(function(t){return this.push(t.fmap(e))}))})};var he=function(e){return I(e[0])?e[0]:Array.prototype.slice.call(e)},ge=function(e){return H.isFunction(e[0])?[he(Array.prototype.slice.call(e,1)),e[0]]:[he(Array.prototype.slice.call(e,0,e.length-1)),H.last(e)]};E.combineAsArray=function(){var e=he(arguments);if(e.length){for(var t=[],n=0;n<e.length;n++){var i=D(e[n])?e[n]:E.constant(e[n]);t.push(new a(i,!0))}return K(new E.Desc(E,"combineAsArray",e),E.when(t,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}).toProperty())}return E.constant([])},E.onValues=function(){return E.combineAsArray(Array.prototype.slice.call(arguments,0,arguments.length-1)).onValues(arguments[arguments.length-1])},E.combineWith=function(){var e=ge(arguments),t=e[0],n=e[1],i=new E.Desc(E,"combineWith",[n].concat(t));return K(i,E.combineAsArray(t).map(function(e){return n.apply(void 0,e)}))},E.Observable.prototype.combine=function(e,t){var n=re(t),i=new E.Desc(this,"combine",[e,t]);return K(i,E.combineAsArray(this,e).map(function(e){return n(e[0],e[1])}))},E.Observable.prototype.withStateMachine=function(e,t){var n=e,i=new E.Desc(this,"withStateMachine",[e,t]);return K(i,this.withHandler(function(e){var i=t(n,e),r=i[0],o=i[1];n=r;for(var a,l=E.more,s=0;s<o.length;s++)if(a=o[s],(l=this.push(a))===E.noMore)return l;return l}))};var ve=function(e,t){return e===t},ye=function(e){return"undefined"!==typeof e&&null!==e&&e._isNone};E.Observable.prototype.skipDuplicates=function(){var e=arguments.length<=0||void 0===arguments[0]?ve:arguments[0],t=new E.Desc(this,"skipDuplicates",[]);return K(t,this.withStateMachine(ae,function(t,n){return n.hasValue()?n.isInitial()||ye(t)||!e(t.get(),n.value())?[new c(n.value()),[n]]:[t,[]]:[t,[n]]}))},E.Observable.prototype.awaiting=function(e){var t=new E.Desc(this,"awaiting",[e]);return K(t,E.groupSimultaneous(this,e).map(function(e){return 0===e[1].length}).toProperty(!1).skipDuplicates())},E.Observable.prototype.not=function(){return K(new E.Desc(this,"not",[]),this.map(function(e){return!e}))},E.Property.prototype.and=function(e){return K(new E.Desc(this,"and",[e]),this.combine(e,function(e,t){return e&&t}))},E.Property.prototype.or=function(e){return K(new E.Desc(this,"or",[e]),this.combine(e,function(e,t){return e||t}))},E.scheduler={setTimeout:function(e,t){return setTimeout(e,t)},setInterval:function(e,t){return setInterval(e,t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},now:function(){return(new Date).getTime()}},E.EventStream.prototype.bufferWithTime=function(e){return K(new E.Desc(this,"bufferWithTime",[e]),this.bufferWithTimeOrCount(e,Number.MAX_VALUE))},E.EventStream.prototype.bufferWithCount=function(e){return K(new E.Desc(this,"bufferWithCount",[e]),this.bufferWithTimeOrCount(void 0,e))},E.EventStream.prototype.bufferWithTimeOrCount=function(e,t){var n=function(n){return n.values.length===t?n.flush():void 0!==e?n.schedule():void 0},i=new E.Desc(this,"bufferWithTimeOrCount",[e,t]);return K(i,this.buffer(e,n,n))},E.EventStream.prototype.buffer=function(e){var t=arguments.length<=1||void 0===arguments[1]?j:arguments[1],n=arguments.length<=2||void 0===arguments[2]?j:arguments[2],i={scheduled:null,end:void 0,values:[],flush:function(){if(this.scheduled&&(E.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var e=this.values;this.values=[];var t=this.push(ce(e));if(null!=this.end)return this.push(this.end);if(t!==E.noMore)return n(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var t=this;if(!this.scheduled)return this.scheduled=e(function(){return t.flush()})}},r=E.more;if(!H.isFunction(e)){var o=e;e=function(e){return E.scheduler.setTimeout(e,o)}}return K(new E.Desc(this,"buffer",[]),this.withHandler(function(e){var n=this;return i.push=function(e){return n.push(e)},e.isError()?r=this.push(e):e.isEnd()?(i.end=e,i.scheduled||i.flush()):(i.values.push(e.value()),t(i)),r}))},E.Observable.prototype.filter=function(e){z(e);for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ie(this,e,n,function(e){return K(new E.Desc(this,"filter",[e]),this.withHandler(function(t){return t.filter(e)?this.push(t):E.more}))})},E.once=function(e){return new v(new u(E,"once",[e]),function(t){return t(de(e)),t(_e()),j})},E.EventStream.prototype.concat=function(e){var t=this;return new v(new E.Desc(t,"concat",[e]),function(n){var i=j,r=t.dispatcher.subscribe(function(t){return t.isEnd()?i=e.toEventStream().dispatcher.subscribe(n):n(t)});return function(){return r(),i()}})},E.Property.prototype.concat=function(e){return xe(this,this.changes().concat(e))},E.concatAll=function(){var e=he(arguments);return e.length?K(new E.Desc(E,"concatAll",e),H.fold(H.tail(e),H.head(e).toEventStream(),function(e,t){return e.concat(t)})):E.never()};var xe=function(e,t){var n=new v(X(e,"justInitValue"),function(t){var i=void 0,r=e.dispatcher.subscribe(function(e){return e.isEnd()||(i=e),E.noMore});return V.whenDoneWith(n,function(){return"undefined"!==typeof i&&null!==i&&t(i),t(_e())}),r});return n.concat(t).toProperty()};E.Observable.prototype.flatMap=function(){return Me(this,we(arguments))},E.Observable.prototype.flatMapFirst=function(){return Me(this,we(arguments),!0)};var we=function(e){return 1===e.length&&D(e[0])?H.always(e[0]):J(e)},ke=function(e){return D(e)?e:E.once(e)},Me=function(e,t,n,i){var r=[e],o=[],a=new E.Desc(e,"flatMap"+(n?"First":""),[t]),l=new v(a,function(r){var a=new h,l=[],s=function(e){var n=ke(t(e.value()));return o.push(n),a.add(function(e,t){return n.dispatcher.subscribe(function(i){if(i.isEnd())return H.remove(n,o),u(),c(t),E.noMore;("undefined"!==typeof i&&null!==i?i._isInitial:void 0)&&(i=i.toNext());var a=r(i);return a===E.noMore&&e(),a})})},u=function(){var e=l.shift();if(e)return s(e)},c=function(e){if(e(),a.empty())return r(_e())};return a.add(function(t,o){return e.dispatcher.subscribe(function(e){return e.isEnd()?c(o):e.isError()?r(e):n&&a.count()>1?E.more:a.unsubscribed?E.noMore:i&&a.count()>i?l.push(e):s(e)})}),a.unsubscribe});return l.internalDeps=function(){return o.length?r.concat(o):r},l};E.Observable.prototype.flatMapWithConcurrencyLimit=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=new E.Desc(this,"flatMapWithConcurrencyLimit",[e].concat(n));return K(r,Me(this,we(n),!1,e))},E.Observable.prototype.flatMapConcat=function(){var e=new E.Desc(this,"flatMapConcat",Array.prototype.slice.call(arguments,0));return K(e,this.flatMapWithConcurrencyLimit.apply(this,[1].concat(A.call(arguments))))},E.later=function(e,t){return K(new E.Desc(E,"later",[e,t]),E.fromBinder(function(n){var i=function(){return n([t,_e()])},r=E.scheduler.setTimeout(i,e);return function(){return E.scheduler.clearTimeout(r)}}))},E.Observable.prototype.bufferingThrottle=function(e){var t=new E.Desc(this,"bufferingThrottle",[e]);return K(t,this.flatMapConcat(function(t){return E.once(t).concat(E.later(e).filter(!1))}))},E.Property.prototype.bufferingThrottle=function(){return E.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},B(w,v),U(w.prototype,{unsubAll:function(){for(var e,t=this.subscriptions,n=0;n<t.length;n++)e=t[n],"function"===typeof e.unsub&&e.unsub()},subscribeAll:function(e){if(this.ended)e(_e());else{this.sink=e;for(var t,n=C(this.subscriptions),i=0;i<n.length;i++)t=n[i],this.subscribeInput(t)}return this.unsubAll},guardedSink:function(e){var t=this;return function(n){return n.isEnd()?(t.unsubscribeInput(e),E.noMore):t.sink(n)}},subscribeInput:function(e){return e.unsub=e.input.dispatcher.subscribe(this.guardedSink(e.input)),e.unsub},unsubscribeInput:function(e){for(var t,n=this.subscriptions,i=0;i<n.length;i++)if(t=n[i],t.input===e)return"function"===typeof t.unsub&&t.unsub(),void this.subscriptions.splice(i,1)},plug:function(e){var t=this;if(L(e),!this.ended){var n={input:e};return this.subscriptions.push(n),"undefined"!==typeof this.sink&&this.subscribeInput(n),function(){return t.unsubscribeInput(e)}}},end:function(){if(this.ended=!0,this.unsubAll(),"function"===typeof this.sink)return this.sink(_e())},push:function(e){if(!this.ended&&"function"===typeof this.sink){var t=!this.pushing;if(!t)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(e);this.pushing=!0;try{return this.sink(ce(e))}finally{if(t&&this.pushQueue){for(var n=0;n<this.pushQueue.length;){var e=this.pushQueue[n];this.sink(ce(e)),n++}this.pushQueue=null}this.pushing=!1}}},error:function(e){if("function"===typeof this.sink)return this.sink(new p(e))}}),E.Bus=w;var Ae=function(e,t){return Y(function(n){for(var i=$(t,[function(e,t){return n.apply(void 0,e.concat([t]))}]),r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return K(new E.Desc(E,e,[n].concat(o)),E.combineAsArray(o).flatMap(i))})};E.fromCallback=Ae("fromCallback",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return E.fromBinder(function(t){return ne(e,n)(t),j},function(e){return[e,_e()]})}),E.fromNodeCallback=Ae("fromNodeCallback",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return E.fromBinder(function(t){return ne(e,n)(t),j},function(e,t){return e?[new p(e),_e()]:[t,_e()]})}),E.combineTemplate=function(e){function t(e){return e[e.length-1]}function n(e,n,i){return t(e)[n]=i,i}function i(e,t){return function(i,r){n(i,e,r[t])}}function r(e,t){return function(i){n(i,e,t)}}function o(e){return I(e)?[]:{}}function a(e,t){return function(i){var r=o(t);n(i,e,r),i.push(r)}}function l(e){if(D(e))return!0;if(e&&(e.constructor==Object||e.constructor==Array))for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(l(n))return!0}}function s(e,t){if(D(t))d.push(t),_.push(i(e,d.length-1));else if(l(t)){var n=function(e){e.pop()};_.push(a(e,t)),c(t),_.push(n)}else _.push(r(e,t))}function u(t){for(var n=o(e),i=[n],r=0;r<_.length;r++)(0,_[r])(i,t);return n}function c(e){H.each(e,s)}var _=[],d=[],f=l(e)?(c(e),E.combineAsArray(d).map(u)):E.constant(e);return K(new E.Desc(E,"combineTemplate",[e]),f)},E.Observable.prototype.mapEnd=function(){var e=J(arguments);return K(new E.Desc(this,"mapEnd",[e]),this.withHandler(function(t){return t.isEnd()?(this.push(ce(e(t))),this.push(_e()),E.noMore):this.push(t)}))},E.Observable.prototype.skipErrors=function(){return K(new E.Desc(this,"skipErrors",[]),this.withHandler(function(e){return e.isError()?E.more:this.push(e)}))},E.EventStream.prototype.takeUntil=function(e){var t={};return K(new E.Desc(this,"takeUntil",[e]),E.groupSimultaneous(this.mapEnd(t),e.skipErrors()).withHandler(function(e){if(e.hasValue()){var n=e.value(),i=n[0];if(n[1].length)return this.push(_e());for(var r,o=E.more,a=0;a<i.length;a++)r=i[a],o=r===t?this.push(_e()):this.push(ce(r));return o}return this.push(e)}))},E.Property.prototype.takeUntil=function(e){var t=this.changes().takeUntil(e);return K(new E.Desc(this,"takeUntil",[e]),xe(this,t))},E.Observable.prototype.flatMapLatest=function(){var e=we(arguments),t=this.toEventStream();return K(new E.Desc(this,"flatMapLatest",[e]),t.flatMap(function(n){return ke(e(n)).takeUntil(t)}))},E.Property.prototype.delayChanges=function(e,t){return K(e,xe(this,t(this.changes())))},E.EventStream.prototype.delayChanges=function(e,t){return K(e,t(this))},E.Observable.prototype.delay=function(e){return this.delayChanges(new E.Desc(this,"delay",[e]),function(t){return t.flatMap(function(t){return E.later(e,t)})})},E.Observable.prototype.debounce=function(e){return this.delayChanges(new E.Desc(this,"debounce",[e]),function(t){return t.flatMapLatest(function(t){return E.later(e,t)})})},E.Observable.prototype.debounceImmediate=function(e){return this.delayChanges(new E.Desc(this,"debounceImmediate",[e]),function(t){return t.flatMapFirst(function(t){return E.once(t).concat(E.later(e).filter(!1))})})},E.Observable.prototype.decode=function(e){return K(new E.Desc(this,"decode",[e]),this.combine(E.combineTemplate(e),function(e,t){return t[e]}))},E.Observable.prototype.scan=function(e,t){var n,i=this;t=re(t);var r=le(e),o=!1,a=function(e){var a=!1,l=j,s=E.more,u=function(){if(!a)return r.forEach(function(t){if(a=o=!0,(s=e(new f(function(){return t})))===E.noMore)return l(),l=j})};return l=i.dispatcher.subscribe(function(n){if(n.hasValue()){if(o&&n.isInitial())return E.more;n.isInitial()||u(),a=o=!0;var i=r.getOrElse(void 0),l=t(i,n.value());return r=new c(l),e(n.apply(function(){return l}))}if(n.isEnd()&&(s=u()),s!==E.noMore)return e(n)}),V.whenDoneWith(n,u),l};return n=new x(new E.Desc(this,"scan",[e,t]),a)},E.Observable.prototype.diff=function(e,t){return t=re(t),K(new E.Desc(this,"diff",[e,t]),this.scan([e],function(e,n){return[n,t(e[0],n)]}).filter(function(e){return 2===e.length}).map(function(e){return e[1]}))},E.Observable.prototype.doAction=function(){var e=J(arguments);return K(new E.Desc(this,"doAction",[e]),this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},E.Observable.prototype.doEnd=function(){var e=J(arguments);return K(new E.Desc(this,"doEnd",[e]),this.withHandler(function(t){return t.isEnd()&&e(),this.push(t)}))},E.Observable.prototype.doError=function(){var e=J(arguments);return K(new E.Desc(this,"doError",[e]),this.withHandler(function(t){return t.isError()&&e(t.error),this.push(t)}))},E.Observable.prototype.doLog=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return K(new E.Desc(this,"doLog",t),this.withHandler(function(e){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log.apply(console,t.concat([e.log()])),this.push(e)}))},E.Observable.prototype.endOnError=function(e){"undefined"!==typeof e&&null!==e||(e=!0);for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ie(this,e,n,function(e){return K(new E.Desc(this,"endOnError",[]),this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(_e())):this.push(t)}))})},m.prototype.errors=function(){return K(new E.Desc(this,"errors",[]),this.filter(function(){return!1}))},E.Observable.prototype.take=function(e){return e<=0?E.never():K(new E.Desc(this,"take",[e]),this.withHandler(function(t){return t.hasValue()?(e--,e>0?this.push(t):(0===e&&this.push(t),this.push(_e()),E.noMore)):this.push(t)}))},E.Observable.prototype.first=function(){return K(new E.Desc(this,"first",[]),this.take(1))},E.Observable.prototype.mapError=function(){var e=J(arguments);return K(new E.Desc(this,"mapError",[e]),this.withHandler(function(t){return t.isError()?this.push(ce(e(t.error))):this.push(t)}))},E.Observable.prototype.flatMapError=function(e){var t=new E.Desc(this,"flatMapError",[e]);return K(t,this.mapError(function(e){return new p(e)}).flatMap(function(t){return t instanceof p?e(t.error):E.once(t)}))},E.EventStream.prototype.flatScan=function(e,t){var n=e;return this.flatMapConcat(function(e){return ke(t(n,e)).doAction(function(e){return n=e})}).toProperty(e)},E.EventStream.prototype.sampledBy=function(e,t){return K(new E.Desc(this,"sampledBy",[e,t]),this.toProperty().sampledBy(e,t))},E.Property.prototype.sampledBy=function(e,t){var n=!1;"undefined"!==typeof t&&null!==t?t=re(t):(n=!0,t=function(e){return e.value()});var i=new a(this,!1,n),r=new a(e,!0,n),o=E.when([i,r],t),l=e._isProperty?o.toProperty():o;return K(new E.Desc(this,"sampledBy",[e,t]),l)},E.Property.prototype.sample=function(e){return K(new E.Desc(this,"sample",[e]),this.sampledBy(E.interval(e,{})))},E.Observable.prototype.map=function(e){if(e&&e._isProperty)return e.sampledBy(this,O);for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ie(this,e,n,function(e){return K(new E.Desc(this,"map",[e]),this.withHandler(function(t){return this.push(t.fmap(e))}))})},E.Observable.prototype.fold=function(e,t){return K(new E.Desc(this,"fold",[e,t]),this.scan(e,t).sampledBy(this.filter(!1).mapEnd().toProperty()))},m.prototype.reduce=m.prototype.fold;var Ee=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],Pe=function(e){for(var t,n=0;n<Ee.length;n++){t=Ee[n];var i=[e[t[0]],e[t[1]]];if(i[0]&&i[1])return i}for(var r=0;r<Ee.length;r++){t=Ee[r];var o=e[t[0]];if(o)return[o,function(){}]}throw new p("No suitable event methods in "+e)};E.fromEventTarget=function(e,t,n){var i=Pe(e),r=i[0],o=i[1],a=new E.Desc(E,"fromEvent",[e,t]);return K(a,E.fromBinder(function(n){return r.call(e,t,n),function(){return o.call(e,t,n)}},n))},E.fromEvent=E.fromEventTarget,E.fromPoll=function(e,t){var n=new E.Desc(E,"fromPoll",[e,t]);return K(n,E.fromBinder(function(t){var n=E.scheduler.setInterval(t,e);return function(){return E.scheduler.clearInterval(n)}},t))},E.fromPromise=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?k:arguments[2];return K(new E.Desc(E,"fromPromise",[e]),E.fromBinder(function(n){var i=e.then(n,function(e){return n(new p(e))});return i&&"function"===typeof i.done&&i.done(),t?function(){if("function"===typeof e.abort)return e.abort()}:function(){}},n))},E.Observable.prototype.groupBy=function(e){var t=arguments.length<=1||void 0===arguments[1]?E._.id:arguments[1],n={},i=this;return i.filter(function(t){return!n[e(t)]}).map(function(r){var o=e(r),a=i.filter(function(t){return e(t)===o}),l=E.once(r).concat(a),s=t(l,r).withHandler(function(e){if(this.push(e),e.isEnd())return delete n[o]});return n[o]=s,s})},E.fromArray=function(e){if(F(e),e.length){var t=0,n=new v(new E.Desc(E,"fromArray",[e]),function(i){function r(){if(s=!0,!l){for(l=!0;s;)if(s=!1,a!==E.noMore&&!o){var u=e[t++];a=i(de(u)),a!==E.noMore&&(t===e.length?i(_e()):V.afterTransaction(n,r))}return l=!1}}var o=!1,a=E.more,l=!1,s=!1;return r(),function(){return o=!0}});return n}return K(new E.Desc(E,"fromArray",e),E.never())},E.EventStream.prototype.holdWhen=function(e){var t=!1,n=[],i=this,r=!1;return new v(new E.Desc(this,"holdWhen",[e]),function(o){var a=new h,l=!1,s=function(e){if("function"===typeof e&&e(),a.empty()&&l)return o(_e())};return a.add(function(i,a){return e.subscribeInternal(function(e){if(!e.hasValue())return e.isEnd()?s(a):o(e);if(!(t=e.value())){var i=n;return n=[],function(){for(var e,t=[],n=0;n<i.length;n++)e=i[n],t.push(o(ce(e)));return r&&(t.push(o(_e())),a()),t}()}})}),a.add(function(e,a){return i.subscribeInternal(function(e){return t&&e.hasValue()?n.push(e.value()):e.isEnd()&&n.length?(r=!0,s(a)):o(e)})}),l=!0,s(),a.unsubscribe})},E.interval=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return K(new E.Desc(E,"interval",[e,t]),E.fromPoll(e,function(){return ce(t)}))},E.$={},E.$.asEventStream=function(e,t,n){var i=this;return H.isFunction(t)&&(n=t,t=void 0),K(new E.Desc(this.selector||this,"asEventStream",[e]),E.fromBinder(function(n){return i.on(e,t,n),function(){return i.off(e,t,n)}},n))},"undefined"!==typeof jQuery&&jQuery&&(jQuery.fn.asEventStream=E.$.asEventStream),"undefined"!==typeof Zepto&&Zepto&&(Zepto.fn.asEventStream=E.$.asEventStream),E.Observable.prototype.last=function(){var e;return K(new E.Desc(this,"last",[]),this.withHandler(function(t){if(t.isEnd())return e&&this.push(e),this.push(_e()),E.noMore;e=t}))},E.Observable.prototype.log=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.subscribe(function(e){"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,t.concat([e.log()]))}),this},E.EventStream.prototype.merge=function(e){N(e);var t=this;return K(new E.Desc(t,"merge",[e]),E.mergeAll(this,e))},E.mergeAll=function(){var e=he(arguments);return e.length?new v(new E.Desc(E,"mergeAll",e),function(t){var n=0,i=function(i){return function(r){return i.dispatcher.subscribe(function(i){if(i.isEnd())return n++,n===e.length?t(_e()):E.more;var o=t(i);return o===E.noMore&&r(),o})}},r=H.map(i,e);return new E.CompositeUnsubscribe(r).unsubscribe}):E.never()},E.repeatedly=function(e,t){var n=0;return K(new E.Desc(E,"repeatedly",[e,t]),E.fromPoll(e,function(){return t[n++%t.length]}))},E.repeat=function(e){var t=0;return E.fromBinder(function(n){function i(e){return e.isEnd()?o?r():o=!0:a=n(e)}function r(){var r;for(o=!0;o&&a!==E.noMore;)r=e(t++),o=!1,r?l=r.subscribeInternal(i):n(_e());return o=!0}var o=!1,a=E.more,l=function(){};return r(),function(){return l()}})},E.retry=function(e){if(!H.isFunction(e.source))throw new P("'source' option has to be a function");var t=e.source,n=e.retries||0,i=0,r=e.delay||function(){return 0},o=e.isRetryable||function(){return!0},a=!1,l=null;return K(new E.Desc(E,"retry",[e]),E.repeat(function(e){function s(){return t(e).endOnError().withHandler(function(e){return e.isError()?(l=e,o(l.error)&&(0===n||i<n)?void 0:(a=!0,this.push(e))):(e.hasValue()&&(l=null,a=!0),this.push(e))})}if(a)return null;if(l){var u={error:l.error,retriesDone:i},c=E.later(r(u)).filter(!1);return i++,c.concat(E.once().flatMap(s))}return s()}))},E.sequentially=function(e,t){var n=0;return K(new E.Desc(E,"sequentially",[e,t]),E.fromPoll(e,function(){var e=t[n++];return n<t.length?e:n===t.length?[e,_e()]:_e()}))},E.Observable.prototype.skip=function(e){return K(new E.Desc(this,"skip",[e]),this.withHandler(function(t){return t.hasValue()&&e>0?(e--,E.more):this.push(t)}))},E.EventStream.prototype.skipUntil=function(e){var t=e.take(1).map(!0).toProperty(!1);return K(new E.Desc(this,"skipUntil",[e]),this.filter(t))},E.EventStream.prototype.skipWhile=function(e){z(e);for(var t=!1,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return ie(this,e,i,function(e){return K(new E.Desc(this,"skipWhile",[e]),this.withHandler(function(n){return!t&&n.hasValue()&&e(n.value())?E.more:(n.hasValue()&&(t=!0),this.push(n))}))})},E.Observable.prototype.slidingWindow=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return K(new E.Desc(this,"slidingWindow",[e,t]),this.scan([],function(t,n){return t.concat([n]).slice(-e)}).filter(function(e){return e.length>=t}))};var je=[],be=function(e){if(je.length&&!be.running)try{be.running=!0,je.forEach(function(t){t(e)})}finally{delete be.running}};E.spy=function(e){return je.push(e)},E.Property.prototype.startWith=function(e){return K(new E.Desc(this,"startWith",[e]),this.scan(e,function(e,t){return t}))},E.EventStream.prototype.startWith=function(e){return K(new E.Desc(this,"startWith",[e]),E.once(e).concat(this))},E.Observable.prototype.takeWhile=function(e){z(e);for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ie(this,e,n,function(e){return K(new E.Desc(this,"takeWhile",[e]),this.withHandler(function(t){return t.filter(e)?this.push(t):(this.push(_e()),E.noMore)}))})},E.Observable.prototype.throttle=function(e){return this.delayChanges(new E.Desc(this,"throttle",[e]),function(t){return t.bufferWithTime(e).map(function(e){return e[e.length-1]})})},m.prototype.firstToPromise=function(e){var t=this;if("function"!==typeof e){if("function"!==typeof Promise)throw new P("There isn't default Promise, use shim or parameter");e=Promise}return new e(function(e,n){return t.subscribe(function(t){return t.hasValue()&&e(t.value()),t.isError()&&n(t.error),E.noMore})})},m.prototype.toPromise=function(e){return this.last().firstToPromise(e)},E.try=function(e){return function(t){try{return E.once(e(t))}catch(e){return new E.Error(e)}}},E.update=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=n.length-1;r>0;)n[r]instanceof Function||(n[r]=H.always(n[r])),n[r]=function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(t){return e.apply(void 0,[t].concat(n))}}}(n[r]),r-=2;return K(new E.Desc(E,"update",[e].concat(n)),E.when.apply(E,n).scan(e,function(e,t){return t(e)}))},E.zipAsArray=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=he(t);return K(new E.Desc(E,"zipAsArray",i),E.zipWith(i,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}))},E.zipWith=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=ge(t),r=i[0],o=i[1];return r=H.map(function(e){return e.toEventStream()},r),K(new E.Desc(E,"zipWith",[o].concat(r)),E.when(r,o))},E.Observable.prototype.zip=function(e,t){return K(new E.Desc(this,"zip",[e]),E.zipWith([this,e],t||Array))},M.prototype.subscribe=function(e,t,n){var i="function"===typeof e?{next:e,error:t,complete:n}:e,r={closed:!1,unsubscribe:function(){r.closed=!0,o()}},o=this.observable.subscribe(function(e){e.isError()?(i.error&&i.error(e.error),r.unsubscribe()):e.isEnd()?(r.closed=!0,i.complete&&i.complete()):i.next&&i.next(e.value())});return r},M.prototype[q("observable")]=function(){return this},E.Observable.prototype.toESObservable=function(){return new M(this)},E.Observable.prototype[q("observable")]=E.Observable.prototype.toESObservable,E.fromESObservable=function(e){var t;t=e[q("observable")]?e[q("observable")]():e;var n=new E.Desc(E,"fromESObservable",[t]);return new E.EventStream(n,function(e){var n=t.subscribe({error:function(){e(new E.Error),e(new E.End)},next:function(t){e(new E.Next(t,!0))},complete:function(){e(new E.End)}});return n.unsubscribe?function(){n.unsubscribe()}:n})},null!==n(60)&&null!=n(61)?(r=[],void 0!==(o=function(){return E}.apply(t,r))&&(i.exports=o),"undefined"!==typeof this&&null!==this&&(this.Bacon=E)):"undefined"!==typeof i&&null!==i&&null!=i.exports?(i.exports=E,E.Bacon=E):this.Bacon=E}).call(this)}).call(t,n(62),n(142)(e))},function(e,t,n){"use strict";var i=n(40);t.a=function(e){return e=n.i(i.a)(Math.abs(e)),e?e[1]:NaN}},function(e,t,n){"use strict";t.a=function(e,t){return e=+e,t-=e,function(n){return e+t*n}}},function(e,t,n){"use strict";function i(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:n.i(f.a)(t)}function r(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function o(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:i(e)}}}function a(e,t,n,i){var r=e[0],o=e[1],a=t[0],l=t[1];return o<r?(r=n(o,r),a=i(l,a)):(r=n(r,o),a=i(a,l)),function(e){return a(r(e))}}function l(e,t,i,r){var o=Math.min(e.length,t.length)-1,a=new Array(o),l=new Array(o),s=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<o;)a[s]=i(e[s],e[s+1]),l[s]=r(t[s],t[s+1]);return function(t){var i=n.i(c.c)(e,t,1,o)-1;return l[i](a[i](t))}}function s(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function u(e,t){function n(){return u=Math.min(m.length,h.length)>2?l:a,c=f=null,s}function s(t){return(c||(c=u(m,h,v?r(e):e,g)))(+t)}var u,c,f,m=p,h=p,g=_.g,v=!1;return s.invert=function(e){return(f||(f=u(h,m,i,v?o(t):t)))(+e)},s.domain=function(e){return arguments.length?(m=d.a.call(e,b.a),n()):m.slice()},s.range=function(e){return arguments.length?(h=d.b.call(e),n()):h.slice()},s.rangeRound=function(e){return h=d.b.call(e),g=_.h,n()},s.clamp=function(e){return arguments.length?(v=!!e,n()):v},s.interpolate=function(e){return arguments.length?(g=e,n()):g},n()}t.b=i,t.c=s,t.a=u;var c=n(7),_=n(6),d=n(12),f=n(44),b=n(103),p=[0,1]},function(e,t,n){"use strict";function i(e,t){var i,r;return function(){var o=n.i(a.e)(this,e),l=o.tween;if(l!==i){r=i=l;for(var s=0,u=r.length;s<u;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function r(e,t,i){var r,o;if("function"!==typeof i)throw new Error;return function(){var l=n.i(a.e)(this,e),s=l.tween;if(s!==r){o=(r=s).slice();for(var u={name:t,value:i},c=0,_=o.length;c<_;++c)if(o[c].name===t){o[c]=u;break}c===_&&o.push(u)}l.tween=o}}function o(e,t,i){var r=e._id;return e.each(function(){var e=n.i(a.e)(this,r);(e.value||(e.value={}))[t]=i.apply(this,arguments)}),function(e){return n.i(a.f)(e,r).value[t]}}t.b=o;var a=n(5);t.a=function(e,t){var o=this._id;if(e+="",arguments.length<2){for(var l,s=n.i(a.f)(this.node(),o).tween,u=0,c=s.length;u<c;++u)if((l=s[u]).name===e)return l.value;return null}return this.each((null==t?i:r)(o,e,t))}},function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===r)for(var a in i)o.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?e.exports=n:(i=[],void 0!==(r=function(){return n}.apply(t,i))&&(e.exports=r))}()},function(e,t,n){"use strict";function i(e,t){var n=function(e){return 1==e?"":String(e)+" "},i=[],r=[];for(var o in e){var a=e[o];a>0?r.push(n(a)+o):i.push(n(Math.abs(a))+o)}var l=i.join(" + ");return l+=t?" ↔ ":" → ",l+=r.join(" + ")}function r(e){if(!e.reactions||!e.metabolites)throw new Error("Bad model data.");for(var t={},n=0,i=e.genes.length;n<i;n++){var r=e.genes[n],o=r.id;t[o]=r}var a=new _;a.reactions={};for(var n=0,i=e.reactions.length;n<i;n++){var r=e.reactions[n],o=r.id,l=u.clone(r);if(delete l.id,l.bigg_id=o,l.data_string="",l.genes=[],l.reversibility=l.lower_bound<0&&l.upper_bound>0,l.upper_bound<=0&&l.lower_bound<0)for(var s in l.metabolites)l.metabolites[s]=-l.metabolites[s];if(delete l.lower_bound,delete l.upper_bound,"gene_reaction_rule"in l){c.genes_for_gene_reaction_rule(l.gene_reaction_rule).forEach(function(e){if(e in t){var n=u.clone(t[e]);n.bigg_id=n.id,delete n.id,l.genes.push(n)}else console.warn("Could not find gene for gene_id "+e)})}a.reactions[o]=l}a.metabolites={};for(var n=0,i=e.metabolites.length;n<i;n++){var r=e.metabolites[n],o=r.id,d=u.clone(r);delete d.id,d.bigg_id=o,a.metabolites[o]=d}return a}function o(){this.reactions={},this.metabolites={}}function a(e,t,n){c.apply_reaction_data_to_reactions(this.reactions,e,t,n)}function l(e,t,n){c.apply_metabolite_data_to_nodes(this.metabolites,e,t,n)}function s(e,t,n,i,r){c.apply_gene_data_to_reactions(this.reactions,e,t,n,i,r)}var u=n(1),c=n(14),_=u.make_class();_.from_cobra_json=r,_.build_reaction_string=i,_.prototype={init:o,apply_reaction_data:a,apply_metabolite_data:l,apply_gene_data:s},e.exports=_},function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.div=e,this.map=t,this.displacement=n,this.shouldReposition=i,this.visible=!0,this.hide()}function r(){return this.visible}function o(e){this.div.style("display",null);var t=this.map.zoom_container.window_translate,n=this.map.zoom_container.window_scale,i=this.map.get_size();if(this.shouldReposition){var r=Math.max(20,Math.min(i.width-270,n*e.x+t.x-this.displacement.x)),o=Math.max(20,Math.min(i.height-40,n*e.y+t.y-this.displacement.y));this.div.style("position","absolute").style("display","block").style("left",r+"px").style("top",o+"px")}else this.div.style("position","absolute").style("display","block").style("left",n*e.x+t.x-this.displacement.x+"px").style("top",n*e.y+t.y-this.displacement.y+"px");this.visible=!0}function a(){this.visible&&(this.div.style("display","none"),this.visible=!1)}var l=n(1),s=l.make_class();s.prototype={init:i,is_visible:r,place:o,hide:a},e.exports=s},function(e,t,n){"use strict";function i(e){if(Math.abs(e)>Math.PI)throw new Error("Angle must be between -PI and PI");return Math.abs(e)<Math.PI/7||Math.abs(e-Math.PI)<Math.PI/7?{x:-50,y:-40}:e>0?{x:15*(1-Math.abs(e-Math.PI/2)/(Math.PI/2)),y:10+50*(e-Math.PI/2)}:{x:15*(1-Math.abs(e+Math.PI/2)/(Math.PI/2)),y:10-50*(Math.abs(e)-Math.PI/2)}}function r(e,t,n,i,r,o){var a=18*r.length,l=t-(t>o)-n/2>=-1;return Math.abs(e)<Math.PI/7?i||l?{x:.3*-a,y:40}:{x:.3*-a,y:-20}:Math.abs(e-Math.PI)<Math.PI/7?i||!l?{x:.3*-a,y:40}:{x:.3*-a,y:-20}:i?{x:25-38*Math.abs(Math.abs(e)-Math.PI/2),y:(Math.abs(e)-Math.PI/2)*(2*(e>0)-1)*50}:e<0&&l||e>0&&!l?{x:15,y:0}:{x:.5*-a,y:30}}function o(e,t,n,o,l,s,u,c){c=h.to_radians_norm(c);var d=String(++s.reactions),f={x:l.x,y:l.y},b=[f,h.c_plus_c(f,{x:350,y:0})],p={x:(b[0].x+b[1].x)/2,y:(b[0].y+b[1].y)/2},g=i(c),v={name:t.name,bigg_id:t.bigg_id,reversibility:t.reversibility,gene_reaction_rule:t.gene_reaction_rule,genes:h.clone(t.genes),metabolites:h.clone(t.metabolites)};h.extend(v,{label_x:p.x+g.x,label_y:p.y+g.y,segments:{}});var y=[],x=[],w=0,k=0,M=!1;for(var A in v.metabolites){var E=n[A],P=v.metabolites[A],j=E.formula,O={coefficient:P,bigg_id:A,name:E.name};if(P<0){O.index=w;var C=/C([0-9]+)/.exec(j);l.bigg_id===O.bigg_id?y.push([O.index,1/0]):C&&-1===u.indexOf(h.decompartmentalize(O.bigg_id)[0])&&y.push([O.index,parseInt(C[1])]),w++}else{O.index=k;var C=/C([0-9]+)/.exec(j);l.bigg_id===O.bigg_id?(x.push([O.index,1/0]),M=!0):C&&-1===u.indexOf(h.decompartmentalize(O.bigg_id)[0])&&x.push([O.index,parseInt(C[1])]),k++}v.metabolites[A]=O}var S=function(e,t){return t[1]>e[1]?t:e},z=y.reduce(S,[0,0])[0],N=x.reduce(S,[0,0])[0];for(var A in v.metabolites){var E=v.metabolites[A];E.coefficient<0?(E.is_primary=E.index===z,E.count=w):(E.is_primary=E.index===N,E.count=k)}var L={},T=[{node_type:"anchor_reactants",dis:{x:20*(M?1:-1),y:0}},{node_type:"center",dis:{x:0,y:0}},{node_type:"anchor_products",dis:{x:20*(M?-1:1),y:0}}],I={};T.map(function(e){var t=String(++s.nodes),n="center"===e.node_type?"midmarker":"multimarker";L[t]={node_type:n,x:p.x+e.dis.x,y:p.y+e.dis.y,connected_segments:[],name:null,bigg_id:null,label_x:null,label_y:null,node_is_primary:null,data:null},I[e.node_type]=t}),[[I.anchor_reactants,I.center,"reactants"],[I.anchor_products,I.center,"products"]].map(function(e){var t=e[0],n=e[1],i=String(++s.segments),r=0===w&&"reactants"===e[2]&&v.reversibility||0===k&&"products"===e[2];v.segments[i]={b1:null,b2:null,from_node_id:t,to_node_id:n,from_node_coefficient:null,to_node_coefficient:null,reversibility:v.reversibility,data:v.data,reverse_flux:v.reverse_flux,unconnected_segment_with_arrow:r},L[t].connected_segments.push({segment_id:i,reaction_id:d}),L[n].connected_segments.push({segment_id:i,reaction_id:d})});var D=L;for(var A in v.metabolites){var F,R,E=v.metabolites[A];E.coefficient<0?(F=z,R=I.anchor_reactants):(F=N,R=I.anchor_products);var U=_(E,F,b,p,350,M);if(l.bigg_id===E.bigg_id){var B=String(++s.segments);v.segments[B]={b1:U.b1,b2:U.b2,from_node_id:R,to_node_id:o,from_node_coefficient:null,to_node_coefficient:E.coefficient,reversibility:v.reversibility},l.connected_segments.push({segment_id:B,reaction_id:d}),D[R].connected_segments.push({segment_id:B,reaction_id:d})}else{var B=String(++s.segments),q=String(++s.nodes);v.segments[B]={b1:U.b1,b2:U.b2,from_node_id:R,to_node_id:q,from_node_coefficient:null,to_node_coefficient:E.coefficient,reversibility:v.reversibility};var H=r(c,E.index,E.count,E.is_primary,E.bigg_id,F);D[q]={connected_segments:[{segment_id:B,reaction_id:d}],x:U.circle.x,y:U.circle.y,node_is_primary:E.is_primary,label_x:U.circle.x+H.x,label_y:U.circle.y+H.y,name:E.name,bigg_id:E.bigg_id,node_type:"metabolite"},D[R].connected_segments.push({segment_id:B,reaction_id:d})}}var G=[];for(var e in v.metabolites)G.push({bigg_id:e,coefficient:v.metabolites[e].coefficient});v.metabolites=G;var V={};V[d]=v;var X=m(V);return D[o]=l,a(D,V,X,c,f),{new_reactions:V,new_beziers:X,new_nodes:D}}function a(e,t,n,i,r){var o=function(e){return null===e?null:h.rotate_coords(e,i,r)},a=[],l=[];for(var u in e){var c=e[u],_=o({x:c.x,y:c.y}),d=s(c,t,_);c.connected_segments.map(function(e){var i=t[e.reaction_id];if(void 0!==i){var r=e.segment_id,a=i.segments[r];if(a.to_node_id==u&&a.b2){var l=o(a.b2),s=f(r,"b2");a.b2=h.c_plus_c(a.b2,l),n[s].x=a.b2.x,n[s].y=a.b2.y}else if(a.from_node_id==u&&a.b1){var l=o(a.b1),s=f(r,"b1");a.b1=h.c_plus_c(a.b1,l),n[s].x=a.b1.x,n[s].y=a.b1.y}}}),l=h.unique_concat([l,d.reaction_ids]),a.push(u)}return{node_ids:a,reaction_ids:l}}function l(e,t,n,i,r){var o=s(e,n,r);return e.connected_segments.map(function(e){var a=n[e.reaction_id];if(!g.isUndefined(a)){var l=e.segment_id,s=a.segments[l];[["b1","from_node_id"],["b2","to_node_id"]].forEach(function(e){var n=e[0],o=e[1];if(s[o]===t&&s[n]){s[n]=h.c_plus_c(s[n],r);var a=i[f(l,n)];a.x=s[n].x,a.y=s[n].y}}),o.reaction_ids.indexOf(e.reaction_id)<0&&o.reaction_ids.push(e.reaction_id)}}),o}function s(e,t,n){e.x=e.x+n.x,e.y=e.y+n.y,e.label_x=e.label_x+n.x,e.label_y=e.label_y+n.y;var i=[];return e.connected_segments.map(function(r){var o=t[r.reaction_id];i.indexOf(r.reaction_id)<0&&(i.push(r.reaction_id),"midmarker"==e.node_type&&(o.label_x=o.label_x+n.x,o.label_y=o.label_y+n.y))}),{reaction_ids:i}}function u(e,t,n){var i=Math.floor(n/2);return e*(t-i+(t>=i))}function c(e,t,n,i){var r=Math.floor(i/2);return t+Math.abs(n-r+(n>=r))*e}function _(e,t,n,i,r,o){var a=n[0];n=[h.c_minus_c(n[0],a),h.c_minus_c(n[1],a)],i=h.c_minus_c(i,a);var l,s,_=e.count-1;e.is_primary?l=20:(l=10,s=e.index>t?e.index-1:e.index);var d,f,b,p,m=r-l,g=[{x:l,y:0},{x:m,y:0}];return e.coefficient<0!==o&&e.is_primary?(d={x:g[0].x,y:g[0].y},b={x:.6*i.x+.4*g[0].x,y:.6*i.y+.4*g[0].y},p={x:.25*i.x+.75*d.x,y:.25*i.y+.75*d.y},f={x:n[0].x,y:n[0].y}):e.coefficient<0!==o?(d={x:g[0].x+c(20,50,s,_),y:g[0].y+u(24,s,_)},b={x:.6*i.x+.4*g[0].x,y:.6*i.y+.4*g[0].y},p={x:.25*i.x+.75*d.x,y:.25*i.y+.75*d.y},f={x:n[0].x+c(20,50,s,_),y:n[0].y+u(80,s,_)}):e.coefficient>0!==o&&e.is_primary?(d={x:g[1].x,y:g[1].y},b={x:.6*i.x+.4*g[1].x,y:.6*i.y+.4*g[1].y},p={x:.25*i.x+.75*d.x,y:.25*i.y+.75*d.y},f={x:n[1].x,y:n[1].y}):e.coefficient>0!==o&&(d={x:g[1].x-c(20,50,s,_),y:g[1].y+u(24,s,_)},b={x:.6*i.x+.4*g[1].x,y:.6*i.y+.4*g[1].y},p={x:.25*i.x+.75*d.x,y:.25*i.y+.75*d.y},f={x:n[1].x-c(20,50,s,_),y:n[1].y+u(80,s,_)}),{b1:h.c_plus_c(a,b),b2:h.c_plus_c(a,p),circle:h.c_plus_c(a,f)}}function d(e,t,n){return{id:String(++e.text_labels),label:{text:t,x:n.x,y:n.y}}}function f(e,t){return e+"_"+t}function b(e){var t=[];for(var n in e){var i=e[n];for(var r in i.segments){var o=i.segments[r];["b1","b2"].forEach(function(e){null!==o[e]&&t.push(f(r,e))})}}return t}function p(e,t){var n={};for(var i in e){var r=e[i];["b1","b2"].forEach(function(e){var o=r[e];if(null!==o){var a=f(i,e);n[a]={bezier:e,x:o.x,y:o.y,reaction_id:t,segment_id:i}}})}return n}function m(e){var t={};for(var n in e){var i=e[n],r=p(i.segments,n);h.extend(t,r)}return t}var h=n(1),g=n(2);e.exports={get_met_label_loc:r,new_reaction:o,rotate_nodes:a,move_node_and_dependents:l,new_text_label:d,bezier_id_for_segment_id:f,bezier_ids_for_reaction_ids:b,new_beziers_for_segments:p,new_beziers_for_reactions:m}},function(e,t,n){"use strict";var i=n(20);t.a=function(e,t,n){if(null==n&&(n=i.a),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,a=Math.floor(o),l=+n(e[a],a,e);return l+(+n(e[a+1],a+1,e)-l)*(o-a)}}},function(e,t,n){"use strict";function i(){}function r(e,t){var n=new i;if(e instanceof i)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,o=-1,a=e.length;if(null==t)for(;++o<a;)n.set(o,e[o]);else for(;++o<a;)n.set(t(r=e[o],o,e),r)}else if(e)for(var l in e)n.set(l,e[l]);return n}n.d(t,"b",function(){return o});var o="$";i.prototype=r.prototype={constructor:i,has:function(e){return o+e in this},get:function(e){return this[o+e]},set:function(e,t){return this[o+e]=t,this},remove:function(e){var t=o+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===o&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===o&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===o&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===o&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===o&&++e;return e},empty:function(){for(var e in this)if(e[0]===o)return!1;return!0},each:function(e){for(var t in this)t[0]===o&&e(this[t],t.slice(1),this)}},t.a=r},function(e,t,n){"use strict";function i(){}function r(e){var t;return e=(e+"").trim().toLowerCase(),(t=x.exec(e))?(t=parseInt(t[1],16),new u(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=w.exec(e))?o(parseInt(t[1],16)):(t=k.exec(e))?new u(t[1],t[2],t[3],1):(t=M.exec(e))?new u(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=A.exec(e))?a(t[1],t[2],t[3],t[4]):(t=E.exec(e))?a(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=P.exec(e))?c(t[1],t[2]/100,t[3]/100,1):(t=j.exec(e))?c(t[1],t[2]/100,t[3]/100,t[4]):O.hasOwnProperty(e)?o(O[e]):"transparent"===e?new u(NaN,NaN,NaN,0):null}function o(e){return new u(e>>16&255,e>>8&255,255&e,1)}function a(e,t,n,i){return i<=0&&(e=t=n=NaN),new u(e,t,n,i)}function l(e){return e instanceof i||(e=r(e)),e?(e=e.rgb(),new u(e.r,e.g,e.b,e.opacity)):new u}function s(e,t,n,i){return 1===arguments.length?l(e):new u(e,t,n,null==i?1:i)}function u(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function c(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new f(e,t,n,i)}function _(e){if(e instanceof f)return new f(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=r(e)),!e)return new f;if(e instanceof f)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),l=Math.max(t,n,o),s=NaN,u=l-a,c=(l+a)/2;return u?(s=t===l?(n-o)/u+6*(n<o):n===l?(o-t)/u+2:(t-n)/u+4,u/=c<.5?l+a:2-l-a,s*=60):u=c>0&&c<1?0:s,new f(s,u,c,e.opacity)}function d(e,t,n,i){return 1===arguments.length?_(e):new f(e,t,n,null==i?1:i)}function f(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function b(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t.d=i,n.d(t,"f",function(){return m}),n.d(t,"e",function(){return h}),t.a=r,t.c=l,t.h=s,t.b=u,t.g=d;var p=n(38),m=.7,h=1/m,g="\\s*([+-]?\\d+)\\s*",v="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x=/^#([0-9a-f]{3})$/,w=/^#([0-9a-f]{6})$/,k=new RegExp("^rgb\\("+[g,g,g]+"\\)$"),M=new RegExp("^rgb\\("+[y,y,y]+"\\)$"),A=new RegExp("^rgba\\("+[g,g,g,v]+"\\)$"),E=new RegExp("^rgba\\("+[y,y,y,v]+"\\)$"),P=new RegExp("^hsl\\("+[v,y,y]+"\\)$"),j=new RegExp("^hsla\\("+[v,y,y,v]+"\\)$"),O={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n.i(p.a)(i,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),n.i(p.a)(u,s,n.i(p.b)(i,{brighter:function(e){return e=null==e?h:Math.pow(h,e),new u(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?m:Math.pow(m,e),new u(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),n.i(p.a)(f,d,n.i(p.b)(i,{brighter:function(e){return e=null==e?h:Math.pow(h,e),new f(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?m:Math.pow(m,e),new f(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new u(b(e>=240?e-240:e+120,r,i),b(e,r,i),b(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function(e,t,n){"use strict";function i(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}t.b=i,t.a=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e}},function(e,t,n){"use strict";function i(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function r(e,t){var n=i(e);return function(i,r){return t(n(i),r,e)}}function o(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var i in e)i in t||n.push(t[i]=i)}),n}t.a=function(e){function t(e,t){var o,a,l=n(e,function(e,n){if(o)return o(e,n-1);a=e,o=t?r(e,t):i(e)});return l.columns=a,l}function n(e,t){function n(){if(u>=s)return a;if(r)return r=!1,o;var t,n=u;if(34===e.charCodeAt(n)){for(var i=n;i++<s;)if(34===e.charCodeAt(i)){if(34!==e.charCodeAt(i+1))break;++i}return u=i+2,t=e.charCodeAt(i+1),13===t?(r=!0,10===e.charCodeAt(i+2)&&++u):10===t&&(r=!0),e.slice(n+1,i).replace(/""/g,'"')}for(;u<s;){var l=1;if(10===(t=e.charCodeAt(u++)))r=!0;else if(13===t)r=!0,10===e.charCodeAt(u)&&(++u,++l);else if(t!==_)continue;return e.slice(n,u-l)}return e.slice(n)}for(var i,r,o={},a={},l=[],s=e.length,u=0,c=0;(i=n())!==a;){for(var d=[];i!==o&&i!==a;)d.push(i),i=n();t&&null==(d=t(d,c++))||l.push(d)}return l}function a(t,n){return null==n&&(n=o(t)),[n.map(u).join(e)].concat(t.map(function(t){return n.map(function(e){return u(t[e])}).join(e)})).join("\n")}function l(e){return e.map(s).join("\n")}function s(t){return t.map(u).join(e)}function u(e){return null==e?"":c.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}var c=new RegExp('["'+e+"\n\r]"),_=e.charCodeAt(0);return{parse:t,parseRows:n,format:a,formatRows:l}}},function(e,t,n){"use strict";t.a=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}},function(e,t,n){"use strict";function i(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}t.b=i,t.a=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],l=r>0?e[r-1]:2*o-a,s=r<t-1?e[r+2]:2*a-o;return i((n-r/t)*t,l,o,a,s)}}},function(e,t,n){"use strict";var i=n(8),r=n(100),o=n(95),a=n(98),l=n(28),s=n(99),u=n(101),c=n(97);t.a=function(e,t){var _,d=typeof t;return null==t||"boolean"===d?n.i(c.a)(t):("number"===d?l.a:"string"===d?(_=n.i(i.a)(t))?(t=_,r.a):u.a:t instanceof i.a?r.a:t instanceof Date?a.a:Array.isArray(t)?o.a:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?s.a:l.a)(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230);n.d(t,"scaleBand",function(){return i.a}),n.d(t,"scalePoint",function(){return i.b});var r=n(236);n.d(t,"scaleIdentity",function(){return r.a});var o=n(24);n.d(t,"scaleLinear",function(){return o.a});var a=n(237);n.d(t,"scaleLog",function(){return a.a});var l=n(104);n.d(t,"scaleOrdinal",function(){return l.a}),n.d(t,"scaleImplicit",function(){return l.b});var s=n(238);n.d(t,"scalePow",function(){return s.a}),n.d(t,"scaleSqrt",function(){return s.b});var u=n(239);n.d(t,"scaleQuantile",function(){return u.a});var c=n(240);n.d(t,"scaleQuantize",function(){return c.a});var _=n(243);n.d(t,"scaleThreshold",function(){return _.a});var d=n(105);n.d(t,"scaleTime",function(){return d.a});var f=n(245);n.d(t,"scaleUtc",function(){return f.a});var b=n(231);n.d(t,"schemeCategory10",function(){return b.a});var p=n(233);n.d(t,"schemeCategory20b",function(){return p.a});var m=n(234);n.d(t,"schemeCategory20c",function(){return m.a});var h=n(232);n.d(t,"schemeCategory20",function(){return h.a});var g=n(235);n.d(t,"interpolateCubehelixDefault",function(){return g.a});var v=n(241);n.d(t,"interpolateRainbow",function(){return v.a}),n.d(t,"interpolateWarm",function(){return v.b}),n.d(t,"interpolateCool",function(){return v.c});var y=n(246);n.d(t,"interpolateViridis",function(){return y.a}),n.d(t,"interpolateMagma",function(){return y.b}),n.d(t,"interpolateInferno",function(){return y.c}),n.d(t,"interpolatePlasma",function(){return y.d});var x=n(242);n.d(t,"scaleSequential",function(){return x.a})},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";function i(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===a.b&&t.documentElement.namespaceURI===a.b?t.createElement(e):t.createElementNS(n,e)}}function r(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var o=n(46),a=n(47);t.a=function(e){var t=n.i(o.a)(e);return(t.local?r:i)(t)}},function(e,t,n){"use strict";var i=n(47);t.a=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.a.hasOwnProperty(t)?{space:i.a[t],local:e}:e}},function(e,t,n){"use strict";n.d(t,"b",function(){return i});var i="http://www.w3.org/1999/xhtml";t.a={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(e,t,n){"use strict";t.a=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}},function(e,t,n){"use strict";function i(e,t,n){return e=r(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function r(e,t,n){return function(i){var r=c;c=i;try{e.call(this,this.__data__,t,n)}finally{c=r}}}function o(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function a(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function l(e,t,n){var o=u.hasOwnProperty(e.type)?i:r;return function(i,r,a){var l,s=this.__on,u=o(t,r,a);if(s)for(var c=0,_=s.length;c<_;++c)if((l=s[c]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),void(l.value=t);this.addEventListener(e.type,u,n),l={type:e.type,name:e.name,value:t,listener:u,capture:n},s?s.push(l):this.__on=[l]}}function s(e,t,n,i){var r=c;e.sourceEvent=c,c=e;try{return t.apply(n,i)}finally{c=r}}n.d(t,"a",function(){return c}),t.b=s;var u={},c=null;if("undefined"!==typeof document){"onmouseenter"in document.documentElement||(u={mouseenter:"mouseover",mouseleave:"mouseout"})}t.c=function(e,t,n){var i,r,s=o(e+""),u=s.length;{if(!(arguments.length<2)){for(c=t?l:a,null==n&&(n=!1),i=0;i<u;++i)this.each(c(s[i],t,n));return this}var c=this.node().__on;if(c)for(var _,d=0,f=c.length;d<f;++d)for(i=0,_=c[d];i<u;++i)if((r=s[i]).type===_.type&&r.name===_.name)return _.value}}},function(e,t,n){"use strict";function i(){}t.a=function(e){return null==e?i:function(){return this.querySelector(e)}}},function(e,t,n){"use strict";var i=n(49);t.a=function(){for(var e,t=i.a;e=t.sourceEvent;)t=e;return t}},function(e,t,n){"use strict";t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});var i,r,o,a,l,s=n(113);!function(e){i=n.i(s.a)(e),r=i.format,o=i.parse,a=i.utcFormat,l=i.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(e,t,n){"use strict";var i=(n(3),n(283));n.d(t,"t",function(){return i.a}),n.d(t,"h",function(){return i.a});var r=n(286);n.d(t,"s",function(){return r.a}),n.d(t,"g",function(){return r.a});var o=n(284);n.d(t,"r",function(){return o.a});var a=n(282);n.d(t,"q",function(){return a.a});var l=n(281);n.d(t,"i",function(){return l.a});var s=n(293);n.d(t,"p",function(){return s.a}),n.d(t,"k",function(){return s.a}),n.d(t,"l",function(){return s.b});var u=n(285);n.d(t,"o",function(){return u.a});var c=n(294);n.d(t,"j",function(){return c.a});var _=n(289);n.d(t,"f",function(){return _.a});var d=n(288);n.d(t,"e",function(){return d.a});var f=n(287);n.d(t,"d",function(){return f.a});var b=n(291);n.d(t,"c",function(){return b.a}),n.d(t,"m",function(){return b.a}),n.d(t,"n",function(){return b.b});var p=n(290);n.d(t,"b",function(){return p.a});var m=n(292);n.d(t,"a",function(){return m.a})},function(e,t,n){"use strict";function i(){return v||(w(r),v=x.now()+y)}function r(){v=0}function o(){this._call=this._time=this._next=null}function a(e,t,n){var i=new o;return i.restart(e,t,n),i}function l(){i(),++b;for(var e,t=d;t;)(e=v-t._time)>=0&&t._call.call(null,e),t=t._next;--b}function s(){v=(g=x.now())+y,b=p=0;try{l()}finally{b=0,c(),v=0}}function u(){var e=x.now(),t=e-g;t>h&&(y-=t,g=e)}function c(){for(var e,t,n=d,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:d=t);f=e,_(i)}function _(e){if(!b){p&&(p=clearTimeout(p));var t=e-v;t>24?(e<1/0&&(p=setTimeout(s,t)),m&&(m=clearInterval(m))):(m||(g=v,m=setInterval(u,h)),b=1,w(s))}}t.c=i,t.b=o,t.a=a;var d,f,b=0,p=0,m=0,h=1e3,g=0,v=0,y=0,x="object"===typeof performance&&performance.now?performance:Date,w="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};o.prototype=a.prototype={constructor:o,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?i():+n)+(null==t?0:+t),this._next||f===this||(f?f._next=this:d=this,f=this),this._call=e,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(320);n.d(t,"zoom",function(){return i.a});var r=n(118);n.d(t,"zoomTransform",function(){return r.a}),n.d(t,"zoomIdentity",function(){return r.b})},function(e,t,n){"use strict";function i(e,t){return Object.keys(t).some(function(n){return e.target===t[n].base})}function r(e,t){var n=t.min,i=t.max;return e<n||e>i}function o(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function a(e,t){var n=t.marks,i=t.step,r=t.min,o=Object.keys(n).map(parseFloat);if(null!==i){var a=Math.round((e-r)/i)*i+r;o.push(a)}var l=o.map(function(t){return Math.abs(e-t)});return o[l.indexOf(Math.min.apply(Math,l))]}function l(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}function s(e,t){return e?t.clientY:t.pageX}function u(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function c(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:n.left+.5*n.width}function _(e,t){var n=t.max,i=t.min;return e<=i?i:e>=n?n:e}function d(e,t){var n=t.step,i=a(e,t);return null===n?i:parseFloat(i.toFixed(l(n)))}function f(e){e.stopPropagation(),e.preventDefault()}function b(e){switch(e.keyCode){case m.default.UP:case m.default.RIGHT:return function(e,t){return e+t.step};case m.default.DOWN:case m.default.LEFT:return function(e,t){return e-t.step};case m.default.END:return function(e,t){return t.max};case m.default.HOME:return function(e,t){return t.min};case m.default.PAGE_UP:return function(e,t){return e+2*t.step};case m.default.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}}t.__esModule=!0,t.isEventFromHandle=i,t.isValueOutOfRange=r,t.isNotTouchEvent=o,t.getClosestPoint=a,t.getPrecision=l,t.getMousePosition=s,t.getTouchPosition=u,t.getHandleCenterPosition=c,t.ensureValueInRange=_,t.ensureValuePrecision=d,t.pauseEvent=f,t.getKeyboardValueMutator=b;var p=n(323),m=function(e){return e&&e.__esModule?e:{default:e}}(p)},function(e,t){},function(e,t,n){"use strict";function i(){}function r(e){try{return e.then}catch(e){return h=e,g}}function o(e,t){try{return e(t)}catch(e){return h=e,g}}function a(e,t,n){try{e(t,n)}catch(e){return h=e,g}}function l(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==i&&p(e,this)}function s(e,t,n){return new e.constructor(function(r,o){var a=new l(i);a.then(r,o),u(e,new b(t,n,a))})}function u(e,t){for(;3===e._81;)e=e._65;if(l._10&&l._10(e),0===e._81)return 0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t);c(e,t)}function c(e,t){m(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?_(t.promise,e._65):d(t.promise,e._65));var i=o(n,e._65);i===g?d(t.promise,h):_(t.promise,i)})}function _(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=r(t);if(n===g)return d(e,h);if(n===e.then&&t instanceof l)return e._81=3,e._65=t,void f(e);if("function"===typeof n)return void p(n.bind(t),e)}e._81=1,e._65=t,f(e)}function d(e,t){e._81=2,e._65=t,l._97&&l._97(e,t),f(e)}function f(e){if(1===e._45&&(u(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)u(e,e._54[t]);e._54=null}}function b(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function p(e,t){var n=!1,i=a(e,function(e){n||(n=!0,_(t,e))},function(e){n||(n=!0,d(t,e))});n||i!==g||(n=!0,d(t,h))}var m=n(125),h=null,g={};e.exports=l,l._10=null,l._97=null,l._61=i,l.prototype.then=function(e,t){if(this.constructor!==l)return s(this,e,t);var n=new l(i);return u(this,new b(e,t,n)),n}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e,t){this.map=e,this.undo_stack=t,this.empty_behavior=function(){},this.rotation_mode_enabled=!1,this.rotation_drag=k(),this.selectable_mousedown=null,this.text_label_mousedown=null,this.text_label_click=null,this.selectable_drag=this.empty_behavior,this.node_mouseover=null,this.node_mouseout=null,this.label_mousedown=null,this.label_mouseover=null,this.label_mouseout=null,this.label_touch=null,this.bezier_drag=this.empty_behavior,this.bezier_mouseover=null,this.bezier_mouseout=null,this.reaction_label_drag=this.empty_behavior,this.node_label_drag=this.empty_behavior,this.dragging=!1,this.turn_everything_on()}function r(){this.toggle_selectable_click(!0),this.toggle_selectable_drag(!0),this.toggle_label_drag(!0),this.toggle_label_mouseover(!0),this.toggle_label_touch(!0)}function o(){this.toggle_selectable_click(!1),this.toggle_selectable_drag(!1),this.toggle_label_drag(!1),this.toggle_label_mouseover(!1),this.toggle_label_touch(!1)}function a(e){function t(){var e=this.map.sel.selectAll("#rotation-center").data([0]),t=e.enter().append("g").attr("id","rotation-center");t.append("path").attr("d","M-32 0 L32 0").attr("class","rotation-center-line"),t.append("path").attr("d","M0 -32 L0 32").attr("class","rotation-center-line");var n=t.merge(e);n.attr("transform","translate("+this.center.x+","+this.center.y+")").attr("visibility","visible").on("mouseover",function(){var e=parseFloat(n.selectAll("path").style("stroke-width"));n.selectAll("path").style("stroke-width",2*e+"px")}).on("mouseout",function(){n.selectAll("path").style("stroke-width",null)}).call(k().on("drag",function(){var e=x.d3_transform_catch(n.attr("transform")),t=[E.event.dx+e.translate[0],E.event.dy+e.translate[1]];n.attr("transform","translate("+t+")"),this.center={x:t[0],y:t[1]}}.bind(this)))}function n(e){this.map.sel.select("#rotation-center").attr("visibility","hidden")}this.rotation_mode_enabled=void 0===e?!this.rotation_mode_enabled:e;var i=this.map.sel.selectAll(".node-circle"),r=this.map.sel.selectAll("#canvas");if(this.rotation_mode_enabled){this.map.callback_manager.run("start_rotation");var o=this.map.get_selected_nodes();if(0===Object.keys(o).length)return void console.warn("No selected nodes");this.center=function(e){var t=[],n=[];for(var i in e){var r=e[i];void 0!==r.x&&t.push(r.x),void 0!==r.y&&n.push(r.y)}return{x:x.mean(t),y:x.mean(n)}}(o),t.call(this);var a=this.map,l=Object.keys(o),s=this.map.reactions,u=this.map.nodes,c=this.map.beziers,_=function(e){E.event.sourceEvent.stopPropagation()},d=function(e,t,n,i){var r=w.rotate_nodes(o,s,c,t,i);a.draw_these_nodes(r.node_ids),a.draw_these_reactions(r.reaction_ids)},f=function(e){},b=function(e,t,n){var i={};l.forEach(function(e){i[e]=u[e]});var r=w.rotate_nodes(i,s,c,-t,n);a.draw_these_nodes(r.node_ids),a.draw_these_reactions(r.reaction_ids)},p=function(e,t,n){var i={};l.forEach(function(e){i[e]=u[e]});var r=w.rotate_nodes(i,s,c,t,n);a.draw_these_nodes(r.node_ids),a.draw_these_reactions(r.reaction_ids)},m=function(){return this.center}.bind(this);this.rotation_drag=this._get_generic_angular_drag(_,d,f,b,p,m,this.map.sel),r.call(this.rotation_drag),this.selectable_drag=this.rotation_drag}else n.call(this),i.on("mousedown.center",null),r.on("mousedown.center",null),r.on("mousedown.drag",null),r.on("touchstart.drag",null),this.rotation_drag=null,this.selectable_drag=null}function l(e){if(void 0===e&&(e=null===this.selectable_mousedown),e){var t=this.map;this.selectable_mousedown=function(e){E.event.stopPropagation()},this.selectable_click=function(e){E.event.stopPropagation(),E.event.defaultPrevented||t.select_selectable(this,e,E.event.shiftKey)},this.node_mouseover=function(e){M(this).style("stroke-width",null);var t=parseFloat(M(this).style("stroke-width"));M(this.parentNode).classed("selected")||M(this).style("stroke-width",3*t+"px")},this.node_mouseout=function(e){M(this).style("stroke-width",null)}}else this.selectable_mousedown=null,this.selectable_click=null,this.node_mouseover=null,this.node_mouseout=null,this.map.sel.select("#nodes").selectAll(".node-circle").style("stroke-width",null)}function s(e){if(void 0===e&&(e=null==this.text_edit_mousedown),e){var t=this.map;this.selection;this.text_label_mousedown=function(){if(!E.event.defaultPrevented){var e=x.d3_transform_catch(M(this).attr("transform")).translate,n={x:e[0],y:e[1]};t.callback_manager.run("edit_text_label",null,M(this),n),E.event.stopPropagation()}},this.text_label_click=null,this.map.sel.select("#text-labels").selectAll(".label").classed("edit-text-cursor",!0),this.map.sel.on("mousedown.new_text_label",function(e){E.event.preventDefault();var t={x:A(e)[0],y:A(e)[1]};this.map.callback_manager.run("new_text_label",null,t)}.bind(this,this.map.sel.node()))}else this.text_label_mousedown=this.selectable_mousedown,this.text_label_click=this.selectable_click,this.map.sel.select("#text-labels").selectAll(".label").classed("edit-text-cursor",!1),this.map.sel.on("mousedown.new_text_label",null),this.map.callback_manager.run("hide_text_label_editor")}function u(e){void 0===e&&(e=this.selectable_drag===this.empty_behavior),e?(this.selectable_drag=this._get_selectable_drag(this.map,this.undo_stack),this.bezier_drag=this._get_bezier_drag(this.map,this.undo_stack)):(this.selectable_drag=this.empty_behavior,this.bezier_drag=this.empty_behavior)}function c(e){void 0===e&&(e=this.label_drag===this.empty_behavior),e?(this.reaction_label_drag=this._get_reaction_label_drag(this.map),this.node_label_drag=this._get_node_label_drag(this.map)):(this.reaction_label_drag=this.empty_behavior,this.node_label_drag=this.empty_behavior)}function _(e){void 0===e&&(e=null===this.label_mouseover),e?(this.label_mouseover=function(e,t){this.dragging||this.map.callback_manager.run("show_tooltip",null,e,t)}.bind(this),this.label_mouseout=function(){this.map.callback_manager.run("delay_hide_tooltip")}.bind(this)):this.label_mouseover=null}function d(e){void 0===e&&(e=null===this.label_touch),this.label_touch=e?function(e,t){this.dragging||this.map.callback_manager.run("show_tooltip",null,e,t)}.bind(this):null}function f(e){void 0===e&&(e=this.bezier_drag===this.empty_behavior),e?(this.bezier_drag=this._get_bezier_drag(this.map),this.bezier_mouseover=function(e){M(this).style("stroke-width",String(3)+"px")},this.bezier_mouseout=function(e){M(this).style("stroke-width",String(1)+"px")}):(this.bezier_drag=this.empty_behavior,this.bezier_mouseover=null,this.bezier_mouseout=null)}function b(e){e.on("mousedown.drag",null),e.on("touchstart.drag",null)}function p(e,t){function n(t,n){var i=e.nodes[n],r=e.nodes[t],o=[];return i.connected_segments.forEach(function(i){var a;try{if(void 0===(a=e.reactions[i.reaction_id].segments[i.segment_id]))throw new Error("undefined segment")}catch(e){return void console.warn("Could not find connected segment "+i.segment_id)}if(a.from_node_id==n)a.from_node_id=t;else{if(a.to_node_id!=n)return void console.error("Segment does not connect to dragged node");a.to_node_id=t}r.connected_segments.push(i),o.push(x.clone(i))}),e.delete_node_data([n]),e.sel.selectAll(".node-to-combine").classed("node-to-combine",!1),e.draw_everything(),o}var i=k(),r=null,o=null,a=null,l=null,s=null,u=function(t,n){var i=e.text_labels[t];i.x=i.x+n.x,i.y=i.y+n.y},c=function(e){this.dragging=e}.bind(this);return i.on("start",function(t){if(c(!0),E.event.sourceEvent.stopPropagation(),o={x:0,y:0},-1===M(this).attr("class").indexOf("label")){var n=this.parentNode.__data__,i=n.bigg_id,a=this.parentNode;r=setTimeout(function(){a.parentNode.insertBefore(a,a.parentNode.firstChild)},200),e.sel.selectAll(".metabolite-circle").on("mouseover.combine",function(e){e.bigg_id===i&&e.node_id!==n.node_id&&M(this).style("stroke-width",String(12)+"px").classed("node-to-combine",!0)}).on("mouseout.combine",function(t){t.bigg_id===i&&e.sel.selectAll(".node-to-combine").style("stroke-width",String(2)+"px").classed("node-to-combine",!1)})}}),i.on("drag",function(t){M(this.parentNode).classed("selected")||e.select_selectable(this,t);var n={};-1===M(this).attr("class").indexOf("label")?(n.type="node",n.id=this.parentNode.__data__.node_id):(n.type="label",n.id=this.__data__.text_label_id);var i=e.get_selected_node_ids(),r=e.get_selected_text_label_ids();a=[],s=[],"node"==n.type&&-1===i.indexOf(n.id)?a.push(n.id):"label"===n.type&&-1===r.indexOf(n.id)?s.push(n.id):(a=i,s=r),l=[];var c={x:E.event.dx,y:E.event.dy};o=x.c_plus_c(o,c),a.forEach(function(t){var n=e.nodes[t],i=w.move_node_and_dependents(n,t,e.reactions,e.beziers,c);l=x.unique_concat([l,i.reaction_ids])}),s.forEach(function(e){u(e,c)}),e.draw_these_nodes(a),e.draw_these_reactions(l),e.draw_these_text_labels(s)}),i.on("end",function(){if(c(!1),null===a)return o=null,a=null,s=null,l=null,void(r=null);var i=[];if(e.sel.selectAll(".node-to-combine").each(function(e){i.push(e.node_id)}),1===i.length){var _=i[0],d=this.parentNode.__data__.node_id,f=x.clone(e.nodes[d]),b=n(_,d);t.push(function(){e.nodes[d]=f;var t=e.nodes[_],n=[];b.forEach(function(i){var r=e.reactions[i.reaction_id].segments[i.segment_id];r.from_node_id==_?r.from_node_id=d:r.to_node_id==_?r.to_node_id=d:console.error("Segment does not connect to fixed node"),t.connected_segments=t.connected_segments.filter(function(e){return!(e.reaction_id==i.reaction_id&&e.segment_id==i.segment_id)}),-1==n.indexOf(i.reaction_id)&&n.push(i.reaction_id)}),e.draw_these_nodes([d]),e.draw_these_reactions(n)},function(){n(_,d)})}else{var p=x.clone(o),m=x.clone(a),h=x.clone(s),g=x.clone(l);t.push(function(){m.forEach(function(t){var n=e.nodes[t];w.move_node_and_dependents(n,t,e.reactions,e.beziers,x.c_times_scalar(p,-1))}),h.forEach(function(e){u(e,x.c_times_scalar(p,-1))}),e.draw_these_nodes(m),e.draw_these_reactions(g),e.draw_these_text_labels(h)},function(){m.forEach(function(t){var n=e.nodes[t];w.move_node_and_dependents(n,t,e.reactions,e.beziers,p)}),h.forEach(function(e){u(e,p)}),e.draw_these_nodes(m),e.draw_these_reactions(g),e.draw_these_text_labels(h)})}e.sel.selectAll(".metabolite-circle").on("mouseover.combine",null).on("mouseout.combine",null),clearTimeout(r),o=null,a=null,s=null,l=null,r=null}),i}function m(e){var t=function(t,n,i,r,o){var a=e.reactions[t].segments[n];a[i]=x.c_plus_c(a[i],o),e.beziers[r].x=a[i].x,e.beziers[r].y=a[i].y},n=function(e){e.dragging=!0},i=function(n,i,r){t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,i),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])},r=function(e){e.dragging=!1},o=function(n,i){t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,x.c_times_scalar(i,-1)),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])},a=function(n,i){t(n.reaction_id,n.segment_id,n.bezier,n.bezier_id,i),e.draw_these_reactions([n.reaction_id],!1),e.draw_these_beziers([n.bezier_id])};return this._get_generic_drag(n,i,r,o,a,this.map.sel)}function h(e){var t=function(t,n){var i=e.reactions[t];i.label_x=i.label_x+n.x,i.label_y=i.label_y+n.y},n=function(t){e.callback_manager.run("hide_tooltip")},i=function(n,i,r){t(n.reaction_id,i),e.draw_these_reactions([n.reaction_id])},r=function(e){},o=function(n,i){t(n.reaction_id,x.c_times_scalar(i,-1)),e.draw_these_reactions([n.reaction_id])},a=function(n,i){t(n.reaction_id,i),e.draw_these_reactions([n.reaction_id])};return this._get_generic_drag(n,i,r,o,a,this.map.sel)}function g(e){var t=function(t,n){var i=e.nodes[t];i.label_x=i.label_x+n.x,i.label_y=i.label_y+n.y},n=function(t){e.callback_manager.run("hide_tooltip")},i=function(n,i,r){t(n.node_id,i),e.draw_these_nodes([n.node_id])},r=function(e){},o=function(n,i){t(n.node_id,x.c_times_scalar(i,-1)),e.draw_these_nodes([n.node_id])},a=function(n,i){t(n.node_id,i),e.draw_these_nodes([n.node_id])};return this._get_generic_drag(n,i,r,o,a,this.map.sel)}function v(e,t,n,i,r,o){var a,l=k(),s=this.undo_stack,u=o.node();return l.on("start",function(t){this.dragging=!0,E.event.sourceEvent.stopPropagation(),a={x:0,y:0},e(t)}.bind(this)),l.on("drag",function(e){var n={x:E.event.dx,y:E.event.dy},i={x:A(u)[0],y:A(u)[1]};a=x.c_plus_c(a,n),t(e,n,a,i)}.bind(this)),l.on("end",function(e){this.dragging=!1;var t=x.clone(e),o=x.clone(a),l={x:A(u)[0],y:A(u)[1]};s.push(function(){i(t,o,l)},function(){r(t,o,l)}),n(e)}.bind(this)),l}function y(e,t,n,i,r,o,a){var l,s=k(),u=this.undo_stack,c=a.node();return s.on("start",function(t){this.dragging=!0,E.event.sourceEvent.stopPropagation(),l=0,e(t)}.bind(this)),s.on("drag",function(e){var n={x:E.event.dx,y:E.event.dy},i={x:A(c)[0],y:A(c)[1]},r=o(),a=x.angle_for_event(n,i,r);l+=a,t(e,a,l,r)}.bind(this)),s.on("end",function(e){this.dragging=!1;var t=x.clone(e),a=l,s=x.clone(o());u.push(function(){i(t,a,s)},function(){r(t,a,s)}),n(e)}.bind(this)),s}var x=n(1),w=n(34),k=n(16).drag,M=n(0).select,A=n(0).mouse,E=n(0),P=x.make_class();P.prototype={init:i,toggle_rotation_mode:a,turn_everything_on:r,turn_everything_off:o,toggle_selectable_click:l,toggle_text_label_edit:s,toggle_selectable_drag:u,toggle_label_drag:c,toggle_label_mouseover:_,toggle_label_touch:d,toggle_bezier_drag:f,turn_off_drag:b,_get_selectable_drag:p,_get_bezier_drag:m,_get_reaction_label_drag:h,_get_node_label_drag:g,_get_generic_drag:v,_get_generic_angular_drag:y},e.exports=P},function(e,t,n){"use strict";function i(e,t,n,i){this.assigned_keys=e||{},this.input_list=t||[],this.mousetrap=n?new _(n):new _,this.ctrl_equals_cmd=!!d.isBoolean(i)&&i,this.mousetrap.stopCallback=function(){return!1},this.enabled=!0,this.update()}function r(e,t){if(!t)return e;var n=d.isArray(e)?e:[e],i=n.reduce(function(e,t){var n=t.replace("ctrl+","meta+");return n!==t&&e.push(n),e},n.slice());return i.length===n.length?e:i}function o(){if(this.mousetrap.reset(),this.enabled)for(var e in this.assigned_keys){var t=this.assigned_keys[e];if(t.key){var n=r(t.key,this.ctrl_equals_cmd);t.input_list=this.input_list,this.mousetrap.bind(n,function(e){var t=!1;if(this.ignore_with_input)for(var n=0,i=this.input_list.length;n<i;n++)if(this.input_list[n].is_visible()){t=!0;break}t||(this.fn?this.fn.call(this.target):console.warn("No function for key: "+this.key),e.preventDefault())}.bind(t),"keydown")}}}function a(e){d.isUndefined(e)&&(e=!this.enabled),this.enabled=e,this.update()}function l(e,t){return this.add_key_listener("enter",e,t)}function s(e,t){return this.add_key_listener("escape",e,t)}function u(e,t,n){d.isUndefined(n)&&(n=!1);var i=this.mousetrap.unbind.bind(this.mousetrap,e);return this.mousetrap.bind(r(e,this.ctrl_equals_cmd),function(e){e.preventDefault(),t(),n&&i()}),i}var c=n(1),_=n(119),d=n(2),f=c.make_class();f.prototype={init:i,update:o,toggle:a,add_escape_listener:s,add_enter_listener:l,add_key_listener:u},e.exports=f},function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,l,s,u,c){if(null===a){var _=i.get_size();a={x:-_.width,y:-_.height,width:3*_.width,height:3*_.height}}s=Be.isUndefined(s)||null===s||""===s?"new_map":String(s),u=Be.isUndefined(u)||null===u||""===u?Ce.generate_map_id():String(u),c=Be.isUndefined(c)||null===c?"":String(c),this.callback_manager=new Ie,this.svg=e,this.defs=Ce.setup_defs(e,t),this.canvas=new Fe(n,a),this.setup_containers(n),this.sel=n,this.zoom_container=i,this.settings=r,this.cobra_model=o,this.largest_ids={reactions:-1,nodes:-1,segments:-1,text_labels:-1},this.scale=new Ne,this.calc_data_stats("reaction"),this.calc_data_stats("metabolite"),this.scale.connect_to_settings(this.settings,this,O.bind(this)),this.undo_stack=new Te,this.behavior=new ze(this,this.undo_stack),this.draw=new Se(this.behavior,this.settings,this),this.key_manager=new De,this.key_manager.ctrl_equals_cmd=!0,this.enable_search=l,this.search_index=new Ue,this.map_name=s,this.map_id=u,this.map_description=c;this.beziers_enabled=!1,this.has_data_on_reactions=!1,this.has_data_on_nodes=!1,this.imported_reaction_data=null,this.imported_metabolite_data=null,this.imported_gene_data=null,this.nodes={},this.reactions={},this.beziers={},this.text_labels={},this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.rotation_on=!1,this.listen_for_full_screen(function(){setTimeout(function(){this.zoom_extent_canvas()}.bind(this),50)}.bind(this))}function r(e,t,n,i,r,o,a,l){function s(e,t){return Be.isUndefined(t)&&(t=0),Be.isUndefined(e)?t:Math.max.apply(null,Object.keys(e).map(function(e){return parseInt(e)}).concat([t]))}var u=e[1].canvas,c=e[0].map_name,_=e[0].map_id,d=e[0].map_description.replace(/(\nLast Modified.*)+$/g,"")+"\nLast Modified "+Date(Date.now()).toString(),f=new He(t,n,i,r,o,a,u,l,c,_,d);f.reactions=e[1].reactions,f.nodes=e[1].nodes,f.text_labels=e[1].text_labels;for(var b in f.nodes){var p=f.nodes[b];if(p.connected_segments=[],l){if("metabolite"!==p.node_type)continue;f.search_index.insert("n"+b,{name:p.bigg_id,data:{type:"metabolite",node_id:b}}),f.search_index.insert("n_name"+b,{name:p.name,data:{type:"metabolite",node_id:b}})}}for(var m in f.reactions){var h=f.reactions[m];if(l){f.search_index.insert("r"+m,{name:h.bigg_id,data:{type:"reaction",reaction_id:m}}),f.search_index.insert("r_name"+m,{name:h.name,data:{type:"reaction",reaction_id:m}});for(var g in h.genes){var v=h.genes[g];f.search_index.insert("r"+m+"_g"+g,{name:v.bigg_id,data:{type:"reaction",reaction_id:m}}),f.search_index.insert("r"+m+"_g_name"+g,{name:v.name,data:{type:"reaction",reaction_id:m}})}}var y=[];for(var x in h.segments){var w=h.segments[x];if(w.reversibility=h.reversibility,w.from_node_id in f.nodes&&w.to_node_id in f.nodes){var k=f.nodes[w.from_node_id],M=f.nodes[w.to_node_id];h.metabolites.forEach(function(e){e.bigg_id==k.bigg_id?w.from_node_coefficient=e.coefficient:e.bigg_id==M.bigg_id&&(w.to_node_coefficient=e.coefficient)}),[k,M].forEach(function(e){e.connected_segments.push({segment_id:x,reaction_id:m})});var A=f.nodes[w.from_node_id],E=f.nodes[w.to_node_id];if("metabolite"==A.node_type||"metabolite"==E.node_type){var P=Ce.c_plus_c(A,Ce.c_times_scalar(Ce.c_minus_c(E,A),.5));null===w.b1&&(w.b1=P),null===w.b2&&(w.b2=P)}}else console.warn("Bad node references in segment "+x+". Deleting segment."),y.push(x)}y.forEach(function(e){delete h.segments[e]})}if(l)for(var j in f.text_labels){var O=f.text_labels[j];f.search_index.insert("l"+j,{name:O.text,data:{type:"text_label",text_label_id:j}})}f.beziers=Le.new_beziers_for_reactions(f.reactions),f.largest_ids.reactions=s(f.reactions),f.largest_ids.nodes=s(f.nodes),f.largest_ids.text_labels=s(f.text_labels);var C=0;for(var S in f.reactions)C=s(f.reactions[S].segments,C);return f.largest_ids.segments=C,f.apply_reaction_data_to_map(null),f.apply_metabolite_data_to_map(null),f.apply_gene_data_to_map(null),f}function o(e){e.append("g").attr("id","reactions"),e.append("g").attr("id","nodes"),e.append("g").attr("id","beziers"),e.append("g").attr("id","text-labels")}function a(){this.sel.select("#reactions").selectAll(".reaction").remove(),this.sel.select("#nodes").selectAll(".node").remove(),this.sel.select("#beziers").selectAll(".bezier").remove(),this.sel.select("#text-labels").selectAll(".text-label").remove()}function l(e,t){this.callback_manager.run("set_status",null,e),clearTimeout(this._status_timer),this._status_timer=null,void 0!==t&&(this._status_timer=setTimeout(function(){this.callback_manager.run("set_status",null,"")}.bind(this),t))}function s(){this.reactions={},this.beziers={},this.nodes={},this.text_labels={},this.map_name="new_map",this.map_id=Ce.generate_map_id(),this.map_description="",this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.draw_everything()}function u(){return null!==this.cobra_model}function c(){this.draw_all_reactions(!0,!0),this.draw_all_nodes(!0),this.draw_all_text_labels()}function _(e,t){Be.isUndefined(e)&&(e=!0),Be.isUndefined(t)&&(t=!0);var n=[];for(var i in this.reactions)n.push(i);this.draw_these_reactions(n,!1),e&&this.beziers_enabled&&this.draw_all_beziers(),t&&this.clear_deleted_reactions(e)}function d(e,t){Be.isUndefined(t)&&(t=!0);var n=Ce.object_slice_for_ids_ref(this.reactions,e),i=function(e){return this.draw.update_reaction(e,this.scale,this.cobra_model,this.nodes,this.defs,this.has_data_on_reactions)}.bind(this);if(Ce.draw_an_object(this.sel,"#reactions",".reaction",n,"reaction_id",this.draw.create_reaction.bind(this.draw),i),t){var r=Le.bezier_ids_for_reaction_ids(n);this.draw_these_beziers(r)}}function f(e){Be.isUndefined(e)&&(e=!0),Ce.draw_an_object(this.sel,"#reactions",".reaction",this.reactions,"reaction_id",null,function(e){Ce.draw_a_nested_object(e,".segment-group","segments","segment_id",null,null,function(e){e.remove()})},function(e){e.remove()}),!0===e&&this.clear_deleted_beziers()}function b(e){void 0===e&&(e=!0);var t=[];for(var n in this.nodes)t.push(n);this.draw_these_nodes(t),e&&this.clear_deleted_nodes()}function p(e){var t=Ce.object_slice_for_ids_ref(this.nodes,e),n=function(e){return this.draw.create_node(e,this.nodes,this.reactions)}.bind(this),i=function(e){return this.draw.update_node(e,this.scale,this.has_data_on_nodes,this.behavior.selectable_mousedown,this.behavior.selectable_click,this.behavior.node_mouseover,this.behavior.node_mouseout,this.behavior.selectable_drag,this.behavior.node_label_drag)}.bind(this);Ce.draw_an_object(this.sel,"#nodes",".node",t,"node_id",n,i)}function m(){Ce.draw_an_object(this.sel,"#nodes",".node",this.nodes,"node_id",null,null,function(e){e.remove()})}function h(){this.draw_these_text_labels(Object.keys(this.text_labels)),this.clear_deleted_text_labels()}function g(e){var t=Ce.object_slice_for_ids_ref(this.text_labels,e);Ce.draw_an_object(this.sel,"#text-labels",".text-label",t,"text_label_id",this.draw.create_text_label.bind(this.draw),this.draw.update_text_label.bind(this.draw))}function v(){Ce.draw_an_object(this.sel,"#text-labels",".text-label",this.text_labels,"text_label_id",null,null,function(e){e.remove()})}function y(){var e=[];for(var t in this.beziers)e.push(t);this.draw_these_beziers(e),this.clear_deleted_beziers()}function x(e){var t=Ce.object_slice_for_ids_ref(this.beziers,e),n=function(e){return this.draw.update_bezier(e,this.beziers_enabled,this.behavior.bezier_drag,this.behavior.bezier_mouseover,this.behavior.bezier_mouseout,this.nodes,this.reactions)}.bind(this);Ce.draw_an_object(this.sel,"#beziers",".bezier",t,"bezier_id",this.draw.create_bezier.bind(this.draw),n)}function w(){Ce.draw_an_object(this.sel,"#beziers",".bezier",this.beziers,"bezier_id",null,null,function(e){e.remove()})}function k(){this.toggle_beziers(!0)}function M(){this.toggle_beziers(!1)}function A(e){Be.isUndefined(e)?this.beziers_enabled=!this.beziers_enabled:this.beziers_enabled=e,this.draw_all_beziers(),this.callback_manager.run("toggle_beziers",null,this.beziers_enabled)}function E(e,t){var n=this.settings.get_option("reaction_styles"),i=this.settings.get_option("reaction_compare_style"),r=Re.apply_reaction_data_to_reactions(this.reactions,e,n,i,t);return this.has_data_on_reactions=r,this.imported_reaction_data=r?e:null,this.calc_data_stats("reaction")}function P(e,t){var n=this.settings.get_option("metabolite_styles"),i=this.settings.get_option("metabolite_compare_style"),r=Re.apply_metabolite_data_to_nodes(this.nodes,e,n,i,t);return this.has_data_on_nodes=r,this.imported_metabolite_data=r?e:null,this.calc_data_stats("metabolite")}function j(e,t){var n=this.settings.get_option("reaction_styles"),i=this.settings.get_option("reaction_compare_style"),r=this.settings.get_option("identifiers_on_map"),o=this.settings.get_option("and_method_in_gene_reaction_rule"),a=Re.apply_gene_data_to_reactions(this.reactions,e,n,r,i,o,t);return this.has_data_on_reactions=a,this.imported_gene_data=a?e:null,this.calc_data_stats("reaction")}function O(){return this.data_statistics}function C(e){return function(t){return e.apply(null,t)}}function S(e){if(-1===["reaction","metabolite"].indexOf(e))throw new Error("Bad type "+e);"data_statistics"in this?e in this.data_statistics||(this.data_statistics[e]={}):(this.data_statistics={},this.data_statistics[e]={});var t=!0,n=[];if("metabolite"===e)for(var i in this.nodes){var r=this.nodes[i];Be.isUndefined(r.data)?console.error("metabolite missing "):null!==r.data&&n.push(r.data)}else if("reaction"==e)for(var o in this.reactions){var a=this.reactions[o];Be.isUndefined(a.data)?console.error("reaction data missing "):null!==a.data&&n.push(a.data)}var l=Ce.quartiles(n);if([["min",C(Math.min)],["max",C(Math.max)],["mean",Ce.mean],["Q1",function(){return l[0]}],["median",function(){return l[1]}],["Q3",function(){return l[2]}]].forEach(function(i){var r,o=i[0];r=0===n.length?null:(0,i[1])(n),r!=this.data_statistics[e][o]&&(t=!1),this.data_statistics[e][o]=r}.bind(this)),this.data_statistics[e].min===this.data_statistics[e].max&&null!==this.data_statistics[e].min){var s=this.data_statistics[e].min,u=this.data_statistics[e].max;this.data_statistics[e].min=s-1-.1*Math.abs(s),this.data_statistics[e].max=u+1+.1*Math.abs(u)}return"reaction"===e?this.callback_manager.run("calc_data_stats__reaction",null,!t):this.callback_manager.run("calc_data_stats__metabolite",null,!t),!t}function z(){var e=[];return this.sel.select("#nodes").selectAll(".selected").each(function(t){e.push(t.node_id)}),e}function N(){var e={};return this.sel.select("#nodes").selectAll(".selected").each(function(t){e[t.node_id]=this.nodes[t.node_id]}.bind(this)),e}function L(){var e=[];return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e.push(t.text_label_id)}),e}function T(){var e={};return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e[t.text_label_id]=this.text_labels[t.text_label_id]}.bind(this)),e}function I(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",!0)}function D(){this.sel.selectAll(".selected").classed("selected",!1)}function F(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",function(){return!qe(this).classed("selected")})}function R(e){this.deselect_text_labels();var t,n,i=this.sel.select("#nodes").selectAll(".node");i.classed("selected",function(i){var r=String(i.node_id)==String(e);return r&&(n=i,t={x:i.x,y:i.y}),r}),this.sel.selectAll(".start-reaction-target").style("visibility","hidden"),this.callback_manager.run("select_metabolite_with_id",null,n,t)}function U(e,t,n){n=!Be.isUndefined(n)&&n;var i,r=this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label");i=-1==qe(e).attr("class").indexOf("text-label")?e.parentNode:e,n?qe(i).classed("selected",!qe(i).classed("selected")):(r.classed("selected",!1),qe(i).classed("selected",!0));var o,a,l=this.sel.select("#nodes").selectAll(".selected"),s=0;l.each(function(e){a=e,o={x:e.x,y:e.y},s++}),this.callback_manager.run("select_selectable",null,s,a,o)}function B(){var e=null;return this.sel.select("#nodes").selectAll(".selected").classed("selected",function(t,n){return 0===n&&(e=t,!0)}),e}function q(){this.sel.select("#nodes").selectAll(".node").classed("selected",!1),this.callback_manager.run("deselect_nodes")}function H(e,t){this.deselect_nodes(),this.sel.select("#text-labels").selectAll(".text-label").classed("selected",function(e){return t===e});var n,i=this.sel.select("#text-labels").selectAll(".selected");i.each(function(e){n={x:e.x,y:e.y}}),this.callback_manager.run("select_text_label")}function G(){this.sel.select("#text-labels").selectAll(".text-label").classed("selected",!1)}function V(){var e=this.get_selected_nodes(),t=this.get_selected_text_labels();(Object.keys(e).length>=1||Object.keys(t).length>=1)&&this.delete_selectable(e,t,!0)}function X(e,t,n){var i=this.segments_and_reactions_for_nodes(e),r=i.segment_objs_w_segments,o=i.reactions,a=Ce.clone(e),l=Ce.clone(r),s=Ce.clone(o),u=Ce.clone(t),c=function(t,i,r,o){this.delete_node_data(Object.keys(e)),this.delete_segment_data(r),this.delete_reaction_data(Object.keys(i)),this.delete_text_label_data(Object.keys(o));var a=!1,l=!1;this.has_data_on_reactions&&(a=this.calc_data_stats("reaction")),this.has_data_on_nodes&&(l=this.calc_data_stats("metabolite")),n&&(a?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(),l?this.draw_all_nodes(!0):this.clear_deleted_nodes(),this.clear_deleted_text_labels())}.bind(this);c(e,o,r,t),this.undo_stack.push(function(){this.extend_nodes(a),this.extend_reactions(s);var i=Object.keys(s);for(var c in l){var _=l[c],d=_.segment;this.reactions[_.reaction_id].segments[_.segment_id]=d;[d.from_node_id,d.to_node_id].forEach(function(e){if(!(e in a)){this.nodes[e].connected_segments.push({reaction_id:_.reaction_id,segment_id:_.segment_id})}}.bind(this));var f=_.segment_id,b=_.reaction_id,p={};p[f]=_.segment,Ce.extend(this.beziers,Le.new_beziers_for_segments(p,b)),-1===i.indexOf(_.reaction_id)&&i.push(_.reaction_id)}if(this.has_data_on_reactions){var m=this.calc_data_stats("reaction");m?this.draw_all_reactions(!0,!1):this.draw_these_reactions(i)}else n&&this.draw_these_reactions(i);if(this.has_data_on_nodes){var m=this.calc_data_stats("metabolite");n&&(m?this.draw_all_nodes(!1):this.draw_these_nodes(Object.keys(a)))}else n&&this.draw_these_nodes(Object.keys(a));Ce.extend(this.text_labels,u),n&&this.draw_these_text_labels(Object.keys(u)),t=Ce.clone(u),e=Ce.clone(a),r=Ce.clone(l),o=Ce.clone(s)}.bind(this),function(){c(e,o,r,t)}.bind(this))}function K(e){e.forEach(function(e){if(this.enable_search&&"metabolite"==this.nodes[e].node_type){this.search_index.remove("n"+e)&&this.search_index.remove("n_name"+e)||console.warn("Could not find deleted metabolite in search index")}delete this.nodes[e]}.bind(this))}function W(e){for(var t in e){var n=e[t],i=this.reactions[n.reaction_id];if(!(n.segment_id in i.segments))return;var r=i.segments[n.segment_id];[r.from_node_id,r.to_node_id].forEach(function(e){if(e in this.nodes){var t=this.nodes[e];t.connected_segments=t.connected_segments.filter(function(e){return e.segment_id!=n.segment_id})}}.bind(this)),["b1","b2"].forEach(function(e){var t=Le.bezier_id_for_segment_id(n.segment_id,e);delete this.beziers[t]}.bind(this)),delete i.segments[n.segment_id]}}function Y(e){e.forEach(function(e){var t=this.reactions[e];for(var n in t.segments)["b1","b2"].forEach(function(e){var t=Le.bezier_id_for_segment_id(n,e);delete this.beziers[t]}.bind(this));delete this.reactions[e];var i=this.search_index.remove("r"+e)&&this.search_index.remove("r_name"+e);i||console.warn("Could not find deleted reaction "+e+" in search index");for(var r in t.genes){var i=this.search_index.remove("r"+e+"_g"+r)&&this.search_index.remove("r"+e+"_g_name"+r);i||console.warn("Could not find deleted gene "+r+" in search index")}}.bind(this))}function J(e){e.forEach(function(e){delete this.text_labels[e],this.search_index.remove("l"+e)||console.warn("Could not find deleted text label in search index")}.bind(this))}function $(e,t){this.extend_nodes(e);var n=[t];if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");this.apply_metabolite_data_to_map(this.imported_metabolite_data,n)?this.draw_all_nodes(!1):this.draw_these_nodes(n)}else this.draw_these_nodes(n)}function Z(e,t,n){if(!this.cobra_model)return void console.error("No CobraModel. Cannot build new reaction");var i=Ce.clone(this.cobra_model.reactions[e]);if(0===Be.size(i.metabolites))throw Error("No metabolites in reaction "+i.bigg_id);var r=Be.map(i.metabolites,function(e,t){return[e,t]}).filter(function(e){return e[0]<0}).map(function(e){return e[1]}),o=r.length>0?r[0]:Object.keys(i.metabolites)[0],a=this.cobra_model.metabolites[o],l=String(++this.largest_ids.nodes),s=Le.get_met_label_loc(Math.PI/180*n,0,1,!0,o),u={connected_segments:[],x:t.x,y:t.y,node_is_primary:!0,label_x:t.x+s.x,label_y:t.y+s.y,name:a.name,bigg_id:o,node_type:"metabolite"},c={};c[l]=u,$.apply(this,[c,l]);var _=Ce.clone(c),d=this.new_reaction_for_metabolite(e,l,n,!1),f=d.redo,b=d.undo;this.undo_stack.push(function(){b(),this.delete_node_data(Object.keys(c)),c=Ce.clone(_),this.clear_deleted_nodes(),this.deselect_nodes()}.bind(this),function(){$.apply(this,[c,l]),f()}.bind(this))}function Q(e){if(this.enable_search)for(var t in e){var n=e[t];"metabolite"==n.node_type&&(this.search_index.insert("n"+t,{name:n.bigg_id,data:{type:"metabolite",node_id:t}}),this.search_index.insert("n_name"+t,{name:n.name,data:{type:"metabolite",node_id:t}}))}Ce.extend(this.nodes,e)}function ee(e){if(this.enable_search)for(var t in e){var n=e[t];this.search_index.insert("r"+t,{name:n.bigg_id,data:{type:"reaction",reaction_id:t}}),this.search_index.insert("r_name"+t,{name:n.name,data:{type:"reaction",reaction_id:t}});for(var i in n.genes){var r=n.genes[i];this.search_index.insert("r"+t+"_g"+i,{name:r.bigg_id,data:{type:"reaction",reaction_id:t}}),this.search_index.insert("r"+t+"_g_name"+i,{name:r.name,data:{type:"reaction",reaction_id:t}})}}Ce.extend(this.reactions,e)}function te(e,t,n,i){this.extend_reactions(t),Ce.extend(this.beziers,n),this.delete_node_data([i]),this.extend_nodes(e);var r=Object.keys(t);if(this.has_data_on_reactions){var o=!1;if(this.imported_reaction_data)o=this.apply_reaction_data_to_map(this.imported_reaction_data,r);else{if(!this.imported_gene_data)throw new Error("imported_gene_data or imported_reaction_data should not be null");o=this.apply_gene_data_to_map(this.imported_gene_data,r)}o?this.draw_all_reactions(!0,!1):this.draw_these_reactions(r)}else this.draw_these_reactions(r);var a=Object.keys(e);if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");var o=this.apply_metabolite_data_to_map(this.imported_metabolite_data,a);o?this.draw_all_nodes(!1):this.draw_these_nodes(a)}else this.draw_these_nodes(a);for(var l in e){var s=e[l];if(s.node_is_primary&&l!=i){this.select_metabolite_with_id(l);var u={x:s.x,y:s.y};this.zoom_container&&this.zoom_container.translate_off_screen(u)}}}function ne(e,t,n,i){void 0===i&&(i=!0);var r=this.nodes[t],o=this.cobra_model.reactions[e],a=Le.new_reaction(e,o,this.cobra_model.metabolites,t,Ce.clone(r),this.largest_ids,this.settings.get_option("cofactors"),n),l=a.new_nodes,s=a.new_reactions,u=a.new_beziers;te.apply(this,[l,s,u,t]);var c=Ce.clone(l),_=Ce.clone(s),d=Ce.clone(u),f=function(){if(delete l[t],this.delete_node_data(Object.keys(l)),this.delete_reaction_data(Object.keys(s)),R.apply(this,[t]),l=Ce.clone(c),s=Ce.clone(_),u=Ce.clone(d),this.has_data_on_reactions){var e=this.calc_data_stats("reaction");e?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(!0)}else this.clear_deleted_reactions(!0);if(this.has_data_on_nodes){var e=this.calc_data_stats("metabolite");e?this.draw_all_nodes(!0):this.clear_deleted_nodes()}else this.clear_deleted_nodes()}.bind(this),b=function(){te.apply(this,[l,s,u,t])}.bind(this);return i&&this.undo_stack.push(f,b),{undo:f,redo:b}}function ie(){var e,t=this.get_selected_nodes(),n=Object.keys(t)[0],i=(t[n],this.reactions),r=this.nodes,o=[];if(r[n].connected_segments.forEach(function(t){e=[t.reaction_id];var r;try{if(void 0===(r=i[t.reaction_id].segments[t.segment_id]))throw new Error("undefined segment")}catch(e){return void console.warn("Could not find connected segment "+t.segment_id)}o.push(r.from_node_id==n?r.to_node_id:r.from_node_id)}),1!=o.length)return void console.error("Only connected nodes with a single reaction can be selected");var a=o[0],l=[n];r[a].connected_segments.forEach(function(e){var t;try{if(void 0===(t=i[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}var o=t.from_node_id==a?t.to_node_id:t.from_node_id;"metabolite"==r[o].node_type&&o!=n&&l.push(String(o))});for(var s=0;s<l.length;s++)if(r[l[s]].connected_segments.length>1)return void console.error("Only connected nodes with a single reaction can be selected");for(var u in t)if(u!=n&&-1==l.indexOf(u))return void console.warn("Selected nodes are not on the same reaction");var c=[],_=l.length-1,d=r[l[_]],f=d.node_is_primary,b={x:d.x,y:d.y,label_x:d.label_x,label_y:d.label_y};d.connected_segments.length>1&&console.warn("Too many connected segments for node "+d.node_id);var p,m=d.connected_segments[0];try{if(void 0===(p=i[m.reaction_id].segments[m.segment_id]))throw new Error("undefined segment")}catch(e){return void console.error("Could not find connected segment "+m.segment_id)}var h,g={b1:p.b1,b2:p.b2};l.forEach(function(e){var t=r[e],n=t.node_is_primary,o={x:t.x,y:t.y,label_x:t.label_x,label_y:t.label_y},a=t.connected_segments[0],l=i[a.reaction_id].segments[a.segment_id],s={b1:l.b1,b2:l.b2};t.node_is_primary=f,t.x=b.x,t.y=b.y,t.label_x=b.label_x,t.label_y=b.label_y,l.b1=g.b1,l.b2=g.b2,f=n,b=o,g=s,t.node_is_primary&&(h=e),c.push(e)});var v=r[a].connected_segments,_=v.length-1,y=[v[_]];v.forEach(function(e,t){_!=t&&y.push(e)}),r[a].connected_segments=y,this.draw_these_nodes(c),this.draw_these_reactions(e),this.select_metabolite_with_id(h)}function re(){var e=this.get_selected_node_ids(),t=function(e){var t={},n=this.settings.get_option("hide_secondary_metabolites");if(e.forEach(function(e){if(!(e in this.nodes))return void console.warn("Could not find node: "+e);var n=this.nodes[e];"metabolite"==n.node_type&&(n.node_is_primary=!n.node_is_primary,t[e]=n)}.bind(this)),this.draw_these_nodes(Object.keys(t)),n){var i=this.segments_and_reactions_for_nodes(t),r={};for(var o in i.segment_objs_w_segments){r[i.segment_objs_w_segments[o].reaction_id]=!0}this.draw_these_reactions(Object.keys(r))}}.bind(this);t(e),this.undo_stack.push(function(){t(e)},function(){t(e)})}function oe(e){var t={},n={},i={},r=this.reactions;for(var o in e){e[o].connected_segments.forEach(function(e){var n;try{if(void 0===(n=r[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(e){return void console.warn("Could not find connected segments for node")}var o=Ce.clone(e);o.segment=Ce.clone(n),t[e.segment_id]=o,e.reaction_id in i||(i[e.reaction_id]=[]),i[e.reaction_id].push(e.segment_id)})}for(var a in i){var l=r[a],s=i[a],u=!0;for(var c in l.segments)-1==s.indexOf(c)&&(u=!1);u&&(n[a]=l)}return{segment_objs_w_segments:t,reactions:n}}function ae(e,t){this.search_index.insert("l"+e,{name:t,data:{type:"text_label",text_label_id:e}})}function le(e,t){var n=Le.new_text_label(this.largest_ids,t,e);return this.text_labels[n.id]=n.label,this.draw_these_text_labels([n.id]),""!==t&&this.add_label_to_search_index(n.id,t),n.id}function se(e,t,n,i){if(Be.isUndefined(i)&&(i=!1),""===t)throw new Error("Should not be called for empty string");var r=function(t,n){this.text_labels[e].text=t,n&&this.draw_these_text_labels([e]);var r="l"+e,o=this.search_index.remove(r);i||o||console.warn("Could not find modified text label in search index"),this.search_index.insert(r,{name:t,data:{type:"text_label",text_label_id:e}})}.bind(this),o=Ce.clone(this.text_labels[e]);r(t,n),this.undo_stack.push(function(){i?(this.delete_text_label_data([e]),this.clear_deleted_text_labels()):r(o.text,!0)}.bind(this),function(){i?(this.text_labels[e]=Ce.clone(o),this.text_labels[e].text=t,this.draw_these_text_labels([e]),this.add_label_to_search_index(e,t)):r(t,!0)}.bind(this))}function ue(e){this._zoom_extent(e,"nodes")}function ce(e){this._zoom_extent(e,"canvas")}function _e(e,t){Be.isUndefined(e)&&(e="nodes"===t?.2:0),Be.isUndefined(t)&&(t="canvas");var n,i,r=this.get_size();if(e*=r.height,"nodes"===t){var o={x:null,y:null},a={x:null,y:null};for(var l in this.nodes){var s=this.nodes[l];null===o.x&&(o.x=s.x),null===o.y&&(o.y=s.y),null===a.x&&(a.x=s.x),null===a.y&&(a.y=s.y),o.x=Math.min(o.x,s.x),o.y=Math.min(o.y,s.y),a.x=Math.max(a.x,s.x),a.y=Math.max(a.y,s.y)}n=Math.min((r.width-2*e)/(a.x-o.x),(r.height-2*e)/(a.y-o.y)),i={x:-o.x*n+e+(r.width-2*e-(a.x-o.x)*n)/2,y:-o.y*n+e+(r.height-2*e-(a.y-o.y)*n)/2}}else{if("canvas"!=t)return console.error("Did not recognize mode");n=Math.min((r.width-2*e)/this.canvas.width,(r.height-2*e)/this.canvas.height),i={x:-this.canvas.x*n+e+(r.width-2*e-this.canvas.width*n)/2,y:-this.canvas.y*n+e+(r.height-2*e-this.canvas.height*n)/2}}return this.zoom_container.go_to(n,i),null}function de(){return this.zoom_container.get_size()}function fe(e){var t=this.reactions[e],n=this.get_size(),i={x:.5*-t.label_x+n.width/2,y:.5*-t.label_y+n.height/2};this.zoom_container.go_to(.5,i)}function be(e){var t=this.nodes[e],n=this.get_size(),i={x:.5*-t.label_x+n.width/2,y:.5*-t.label_y+n.height/2};this.zoom_container.go_to(.5,i)}function pe(e){var t=this.text_labels[e],n=this.get_size(),i={x:.5*-t.x+n.width/2,y:.5*-t.y+n.height/2};this.zoom_container.go_to(.5,i)}function me(e){this.highlight(this.sel.selectAll("#r"+e).selectAll("text"))}function he(e){this.highlight(this.sel.selectAll("#n"+e).selectAll("text"))}function ge(e){this.highlight(this.sel.selectAll("#l"+e).selectAll("text"))}function ve(e){this.sel.selectAll(".highlight").classed("highlight",!1),null!==e&&e.classed("highlight",!0)}function ye(){return document.fullscreenEnabled?"fullscreenchange":document.mozFullScreenEnabled?"mozfullscreenchange":document.webkitFullscreenEnabled?"webkitfullscreenchange":document.msFullscreenEnabled?"MSFullscreenChange":null}function xe(e){document.addEventListener(ye(),e),this.full_screen_listener=e}function we(){document.removeEventListener(ye(),this.full_screen_listener)}function ke(){var e=this.zoom_container.selection,t=e.node(),n=document;if(n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement)if(e.classed("full-screen-on",!1),n.exitFullscreen)n.exitFullscreen();else if(n.mozCancelFullScreen)n.mozCancelFullScreen();else if(n.webkitExitFullscreen)n.webkitExitFullscreen();else{if(!n.msExitFullscreen)throw Error("Cannot exit full screen");n.msExitFullscreen()}else if(e.classed("full-screen-on",!0),t.requestFullscreen)t.requestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else{if(!t.msRequestFullscreen)throw Error("Full screen does not seem to be supported on this system.");t.msRequestFullscreen()}}function Me(){Ce.download_json(this.map_for_export(),this.map_name)}function Ae(){var e=[{map_name:this.map_name,map_id:this.map_id,map_description:this.map_description,homepage:"https://escher.github.io",schema:"https://escher.github.io/escher/jsonschema/1-0-0#"},{reactions:Ce.clone(this.reactions),nodes:Ce.clone(this.nodes),text_labels:Ce.clone(this.text_labels),canvas:this.canvas.size_and_location()}];for(var t in e[1].reactions){var n=e[1].reactions[t],i={},r=["name","bigg_id","reversibility","label_x","label_y","gene_reaction_rule","genes","metabolites"];r.forEach(function(e){i[e]=n[e]}),i.segments={};for(var o in n.segments){var a=n.segments[o],l={},r=["from_node_id","to_node_id","b1","b2"];r.forEach(function(e){l[e]=a[e]}),i.segments[o]=l}e[1].reactions[t]=i}for(var s in e[1].nodes){var r,u=e[1].nodes[s],c={};r="metabolite"===u.node_type?["node_type","x","y","bigg_id","name","label_x","label_y","node_is_primary"]:["node_type","x","y"],r.forEach(function(e){c[e]=u[e]}),e[1].nodes[s]=c}for(var _ in e[1].text_labels){var d=e[1].text_labels[_],f={},r=["x","y","text"];r.forEach(function(e){f[e]=d[e]}),e[1].text_labels[_]=f}var b=e[1].canvas,p={},r=["x","y","width","height"];return r.forEach(function(e){p[e]=b[e]}),e[1].canvas=p,e}function Ee(e,t,n,i){e.callback_manager.run(t);var r=e.zoom_container.window_scale,o=e.zoom_container.window_translate,a=e.canvas.size_and_location(),l={w:e.canvas.mouse_node.attr("width"),h:e.canvas.mouse_node.attr("height"),transform:e.canvas.mouse_node.attr("transform")};e.zoom_container._go_to_svg(1,{x:-a.x,y:-a.y},function(){e.svg.attr("width",a.width),e.svg.attr("height",a.height),e.canvas.mouse_node.attr("width","0px"),e.canvas.mouse_node.attr("height","0px"),e.canvas.mouse_node.attr("transform",null);var t=e.sel.selectAll(".multimarker-circle,.midmarker-circle,#canvas").style("visibility","hidden");"svg"==i?Ce.download_svg("saved_map",e.svg,!0):"png"==i&&Ce.download_png("saved_map",e.svg,!0),e.zoom_container._go_to_svg(r,o,function(){e.svg.attr("width",null),e.svg.attr("height",null),e.canvas.mouse_node.attr("width",l.w),e.canvas.mouse_node.attr("height",l.h),e.canvas.mouse_node.attr("transform",l.transform),t.style("visibility",null),e.callback_manager.run(n)}.bind(e))}.bind(e))}function Pe(){Ee(this,"before_svg_export","after_svg_export","svg")}function je(){Ee(this,"before_png_export","after_png_export","png")}function Oe(){if(this.callback_manager.run("before_convert_map"),!this.has_cobra_model())throw Error("No COBRA model loaded.");var e,t=this.cobra_model,n={},i=["name","gene_reaction_rule","genes"],r={},o=["name"];for(var a in this.reactions){var l=this.reactions[a];e=!1;for(var s in t.reactions){var u=t.reactions[s];u.bigg_id==l.bigg_id&&(i.forEach(function(e){l[e]=u[e]}),e=!0)}e||(n[a]=!0)}for(var c in this.nodes){var _=this.nodes[c];if("metabolite"==_.node_type){e=!1;for(var d in t.metabolites){var f=t.metabolites[d];f.bigg_id==_.bigg_id&&(o.forEach(function(e){_[e]=f[e]}),e=!0)}e||(r[c]=!0)}}var b=Object.keys(n).length,p=Object.keys(r).length;0===b&&0===p?this.set_status("Successfully converted attributes.",3e3):0===p?(this.set_status("Converted attributes, but count not find "+b+" reactions in the model.",3e3),this.settings.set_conditional("highlight_missing",!0)):0===b?(this.set_status("Converted attributes, but count not find "+p+" metabolites in the model.",3e3),this.settings.set_conditional("highlight_missing",!0)):(this.set_status("Converted attributes, but count not find "+b+" reactions and "+p+" metabolites in the model.",3e3),this.settings.set_conditional("highlight_missing",!0)),this.draw_everything(),this.callback_manager.run("after_convert_map")}var Ce=n(1),Se=n(153),ze=n(63),Ne=n(157),Le=n(34),Te=n(68),Ie=n(10),De=n(64),Fe=n(150),Re=n(14),Ue=n(66),Be=(n(26),n(2)),qe=n(0).select,He=Ce.make_class();He.from_data=r,He.prototype={init:i,setup_containers:o,reset_containers:a,set_status:l,clear_map:s,select_all:I,select_none:D,invert_selection:F,select_selectable:U,select_metabolite_with_id:R,select_single_node:B,deselect_nodes:q,select_text_label:H,deselect_text_labels:G,new_reaction_from_scratch:Z,extend_nodes:Q,extend_reactions:ee,new_reaction_for_metabolite:ne,cycle_primary_node:ie,toggle_selected_node_primary:re,add_label_to_search_index:ae,new_text_label:le,edit_text_label:se,delete_selected:V,delete_selectable:X,delete_node_data:K,delete_segment_data:W,delete_reaction_data:Y,delete_text_label_data:J,get_selected_node_ids:z,get_selected_nodes:N,get_selected_text_label_ids:L,get_selected_text_labels:T,segments_and_reactions_for_nodes:oe,draw_everything:c,draw_all_reactions:_,draw_these_reactions:d,clear_deleted_reactions:f,draw_all_nodes:b,draw_these_nodes:p,clear_deleted_nodes:m,draw_all_text_labels:h,draw_these_text_labels:g,clear_deleted_text_labels:v,draw_all_beziers:y,draw_these_beziers:x,clear_deleted_beziers:w,toggle_beziers:A,hide_beziers:M,show_beziers:k,has_cobra_model:u,apply_reaction_data_to_map:E,apply_metabolite_data_to_map:P,apply_gene_data_to_map:j,get_data_statistics:O,calc_data_stats:S,zoom_extent_nodes:ue,zoom_extent_canvas:ce,_zoom_extent:_e,get_size:de,zoom_to_reaction:fe,zoom_to_node:be,zoom_to_text_label:pe,highlight_reaction:me,highlight_node:he,highlight_text_label:ge,highlight:ve,listen_for_full_screen:xe,unlisten_for_full_screen:we,full_screen:ke,save:Me,map_for_export:Ae,save_svg:Pe,save_png:je,convert_map:Oe},e.exports=He},function(e,t,n){"use strict";function i(){this.index={}}function r(e,t,n,i){if(!n&&e in this.index)throw new Error("id is already in the index");if(i&&!("name"in t&&"data"in t))throw new Error("malformed record");this.index[e]=t}function o(e){return e in this.index&&(delete this.index[e],!0)}function a(e){var t=RegExp(e,"i"),n=[];for(var i in this.index){var r=this.index[i];t.exec(r.name)&&n.push(r.data)}return n}var l=n(1),s=l.make_class();s.prototype={init:i,insert:r,remove:o,find:a},e.exports=s},function(e,t,n){"use strict";function i(e,t,n){this.set_option=e,this.get_option=t,this.status_bus=new d.Bus,this.force_update_bus=new d.Bus,d.Observable.prototype.convert_to_conditional_stream=r,d.Observable.prototype.force_update_with_bus=o,this.busses={},this.streams={};for(var i=0,l=n.length;i<l;i++){var s=n[i],u=a(s,t(s),e,this.status_bus,this.force_update_bus);this.busses[s]=u.bus,this.streams[s]=u.stream}}function r(e){var t=e.map(function(e){return"hold"==e}).not().toProperty(!0),n=e.scan(!1,function(e,t){return 0==e&&("accepted"==t||"rejected"==t)}).not(),i=e.scan(!1,function(e,t){return 0==e&&"hold"==t}).not(),r=d.combineAsArray(this,e),o=r.scan([],function(e,t){if("hold"==t[1])return e.push(t[0]),e;if("accept"==t[1])return e;if("reject"==t[1])return[];if("rejected"==t[1]||"accepted"==t[1])return[t[0]];throw Error("bad status "+t[1])}).filter(t).filter(n).filter(i).flatMap(function(e){return d.fromArray(e)});return this.filter(t).merge(o)}function o(e){return d.combineAsArray(this,e.toProperty(!1)).map(function(e){return e[0]})}function a(e,t,n,i,r){var o=new d.Bus,a=o.convert_to_conditional_stream(i).force_update_with_bus(r);return a.onValue(function(t){n(e,t)}),o.push(t),{bus:o,stream:a}}function l(e,t){if(!(e in this.busses))throw new Error("Invalid setting name");this.busses[e].push(t)}function s(){this.status_bus.push("hold")}function u(){this.status_bus.push("reject"),this.status_bus.push("rejected"),this.force_update_bus.push(!0)}function c(){this.status_bus.push("accept"),this.status_bus.push("accepted")}var _=n(1),d=n(26),f=_.make_class();f.prototype={init:i,set_conditional:l,hold_changes:s,abandon_changes:u,accept_changes:c},e.exports=f},function(e,t,n){"use strict";function i(){this.stack=Array(40),this.current=-1,this.oldest=-1,this.newest=-1,this.end_of_stack=!0,this.top_of_stack=!0}function r(e,t){return e+1>t-1?0:e+1}function o(e,t){return e-1<0?t-1:e-1}function a(e,t){this.current=r(this.current,this.stack.length),this.end_of_stack?this.oldest=this.current:this.oldest==this.current&&(this.oldest=r(this.oldest,this.stack.length)),this.stack[this.current]={undo:e,redo:t},this.newest=this.current,this.top_of_stack=!0,this.end_of_stack=!1}function l(){if(this.end_of_stack)return console.warn("End of stack.");this.stack[this.current].undo(),this.current==this.oldest?this.end_of_stack=!0:this.current=o(this.current,this.stack.length),this.top_of_stack=!1}function s(){if(this.top_of_stack)return console.warn("Top of stack.");this.end_of_stack||(this.current=r(this.current,this.stack.length)),this.stack[this.current].redo(),this.current==this.newest&&(this.top_of_stack=!0),this.end_of_stack=!1}var u=n(1),c=u.make_class();c.prototype={init:i,push:a,undo:l,redo:s},e.exports=c},function(e,t,n){"use strict";function i(e,t,n,i){e.classed("escher-container",!0),i&&(k("html").classed("fill-screen",!0),k("body").classed("fill-screen",!0),e.classed("fill-screen-div",!0));var r=e.append("div").attr("class","escher-zoom-container"),o=r.append("div").attr("class","escher-3d-transform-container"),a=o.append("svg").attr("class","escher-svg").attr("xmlns","http://www.w3.org/2000/svg");a.select(".zoom-g").remove();var l=a.append("g").attr("class","zoom-g");this.selection=e,this.zoom_container=r,this.css3_transform_container=o,this.svg=a,this.zoomed_sel=l,this.window_translate={x:0,y:0},this.window_scale=1,this._scroll_behavior=t,this._use_3d_transform=n,this._pan_drag_on=!0,this._zoom_behavior=null,this._zoom_timeout=null,this._svg_scale=this.window_scale,this._svg_translate=this.window_translate,this.callback_manager=new v,this._update_scroll()}function r(e){this._scroll_behavior=e,this._update_scroll()}function o(e){this._use_3d_transform=e}function a(e){y.isUndefined(e)?this._pan_drag_on=!this._pan_drag_on:this._pan_drag_on=e,this._pan_drag_on?this.zoomed_sel.classed("cursor-grab",!0).classed("cursor-grabbing",!1):this.zoomed_sel.style("cursor",null).classed("cursor-grab",!1).classed("cursor-grabbing",!1),this._update_scroll()}function l(){if(!y.contains(["zoom","pan","none"],this._scroll_behavior))throw Error("Bad value for scroll_behavior: "+this._scroll_behavior);if(this.zoom_container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null).on("dblclick.zoom",null).on("mousewheel.escher",null).on("DOMMouseScroll.escher",null).on("wheel.escher",null).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this._zoom_behavior=x().on("start",function(){M.event.sourceEvent&&"mousedown"===M.event.sourceEvent.type&&this.zoomed_sel.classed("cursor-grab",!1).classed("cursor-grabbing",!0),null!==M.event.sourceEvent&&(M.event.sourceEvent.stopPropagation(),M.event.sourceEvent.preventDefault())}.bind(this)).on("zoom",function(){this._go_to_callback(M.event.transform.k,{x:M.event.transform.x,y:M.event.transform.y})}.bind(this)).on("end",function(){M.event.sourceEvent&&"mouseup"===M.event.sourceEvent.type&&this.zoomed_sel.classed("cursor-grab",!0).classed("cursor-grabbing",!1)}.bind(this)),this.zoom_container.call(this._zoom_behavior),this.zoom_container.on("dblclick.zoom",null),this._pan_drag_on||this.zoom_container.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),"zoom"!==this._scroll_behavior&&this.zoom_container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null),"pan"===this._scroll_behavior){var e=function(){var e=M.event;e.stopPropagation(),e.preventDefault(),e.returnValue=!1;var t=function(e,t){return.5*(y.isUndefined(e)?t:-e/1.5)},n={x:this.window_translate.x-t(e.wheelDeltaX,e.deltaX),y:this.window_translate.y-t(e.wheelDeltaY,e.deltaY)};this.go_to(this.window_scale,n)}.bind(this);this.zoom_container.on("mousewheel.escher",e),this.zoom_container.on("DOMMouseScroll.escher",e),this.zoom_container.on("wheel.escher",e)}this.go_to(this.window_scale,this.window_translate)}function s(e,t){if(g.check_undefined(arguments,["scale","translate"]),!e)throw new Error("Bad scale value");if(!t||!("x"in t)||!("y"in t)||y.isNaN(t.x)||y.isNaN(t.y))throw new Error("Bad translate value");var n=w.translate(t.x,t.y).scale(e);this.zoom_container.call(this._zoom_behavior.transform,n)}function u(e,t){this.window_scale=e,this.window_translate=t,this._use_3d_transform?(y.isNull(this._zoom_timeout)||clearTimeout(this._zoom_timeout),this._go_to_3d(e,t,this._svg_scale,this._svg_translate),this._zoom_timeout=y.delay(function(){this._go_to_svg(e,t)}.bind(this),100)):this._go_to_svg(e,t),this.callback_manager.run("go_to")}function c(e,t,n,i){var r=e/n,o=g.c_minus_c(t,g.c_times_scalar(i,r)),a="translate("+o.x+"px,"+o.y+"px) scale("+r+")";this.css3_transform_container.style("transform",a),this.css3_transform_container.style("-webkit-transform",a),this.css3_transform_container.style("transform-origin","0 0"),this.css3_transform_container.style("-webkit-transform-origin","0 0")}function _(){this.css3_transform_container.style("transform",null),this.css3_transform_container.style("-webkit-transform",null),this.css3_transform_container.style("transform-origin",null),this.css3_transform_container.style("-webkit-transform-origin",null)}function d(e,t,n){this.callback_manager.run("svg_start"),y.defer(function(){this._clear_3d(),this.zoomed_sel.attr("transform","translate("+t.x+","+t.y+") scale("+e+")"),this._svg_scale=e,this._svg_translate=t,y.defer(function(){this.callback_manager.run("svg_finish"),y.isUndefined(n)||n()}.bind(this))}.bind(this))}function f(e){var t=this.get_size(),n={x:t.width/2-((t.width/2-this.window_translate.x)*e+this.window_translate.x),y:t.height/2-((t.height/2-this.window_translate.y)*e+this.window_translate.y)};this.go_to(this.window_scale*e,g.c_plus_c(this.window_translate,n))}function b(){this.zoom_by(1.5)}function p(){this.zoom_by(.667)}function m(){var e=parseInt(this.selection.style("width"),10),t=parseInt(this.selection.style("height"),10);if(y.isNaN(e)||y.isNaN(t))throw new Error("Size not defined for ZoomContainer element.");return{width:e,height:t}}function h(e){var t=this.get_size(),n={x:{min:-this.window_translate.x/this.window_scale+120/this.window_scale,max:-this.window_translate.x/this.window_scale+(t.width-120)/this.window_scale},y:{min:-this.window_translate.y/this.window_scale+120/this.window_scale,max:-this.window_translate.y/this.window_scale+(t.height-120)/this.window_scale}};e.x<n.x.min?(this.window_translate.x=this.window_translate.x-(e.x-n.x.min)*this.window_scale,this.go_to(this.window_scale,this.window_translate)):e.x>n.x.max&&(this.window_translate.x=this.window_translate.x-(e.x-n.x.max)*this.window_scale,this.go_to(this.window_scale,this.window_translate)),e.y<n.y.min?(this.window_translate.y=this.window_translate.y-(e.y-n.y.min)*this.window_scale,this.go_to(this.window_scale,this.window_translate)):e.y>n.y.max&&(this.window_translate.y=this.window_translate.y-(e.y-n.y.max)*this.window_scale,this.go_to(this.window_scale,this.window_translate))}var g=n(1),v=n(10),y=n(2),x=n(56).zoom,w=(n(56).zoomTransform,n(56).zoomIdentity),k=n(0).select,M=n(0),A=g.make_class();A.prototype={init:i,set_scroll_behavior:r,set_use_3d_transform:o,_update_scroll:l,toggle_pan_drag:a,go_to:s,_go_to_callback:u,_go_to_3d:c,_clear_3d:_,_go_to_svg:d,zoom_by:f,zoom_in:b,zoom_out:p,get_size:m,translate_off_screen:h},e.exports=A},function(e,t,n){"use strict";e.exports={version:"1.6.0",builder_embed:"svg.escher-svg .gene-label,svg.escher-svg .label{text-rendering:optimizelegibility;cursor:default}svg.escher-svg #mouse-node{fill:none}svg.escher-svg #canvas{stroke:#ccc;stroke-width:7px;fill:#fff}svg.escher-svg .resize-rect{fill:#000;opacity:0;stroke:none}svg.escher-svg .label{font-family:sans-serif;font-style:italic;font-weight:700;font-size:8px;fill:#000;stroke:none}svg.escher-svg .reaction-label{font-size:30px;fill:#202078;text-rendering:optimizelegibility}svg.escher-svg .node-label{font-size:20px}svg.escher-svg .gene-label{font-size:18px;fill:#202078}svg.escher-svg .text-label .label,svg.escher-svg .text-label-input{font-size:50px}svg.escher-svg .node-circle{stroke-width:2px}svg.escher-svg .midmarker-circle,svg.escher-svg .multimarker-circle{fill:#fff;fill-opacity:.2;stroke:#323232}svg.escher-svg g.selected .node-circle{stroke-width:6px;stroke:#1471c7}svg.escher-svg g.selected .label{fill:#1471c7}svg.escher-svg .metabolite-circle{stroke:#a24510;fill:#e0865b}svg.escher-svg g.selected .metabolite-circle{stroke:#050200}svg.escher-svg .segment{stroke:#334E75;stroke-width:10px;fill:none}svg.escher-svg .arrowhead{fill:#334E75}svg.escher-svg .stoichiometry-label-rect{fill:#fff;opacity:.5}svg.escher-svg .stoichiometry-label{fill:#334E75;font-size:17px}svg.escher-svg .membrane{fill:none;stroke:#fb0}svg.escher-svg .brush .extent{fill-opacity:.1;fill:#000;stroke:#fff;shape-rendering:crispEdges}svg.escher-svg #brush-container .background{fill:none}svg.escher-svg .bezier-circle{fill:#fff}svg.escher-svg .bezier-circle.b1{stroke:red}svg.escher-svg .bezier-circle.b2{stroke:#00f}svg.escher-svg .connect-line{stroke:#c8c8c8}svg.escher-svg .direction-arrow{stroke:#000;stroke-width:1px;fill:#fff;opacity:.3}svg.escher-svg .start-reaction-cursor{cursor:pointer}svg.escher-svg .start-reaction-target{stroke:#646464;fill:none;opacity:.5}svg.escher-svg .rotation-center-line{stroke:red;stroke-width:5px}svg.escher-svg .highlight{fill:#D97000;text-decoration:underline}svg.escher-svg .cursor-grab{cursor:grab;cursor:-webkit-grab}svg.escher-svg .cursor-grabbing{cursor:grabbing;cursor:-webkit-grabbing}svg.escher-svg .edit-text-cursor{cursor:text}"}},function(e,t,n){"use strict";e.exports={version:n(70).version,Builder:n(149),Map:n(65),Behavior:n(63),KeyManager:n(64),DataMenu:n(151),UndoStack:n(68),CobraModel:n(32),utils:n(1),SearchIndex:n(66),Settings:n(67),data_styles:n(14),ui:n(72),static:n(166),ZoomContainer:n(69),libs:{_:n(2),underscore:n(2),baconjs:n(26),mousetrap:n(119),vkbeautify:n(120),d3_selection:n(0),d3_select:n(0).select,d3_json:n(18).json}}},function(e,t,n){"use strict";function i(e,t){var n=t.ignore_bootstrap||!1;e.attr("class","btn btn-default simple-button");var i=e.append("span"),r=i.append("span");"id"in t&&e.attr("id",t.id),"text"in t&&r.text(t.text),"icon"in t&&!n&&i.classed(t.icon,!0),n||r.attr("class","hidden"),"key"in t&&s(e,t.key),"key_text"in t&&"tooltip"in t&&null!==t.key_text?e.attr("title",t.tooltip+t.key_text):"tooltip"in t&&e.attr("title",t.tooltip)}function r(e,t){i(e.append("button"),t)}function o(e){var t=e.append("li").attr("class","btn-group-vertical").attr("data-toggle","buttons");return{button:function(e){var n=(e.ignore_bootstrap,t.append("label"));return n.append("input").attr("type","radio"),i(n,e),this}}}function a(e){var t=e.attr("class","btn-group-vertical");return{button:function(e){return i(t.append("button"),e),this}}}function l(e,t,n){void 0===n&&(n=!1);var i=e.append("li").attr("class","dropdown");i.append("button").text(t+" ").attr("class","btn btn-link btn-sm dropdown-button").attr("data-toggle","dropdown").append("b").attr("class","caret");var r=i.append("ul").attr("class","dropdown-menu").classed("pull-right",n).attr("role","menu").attr("aria-labelledby","dLabel");return{dropdown:i,button:function(e){var t=r.append("li").attr("role","presentation").datum(e),n=t.append("a").attr("href","#"),i=n.append("span").attr("class","dropdown-button-icon"),o=n.append("span").attr("class","dropdown-button-text");if("id"in e&&t.attr("id",e.id),"key_text"in e&&"text"in e&&null!==e.key_text?o.text(" "+e.text+e.key_text):"text"in e&&o.text(" "+e.text),"icon"in e&&i.classed(e.icon,!0),"key"in e)s(n,e.key);else if("input"in e){var a=e.input,l=a.accept_csv?c(n,t,a.pre_fn,a.fn,a.failure_fn):u(n,t,a.pre_fn,a.fn,a.failure_fn);"assign"in a&&"key"in a&&(a.assign[a.key]=l)}return this},divider:function(){return r.append("li").attr("role","presentation").attr("class","divider"),this}}}function s(e,t){e.on("click",function(){t.fn.call(t.target)})}function u(e,t,n,i,r){var o=t.append("input").attr("type","file").style("display","none").on("change",function(){_.load_json(this.files[0],function(e,t){i(e,t),this.value=""}.bind(this),n,r)});return e.on("click",function(e){o.node().click()}),function(){o.node().click()}}function c(e,t,n,i,r){var o=t.append("input").attr("type","file").style("display","none").on("change",function(){_.load_json_or_csv(this.files[0],d.csv_converter,function(e,t){i(e,t),this.value=""}.bind(this),n,r)});return e.on("click",function(e){o.node().click()}),function(){o.node().click()}}var _=n(1),d=n(14);e.exports={individual_button:r,radio_button_group:o,button_group:a,dropdown_menu:l,set_json_input_button:u,set_json_or_csv_input_button:c}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var i=Array.prototype,r=i.slice,o=i.map},function(e,t,n){"use strict";var i=n(15),r=n(75),o=n.i(r.a)(i.a),a=o.right;o.left;t.a=a},function(e,t,n){"use strict";function i(e){return function(t,i){return n.i(r.a)(e(t),i)}}var r=n(15);t.a=function(e){return 1===e.length&&(e=i(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}},function(e,t,n){"use strict";var i=n(84);t.a=function(e,t){var r=n.i(i.a)(e,t);return r?Math.sqrt(r):r}},function(e,t,n){"use strict";t.a=function(e,t){var n,i,r,o=e.length,a=-1;if(null==t){for(;++a<o;)if(null!=(n=e[a])&&n>=n)for(i=r=n;++a<o;)null!=(n=e[a])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++a<o;)if(null!=(n=t(e[a],a,e))&&n>=n)for(i=r=n;++a<o;)null!=(n=t(e[a],a,e))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}},function(e,t,n){"use strict";t.a=function(e,t){var n,i,r=e.length,o=-1;if(null==t){for(;++o<r;)if(null!=(n=e[o])&&n>=n)for(i=n;++o<r;)null!=(n=e[o])&&i>n&&(i=n)}else for(;++o<r;)if(null!=(n=t(e[o],o,e))&&n>=n)for(i=n;++o<r;)null!=(n=t(e[o],o,e))&&i>n&&(i=n);return i}},function(e,t,n){"use strict";function i(e,t){return[e,t]}t.a=i},function(e,t,n){"use strict";t.a=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++i<r;)o[i]=e+i*n;return o}},function(e,t,n){"use strict";t.a=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}},function(e,t,n){"use strict";function i(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=o?10:s>=a?5:s>=l?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=o?10:s>=a?5:s>=l?2:1)}function r(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=o?r*=10:s>=a?r*=5:s>=l&&(r*=2),t<e?-r:r}t.b=i,t.c=r;var o=Math.sqrt(50),a=Math.sqrt(10),l=Math.sqrt(2);t.a=function(e,t,n){var r,o,a,l=t<e,s=-1;if(l&&(r=e,e=t,t=r),0===(a=i(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(r=Math.ceil(t-e+1));++s<r;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(r=Math.ceil(e-t+1));++s<r;)o[s]=(e-s)/a;return l&&o.reverse(),o}},function(e,t,n){"use strict";function i(e){return e.length}var r=n(78);t.a=function(e){if(!(l=e.length))return[];for(var t=-1,o=n.i(r.a)(e,i),a=new Array(o);++t<o;)for(var l,s=-1,u=a[t]=new Array(l);++s<l;)u[s]=e[s][t];return a}},function(e,t,n){"use strict";var i=n(20);t.a=function(e,t){var r,o,a=e.length,l=0,s=-1,u=0,c=0;if(null==t)for(;++s<a;)isNaN(r=n.i(i.a)(e[s]))||(o=r-u,u+=o/++l,c+=o*(r-u));else for(;++s<a;)isNaN(r=n.i(i.a)(t(e[s],s,e)))||(o=r-u,u+=o/++l,c+=o*(r-u));if(l>1)return c/(l-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(183);n.d(t,"brush",function(){return i.a}),n.d(t,"brushX",function(){return i.b}),n.d(t,"brushY",function(){return i.c}),n.d(t,"brushSelection",function(){return i.d})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(189);n.d(t,"nest",function(){return i.a});var r=n(190);n.d(t,"set",function(){return r.a});var o=n(36);n.d(t,"map",function(){return o.a});var a=n(188);n.d(t,"keys",function(){return a.a});var l=n(191);n.d(t,"values",function(){return l.a});var s=n(187);n.d(t,"entries",function(){return s.a})},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i=Math.PI/180,r=180/Math.PI},function(e,t,n){"use strict";function i(e,t){var i=e.document.documentElement,a=n.i(r.select)(e).on("dragstart.drag",null);t&&(a.on("click.drag",o.a,!0),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in i?a.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}t.b=i;var r=n(0),o=n(89);t.a=function(e){var t=e.document.documentElement,i=n.i(r.select)(e).on("dragstart.drag",o.a,!0);"onselectstart"in t?i.on("selectstart.drag",o.a,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}},function(e,t,n){"use strict";function i(){r.event.stopImmediatePropagation()}t.b=i;var r=n(0);t.a=function(){r.event.preventDefault(),r.event.stopImmediatePropagation()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(39);n.d(t,"dsvFormat",function(){return i.a});var r=n(198);n.d(t,"csvParse",function(){return r.a}),n.d(t,"csvParseRows",function(){return r.b}),n.d(t,"csvFormat",function(){return r.c}),n.d(t,"csvFormatRows",function(){return r.d});var o=n(199);n.d(t,"tsvParse",function(){return o.a}),n.d(t,"tsvParseRows",function(){return o.b}),n.d(t,"tsvFormat",function(){return o.c}),n.d(t,"tsvFormatRows",function(){return o.d})},function(e,t,n){"use strict";n.d(t,"b",function(){return i});var i,r=n(40);t.a=function(e,t){var o=n.i(r.a)(e,t);if(!o)return e+"";var a=o[0],l=o[1],s=l-(i=3*Math.max(-8,Math.min(8,Math.floor(l/3))))+1,u=a.length;return s===u?a:s>u?a+new Array(s-u+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+n.i(r.a)(e,Math.max(0,t+s-1))[0]}},function(e,t,n){"use strict";function i(e){return new r(e)}function r(e){if(!(t=a.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",i=t[2]||">",r=t[3]||"-",l=t[4]||"",s=!!t[5],u=t[6]&&+t[6],c=!!t[7],_=t[8]&&+t[8].slice(1),d=t[9]||"";"n"===d?(c=!0,d="g"):o.a[d]||(d=""),(s||"0"===n&&"="===i)&&(s=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=l,this.zero=s,this.width=u,this.comma=c,this.precision=_,this.type=d}t.a=i;var o=n(93),a=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;i.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type}},function(e,t,n){"use strict";var i=n(212),r=n(91),o=n(215);t.a={"":i.a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return n.i(o.a)(100*e,t)},r:o.a,s:r.a,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}}},function(e,t,n){"use strict";var i=n(27),r=n(213),o=n(214),a=n(92),l=n(93),s=n(91),u=n(216),c=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];t.a=function(e){function t(e){function t(e){var t,n,a,l=x,u=w;if("c"===y)u=k(e)+u,e="";else{e=+e;var f=e<0;if(e=k(Math.abs(e),v),f&&0===+e&&(f=!1),l=(f?"("===o?o:"-":"-"===o||"("===o?"":o)+l,u=u+("s"===y?c[8+s.b/3]:"")+(f&&"("===o?")":""),M)for(t=-1,n=e.length;++t<n;)if(48>(a=e.charCodeAt(t))||a>57){u=(46===a?b+e.slice(t+1):e.slice(t))+u,e=e.slice(0,t);break}}g&&!_&&(e=d(e,1/0));var m=l.length+e.length+u.length,A=m<h?new Array(h-m+1).join(i):"";switch(g&&_&&(e=d(A+e,A.length?h-u.length:1/0),A=""),r){case"<":e=l+e+u+A;break;case"=":e=l+A+e+u;break;case"^":e=A.slice(0,m=A.length>>1)+l+e+u+A.slice(m);break;default:e=A+l+e+u}return p(e)}e=n.i(a.a)(e);var i=e.fill,r=e.align,o=e.sign,u=e.symbol,_=e.zero,h=e.width,g=e.comma,v=e.precision,y=e.type,x="$"===u?f[0]:"#"===u&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===u?f[1]:/[%p]/.test(y)?m:"",k=l.a[y],M=!y||/[defgprs%]/.test(y);return v=null==v?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),t.toString=function(){return e+""},t}function _(e,r){var o=t((e=n.i(a.a)(e),e.type="f",e)),l=3*Math.max(-8,Math.min(8,Math.floor(n.i(i.a)(r)/3))),s=Math.pow(10,-l),u=c[8+l/3];return function(e){return o(s*e)+u}}var d=e.grouping&&e.thousands?n.i(r.a)(e.grouping,e.thousands):u.a,f=e.currency,b=e.decimal,p=e.numerals?n.i(o.a)(e.numerals):u.a,m=e.percent||"%";return{format:t,formatPrefix:_}}},function(e,t,n){"use strict";var i=n(42);t.a=function(e,t){var r,o=t?t.length:0,a=e?Math.min(o,e.length):0,l=new Array(o),s=new Array(o);for(r=0;r<a;++r)l[r]=n.i(i.a)(e[r],t[r]);for(;r<o;++r)s[r]=t[r];return function(e){for(r=0;r<a;++r)s[r]=l[r](e);return s}}},function(e,t,n){"use strict";var i=n(41);t.a=function(e){var t=e.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*t),a=e[(o+t-1)%t],l=e[o%t],s=e[(o+1)%t],u=e[(o+2)%t];return n.i(i.b)((r-o/t)*t,a,l,s,u)}}},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";t.a=function(e,t){var n=new Date;return e=+e,t-=e,function(i){return n.setTime(e+t*i),n}}},function(e,t,n){"use strict";var i=n(42);t.a=function(e,t){var r,o={},a={};null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={});for(r in t)r in e?o[r]=n.i(i.a)(e[r],t[r]):a[r]=t[r];return function(e){for(r in o)a[r]=o[r](e);return a}}},function(e,t,n){"use strict";function i(e){return function(t){var i,o,a=t.length,l=new Array(a),s=new Array(a),u=new Array(a);for(i=0;i<a;++i)o=n.i(r.f)(t[i]),l[i]=o.r||0,s[i]=o.g||0,u[i]=o.b||0;return l=e(l),s=e(s),u=e(u),o.opacity=1,function(e){return o.r=l(e),o.g=s(e),o.b=u(e),o+""}}}var r=n(8),o=n(41),a=n(96),l=n(22);t.a=function e(t){function i(e,t){var i=o((e=n.i(r.f)(e)).r,(t=n.i(r.f)(t)).r),a=o(e.g,t.g),s=o(e.b,t.b),u=n.i(l.a)(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=s(t),e.opacity=u(t),e+""}}var o=n.i(l.c)(t);return i.gamma=e,i}(1);i(o.a),i(a.a)},function(e,t,n){"use strict";function i(e){return function(){return e}}function r(e){return function(t){return e(t)+""}}var o=n(28),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l=new RegExp(a.source,"g");t.a=function(e,t){var s,u,c,_=a.lastIndex=l.lastIndex=0,d=-1,f=[],b=[];for(e+="",t+="";(s=a.exec(e))&&(u=l.exec(t));)(c=u.index)>_&&(c=t.slice(_,c),f[d]?f[d]+=c:f[++d]=c),(s=s[0])===(u=u[0])?f[d]?f[d]+=u:f[++d]=u:(f[++d]=null,b.push({i:d,x:n.i(o.a)(s,u)})),_=l.lastIndex;return _<t.length&&(c=t.slice(_),f[d]?f[d]+=c:f[++d]=c),f.length<2?b[0]?r(b[0].x):i(t):(t=b.length,function(e){for(var n,i=0;i<t;++i)f[(n=b[i]).i]=n.x(e);return f.join("")})}},function(e,t,n){"use strict";t.a=function(e,t){e=e.slice();var n,i=0,r=e.length-1,o=e[i],a=e[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),e[i]=t.floor(o),e[r]=t.ceil(a),e}},function(e,t,n){"use strict";t.a=function(e){return+e}},function(e,t,n){"use strict";function i(e){function t(t){var n=t+"",i=l.get(n);if(!i){if(u!==a)return u;l.set(n,i=s.push(t))}return e[(i-1)%e.length]}var l=n.i(r.map)(),s=[],u=a;return e=null==e?[]:o.b.call(e),t.domain=function(e){if(!arguments.length)return s.slice();s=[],l=n.i(r.map)();for(var i,o,a=-1,u=e.length;++a<u;)l.has(o=(i=e[a])+"")||l.set(o,s.push(i));return t},t.range=function(n){return arguments.length?(e=o.b.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(u=e,t):u},t.copy=function(){return i().domain(s).range(e).unknown(u)},t}n.d(t,"b",function(){return a}),t.a=i;var r=n(86),o=n(12),a={name:"implicit"}},function(e,t,n){"use strict";function i(e){return new Date(e)}function r(e){return e instanceof Date?+e:+new Date(+e)}function o(e,t,s,u,y,x,w,k,M){function A(n){return(w(n)<n?C:x(n)<n?S:y(n)<n?z:u(n)<n?N:t(n)<n?s(n)<n?L:T:e(n)<n?I:D)(n)}function E(t,i,r,o){if(null==t&&(t=10),"number"===typeof t){var l=Math.abs(r-i)/t,s=n.i(a.e)(function(e){return e[2]}).right(F,l);s===F.length?(o=n.i(a.d)(i/v,r/v,t),t=e):s?(s=F[l/F[s-1][2]<F[s][2]/l?s-1:s],o=s[1],t=s[0]):(o=n.i(a.d)(i,r,t),t=k)}return null==o?t:t.every(o)}var P=n.i(_.a)(_.b,l.c),j=P.invert,O=P.domain,C=M(".%L"),S=M(":%S"),z=M("%I:%M"),N=M("%I %p"),L=M("%a %d"),T=M("%b %d"),I=M("%B"),D=M("%Y"),F=[[w,1,f],[w,5,5*f],[w,15,15*f],[w,30,30*f],[x,1,b],[x,5,5*b],[x,15,15*b],[x,30,30*b],[y,1,p],[y,3,3*p],[y,6,6*p],[y,12,12*p],[u,1,m],[u,2,2*m],[s,1,h],[t,1,g],[t,3,3*g],[e,1,v]];return P.invert=function(e){return new Date(j(e))},P.domain=function(e){return arguments.length?O(c.a.call(e,r)):O().map(i)},P.ticks=function(e,t){var n,i=O(),r=i[0],o=i[i.length-1],a=o<r;return a&&(n=r,r=o,o=n),n=E(e,r,o,t),n=n?n.range(r,o+1):[],a?n.reverse():n},P.tickFormat=function(e,t){return null==t?A:M(t)},P.nice=function(e,t){var i=O();return(e=E(e,i[0],i[i.length-1],t))?O(n.i(d.a)(i,e)):P},P.copy=function(){return n.i(_.c)(P,o(e,t,s,u,y,x,w,k,M))},P}t.b=o;var a=n(7),l=n(6),s=n(54),u=n(111),c=n(12),_=n(29),d=n(102),f=1e3,b=60*f,p=60*b,m=24*p,h=7*m,g=30*m,v=365*m;t.a=function(){return o(s.j,s.o,s.p,s.i,s.q,s.r,s.s,s.t,u.b).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}},function(e,t,n){"use strict";var i=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var r=document.documentElement;if(!r.matches){var o=r.webkitMatchesSelector||r.msMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector;i=function(e){return function(){return o.call(this,e)}}}}t.a=i},function(e,t,n){"use strict";function i(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t.b=i;var r=n(108),o=n(4);t.a=function(){return new o.b(this._enter||this._groups.map(r.a),this._parents)},i.prototype={constructor:i,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},function(e,t,n){"use strict";t.a=function(e){return new Array(e.length)}},function(e,t,n){"use strict";function i(e){return function(){this.style.removeProperty(e)}}function r(e,t,n){return function(){this.style.setProperty(e,t,n)}}function o(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function a(e,t){return e.style.getPropertyValue(t)||n.i(l.a)(e).getComputedStyle(e,null).getPropertyValue(t)}t.a=a;var l=n(52);t.b=function(e,t,n){return arguments.length>1?this.each((null==t?i:"function"===typeof t?o:r)(e,t,null==n?"":n)):a(this.node(),e)}},function(e,t,n){"use strict";function i(){return[]}t.a=function(e){return null==e?i:function(){return this.querySelectorAll(e)}}},function(e,t,n){"use strict";var i=n(53);n.d(t,"b",function(){return i.c}),n.d(t,"a",function(){return i.a});n(113),n(112),n(280)},function(e,t,n){"use strict";function i(e){return e.toISOString()}n.d(t,"a",function(){return o});var r=n(53),o="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||n.i(r.a)(o)},function(e,t,n){"use strict";function i(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){function t(e,t){return function(n){var i,r,o,a=[],l=-1,s=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===e.charCodeAt(l)&&(a.push(e.slice(s,l)),null!=(r=te[i=e.charAt(++l)])?i=e.charAt(++l):r="e"===i?" ":"0",(o=t[i])&&(i=o(n,r)),a.push(i),s=l+1);return a.push(e.slice(s,l)),a.join("")}}function n(e,t){return function(n){var i=o(1900);if(a(i,e,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var l="Z"in i?r(o(i.y)).getUTCDay():t(o(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(l+5)%7:i.w+7*i.U-(l+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,r(i)):t(i)}}function a(e,t,n,i){for(var r,o,a=0,l=t.length,s=n.length;a<l;){if(i>=s)return-1;if(37===(r=t.charCodeAt(a++))){if(r=t.charAt(a++),!(o=De[r in te?t.charAt(a++):r])||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function l(e,t,n){var i=Ae.exec(t.slice(n));return i?(e.p=Ee[i[0].toLowerCase()],n+i[0].length):-1}function s(e,t,n){var i=Oe.exec(t.slice(n));return i?(e.w=Ce[i[0].toLowerCase()],n+i[0].length):-1}function ee(e,t,n){var i=Pe.exec(t.slice(n));return i?(e.w=je[i[0].toLowerCase()],n+i[0].length):-1}function ne(e,t,n){var i=Ne.exec(t.slice(n));return i?(e.m=Le[i[0].toLowerCase()],n+i[0].length):-1}function ie(e,t,n){var i=Se.exec(t.slice(n));return i?(e.m=ze[i[0].toLowerCase()],n+i[0].length):-1}function re(e,t,n){return a(e,he,t,n)}function oe(e,t,n){return a(e,ge,t,n)}function ae(e,t,n){return a(e,ve,t,n)}function le(e){return we[e.getDay()]}function se(e){return xe[e.getDay()]}function ue(e){return Me[e.getMonth()]}function ce(e){return ke[e.getMonth()]}function _e(e){return ye[+(e.getHours()>=12)]}function de(e){return we[e.getUTCDay()]}function fe(e){return xe[e.getUTCDay()]}function be(e){return Me[e.getUTCMonth()]}function pe(e){return ke[e.getUTCMonth()]}function me(e){return ye[+(e.getUTCHours()>=12)]}var he=e.dateTime,ge=e.date,ve=e.time,ye=e.periods,xe=e.days,we=e.shortDays,ke=e.months,Me=e.shortMonths,Ae=u(ye),Ee=c(ye),Pe=u(xe),je=c(xe),Oe=u(we),Ce=c(we),Se=u(ke),ze=c(ke),Ne=u(Me),Le=c(Me),Te={a:le,A:se,b:ue,B:ce,c:null,d:A,e:A,H:E,I:P,j:j,L:O,m:C,M:S,p:_e,S:z,U:N,w:L,W:T,x:null,X:null,y:I,Y:D,Z:F,"%":Q},Ie={a:de,A:fe,b:be,B:pe,c:null,d:R,e:R,H:U,I:B,j:q,L:H,m:G,M:V,p:me,S:X,U:K,w:W,W:Y,x:null,X:null,y:J,Y:$,Z:Z,"%":Q},De={a:s,A:ee,b:ne,B:ie,c:re,d:g,e:g,H:y,I:y,j:v,L:k,m:h,M:x,p:l,S:w,U:d,w:_,W:f,x:oe,X:ae,y:p,Y:b,Z:m,"%":M};return Te.x=t(ge,Te),Te.X=t(ve,Te),Te.c=t(he,Te),Ie.x=t(ge,Ie),Ie.X=t(ve,Ie),Ie.c=t(he,Ie),{format:function(e){var n=t(e+="",Te);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",i);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",Ie);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,r);return t.toString=function(){return e},t}}}function l(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function s(e){return e.replace(re,"\\$&")}function u(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function c(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function _(e,t,n){var i=ne.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function d(e,t,n){var i=ne.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function f(e,t,n){var i=ne.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function b(e,t,n){var i=ne.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function p(e,t,n){var i=ne.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function m(e,t,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function h(e,t,n){var i=ne.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function g(e,t,n){var i=ne.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function v(e,t,n){var i=ne.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function y(e,t,n){var i=ne.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function x(e,t,n){var i=ne.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function w(e,t,n){var i=ne.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function k(e,t,n){var i=ne.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function M(e,t,n){var i=ie.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function A(e,t){return l(e.getDate(),t,2)}function E(e,t){return l(e.getHours(),t,2)}function P(e,t){return l(e.getHours()%12||12,t,2)}function j(e,t){return l(1+ee.i.count(n.i(ee.j)(e),e),t,3)}function O(e,t){return l(e.getMilliseconds(),t,3)}function C(e,t){return l(e.getMonth()+1,t,2)}function S(e,t){return l(e.getMinutes(),t,2)}function z(e,t){return l(e.getSeconds(),t,2)}function N(e,t){return l(ee.k.count(n.i(ee.j)(e),e),t,2)}function L(e){return e.getDay()}function T(e,t){return l(ee.l.count(n.i(ee.j)(e),e),t,2)}function I(e,t){return l(e.getFullYear()%100,t,2)}function D(e,t){return l(e.getFullYear()%1e4,t,4)}function F(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+l(t/60|0,"0",2)+l(t%60,"0",2)}function R(e,t){return l(e.getUTCDate(),t,2)}function U(e,t){return l(e.getUTCHours(),t,2)}function B(e,t){return l(e.getUTCHours()%12||12,t,2)}function q(e,t){return l(1+ee.d.count(n.i(ee.a)(e),e),t,3)}function H(e,t){return l(e.getUTCMilliseconds(),t,3)}function G(e,t){return l(e.getUTCMonth()+1,t,2)}function V(e,t){return l(e.getUTCMinutes(),t,2)}function X(e,t){return l(e.getUTCSeconds(),t,2)}function K(e,t){return l(ee.m.count(n.i(ee.a)(e),e),t,2)}function W(e){return e.getUTCDay()}function Y(e,t){return l(ee.n.count(n.i(ee.a)(e),e),t,2)}function J(e,t){return l(e.getUTCFullYear()%100,t,2)}function $(e,t){return l(e.getUTCFullYear()%1e4,t,4)}function Z(){return"+0000"}function Q(){return"%"}t.a=a;var ee=n(54),te={"-":"",_:" ",0:"0"},ne=/^\s*\d+/,ie=/^%/,re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g},function(e,t,n){"use strict";var i=n(55);n.d(t,"c",function(){return i.c}),n.d(t,"a",function(){return i.a});var r=n(296);n.d(t,"b",function(){return r.a});n(295)},function(e,t,n){"use strict";var i=(n(298),n(11),n(297),n(116));n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";var i=n(5);t.a=function(e,t){var n,r,o,a=e.__transition,l=!0;if(a){t=null==t?null:t+"";for(o in a)(n=a[o]).name===t?(r=n.state>i.a&&n.state<i.b,n.state=i.c,n.timer.stop(),r&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete a[o]):l=!1;l&&delete e.__transition}}},function(e,t,n){"use strict";var i=n(8),r=n(6);t.a=function(e,t){var o;return("number"===typeof t?r.c:t instanceof i.a?r.d:(o=n.i(i.a)(t))?(t=o,r.d):r.e)(e,t)}},function(e,t,n){"use strict";function i(e,t,n){this.k=e,this.x=t,this.y=n}function r(e){return e.__zoom||o}t.c=i,n.d(t,"b",function(){return o}),t.a=r,i.prototype={constructor:i,scale:function(e){return 1===e?this:new i(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new i(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var o=new i(1,0,0);r.prototype=i.prototype},function(e,t,n){var i;!function(r,o,a){function l(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function s(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return x[e.which]?x[e.which]:w[e.which]?w[e.which]:String.fromCharCode(e.which).toLowerCase()}function u(e,t){return e.sort().join(",")===t.sort().join(",")}function c(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function _(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function d(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function b(){if(!y){y={};for(var e in x)e>95&&e<112||x.hasOwnProperty(e)&&(y[x[e]]=e)}return y}function p(e,t,n){return n||(n=b()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function m(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function h(e,t){var n,i,r,o=[];for(n=m(e),r=0;r<n.length;++r)i=n[r],M[i]&&(i=M[i]),t&&"keypress"!=t&&k[i]&&(i=k[i],o.push("shift")),f(i)&&o.push(i);return t=p(i,o,t),{key:i,modifiers:o,action:t}}function g(e,t){return null!==e&&e!==o&&(e===t||g(e.parentNode,t))}function v(e){function t(e){e=e||{};var t,n=!1;for(t in y)e[t]?n=!0:y[t]=0;n||(k=!1)}function n(e,t,n,i,r,o){var a,l,s=[],c=n.type;if(!m._callbacks[e])return[];for("keyup"==c&&f(e)&&(t=[e]),a=0;a<m._callbacks[e].length;++a)if(l=m._callbacks[e][a],(i||!l.seq||y[l.seq]==l.level)&&c==l.action&&("keypress"==c&&!n.metaKey&&!n.ctrlKey||u(t,l.modifiers))){var _=!i&&l.combo==r,d=i&&l.seq==i&&l.level==o;(_||d)&&m._callbacks[e].splice(a,1),s.push(l)}return s}function i(e,t,n,i){m.stopCallback(t,t.target||t.srcElement,n,i)||!1===e(t,n)&&(_(t),d(t))}function r(e){"number"!==typeof e.which&&(e.which=e.keyCode);var t=s(e);if(t)return"keyup"==e.type&&x===t?void(x=!1):void m.handleKey(t,c(e),e)}function a(){clearTimeout(g),g=setTimeout(t,1e3)}function b(e,n,r,o){function l(n){i(r,n,e),"keyup"!==o&&(x=s(n)),setTimeout(t,10)}y[e]=0;for(var u=0;u<n.length;++u){var c=u+1===n.length,_=c?l:function(t){return function(){k=t,++y[e],a()}}(o||h(n[u+1]).action);p(n[u],_,o,e,u)}}function p(e,t,i,r,o){m._directMap[e+":"+i]=t,e=e.replace(/\s+/g," ");var a,l=e.split(" ");if(l.length>1)return void b(e,l,t,i);a=h(e,i),m._callbacks[a.key]=m._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},r,e,o),m._callbacks[a.key][r?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:e})}var m=this;if(e=e||o,!(m instanceof v))return new v(e);m.target=e,m._callbacks={},m._directMap={};var g,y={},x=!1,w=!1,k=!1;m._handleKey=function(e,r,o){var a,l=n(e,r,o),s={},u=0,c=!1;for(a=0;a<l.length;++a)l[a].seq&&(u=Math.max(u,l[a].level));for(a=0;a<l.length;++a)if(l[a].seq){if(l[a].level!=u)continue;c=!0,s[l[a].seq]=1,i(l[a].callback,o,l[a].combo,l[a].seq)}else c||i(l[a].callback,o,l[a].combo);var _="keypress"==o.type&&w;o.type!=k||f(e)||_||t(s),w=c&&"keydown"==o.type},m._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)p(e[i],t,n)},l(e,"keypress",r),l(e,"keydown",r),l(e,"keyup",r)}if(r){for(var y,x={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},k={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},M={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},A=1;A<20;++A)x[111+A]="f"+A;for(A=0;A<=9;++A)x[A+96]=A.toString();v.prototype.bind=function(e,t,n){var i=this;return e=e instanceof Array?e:[e],i._bindMultiple.call(i,e,t,n),i},v.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},v.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},v.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},v.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!g(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},v.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(x[t]=e[t]);y=null},v.init=function(){var e=v(o);for(var t in e)"_"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),r.Mousetrap=v,"undefined"!==typeof e&&e.exports&&(e.exports=v),void 0!==(i=function(){return v}.call(t,n,t,e))&&(e.exports=i)}}("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)},function(e,t){function n(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}for(var n=["\n"],i=0;i<100;i++)n.push(n[i]+t);return n}function i(){this.step="    ",this.shift=n(this.step)}function r(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function o(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}i.prototype.xml=function(e,t){var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=i.length,o=!1,a=0,l="",s=0,u=t?n(t):this.shift;for(s=0;s<r;s++)i[s].search(/<!/)>-1?(l+=u[a]+i[s],o=!0,(i[s].search(/-->/)>-1||i[s].search(/\]>/)>-1||i[s].search(/!DOCTYPE/)>-1)&&(o=!1)):i[s].search(/-->/)>-1||i[s].search(/\]>/)>-1?(l+=i[s],o=!1):/^<\w/.exec(i[s-1])&&/^<\/\w/.exec(i[s])&&/^<[\w:\-\.\,]+/.exec(i[s-1])==/^<\/[\w:\-\.\,]+/.exec(i[s])[0].replace("/","")?(l+=i[s],o||a--):i[s].search(/<\w/)>-1&&-1==i[s].search(/<\//)&&-1==i[s].search(/\/>/)?l=l+=o?i[s]:u[a++]+i[s]:i[s].search(/<\w/)>-1&&i[s].search(/<\//)>-1?l=l+=o?i[s]:u[a]+i[s]:i[s].search(/<\//)>-1?l=l+=o?i[s]:u[--a]+i[s]:i[s].search(/\/>/)>-1?l=l+=o?i[s]:u[a]+i[s]:i[s].search(/<\?/)>-1?l+=u[a]+i[s]:i[s].search(/xmlns\:/)>-1||i[s].search(/xmlns\=/)>-1?l+=u[a]+i[s]:l+=i[s];return"\n"==l[0]?l.slice(1):l},i.prototype.json=function(e,t){var t=t||this.step;return"undefined"===typeof JSON?e:"string"===typeof e?JSON.stringify(JSON.parse(e),null,t):"object"===typeof e?JSON.stringify(e,null,t):e},i.prototype.css=function(e,t){var i=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=i.length,o=0,a="",l=0,s=t?n(t):this.shift;for(l=0;l<r;l++)/\{/.exec(i[l])?a+=s[o++]+i[l]:/\}/.exec(i[l])?a+=s[--o]+i[l]:(/\*\\/.exec(i[l]),a+=s[o]+i[l]);return a.replace(/^\n{1,}/,"")},i.prototype.sql=function(e,t){var i=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),a=i.length,l=[],s=0,u=this.step,c=0,_="",d=0,f=t?n(t):this.shift;for(d=0;d<a;d++)l=d%2?l.concat(i[d]):l.concat(o(i[d],u));for(a=l.length,d=0;d<a;d++){c=r(l[d],c),/\s{0,}\s{0,}SELECT\s{0,}/.exec(l[d])&&(l[d]=l[d].replace(/\,/g,",\n"+u+u)),/\s{0,}\s{0,}SET\s{0,}/.exec(l[d])&&(l[d]=l[d].replace(/\,/g,",\n"+u+u)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(l[d])?(s++,_+=f[s]+l[d]):/\'/.exec(l[d])?(c<1&&s&&s--,_+=l[d]):(_+=f[s]+l[d],c<1&&s&&s--)}return _=_.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},i.prototype.xmlmin=function(e,t){return(t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},i.prototype.jsonmin=function(e){return"undefined"===typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},i.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},i.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},e.exports=new i},function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(13),o=function(e){var t=e.className,n=e.included,o=e.vertical,a=e.offset,l=e.length,s=e.style,u=o?{bottom:a+"%",height:l+"%"}:{left:a+"%",width:l+"%"},c=i({visibility:n?"visible":"hidden"},s,u);return(0,r.h)("div",{className:t,style:c})};t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){}function u(e){var t,n;return n=t=function(e){function t(n){o(this,t);var i=a(this,e.call(this,n));return i.onMouseDown=function(e){if(0===e.button){var t=i.props.vertical,n=k.getMousePosition(t,e);if(k.isEventFromHandle(e,i.handlesRefs)){var r=k.getHandleCenterPosition(t,e.target);i.dragOffset=n-r,n=r}else i.dragOffset=0;i.onStart(n),i.addDocumentMouseEvents(),k.pauseEvent(e)}},i.onTouchStart=function(e){if(!k.isNotTouchEvent(e)){var t=i.props.vertical,n=k.getTouchPosition(t,e);if(k.isEventFromHandle(e,i.handlesRefs)){var r=k.getHandleCenterPosition(t,e.target);i.dragOffset=n-r,n=r}else i.dragOffset=0;i.onStart(n),i.addDocumentTouchEvents(),k.pauseEvent(e)}},i.onFocus=function(e){var t=i.props.vertical;if(k.isEventFromHandle(e,i.handlesRefs)){var n=k.getHandleCenterPosition(t,e.target);i.dragOffset=0,i.onStart(n),k.pauseEvent(e)}},i.onBlur=function(e){i.onEnd(e)},i.onMouseMove=function(e){if(!i.sliderRef)return void i.onEnd();var t=k.getMousePosition(i.props.vertical,e);i.onMove(e,t-i.dragOffset)},i.onTouchMove=function(e){if(k.isNotTouchEvent(e)||!i.sliderRef)return void i.onEnd();var t=k.getTouchPosition(i.props.vertical,e);i.onMove(e,t-i.dragOffset)},i.onKeyDown=function(e){i.sliderRef&&k.isEventFromHandle(e,i.handlesRefs)&&i.onKeyboard(e)},i.saveSlider=function(e){i.sliderRef=e},i.handlesRefs={},i}return l(t,e),t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount&&e.prototype.componentWillUnmount.call(this),this.removeDocumentEvents()},t.prototype.addDocumentTouchEvents=function(){this.onTouchMoveListener=(0,f.default)(document,"touchmove",this.onTouchMove),this.onTouchUpListener=(0,f.default)(document,"touchend",this.onEnd)},t.prototype.addDocumentMouseEvents=function(){this.onMouseMoveListener=(0,f.default)(document,"mousemove",this.onMouseMove),this.onMouseUpListener=(0,f.default)(document,"mouseup",this.onEnd)},t.prototype.removeDocumentEvents=function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()},t.prototype.getSliderStart=function(){var e=this.sliderRef,t=e.getBoundingClientRect();return this.props.vertical?t.top:t.left},t.prototype.getSliderLength=function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width},t.prototype.calcValue=function(e){var t=this.props,n=t.vertical,i=t.min,r=t.max,o=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-o)*(r-i)+i:o*(r-i)+i},t.prototype.calcValueByPos=function(e){var t=e-this.getSliderStart();return this.trimAlignValue(this.calcValue(t))},t.prototype.calcOffset=function(e){var t=this.props,n=t.min;return(e-n)/(t.max-n)*100},t.prototype.saveHandle=function(e,t){this.handlesRefs[e]=t},t.prototype.render=function(){var t,n=this.props,i=n.prefixCls,r=n.className,o=n.marks,a=n.dots,l=n.step,u=n.included,d=n.disabled,f=n.vertical,b=n.min,m=n.max,g=n.children,y=n.maximumTrackStyle,x=n.style,w=n.railStyle,k=n.dotStyle,M=n.activeDotStyle,A=e.prototype.render.call(this),E=A.tracks,P=A.handles,j=(0,p.default)(i,(t={},t[i+"-with-marks"]=Object.keys(o).length,t[i+"-disabled"]=d,t[i+"-vertical"]=f,t[r]=r,t));return(0,_.h)("div",{ref:this.saveSlider,className:j,onTouchStart:d?s:this.onTouchStart,onMouseDown:d?s:this.onMouseDown,onKeyDown:d?s:this.onKeyDown,onFocus:d?s:this.onFocus,onBlur:d?s:this.onBlur,style:x},(0,_.h)("div",{className:i+"-rail",style:c({},y,w)}),E,(0,_.h)(h.default,{prefixCls:i,vertical:f,marks:o,dots:a,step:l,included:u,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:m,min:b,dotStyle:k,activeDotStyle:M}),P,(0,_.h)(v.default,{className:i+"-mark",vertical:f,marks:o,included:u,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:m,min:b}),g)},t}(e),t.displayName="ComponentEnhancer("+e.displayName+")",t.defaultProps=c({},e.defaultProps,{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=(e.index,r(e,["index"]));return delete t.dragging,(0,_.h)(x.default,t)},onBeforeChange:s,onChange:s,onAfterChange:s,included:!0,disabled:!1,dots:!1,vertical:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=u;var _=n(13),d=n(331),f=i(d),b=n(31),p=i(b),m=n(327),h=i(m),g=n(324),v=i(g),y=n(322),x=i(y),w=n(57),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(w)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(141).enable(),window.Promise=n(140)),n(143),Object.assign=n(139)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),r=n(126),o=n(130),a=n(134);n.n(a);n.i(i.a)(n.i(i.b)(r.a,null),document.getElementById("root")),n.i(o.a)()},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),l=!0),a[a.length]=e}function i(){for(;s<a.length;){var e=s;if(s+=1,a[e].call(),s>u){for(var t=0,n=a.length-s;t<n;t++)a[t]=a[t+s];a.length-=s,s=0}}a.length=0,s=0,l=!1}function r(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var o,a=[],l=!1,s=0,u=1024,c="undefined"!==typeof t?t:self,_=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof _?function(e){var t=1,n=new _(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}(i):r(i),n.requestFlush=o,n.makeRequestCallFromTimer=r}).call(t,n(62))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(25),l=n(132),s=(n.n(l),n(131)),u=(n.n(s),n(128)),c=n(127),_=n(71),d=(n.n(_),n(146)),f=n.n(d),b=n(145),p=n.n(b),m=n(144),h=n.n(m),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=_.libs.underscore,y=new h.a,x=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modelData:f.a,model:null,reactionData:null,objectiveFlux:0},n.runThrottledOptimization=v.throttle(n.runOptimization,200),n}return o(t,e),g(t,[{key:"componentWillMount",value:function(){this.setState({model:c.a(this.state.modelData),oldModel:c.a(this.state.modelData)})}},{key:"componentDidMount",value:function(){for(var e=this,t=this.state.model.reactions,n=null,i=null,r=null,o=null,a=0,l=t.length;a<l;a++)1===t[a].objective_coefficient&&(n=t[a].id);y.postMessage(this.state.model),y.onmessage=function(t){o=t.data,null===o.objectiveValue?(i=null,r="Infeasible solution/Dead cell"):(i=o.fluxes,r=o.objectiveValue.toFixed(3)),e.setState({currentObjective:n,reactionData:i,objectiveFlux:r})}}},{key:"loadModel",value:function(e){var t=this,n=c.a(e),i=c.a(e),r=null,o=null,a=null,l=null;if(null!==n){for(var s=n.reactions,u=0,_=s.length;u<_;u++)1===s[u].objective_coefficient&&(r=s[u].id);y.postMessage(n),y.onmessage=function(s){l=s.data,null===l.objectiveValue?(o=null,a="Infeasible solution/Dead cell"):(o=l.fluxes,a=l.objectiveValue.toFixed(3)),t.setState({modelData:e,model:n,oldModel:i,currentObjective:r,reactionData:o,objectiveFlux:a})}}else this.setState({modelData:e,model:n,oldModel:i,currentObjective:r,reactionData:o,objectiveFlux:a})}},{key:"runOptimization",value:function(e,t){var n=this,i=null;y.postMessage(this.state.model),y.onmessage=function(r){i=r.data,null===i.objectiveValue?(e=null,t="Infeasible solution/Dead cell"):(e=i.fluxes,t=i.objectiveValue.toFixed(3)),n.setState({reactionData:e,objectiveFlux:t})}}},{key:"sliderChange",value:function(e,t){for(var n=this.state.model.reactions,i=0,r=n.length;i<r;i++)n[i].id===t&&(n[i].lower_bound=e[0],n[i].upper_bound=e[1]);this.runThrottledOptimization(null,null)}},{key:"resetMap",value:function(){for(var e=this,t=c.a(this.state.modelData),n=t.reactions,i=null,r=null,o=null,a=null,l=0,s=n.length;l<s;l++)1===n[l].objective_coefficient&&(i=n[l].id);y.postMessage(t),y.onmessage=function(n){a=n.data,null===a.objectiveValue?(o=null,r="Infeasible solution/Dead cell"):(o=a.fluxes,r=a.objectiveValue.toFixed(3)),e.setState({model:t,currentObjective:i,reactionData:o,objectiveFlux:r})}}},{key:"setObjective",value:function(e){for(var t=this,n=this.state.model.reactions,i=null,r=null,o=null,a=null,l=0,s=n.length;l<s;l++)n[l].id===e?n[l].objective_coefficient=1:n[l].objective_coefficient=0;y.postMessage(this.state.model),y.onmessage=function(n){a=n.data,null===a.objectiveValue?(r=null,o=t.state.model,i="Infeasible solution/Dead cell"):(r=a.fluxes,o=t.state.model,i=a.objectiveValue.toFixed(3)),t.setState({reactionData:r,model:o,currentObjective:e,objectiveFlux:i})}}},{key:"render",value:function(){var e=this;return n.i(a.b)("div",{className:"App"},n.i(a.b)(u.a,{model:this.state.model,oldModel:this.state.oldModel,map:p.a,reactionData:this.state.reactionData,currentObjective:this.state.currentObjective,sliderChange:function(t,n){return e.sliderChange(t,n)},resetReaction:function(t){return e.resetReaction(t)},setObjective:function(t){return e.setObjective(t)},loadModel:function(t){return e.loadModel(t)},lowerRange:-25,upperRange:25,step:.1}),n.i(a.b)("div",{className:"bottomPanel"},n.i(a.b)("div",{className:"statusBar",style:{height:"45px",color:"red",backgroundColor:"white",fontSize:"16px"}},"Current Flux: ",this.state.currentObjective,n.i(a.b)("br",null),"Flux Through Objective: ",this.state.objectiveFlux),n.i(a.b)("button",{className:"resetMapButton",onClick:function(){return e.resetMap()}},"Reset Map")))}}]),t}(a.c);t.a=x},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=new l;return null!==e?(t.reactions=e.reactions.map(function(e){return Object.assign({},e)}),t.metabolites=e.metabolites.map(function(e){return Object.assign({},e)}),t.genes=e.genes.map(function(e){return Object.assign({},e)}),t.id=e.id,t.notes=e.notes,t.description=e.description):t=null,t}t.a=r;var o=n(138),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),l=function(){function e(){i(this,e)}return a(e,[{key:"buildGlpkProblem",value:function(){var e=this.metabolites.length,t=this.reactions.length,i=[],r=[],a=[],l={},s=n.i(o.glp_create_prob)();n.i(o.glp_set_prob_name)(s,"knockout FBA"),n.i(o.glp_set_obj_dir)(s,o.GLP_MAX),n.i(o.glp_add_rows)(s,e),n.i(o.glp_add_cols)(s,t),this.metabolites.forEach(function(e,t){var i=t+1;n.i(o.glp_set_row_name)(s,i,e.id),n.i(o.glp_set_row_bnds)(s,i,o.GLP_FX,0,0),l[e.id]=i});var u=1;return this.reactions.forEach(function(e,t){var c=t+1;n.i(o.glp_set_col_name)(s,c,e.id),e.lower_bound===e.upper_bound?n.i(o.glp_set_col_bnds)(s,c,o.GLP_FX,e.lower_bound,e.upper_bound):n.i(o.glp_set_col_bnds)(s,c,o.GLP_DB,e.lower_bound,e.upper_bound),"objective_coefficient"in e&&n.i(o.glp_set_obj_coef)(s,c,e.objective_coefficient);for(var _ in e.metabolites)i[u]=l[_],r[u]=c,a[u]=e.metabolites[_],u++}),n.i(o.glp_load_matrix)(s,i.length-1,i,r,a),s}},{key:"optimize",value:function(){var e=this.buildGlpkProblem(),t=new o.SMCP({presolve:o.GLP_ON}),i=n.i(o.glp_simplex)(e,t),r=null,a=null;if(0===i){r=n.i(o.glp_get_obj_val)(e),a={};for(var l=1;l<=n.i(o.glp_get_num_cols)(e);l++)a[n.i(o.glp_get_col_name)(e,l)]=n.i(o.glp_get_col_prim)(e,l)}else console.log("Invalid Solution");return new s(r,a)}}]),e}(),s=function e(t,n){i(this,e),this.objectiveValue=t,this.fluxes=n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(25),l=n(71),s=(n.n(l),n(135)),u=(n.n(s),n(129)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=l.libs.underscore,d=l.Builder,f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.shouldComponentUpdate=function(){return!1},n.state={builder:null},n}return o(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(null===this.state.builder)return void console.warn("Builder not loaded yet");this.state.builder.pass_tooltip_component_props(e),_.defer(function(){t.state.builder.set_reaction_data(e.reactionData)})}},{key:"kosAddGroup",value:function(e){var t=e.selection.select(".zoom-g").append("g").attr("id","ko-markers");this.setState({koMarkersSel:t}),_.values(e.map.reactions,function(e){return"GAPD"===e.bigg_id})}},{key:"koDrawRectanges",value:function(e){if(null===this.state.koMarkersSel)return void console.warn("this.state.koMarkersSel is not defined");var t=this.state.koMarkersSel.selectAll(".ko").data(["GAPD"]),n=t.enter().append("g");n.append("rect").style("fill","red"),n.append("rect").style("fill","red")}},{key:"componentDidMount",value:function(){var e=new d(this.props.map,this.props.model,null,this.base,{fill_screen:!0,enable_keys:!0,reaction_scale:[{type:"min",color:"#c8c8c8",size:12},{type:"value",value:"0.01",color:"#9696ff",size:16},{type:"value",value:"20",color:"#209123",size:20},{type:"max",color:"#ff0000",size:25}],tooltip_component:u.a,reaction_styles:["color","size","text","abs"],disabled_buttons:["Load reaction data","Load gene data"]});this.setState({builder:e}),this.state.builder.callback_manager.set("load_model",this.props.loadModel.bind(this))}},{key:"render",value:function(){return n.i(a.b)("div",{className:"EscherContainer"})}}]),t}(a.c);t.a=f},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(25),s=n(328),u=(n.n(s),n(137)),c=(n.n(u),n(133)),_=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d={display:"-webkit-flex",flexDirection:"column",boxSizing:"border-box",width:"320px",height:"175px",borderRadius:"2px",border:"1px solid #b58787",padding:"1.5%",backgroundColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontSize:"16px",fontFamily:"sans-serif",color:"#111",boxShadow:"4px 6px 20px 0px rgba(0, 0, 0, 0.4)",position:"relative",zIndex:"3"},f={display:"-webkit-flex",justifyContent:"space-between",flexDirection:"column",width:"100%"},b={display:"-webkit-flex",flexDirection:"column",alignSelf:"center",width:"298px"},p={alignSelf:"center",color:"black",fontSize:"12px",fontWeight:"bold",visibility:"visible"},m={marginTop:"0.5%",display:"-webkit-flex",flexDirection:"column",alignSelf:"center",width:"14px",height:"14px",visibility:"visible"},h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={lowerBoundString:"",upperBoundString:"",tooltipStyle:d},n}return a(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){var t=!1;if("reaction"===e.type&&null!==e.model){var n={};if(e.biggId!==this.props.biggId||e.model!==this.props.model||e.currentObjective!==this.state.currentObjective){for(var i=0,r=e.model.reactions.length;i<r;i++)if(e.model.reactions[i].id===e.biggId){n.lowerBound=e.model.reactions[i].lower_bound,n.upperBound=e.model.reactions[i].upper_bound,n.lowerBoundString=e.model.reactions[i].lower_bound.toString(),n.upperBoundString=e.model.reactions[i].upper_bound.toString(),n.lowerBoundOld=e.oldModel.reactions[i].lower_bound,n.upperBoundOld=e.oldModel.reactions[i].upper_bound,n.name=e.model.reactions[i].name,t=!0,e.currentObjective===e.biggId?n.isCurrentObjective=!0:n.isCurrentObjective=!1,null!==e.reactionData?n.currentFlux=e.reactionData[e.biggId]:n.currentFlux=null;break}}else for(var o=0,a=e.model.reactions.length;o<a;o++)if(e.model.reactions[o].id===e.biggId){null!==e.reactionData&&(n.currentFlux=e.reactionData[e.biggId]);break}var l={},s={};null!==e.reactionData?(s=Math.abs(n.currentFlux)>e.upperRange?{marginLeft:n.currentFlux/Math.abs(n.currentFlux)*100+"%"}:{marginLeft:n.currentFlux/(e.upperRange+1)*100+"%"},l=n.currentFlux>.65*e.upperRange?{alignSelf:"flex-end"}:n.currentFlux<.65*e.lowerRange?{alignSelf:"flex-start"}:{marginLeft:n.currentFlux/(e.upperRange+1)*100+"%"}):(l={visibility:"hidden"},s={visibility:"hidden"}),this.setState(Object.assign({},n,{reactionInModel:t,fluxDisplayStyle:Object.assign({},p,l),indicatorStyle:Object.assign({},m,s),type:e.type}))}else t=!1,this.setState({type:e.type,reactionInModel:t})}},{key:"getSize",value:function(){return{width:320,height:175}}},{key:"fluxConverter",value:function(e){return e<this.props.lowerRange?-1e3:e>this.props.upperRange?1e3:e+this.props.upperRange+1}},{key:"tipConverter",value:function(e){var t=0;return this.props.step<1&&(t=Math.ceil(-Math.log10(this.props.step))),e<1?-1e3:e>2*this.props.upperRange+1?1e3:parseFloat((e-(this.props.upperRange+1)).toFixed(t))}},{key:"boundConverter",value:function(e){return e.map(this.tipConverter.bind(this))}},{key:"onTouchStart",value:function(){var e=Object.assign({},this.state.tooltipStyle,{backgroundColor:"rgba(255, 255, 255, 0.8)"});this.setState({tooltipStyle:e})}},{key:"handleMarkerPosition",value:function(e){return null!==this.props.reactionData?e<this.props.lowerRange?0:e>this.props.upperRange?2*(this.props.upperRange+1):e+this.props.upperRange+1:this.props.upperRange+1}},{key:"handleKeyUp",value:function(e,t){this.setState({lowerBoundString:t[0],upperBoundString:t[1]}),parseFloat(t[0])===this.state.lowerBound&&parseFloat(t[1])===this.state.upperBound||(isNaN(parseFloat(e.target.value))?console.log("Invalid Bounds"):this.sliderChange([parseFloat(this.state.lowerBoundString),parseFloat(this.state.upperBoundString)]))}},{key:"sliderChange",value:function(e){e[0]!==parseFloat(this.state.lowerBoundString)||e[1]!==parseFloat(this.state.upperBoundString)?this.setState({lowerBound:e[0],upperBound:e[1],lowerBoundString:e[0].toString(),upperBoundString:e[1].toString()}):this.setState({lowerBound:e[0],upperBound:e[1]}),this.props.sliderChange(e,this.props.biggId)}},{key:"onTouchEnd",value:function(e){this.sliderChange(e),this.setState({tooltipStyle:d})}},{key:"resetReaction",value:function(){this.sliderChange([this.state.lowerBoundOld,this.state.upperBoundOld],this.props.biggId)}},{key:"render",value:function(){var e=this;return"reaction"===this.state.type&&this.state.reactionInModel?n.i(l.b)("div",{className:"Tooltip",style:Object.assign({},this.state.tooltipStyle,{touchAction:"none"})},n.i(l.b)("div",{style:{fontSize:"20px",fontWeight:"bold",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},this.props.biggId),n.i(l.b)("div",{style:{height:"21px",fontSize:"15px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},this.props.name),n.i(l.b)("div",{className:"slider",style:b},n.i(l.b)(s.Range,{onBeforeChange:this.onTouchStart.bind(this),style:{alignSelf:"center"},min:0,max:2*(this.props.upperRange+1),step:this.props.step,value:[this.fluxConverter(this.state.lowerBound),this.fluxConverter(this.state.upperBound)],marks:i({},this.fluxConverter(this.state.currentFlux),""),tipFormatter:function(){return null},allowCross:!1,pushable:0,onChange:function(t){return e.sliderChange(e.boundConverter(t))},onAfterChange:function(t){return e.onTouchEnd(e.boundConverter(t))}}),n.i(l.b)("div",{className:"indicator",style:this.state.indicatorStyle},n.i(l.b)("svg",{viewBox:"0 0 100 100",height:"100%",width:"100%"},n.i(l.b)("defs",null,n.i(l.b)("marker",{id:"markerArrow1",viewBox:"0 0 6 6",refX:"4",refY:"3",orient:"auto"},n.i(l.b)("path",{d:"M5,3 L3,5 L3,1 Z",fill:"black",stroke:"black"}))),n.i(l.b)("line",{x1:"50",y1:"75",x2:"50",y2:"20","stroke-width":"25",stroke:"black","marker-end":"url(#markerArrow1)"}))),n.i(l.b)("div",{className:"fluxDisplay",style:this.state.fluxDisplayStyle},"Current Flux: ",null===this.state.currentFlux?"":this.state.currentFlux.toFixed(2))),n.i(l.b)("div",{className:"interfacePanel",style:f},n.i(l.b)("div",{className:"labels",style:{display:"-webkit-flex",justifyContent:"space-between"}},n.i(l.b)("div",{style:{fontSize:"12px"}},"Lower bound"),n.i(l.b)("div",{style:{fontSize:"12px"}},"Upper bound")),n.i(l.b)("div",{className:"inputPanel",style:{display:"-webkit-flex",justifyContent:"space-between"}},n.i(l.b)("input",{type:"text",className:"input",value:this.state.lowerBoundString,onFocus:function(e){return e.target.select()},onKeyUp:function(t){return e.handleKeyUp(t,[t.target.value,e.state.upperBoundString])}}),n.i(l.b)("input",{type:"text",className:"input",value:this.state.upperBoundString,onFocus:function(e){return e.target.select()},onKeyUp:function(t){return e.handleKeyUp(t,[e.state.lowerBound,t.target.value])}})),n.i(l.b)("div",{className:"buttonPanel",style:{display:"-webkit-flex",justifyContent:"space-between",marginTop:"3px"}},n.i(l.b)("button",{className:"button",onClick:function(){return e.sliderChange([0,0])}},"Knockout Reaction"),n.i(l.b)("button",{className:"button",onClick:function(){return e.resetReaction()}},"Reset"),n.i(l.b)("button",{className:"button",onClick:function(){return e.props.setObjective(e.props.biggId)},disabled:this.state.isCurrentObjective},"Set Objective")))):"reaction"!==this.state.type||this.state.reactionInModel?null:n.i(l.b)("div",{className:"Tooltip",style:Object.assign({},d,{height:"50px",width:"400px"})},n.i(l.b)("div",{style:{fontSize:"20px",fontWeight:"bold"}},this.props.biggId," is not in the model"))}}]),t}(l.c);t.a=h},function(e,t,n){"use strict";function i(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/escher-fba/service-worker.js").then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}t.a=i},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){!function(e){function t(e){if(!e)throw new Error("assert")}function n(e){throw new Error(e)}function i(e,t){for(var n in t)e[n]=t[n]}function r(e,t,n,i,r){for(;r>0;t++,i++,r--)e[t]=n[i]}function o(e,t,n,i){for(;i>0;t++,i--)e[t]=n}function a(e,t,n){for(;n>0;t++,n--)e[t]={}}function l(){return(new Date).getTime()}function s(e,t){return(e-t)/1e3}function u(e,t,n,i){var o=new Array(n);r(o,0,e,t,n),o.sort(i),r(e,t,o,0,n)}function c(){return $l}function _(e){return" \t\n\v\f\r".indexOf(e)>=0}function d(e){var t="string"==typeof e?e.charCodeAt(0):-1;return t>=0&&t<=31||127==t}function f(e){var t="string"==typeof e?e.charCodeAt(0):-1;return t>=65&&t<=90||t>=97&&t<=122}function b(e){var t="string"==typeof e?e.charCodeAt(0):-1;return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function p(e){var t="string"==typeof e?e.charCodeAt(0):-1;return t>=48&&t<=57}function m(e,t){return e.indexOf(t)}function h(e){return e.toLowerCase()}function g(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,i=t[n++],r=function(e,t,n,i){n||(n=" ");var r=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return i?e+r:r+e},o=function(e,t,n,i,o,a){var l=i-e.length;return l>0&&(e=n||!o?r(e,i,a,n):e.slice(0,t.length)+r("",l,"0",!0)+e.slice(t.length)),e},a=function(e,t,n,i,a,l,s){var u=e>>>0;return n=n&&u&&{2:"0b",8:"0",16:"0x"}[t]||"",e=n+r(u.toString(t),l||0,"0",!1),o(e,n,i,a,s)},l=function(e,t,n,i,r,a){return null!=i&&(e=e.slice(0,i)),o(e,"",t,n,r,a)},s=function(e,i,s,u,c,_,d){var f,b,p,m,h;if("%%"==e)return"%";for(var g=!1,v="",y=!1,x=!1,w=" ",k=s.length,M=0;s&&M<k;M++)switch(s.charAt(M)){case" ":v=" ";break;case"+":v="+";break;case"-":g=!0;break;case"'":w=s.charAt(M+1);break;case"0":y=!0;break;case"#":x=!0}if(u=u?"*"==u?+t[n++]:"*"==u.charAt(0)?+t[u.slice(1,-1)]:+u:0,u<0&&(u=-u,g=!0),!isFinite(u))throw new Error("sprintf: (minimum-)width must be finite");switch(_=_?"*"==_?+t[n++]:"*"==_.charAt(0)?+t[_.slice(1,-1)]:+_:"fFeE".indexOf(d)>-1?6:"d"==d?0:void 0,h=i?t[i.slice(0,-1)]:t[n++],d){case"s":return l(String(h),g,u,_,y,w);case"c":return l(String.fromCharCode(+h),g,u,_,y);case"b":return a(h,2,x,g,u,_,y);case"o":return a(h,8,x,g,u,_,y);case"x":return a(h,16,x,g,u,_,y);case"X":return a(h,16,x,g,u,_,y).toUpperCase();case"u":return a(h,10,x,g,u,_,y);case"i":case"d":return f=+h||0,f=Math.round(f-f%1),b=f<0?"-":v,h=b+r(String(Math.abs(f)),_,"0",!1),o(h,b,g,u,y);case"e":case"E":case"f":case"F":case"g":case"G":return f=+h,b=f<0?"-":v,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],h=b+Math.abs(f)[p](_),o(h,b,g,u,y)[m]();default:return e}};return i.replace(e,s)}function v(e){e.magic=Ql,e.parms=null,e.tree=null,e.name=null,e.obj=null,e.dir=Vu,e.c0=0,e.m_max=100,e.n_max=200,e.m=e.n=0,e.nnz=0,e.row=new Array(1+e.m_max),e.col=new Array(1+e.n_max),e.r_tree={},e.c_tree={},e.valid=0,e.head=new Int32Array(1+e.m_max),e.bfcp=null,e.bfd=null,e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.it_cnt=0,e.some=0,e.ipt_stat=bc,e.ipt_obj=0,e.mip_stat=bc,e.mip_obj=0}function y(e){e.magic=1061109567,e.parms=null,t(null==e.tree),e.row=null,e.col=null,e.r_tree=null,e.c_tree=null,e.head=null,e.bfcp=null,e.bfd=null}function x(e){var t={};_u(e,t),L(e.bfd,t)}function w(e,i,r,o,a,l,s,u){var c,_,d,f,b,p,m,h,g,v=0;for(e.pbs_stat==bc&&n("glp_analyze_row: primal basic solution components are undefined"),e.dbs_stat!=pc&&n("glp_analyze_row: basic solution is not dual feasible"),0<=i&&i<=e.n||n("glp_analyze_row: len = "+i+"; invalid row length"),m=0,c=1;c<=i;c++)_=r[c],1<=_&&_<=e.m+e.n||n("glp_analyze_row: ind["+c+"] = "+_+"; row/column index out of range"),_<=e.m?(e.row[_].stat==tc&&n("glp_analyze_row: ind["+c+"] = "+_+"; basic auxiliary variable is not allowed"),b=e.row[_].prim):(e.col[_-e.m].stat==tc&&n("glp_analyze_row: ind["+c+"] = "+_+"; basic structural variable is not allowed"),b=e.col[_-e.m].prim),m+=o[c]*b;if(a==$u){if(m>=l)return v=1;d=1}else if(a==Zu){if(m<=l)return v=1;d=-1}else n("glp_analyze_row: type = "+a+"; invalid parameter");return h=l-m,0==(f=wu(e,i,r,o,d,s))?v=2:(_=r[f],t(1<=_&&_<=e.m+e.n),b=_<=e.m?e.row[_].prim:e.col[_-e.m].prim,t(0!=o[f]),p=h/o[f],g=_<=e.m?e.row[_].dual*p:e.col[_-e.m].dual*p,u(f,b,p,m,h,g),v)}function k(e){return e.reason!=r_&&n("glp_ios_pool_size: operation not allowed"),t(null!=e.local),e.local.size}function M(e,i,r,o,a,l,s,u,c){return e.reason!=r_&&n("glp_ios_add_row: operation not allowed"),t(null!=e.local),se(e,e.local,i,r,o,a,l,s,u,c)}function A(e,t){return 1<=t&&t<=e.mip.n||n("glp_ios_can_branch: j = "+t+"; column number out of range"),e.non_int[t]}function E(e,n){var i,r,o,a=e.mip,l=e.orig_m,s=e.n;for(t(a.m>=l),t(a.n==s),o=a.c0,r=1;r<=s;r++){var u=a.col[r];if(u.kind==Wu&&n[r]!=Math.floor(n[r]))return 1;o+=u.coef*n[r]}if(a.mip_stat==pc)switch(a.dir){case Vu:if(o>=e.mip.mip_obj)return 1;break;case Xu:if(o<=e.mip.mip_obj)return 1;break;default:t(a!=a)}for(e.parm.msg_lev>=Ac&&Jl("Solution found by heuristic: "+o),a.mip_stat=pc,a.mip_obj=o,r=1;r<=s;r++)a.col[r].mipx=n[r];for(i=1;i<=l;i++){var c,_=a.row[i];for(_.mipx=0,c=_.ptr;null!=c;c=c.r_next)_.mipx+=c.val*c.col.mipx}return 0}function P(e,t){var n={};return n.root=null,n.fcmp=e,n.info=t,n.size=0,n.height=0,n}function j(e,t){var n,i,r,o;for(n=null,i=e.root;null!=i;)n=i,e.fcmp(e.info,t,n.key)<=0?(o=0,i=n.left,n.rank++):(o=1,i=n.right);for(r={},r.key=t,r.type=0,r.link=null,r.rank=1,r.up=n,r.flag=null==n?0:o,r.bal=0,r.left=null,r.right=null,e.size++,null==n?e.root=r:0==o?n.left=r:n.right=r;null!=n;)if(0==o){if(n.bal>0){n.bal=0;break}if(n.bal<0){z(e,n);break}n.bal=-1,o=n.flag,n=n.up}else{if(n.bal<0){n.bal=0;break}if(n.bal>0){z(e,n);break}n.bal=1,o=n.flag,n=n.up}return null==n&&e.height++,r}function O(e,t){e.link=t}function C(e,t){var n,i;for(n=e.root;null!=n&&0!=(i=e.fcmp(e.info,t,n.key));)n=i<0?n.left:n.right;return n}function S(e){return e.link}function z(e,n){var i,r,o,a,l,s;return t(null!=n),r=n,r.bal<0?(i=r.up,o=r.left,a=o.right,o.bal<=0?(null==i?e.root=o:0==r.flag?i.left=o:i.right=o,r.rank-=o.rank,o.up=i,o.flag=r.flag,o.bal++,o.right=r,r.up=o,r.flag=1,r.bal=-o.bal,r.left=a,null!=a&&(a.up=r,a.flag=0),n=o):(l=a.left,s=a.right,null==i?e.root=a:0==r.flag?i.left=a:i.right=a,r.rank-=o.rank+a.rank,a.rank+=o.rank,r.bal=a.bal>=0?0:1,o.bal=a.bal<=0?0:-1,a.up=i,a.flag=r.flag,a.bal=0,a.left=o,a.right=r,r.up=a,r.flag=1,r.left=s,o.up=a,o.flag=0,o.right=l,null!=l&&(l.up=o,l.flag=1),null!=s&&(s.up=r,s.flag=0),n=a)):(i=r.up,o=r.right,a=o.left,o.bal>=0?(null==i?e.root=o:0==r.flag?i.left=o:i.right=o,o.rank+=r.rank,o.up=i,o.flag=r.flag,o.bal--,o.left=r,r.up=o,r.flag=0,r.bal=-o.bal,r.right=a,null!=a&&(a.up=r,a.flag=1),n=o):(l=a.left,s=a.right,null==i?e.root=a:0==r.flag?i.left=a:i.right=a,o.rank-=a.rank,a.rank+=r.rank,r.bal=a.bal<=0?0:-1,o.bal=a.bal>=0?0:1,a.up=i,a.flag=r.flag,a.bal=0,a.left=r,a.right=o,r.up=a,r.flag=0,r.right=l,o.up=a,o.flag=1,o.left=s,null!=l&&(l.up=r,l.flag=1),null!=s&&(s.up=o,s.flag=0),n=a)),n}function N(){var e={};return e.valid=0,e.type=yc,e.fhv=null,e.lpf=null,e.lu_size=0,e.piv_tol=.1,e.piv_lim=4,e.suhl=1,e.eps_tol=1e-15,e.max_gro=1e10,e.nfs_max=100,e.upd_tol=1e-6,e.nrs_max=100,e.rs_size=1e3,e.upd_lim=-1,e.upd_cnt=0,e}function L(e,n){t(null!=e),e.type=n.type,e.lu_size=n.lu_size,e.piv_tol=n.piv_tol,e.piv_lim=n.piv_lim,e.suhl=n.suhl,e.eps_tol=n.eps_tol,e.max_gro=n.max_gro,e.nfs_max=n.nfs_max,e.upd_tol=n.upd_tol,e.nrs_max=n.nrs_max,e.rs_size=n.rs_size}function T(e,n,i,r,o){var a,l;switch(t(null!=e),t(1<=n&&n<=Kl),e.valid=0,l=0,e.type){case yc:e.lpf=null,null==e.fhv&&(e.fhv=B(),l=1);break;case xc:case wc:e.fhv=null,null==e.lpf&&(e.lpf=Je(),l=1);break;default:t(e!=e)}if(null!=e.fhv?a=e.fhv.luf:null!=e.lpf?a=e.lpf.luf:t(e!=e),l&&(a.new_sva=e.lu_size),a.piv_tol=e.piv_tol,a.piv_lim=e.piv_lim,a.suhl=e.suhl,a.eps_tol=e.eps_tol,a.max_gro=e.max_gro,null!=e.fhv&&(l&&(e.fhv.hh_max=e.nfs_max),e.fhv.upd_tol=e.upd_tol),null!=e.lpf&&(l&&(e.lpf.n_max=e.nrs_max),l&&(e.lpf.v_size=e.rs_size)),null!=e.fhv)switch(q(e.fhv,n,r,o)){case 0:break;case zu:return Au;case Nu:return Eu;default:t(e!=e)}else if(null!=e.lpf)switch($e(e.lpf,n,i,r,o)){case 0:switch(e.type){case xc:e.lpf.scf.t_opt=Tm;break;case wc:e.lpf.scf.t_opt=Im;break;default:t(e!=e)}break;case A_:return Au;case LPF_ECOND:return Eu;default:t(e!=e)}else t(e!=e);return e.valid=1,e.upd_cnt=0,0}function I(e,n){t(null!=e),t(e.valid),null!=e.fhv?G(e.fhv,n):null!=e.lpf?it(e.lpf,n):t(e!=e)}function D(e,n){t(null!=e),t(e.valid),null!=e.fhv?V(e.fhv,n):null!=e.lpf?rt(e.lpf,n):t(e!=e)}function F(e,n,i,r,o,a,l){if(t(null!=e),t(e.valid),null!=e.fhv)switch(X(e.fhv,n,r,o,a,l)){case 0:break;case zu:return e.valid=0,Au;case Lu:return e.valid=0,Pu;case Tu:return e.valid=0,ju;case Iu:return e.valid=0,Ou;default:t(e!=e)}else if(null!=e.lpf)switch(at(e.lpf,n,i,r,o,a,l)){case 0:break;case A_:return e.valid=0,Au;case LPF_ELIMIT:return e.valid=0,ju;default:t(e!=e)}else t(e!=e);return e.upd_cnt++,0}function R(e){return t(null!=e),t(e.valid),e.upd_cnt}function U(e,n){t(null!=e),t(null!=n)}function B(){var e;return e={},e.m_max=e.m=0,e.valid=0,e.luf=St(),e.hh_max=50,e.hh_nfs=0,e.hh_ind=e.hh_ptr=e.hh_len=null,e.p0_row=e.p0_col=null,e.cc_ind=null,e.cc_val=null,e.upd_tol=1e-6,e.nnz_h=0,e}function q(e,i,o,a){switch(i<1&&n("fhv_factorize: m = "+i+"; invalid parameter"),i>Kl&&n("fhv_factorize: m = "+i+"; matrix too big"),e.m=i,e.valid=0,null==e.hh_ind&&(e.hh_ind=new Int32Array(1+e.hh_max)),null==e.hh_ptr&&(e.hh_ptr=new Int32Array(1+e.hh_max)),null==e.hh_len&&(e.hh_len=new Int32Array(1+e.hh_max)),e.m_max<i&&(e.m_max=i+100,e.p0_row=new Int32Array(1+e.m_max),e.p0_col=new Int32Array(1+e.m_max),e.cc_ind=new Int32Array(1+e.m_max),e.cc_val=new Float64Array(1+e.m_max)),Bt(e.luf,i,o,a)){case 0:break;case Ld:return zu;case Td:return Nu;default:t(e!=e)}return e.valid=1,e.hh_nfs=0,r(e.p0_row,1,e.luf.pp_row,1,i),r(e.p0_col,1,e.luf.pp_col,1,i),e.nnz_h=0,0}function H(e,t,i){var r,o,a,l,s,u,c=e.hh_nfs,_=e.hh_ind,d=e.hh_ptr,f=e.hh_len,b=e.luf.sv_ind,p=e.luf.sv_val;if(e.valid||n("fhv_h_solve: the factorization is not valid"),t){for(o=c;o>=1;o--)if(r=_[o],0!=(u=i[r]))for(a=d[o],l=a+f[o]-1,s=a;s<=l;s++)i[b[s]]-=p[s]*u}else for(o=1;o<=c;o++){for(r=_[o],u=i[r],a=d[o],l=a+f[o]-1,s=a;s<=l;s++)u-=p[s]*i[b[s]];i[r]=u}}function G(e,t){var i=e.luf.pp_row,r=e.luf.pp_col,o=e.p0_row,a=e.p0_col;e.valid||n("fhv_ftran: the factorization is not valid"),e.luf.pp_row=o,e.luf.pp_col=a,qt(e.luf,0,t),e.luf.pp_row=i,e.luf.pp_col=r,H(e,0,t),Ht(e.luf,0,t)}function V(e,t){var i=e.luf.pp_row,r=e.luf.pp_col,o=e.p0_row,a=e.p0_col;e.valid||n("fhv_btran: the factorization is not valid"),Ht(e.luf,1,t),H(e,1,t),e.luf.pp_row=o,e.luf.pp_col=a,qt(e.luf,1,t),e.luf.pp_row=i,e.luf.pp_col=r}function X(e,i,o,a,l,s){var u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M,A,E,P=e.m,j=e.luf,O=j.vr_ptr,C=j.vr_len,S=j.vr_cap,z=j.vr_piv,N=j.vc_ptr,L=j.vc_len,T=j.vc_cap,I=j.pp_row,D=j.pp_col,F=j.qq_row,R=j.qq_col,U=j.sv_ind,B=j.sv_val,q=j.work,G=j.eps_tol,V=e.hh_ind,X=e.hh_ptr,K=e.hh_len,W=e.p0_row,Y=e.p0_col,J=e.cc_ind,$=e.cc_val,Z=e.upd_tol;if(e.valid||n("fhv_update_it: the factorization is not valid"),1<=i&&i<=P||n("fhv_update_it: j = "+i+"; column number out of range"),e.hh_nfs==e.hh_max)return e.valid=0,Tu;for(u=1;u<=P;u++)$[u]=0;for(m=1;m<=o;m++)u=a[l+m],1<=u&&u<=P||n("fhv_update_it: ind["+m+"] = "+u+"; row number out of range"),0!=$[u]&&n("fhv_update_it: ind["+m+"] = "+u+"; duplicate row index not allowed"),0==s[m]&&n("fhv_update_it: val["+m+"] = "+s[m]+"; zero element not allowed"),$[u]=s[m];for(e.luf.pp_row=W,e.luf.pp_col=Y,qt(e.luf,0,$),e.luf.pp_row=I,e.luf.pp_col=D,H(e,0,$),o=0,u=1;u<=P;u++)0==(E=$[u])||Math.abs(E)<G||(o++,J[o]=u,$[o]=E);for(f=N[i],b=f+L[i]-1,p=f;p<=b;p++){for(u=U[p],c=O[u],_=c+C[u]-1,d=c;U[d]!=i;d++);t(d<=_),U[d]=U[_],B[d]=B[_],C[u]--}for(j.nnz_v-=L[i],L[i]=0,h=F[i],g=0,M=1;M<=o;M++){if(u=J[M],C[u]+1>S[u]&&Nt(j,u,C[u]+10))return e.valid=0,j.new_sva=j.sv_size+j.sv_size,t(j.new_sva>j.sv_size),Iu;d=O[u]+C[u],U[d]=i,B[d]=$[M],C[u]++,g<D[u]&&(g=D[u])}if(T[i]<o&&Lt(j,i,o))return e.valid=0,j.new_sva=j.sv_size+j.sv_size,t(j.new_sva>j.sv_size),Iu;if(p=N[i],r(U,p,J,1,o),r(B,p,$,1,o),L[i]=o,j.nnz_v+=o,h>g)return e.valid=0,zu;for(u=I[h],i=R[h],m=h;m<g;m++)I[m]=I[m+1],D[I[m]]=m,R[m]=R[m+1],F[R[m]]=m;for(I[g]=u,D[u]=g,R[g]=i,F[i]=g,i=1;i<=P;i++)q[i]=0;for(c=O[u],_=c+C[u]-1,d=c;d<=_;d++){for(i=U[d],q[i]=B[d],f=N[i],b=f+L[i]-1,p=f;U[p]!=u;p++);t(p<=b),U[p]=U[b],B[p]=B[b],L[i]--}if(j.nnz_v-=C[u],C[u]=0,e.hh_nfs++,V[e.hh_nfs]=u,K[e.hh_nfs]=0,j.sv_end-j.sv_beg<g-h&&(zt(j),j.sv_end-j.sv_beg<g-h))return e.valid=j.valid=0,j.new_sva=j.sv_size+j.sv_size,t(j.new_sva>j.sv_size),Iu;for(m=h;m<g;m++)if(v=I[m],y=R[m],0!=q[y]){for(A=q[y]/z[v],x=O[v],w=x+C[v]-1,k=x;k<=w;k++)q[U[k]]-=A*B[k];j.sv_end--,U[j.sv_end]=v,B[j.sv_end]=A,K[e.hh_nfs]++}for(0==K[e.hh_nfs]?e.hh_nfs--:(X[e.hh_nfs]=j.sv_end,e.nnz_h+=K[e.hh_nfs]),z[u]=q[R[g]],o=0,m=g+1;m<=P;m++)if(i=R[m],E=q[i],!(Math.abs(E)<G)){if(L[i]+1>T[i]&&Lt(j,i,L[i]+10))return e.valid=0,j.new_sva=j.sv_size+j.sv_size,t(j.new_sva>j.sv_size),Iu;p=N[i]+L[i],U[p]=u,B[p]=E,L[i]++,o++,J[o]=i,$[o]=E}if(S[u]<o&&Nt(j,u,o))return e.valid=0,j.new_sva=j.sv_size+j.sv_size,t(j.new_sva>j.sv_size),Iu;for(d=O[u],r(U,d,J,1,o),r(B,d,$,1,o),C[u]=o,j.nnz_v+=o,E=0,u=I[g],c=O[u],_=c+C[u]-1,d=c;d<=_;d++)E<Math.abs(B[d])&&(E=Math.abs(B[d]));for(i=R[g],f=N[i],b=f+L[i]-1,p=f;p<=b;p++)E<Math.abs(B[p])&&(E=Math.abs(B[p]));return Math.abs(z[u])<Z*E?(e.valid=0,Lu):0}function K(e,i){function r(e,i,r,o,a,l){var s,u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M,A,E,P=0;for(e>0&&i>0||n("triang: m = "+e+"; n = "+i+"; invalid dimension"),s=new Int32Array(1+(e>=i?e:i)),u=new Int32Array(1+e),c=new Int32Array(1+i),_=new Int32Array(1+e),d=new Int32Array(1+e),b=new Int32Array(1+i),p=new Int32Array(1+i),M=u,h=1;h<=i;h++)w=o(r,-h,s),t(0<=w&&w<=e),b[h]=M[w],M[w]=h;for(f=0,w=0;w<=e;w++)for(h=M[w];0!=h;h=b[h])p[h]=f,f=h;for(v=0,h=f;0!=h;h=p[h])b[h]=v,v=h;for(m=1;m<=e;m++)u[m]=w=o(r,+m,s),t(0<=w&&w<=i),_[m]=0,d[m]=c[w],0!=d[m]&&(_[d[m]]=m),c[w]=m;for(m=1;m<=e;m++)a[m]=0;for(h=1;h<=i;h++)l[h]=0;for(y=1,x=i;y<=x;){if(0!=(m=c[1])){for(t(1==u[m]),h=0,k=o(r,+m,s),t(0<=k&&k<=i);k>=1;k--)v=s[k],t(1<=v&&v<=i),0==l[v]&&(t(0==h),h=v);t(0!=h),a[m]=l[h]=y,y++,P++}else h=f,t(0!=h),l[h]=x,x--;for(0==b[h]?f=p[h]:p[b[h]]=p[h],0!=p[h]&&(b[p[h]]=b[h]),k=o(r,-h,s),t(0<=k&&k<=e);k>=1;k--)m=s[k],t(1<=m&&m<=e),w=u[m],t(w>=1),0==_[m]?c[w]=d[m]:d[_[m]]=d[m],0!=d[m]&&(_[d[m]]=_[m]),u[m]=--w,_[m]=0,d[m]=c[w],0!=d[m]&&(_[d[m]]=m),c[w]=m}for(m=1;m<=e;m++)0==a[m]&&(a[m]=y++);for(h=1;h<=i;h++)t(0!=l[h]);for(A=u,g=1;g<=e;g++)A[g]=0;for(m=1;m<=e;m++)g=a[m],t(1<=g&&g<=e),t(0==A[g]),A[g]=m;for(E=c,v=1;v<=i;v++)E[v]=0;for(h=1;h<=i;h++)v=l[h],t(1<=v&&v<=i),t(0==E[v]),E[v]=h;for(g=1;g<=P;g++){var j=0;for(m=A[g],k=o(r,+m,s),t(0<=k&&k<=i);k>=1;k--)h=s[k],t(1<=h&&h<=i),v=l[h],v<=P&&t(v<=g),v==g&&(t(!j),j=1);t(j)}return P}function o(e,n,i){function r(t){t!=S_&&(a<=s?i[++c]=a:c=gt(e,a-s,i,null))}var o,a,l,s=lt(e),u=st(e),c=0;if(n>0){for(o=+n,t(1<=o&&o<=s),l=ht(e,o,i,null),n=1;n<=l;n++)mt(e,i[n],function(e){e!=S_&&(i[++c]=s+i[n])});dt(e,o,function(e){e!=S_&&(i[++c]=o)})}else a=-n,t(1<=a&&a<=s+u),a<=s?dt(e,a,r):mt(e,a-s,r);return c}0!=i&&n("glp_adv_basis: flags = "+i+"; invalid flags"),0==e.m||0==e.n?qs(e):function(e){function n(e,n,i){switch(e){case P_:m[s]=T_;break;case j_:m[s]=N_;break;case O_:m[s]=L_;break;case C_:m[s]=Math.abs(n)<=Math.abs(i)?N_:L_;break;case S_:m[s]=I_;break;default:t(e!=e)}}var i,a,l,s,u,c,_,d,f,b=lt(e),p=st(e),m=new Int32Array(1+b+p);if(Jl("Constructing initial basis..."),0==b||0==p)return void qs(e);for(c=new Int32Array(1+b),_=new Int32Array(1+b+p),u=r(b,b+p,e,o,c,_),Ot(e,Z_)>=3&&Jl("Size of triangular part = "+u),d=new Int32Array(1+b),f=new Int32Array(1+b+p),i=1;i<=b;i++)d[c[i]]=i;for(a=1;a<=b+p;a++)f[_[a]]=a;for(s=1;s<=b+p;s++)m[s]=-1;for(l=1;l<=u;l++)a=f[l],m[a]=z_;for(l=u+1;l<=b;l++)i=d[l],t(1<=i&&i<=b),t(_[i]>u),m[i]=z_;for(s=1;s<=b+p;s++)m[s]!=z_&&(s<=b?dt(e,s,n):mt(e,s-b,n));for(s=1;s<=b+p;s++)s<=b?vt(e,s,m[s]):yt(e,s-b,m[s])}(e)}function W(e,n){var i=Y(e),r={};return e.slot[i].node=r,r.p=i,r.up=n,r.level=null==n?0:n.level+1,r.count=0,r.b_ptr=null,r.s_ptr=null,r.r_ptr=null,r.solved=0,r.lp_obj=null==n?e.mip.dir==Vu?-Bl:+Bl:n.lp_obj,r.bound=null==n?e.mip.dir==Vu?-Bl:+Bl:n.bound,r.br_var=0,r.br_val=0,r.ii_cnt=0,r.ii_sum=0,r.changed=0,0==e.parm.cb_size?r.data=null:r.data={},r.temp=null,r.prev=e.tail,r.next=null,null==e.head?e.head=r:e.tail.next=r,e.tail=r,e.a_cnt++,e.n_cnt++,e.t_cnt++,null==n?t(1==i):n.count++,r}function Y(e){var n;if(0==e.avail){var i=e.nslots,o=e.slot;for(0==i?e.nslots=20:(e.nslots=i+i,t(e.nslots>i)),e.slot=new Array(1+e.nslots),a(e.slot,0,1+e.nslots),null!=o&&r(e.slot,1,o,1,i),n=e.nslots;n>i;n--)e.slot[n].node=null,e.slot[n].next=e.avail,e.avail=n}return n=e.avail,e.avail=e.slot[n].next,t(null==e.slot[n].node),e.slot[n].next=0,n}function J(e,n){var i,r,o,a=e.m,s=e.n;for(t(null==e.tree),e.tree=i={},i.n=s,i.orig_m=a,i.orig_type=new Int8Array(1+a+s),i.orig_lb=new Float64Array(1+a+s),i.orig_ub=new Float64Array(1+a+s),i.orig_stat=new Int8Array(1+a+s),i.orig_prim=new Float64Array(1+a+s),i.orig_dual=new Float64Array(1+a+s),r=1;r<=a;r++){var u=e.row[r];i.orig_type[r]=u.type,i.orig_lb[r]=u.lb,i.orig_ub[r]=u.ub,i.orig_stat[r]=u.stat,i.orig_prim[r]=u.prim,i.orig_dual[r]=u.dual}for(o=1;o<=s;o++){var c=e.col[o];i.orig_type[a+o]=c.type,i.orig_lb[a+o]=c.lb,i.orig_ub[a+o]=c.ub,i.orig_stat[a+o]=c.stat,i.orig_prim[a+o]=c.prim,i.orig_dual[a+o]=c.dual}return i.orig_obj=e.obj_val,i.nslots=0,i.avail=0,i.slot=null,i.head=i.tail=null,i.a_cnt=i.n_cnt=i.t_cnt=0,i.root_m=0,i.root_type=null,i.root_lb=i.root_ub=null,i.root_stat=null,i.curr=null,i.mip=e,i.non_int=new Int8Array(1+s),i.pred_m=i.pred_max=0,i.pred_type=null,i.pred_lb=i.pred_ub=null,i.pred_stat=null,i.local=le(i),i.mir_gen=null,i.clq_gen=null,i.pcost=null,i.iwrk=new Int32Array(1+s),i.dwrk=new Float64Array(1+s),i.parm=n,i.tm_beg=l(),i.tm_lag=0,i.sol_cnt=0,i.reason=0,i.reopt=0,i.reinv=0,i.br_var=0,i.br_sel=0,i.child=0,i.next_p=0,i.stop=0,W(i,null),i}function $(e,n){var i,r,o,a,l,s,u=e.mip;if(t(1<=n&&n<=e.nslots),i=e.slot[n].node,t(null!=i),t(0==i.count),t(null==e.curr),e.curr=i,r=e.slot[1].node,t(null!=r),i!=r){for(t(u.m==e.root_m),i.temp=null;null!=i;i=i.up)null==i.up?t(i==r):i.up.temp=i;for(i=r;null!=i;i=i.temp){var c=u.m,_=u.n;if(null==i.temp){var d,f;if(e.pred_m=c,e.pred_max<c+_){var b=c+_+100;e.pred_max=b,e.pred_type=new Int8Array(1+b),e.pred_lb=new Float64Array(1+b),e.pred_ub=new Float64Array(1+b),e.pred_stat=new Int8Array(1+b)}for(d=1;d<=c;d++){var p=u.row[d];e.pred_type[d]=p.type,e.pred_lb[d]=p.lb,e.pred_ub[d]=p.ub,e.pred_stat[d]=p.stat}for(f=1;f<=_;f++){var m=u.col[f];e.pred_type[u.m+f]=m.type,e.pred_lb[u.m+f]=m.lb,e.pred_ub[u.m+f]=m.ub,e.pred_stat[u.m+f]=m.stat}}for(o=i.b_ptr;null!=o;o=o.next)o.k<=c?ss(u,o.k,o.type,o.lb,o.ub):us(u,o.k-c,o.type,o.lb,o.ub);for(l=i.s_ptr;null!=l;l=l.next)l.k<=c?Us(u,l.k,l.stat):Bs(u,l.k-c,l.stat);if(null!=i.r_ptr){var h,g,v;for(g=new Int32Array(1+_),v=new Float64Array(1+_),a=i.r_ptr;null!=a;a=a.next){for(d=rs(u,1),as(u,d,a.name),t(0==u.row[d].level),u.row[d].level=i.level,u.row[d].origin=a.origin,u.row[d].klass=a.klass,ss(u,d,a.type,a.lb,a.ub),h=0,s=a.ptr;null!=s;s=s.next)h++,g[h]=s.j,v[h]=s.val;_s(u,d,h,g,v),Ts(u,d,a.rii),Us(u,d,a.stat)}}}for(i=e.curr;null!=i.b_ptr;)o=i.b_ptr,i.b_ptr=o.next;for(;null!=i.s_ptr;)l=i.s_ptr,i.s_ptr=l.next;for(;null!=i.r_ptr;)for(a=i.r_ptr,i.r_ptr=a.next,t(null==a.name);null!=a.ptr;)s=a.ptr,a.ptr=s.next}}function Z(e){var n=e.mip,i=n.m,r=n.n,o=e.curr;t(null!=o);var a,l,s,u;if(null==o.up)for(t(1==o.p),t(0==e.root_m),t(null==e.root_type),t(null==e.root_lb),t(null==e.root_ub),t(null==e.root_stat),e.root_m=i,e.root_type=new Int8Array(1+i+r),e.root_lb=new Float64Array(1+i+r),e.root_ub=new Float64Array(1+i+r),e.root_stat=new Int8Array(1+i+r),a=1;a<=i+r;a++)a<=i?(s=n.row[a],e.root_type[a]=s.type,e.root_lb[a]=s.lb,e.root_ub[a]=s.ub,e.root_stat[a]=s.stat):(u=n.col[a-i],e.root_type[a]=u.type,e.root_lb[a]=u.lb,e.root_ub[a]=u.ub,e.root_stat[a]=u.stat);else{var c,_=e.root_m,d=e.pred_m;for(t(d<=i),t(null==o.b_ptr),t(null==o.s_ptr),a=1;a<=d+r;a++){var f,b,p,m,h,g,v,y;if(f=e.pred_type[a],h=e.pred_lb[a],g=e.pred_ub[a],b=e.pred_stat[a],a<=d?(s=n.row[a],p=s.type,v=s.lb,y=s.ub,m=s.stat):(u=n.col[a-d],p=u.type,v=u.lb,y=u.ub,m=u.stat),f!=p||h!=v||g!=y){var x={};x.k=a,x.type=p,x.lb=v,x.ub=y,x.next=o.b_ptr,o.b_ptr=x}if(b!=m){var w={};w.k=a,w.stat=m,w.next=o.s_ptr,o.s_ptr=w}}if(t(null==o.r_ptr),d<i){var k,M,A;for(M=new Int32Array(1+r),A=new Float64Array(1+r),l=i;l>d;l--){s=n.row[l];var E={},P=xs(n,l);for(E.name=null==P?null:P,E.type=s.type,E.lb=s.lb,E.ub=s.ub,E.ptr=null,k=Os(n,l,M,A),a=1;a<=k;a++){var j={};j.j=M[a],j.val=A[a],j.next=E.ptr,E.ptr=j}E.rii=s.rii,E.stat=s.stat,E.next=o.r_ptr,o.r_ptr=E}}if(i!=_){var O=i-_;t(O>0);var C=new Int32Array(1+O);for(l=1;l<=O;l++)C[l]=_+l;bs(n,O,C)}for(i=n.m,t(i==_),l=1;l<=i;l++)ss(n,l,e.root_type[l],e.root_lb[l],e.root_ub[l]),Us(n,l,e.root_stat[l]);for(c=1;c<=r;c++)us(n,c,e.root_type[i+c],e.root_lb[i+c],e.root_ub[i+c]),Bs(n,c,e.root_stat[i+c])}e.curr=null}function Q(e,n,i,r){var o,a;for(t(1<=n&&n<=e.nslots),o=e.slot[n].node,t(null!=o),t(0==o.count),t(e.curr!=o),null==o.prev?e.head=o.next:o.prev.next=o.next,null==o.next?e.tail=o.prev:o.next.prev=o.prev,o.prev=o.next=null,e.a_cnt--,t(i>0),a=1;a<=i;a++)r[a]=W(e,o).p}function ee(e,n){var i,r;for(t(1<=n&&n<=e.nslots),i=e.slot[n].node,t(null!=i),t(0==i.count),t(e.curr!=i),null==i.prev?e.head=i.next:i.prev.next=i.next,null==i.next?e.tail=i.prev:i.next.prev=i.prev,i.prev=i.next=null,e.a_cnt--;;){for(var o;null!=i.b_ptr;)o=i.b_ptr,i.b_ptr=o.next;for(var a;null!=i.s_ptr;)a=i.s_ptr,i.s_ptr=a.next;for(;null!=i.r_ptr;){var l;for(l=i.r_ptr,l.name=null;null!=l.ptr;){var s;s=l.ptr,l.ptr=s.next}i.r_ptr=l.next}if(0==e.parm.cb_size&&t(null==i.data),n=i.p,t(e.slot[n].node==i),e.slot[n].node=null,e.slot[n].next=e.avail,e.avail=n,r=i.up,e.n_cnt--,null==(i=r)||(t(i.count>0),0!=--i.count))break}}function te(e){var n,i,r=e.mip,o=r.m,a=r.n;if(t(r.tree==e),o!=e.orig_m){var l,s;for(l=o-e.orig_m,t(l>0),s=new Int32Array(1+l),n=1;n<=l;n++)s[n]=e.orig_m+n;bs(r,l,s)}for(o=e.orig_m,t(o==e.orig_m),t(a==e.n),n=1;n<=o;n++)ss(r,n,e.orig_type[n],e.orig_lb[n],e.orig_ub[n]),Us(r,n,e.orig_stat[n]),r.row[n].prim=e.orig_prim[n],r.row[n].dual=e.orig_dual[n];for(i=1;i<=a;i++)us(r,i,e.orig_type[o+i],e.orig_lb[o+i],e.orig_ub[o+i]),Bs(r,i,e.orig_stat[o+i]),r.col[i].prim=e.orig_prim[o+i],r.col[i].dual=e.orig_dual[o+i];r.pbs_stat=r.dbs_stat=pc,r.obj_val=e.orig_obj,t(null!=e.local),ce(e.local),t(null==e.mir_gen),t(null==e.clq_gen),r.tree=null}function ne(e,n,i){var r,o,a,l,s,u,c,_,d,f,b,p,m=e.mip,h=m.m,g=m.n,v=e.iwrk,y=e.dwrk;for(t(Vs(m)==gc),t(uu(m)),t(1<=n&&n<=g),c=m.col[n].prim,r=Mt(m,h+n,v,y),o=-1;o<=1;o+=2)if(0!=(a=At(m,r,v,y,o,1e-9))){for(t(1<=a&&a<=h+g),l=1;l<=r&&v[l]!=a;l++);t(1<=l&&l<=r),u=y[l],a<=h?(s=m.row[a].stat,_=m.row[a].dual):(s=m.col[a-h].stat,_=m.col[a-h].dual),t(s==nc||s==ic||s==rc),m.dir==Vu?(s==nc&&_<0||s==ic&&_>0||s==rc)&&(_=0):m.dir==Xu?(s==nc&&_>0||s==ic&&_<0||s==rc)&&(_=0):t(m!=m),d=(o<0?Math.floor(c):Math.ceil(c))-c,d/=u,f=_*d,t(m.dir==Vu?f>=0:m.dir==Xu?f<=0:m!=m),o<0?b=m.obj_val+f:p=m.obj_val+f}else m.dir==Vu?o<0?b=+Bl:p=+Bl:m.dir==Xu?o<0?b=-Bl:p=-Bl:t(m!=m);i(b,p)}function ie(e,n){var i,r,o,a,l,s=e.mip,u=s.n,c=e.iwrk;for(o=0,a=s.c0,i=0,r=1;r<=u;r++){var _=s.col[r];if(0!=_.coef)if(_.type==ec)a+=_.coef*_.prim;else{if(_.kind!=Wu)return n;if(_.coef!=Math.floor(_.coef))return n;Math.abs(_.coef)<=Gl?c[++o]=0|Math.abs(_.coef):i=1}}if(0==i){if(0==o)return n;i=Ge(o,c)}return t(i>0),s.dir==Vu?n!=+Bl&&(l=(n-a)/i)>=Math.floor(l)+.001&&(l=Math.ceil(l),n=i*l+a):s.dir==Xu?n!=-Bl&&(l=(n-a)/i)<=Math.ceil(l)-.001&&(l=Math.floor(l),n=i*l+a):t(s!=s),n}function re(e,n){var i,r=e.mip,o=1;if(r.mip_stat==pc)switch(i=e.parm.tol_obj*(1+Math.abs(r.mip_obj)),r.dir){case Vu:n>=r.mip_obj-i&&(o=0);break;case Xu:n<=r.mip_obj+i&&(o=0);break;default:t(r!=r)}else switch(r.dir){case Vu:n==+Bl&&(o=0);break;case Xu:n==-Bl&&(o=0);break;default:t(r!=r)}return o}function oe(e){var n,i=null;switch(e.mip.dir){case Vu:for(n=e.head;null!=n;n=n.next)(null==i||i.bound>n.bound)&&(i=n);break;case Xu:for(n=e.head;null!=n;n=n.next)(null==i||i.bound<n.bound)&&(i=n);break;default:t(e!=e)}return null==i?0:i.p}function ae(e){var n,i=e.mip;t(null!=e.curr);var r=new Gs;switch(e.parm.msg_lev){case kc:r.msg_lev=kc;break;case Mc:r.msg_lev=Mc;break;case Ac:case Ec:r.msg_lev=Ac;break;case Pc:r.msg_lev=Ec;break;default:t(e!=e)}if(r.meth=Oc,e.parm.msg_lev<Pc?r.out_dly=e.parm.out_dly:r.out_dly=0,i.mip_stat==pc)switch(e.mip.dir){case Vu:r.obj_ul=i.mip_obj;break;case Xu:r.obj_ll=i.mip_obj;break;default:t(i!=i)}return n=Hs(i,r),e.curr.solved++,n}function le(e){t(e==e);var n={};return n.size=0,n.head=n.tail=null,n.ord=0,n.curr=null,n}function se(e,i,r,o,a,l,s,u,c,_){var d,f,b;for(t(null!=i),d={},null==r||"\0"==r[0]?d.name=null:d.name=r,0<=o&&o<=255||n("glp_ios_add_row: klass = "+o+"; invalid cut class"),d.klass=o,0!=a&&n("glp_ios_add_row: flags = "+a+"; invalid cut flags"),d.ptr=null,0<=l&&l<=e.n||n("glp_ios_add_row: len = "+l+"; invalid cut length"),b=1;b<=l;b++)f={},1<=s[b]&&s[b]<=e.n||n("glp_ios_add_row: ind["+b+"] = "+s[b]+"; column index out of range"),f.j=s[b],f.val=u[b],f.next=d.ptr,d.ptr=f;return c!=$u&&c!=Zu&&c!=ec&&n("glp_ios_add_row: type = "+c+"; invalid cut type"),d.type=c,d.rhs=_,d.prev=i.tail,d.next=null,null==d.prev?i.head=d:d.prev.next=d,i.tail=d,++i.size}function ue(e){for(t(null!=e);null!=e.head;){var n=e.head;for(e.head=n.next;null!=n.ptr;){var i=n.ptr;n.ptr=i.next}}e.size=0,e.head=e.tail=null,e.ord=0,e.curr=null}function ce(e){t(null!=e),ue(e)}function _e(e,n){function i(e,n,i,r,o){var a,l,s,u,c;for(t(e>=0),u=0,l=0,a=1;a<=e;a++)if(n[a]>0)if(i[a]==-Bl){if(0!=l){u=-Bl,l=0;break}l=a}else u+=n[a]*i[a];else if(n[a]<0)if(r[a]==+Bl){if(0!=l){u=-Bl,l=0;break}l=a}else u+=n[a]*r[a];else t(n!=n);for(o.f_min=u,o.j_min=l,c=0,s=0,a=1;a<=e;a++)if(n[a]>0)if(r[a]==+Bl){if(0!=s){c=+Bl,s=0;break}s=a}else c+=n[a]*r[a];else if(n[a]<0)if(i[a]==-Bl){if(0!=s){c=+Bl,s=0;break}s=a}else c+=n[a]*i[a];else t(n!=n);o.f_max=c,o.j_max=s}function r(e,t){t(0==e.j_min?e.f_min:-Bl,0==e.j_max?e.f_max:+Bl)}function o(e,n,i,r,o,a,l,s,u){var c,_,d,f;t(n>=0),t(1<=s&&s<=n),r==-Bl||e.f_max==+Bl?c=-Bl:0==e.j_max?i[s]>0?(t(l[s]!=+Bl),c=r-(e.f_max-i[s]*l[s])):i[s]<0?(t(a[s]!=-Bl),c=r-(e.f_max-i[s]*a[s])):t(i!=i):c=e.j_max==s?r-e.f_max:-Bl,o==+Bl||e.f_min==-Bl?_=+Bl:0==e.j_min?i[s]>0?(t(a[s]!=-Bl),_=o-(e.f_min-i[s]*a[s])):i[s]<0?(t(l[s]!=+Bl),_=o-(e.f_min-i[s]*l[s])):t(i!=i):_=e.j_min==s?o-e.f_min:+Bl,Math.abs(i[s])<1e-6?(d=-Bl,f=+Bl):i[s]>0?(d=c==-Bl?-Bl:c/i[s],f=_==+Bl?+Bl:_/i[s]):i[s]<0?(d=_==+Bl?-Bl:_/i[s],f=c==-Bl?+Bl:c/i[s]):t(i!=i),u(d,f)}function a(e,t,n,i,o){var a,l=0,s=t[n],u=i[o],c=null,_=null;return r(e,function(e,t){c=e,_=t}),s!=-Bl&&(a=.001*(1+Math.abs(s)),_<s-a)?l=1:u!=+Bl&&(a=.001*(1+Math.abs(u)),c>u+a)?l=1:(s!=-Bl&&(a=1e-12*(1+Math.abs(s)),c>s-a&&(t[n]=-Bl)),u!=+Bl&&(a=1e-12*(1+Math.abs(u)),_<u+a&&(i[o]=+Bl)),l)}function l(e,n,i,r,a,l,s,u,c,_){var d,f,b,p=0,m=null,h=null;if(t(n>=0),t(1<=c&&c<=n),f=l[c],b=s[c],o(e,n,i,r,a,l,s,c,function(e,t){m=e,h=t}),u&&(m!=-Bl&&(m=m-Math.floor(m)<.001?Math.floor(m):Math.ceil(m)),h!=+Bl&&(h=Math.ceil(h)-h<.001?Math.ceil(h):Math.floor(h))),f!=-Bl&&(d=.001*(1+Math.abs(f)),h<f-d))return p=1;if(b!=+Bl&&(d=.001*(1+Math.abs(b)),m>b+d))return p=1;if(m!=-Bl&&(d=.001*(1+Math.abs(m)),f<m-d&&(f=m)),h!=+Bl&&(d=.001*(1+Math.abs(h)),b>h+d&&(b=h)),f!=-Bl&&b!=+Bl){var g=Math.abs(f),v=Math.abs(b);d=1e-10*(1+(g<=v?g:v)),f>b-d&&(f==l[c]?b=f:b==s[c]?f=b:g<=v?b=f:f=b)}return _(f,b),p}function s(e,t,n,i,r){var o,a=0;return t<i&&(e||t==-Bl?a++:(o=n==+Bl?1+Math.abs(t):n-t+1,i-t>=.25*o&&a++)),n>r&&(e||n==+Bl?a++:(o=t==-Bl?1+Math.abs(n):n-t+1,n-r>=.25*o&&a++)),a}var u,c,_,d,f,b,p,m,h=e.mip,g=h.m,v=h.n,y=0;switch(t(null!=e.curr),f=new Float64Array(1+g),b=new Float64Array(1+g),h.mip_stat){case bc:f[0]=-Bl,b[0]=+Bl;break;case pc:switch(h.dir){case Vu:f[0]=-Bl,b[0]=h.mip_obj-h.c0;break;case Xu:f[0]=h.mip_obj-h.c0,b[0]=+Bl;break;default:t(h!=h)}break;default:t(h!=h)}for(u=1;u<=g;u++)f[u]=Ms(h,u),b[u]=As(h,u);for(p=new Float64Array(1+v),m=new Float64Array(1+v),c=1;c<=v;c++)p[c]=Ps(h,c),m[c]=js(h,c);for(_=g+1,d=new Int32Array(1+_),u=1;u<=_;u++)d[u]=u-1;if(function(e,n,r,o,u,c,_,d){var f,b,p,m,h,g,v,y,x,w,k,M,A,E,P=e.m,j=e.n,O={},C=0;for(t(0<=c&&c<=P+1),t(d>0),g=new Int32Array(1+j),v=new Int32Array(1+P+1),y=new Int32Array(1+P+1),x=new Int32Array(1+P+1),w=new Float64Array(1+j),k=new Float64Array(1+j),M=new Float64Array(1+j),h=0,p=1;p<=c;p++)f=_[p],t(0<=f&&f<=P),t(!y[f]),v[++h]=f,y[f]=1;for(t(h==c);h>0;)if(f=v[h--],y[f]=0,x[f]++,n[f]!=-Bl||r[f]!=+Bl){if(m=0,0==f)for(b=1;b<=j;b++)E=e.col[b],0!=E.coef&&(m++,g[m]=b,w[m]=E.coef);else{var S=e.row[f];for(A=S.ptr;null!=A;A=A.r_next)m++,g[m]=A.col.j,w[m]=A.val}for(p=1;p<=m;p++)b=g[p],k[p]=o[b],M[p]=u[b];if(i(m,w,k,M,O),a(O,n,f,r,f))return C=1;if(n[f]!=-Bl||r[f]!=+Bl)for(p=1;p<=m;p++){var z,N,L=null,T=null;if(b=g[p],E=e.col[b],z=E.kind!=Ku,l(O,m,w,n[f],r[f],k,M,z,p,function(e,t){L=e,T=t}))return C=1;if(N=s(z,o[b],u[b],L,T),o[b]=L,u[b]=T,N>0)for(A=E.ptr;null!=A;A=A.c_next){var I=A.row.i;x[I]>=d||(n[I]==-Bl&&r[I]==+Bl||0==y[I]&&(t(h<=P),v[++h]=I,y[I]=1))}}}return C}(h,f,b,p,m,_,d,n))return y=1;for(u=1;u<=g;u++)Ys(h,u)==tc&&(f[u]==-Bl&&b[u]==+Bl?ss(h,u,Ju,0,0):b[u]==+Bl?ss(h,u,$u,f[u],0):f[u]==-Bl&&ss(h,u,Zu,0,b[u]));for(c=1;c<=v;c++){var x;x=p[c]==-Bl&&m[c]==+Bl?Ju:m[c]==+Bl?$u:p[c]==-Bl?Zu:p[c]!=m[c]?Qu:ec,us(h,c,x,p[c],m[c])}return y}function de(e){function n(e,n){var i,r,o,a,s,u;o=e.mip.mip_stat==pc?String(e.mip.mip_obj):"not found yet",i=oe(e),0==i?a="tree is empty":(r=e.slot[i].node.bound,a=r==-Bl?"-inf":r==+Bl?"+inf":r),e.mip.dir==Vu?s=">=":e.mip.dir==Xu?s="<=":t(e!=e),r=Du(e),u=0==r?"  0.0%":r<.001?" < 0.1%":r<=9.999?"  "+Number(100*r).toFixed(1)+"%":"",Jl("+"+e.mip.it_cnt+": "+(n?">>>>>":"mip =")+" "+o+" "+s+" "+a+" "+u+" ("+e.a_cnt+"; "+(e.t_cnt-e.n_cnt)+")"),e.tm_lag=l()}function i(e,n){return t(1<=n&&n<=e.nslots),t(null!=e.slot[n].node),re(e,e.slot[n].node.bound)}function r(e){var n,i=e.mip,r=0,o=0,a=0,l=0,s=0;for(n=i.m;n>0;n--){var u=i.row[n];u.origin==Wc&&(u.klass==Yc?r++:u.klass==Jc?o++:u.klass==$c?a++:u.klass==Zc?l++:s++)}t(null!=e.curr),r+o+a+l+s>0&&(Jl("Cuts on level "+e.curr.level+":"),r>0&&Jl(" gmi = "+r+";"),o>0&&Jl(" mir = "+o+";"),a>0&&Jl(" cov = "+a+";"),l>0&&Jl(" clq = "+l+";"),s>0&&Jl(" app = "+s+";"),Jl(""))}for(var o,a,u,c,_,d=0,f=e.tm_beg,b=0;;){var p=null;switch(b){case 0:if(t(null==e.curr),null==e.head){e.parm.msg_lev>=Pc&&Jl("Active list is empty!"),_=0,p=3;break}if(t(0==e.next_p),null!=e.parm.cb_func&&(t(0==e.reason),e.reason=a_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop)){_=k_,p=3;break}0!=e.next_p||(1==e.a_cnt?(t(null==e.head.next),e.next_p=e.head.p):0!=e.child?e.next_p=e.child:e.next_p=qe(e)),$(e,e.next_p),e.next_p=e.child=0,null!=e.curr.up&&e.curr.up.p!=d&&(d=0),o=e.curr.p,e.parm.msg_lev>=Pc&&(Jl("------------------------------------------------------------------------"),Jl("Processing node "+o+" at level "+e.curr.level)),1==o&&(e.parm.gmi_cuts==Qc&&e.parm.msg_lev>=Ec&&Jl("Gomory's cuts enabled"),e.parm.mir_cuts==Qc&&(e.parm.msg_lev>=Ec&&Jl("MIR cuts enabled"),t(null==e.mir_gen),e.mir_gen=we(e)),e.parm.cov_cuts==Qc&&e.parm.msg_lev>=Ec&&Jl("Cover cuts enabled"),e.parm.clq_cuts==Qc&&(t(null==e.clq_gen),e.parm.msg_lev>=Ec&&Jl("Clique cuts enabled"),e.clq_gen=Ce(e)));case 1:if((e.parm.msg_lev>=Pc||e.parm.msg_lev>=Ac&&e.parm.out_frq-1<=1e3*s(l(),e.tm_lag))&&n(e,0),e.parm.msg_lev>=Ec&&s(l(),f)>=60&&(Jl("Time used: "+s(l(),e.tm_beg)+" secs"),f=l()),e.parm.mip_gap>0&&Du(e)<=e.parm.mip_gap){e.parm.msg_lev>=Pc&&Jl("Relative gap tolerance reached; search terminated "),_=M_,p=3;break}if(e.parm.tm_lim<Gl&&e.parm.tm_lim-1<=1e3*s(l(),e.tm_beg)){e.parm.msg_lev>=Pc&&Jl("Time limit exhausted; search terminated"),_=v_,p=3;break}if(null!=e.parm.cb_func&&(t(0==e.reason),e.reason=l_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop)){_=k_,p=3;break}if(e.parm.pp_tech==Gc);else if(e.parm.pp_tech==Vc){if(0==e.curr.level&&_e(e,100)){p=2;break}}else if(e.parm.pp_tech==Xc){if(_e(e,0==e.curr.level?100:10)){p=2;break}}else t(e!=e);if(!i(e,o)){Jl("*** not tested yet ***"),p=2;break}if(e.parm.msg_lev>=Pc&&Jl("Solving LP relaxation..."),0!=(_=ae(e))&&_!=m_&&_!=h_){e.parm.msg_lev>=Mc&&Jl("ios_driver: unable to solve current LP relaxation; glp_simplex returned "+_),_=p_,p=3;break}if(u=e.mip.pbs_stat,c=e.mip.dbs_stat,u==pc&&c==pc)e.parm.msg_lev>=Pc&&Jl("Found optimal solution to LP relaxation");else{if(c==hc){e.parm.msg_lev>=Mc&&Jl("ios_driver: current LP relaxation has no dual feasible solution"),_=p_,p=3;break}if(u==mc&&c==pc){t(e.mip.mip_stat==pc),e.parm.msg_lev>=Pc&&Jl("LP relaxation has no solution better than incumbent objective value"),p=2;break}if(u==hc){e.parm.msg_lev>=Pc&&Jl("LP relaxation has no feasible solution"),p=2;break}t(e.mip!=e.mip)}t(u==pc&&c==pc),t(null!=e.curr),e.curr.lp_obj=e.mip.obj_val;var m=e.mip.obj_val;if(m=ie(e,m),e.mip.dir==Vu?e.curr.bound<m&&(e.curr.bound=m):e.mip.dir==Xu?e.curr.bound>m&&(e.curr.bound=m):t(e.mip!=e.mip),e.parm.msg_lev>=Pc&&Jl("Local bound is "+m),!i(e,o)){e.parm.msg_lev>=Pc&&Jl("Current branch is hopeless and can be pruned"),p=2;break}if(t(0==e.reopt),t(0==e.reinv),null!=e.parm.cb_func){if(t(0==e.reason),e.reason=t_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop){_=k_,p=3;break}if(e.reopt){e.reopt=e.reinv=0,p=1;break}e.reinv&&(e.reinv=0,t(0==cu(e.mip)))}if(function(e){var n,i,r,o,a,l,s,u=e.mip,c=0,_=0;for(n=1;n<=u.n;n++){var d=u.col[n];if(e.non_int[n]=0,d.kind==Wu&&d.stat==tc){if(i=d.type,r=d.lb,o=d.ub,a=d.prim,i==$u||i==Qu||i==ec){if(l=r-e.parm.tol_int,s=r+e.parm.tol_int,l<=a&&a<=s)continue;if(a<r)continue}if(i==Zu||i==Qu||i==ec){if(l=o-e.parm.tol_int,s=o+e.parm.tol_int,l<=a&&a<=s)continue;if(a>o)continue}l=Math.floor(a+.5)-e.parm.tol_int,s=Math.floor(a+.5)+e.parm.tol_int,l<=a&&a<=s||(e.non_int[n]=1,c++,l=a-Math.floor(a),s=Math.ceil(a)-a,t(l>0&&s>0),_+=l<=s?l:s)}}t(null!=e.curr),e.curr.ii_cnt=c,e.curr.ii_sum=_,e.parm.msg_lev>=Pc&&Jl(0==c?"There are no fractional columns":1==c?"There is one fractional column, integer infeasibility is "+_:"There are "+c+" fractional columns, integer infeasibility is "+_)}(e),0==e.curr.ii_cnt){if(e.parm.msg_lev>=Pc&&Jl("New integer feasible solution found"),e.parm.msg_lev>=Ec&&r(e),function(e){var n,i,r=e.mip;for(r.mip_stat=pc,r.mip_obj=r.obj_val,n=1;n<=r.m;n++){var o=r.row[n];o.mipx=o.prim}for(i=1;i<=r.n;i++){var a=r.col[i];a.kind==Ku?a.mipx=a.prim:a.kind==Wu?a.mipx=Math.floor(a.prim+.5):t(a!=a)}e.sol_cnt++}(e),e.parm.msg_lev>=Ac&&n(e,1),null!=e.parm.cb_func&&(t(0==e.reason),e.reason=n_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop)){_=k_,p=3;break}p=2;break}if(e.mip.mip_stat==pc&&function(e){var n,i,r,o,a,l,s=e.mip,u=0;for(t(e.mip.mip_stat==pc),t(s.pbs_stat==pc&&s.dbs_stat==pc),r=s.obj_val,n=1;n<=s.n;n++){var c=s.col[n];if(c.kind==Wu)switch(o=c.lb,a=c.ub,i=c.stat,l=c.dual,s.dir){case Vu:i==nc?(l<0&&(l=0),r+l>=s.mip_obj&&(us(s,n,ec,o,o),u++)):i==ic&&(l>0&&(l=0),r-l>=s.mip_obj&&(us(s,n,ec,a,a),u++));break;case Xu:i==nc?(l>0&&(l=0),r+l<=s.mip_obj&&(us(s,n,ec,o,o),u++)):i==ic&&(l<0&&(l=0),r-l<=s.mip_obj&&(us(s,n,ec,a,a),u++));break;default:t(e!=e)}}e.parm.msg_lev>=Pc&&(0==u||Jl(1==u?"One column has been fixed by reduced cost":u+" columns have been fixed by reduced costs")),t(s.pbs_stat==pc&&s.dbs_stat==pc)}(e),null!=e.parm.cb_func){if(t(0==e.reason),e.reason=i_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop){_=k_,p=3;break}if(!i(e,o)){e.parm.msg_lev>=Pc&&Jl("Current branch became hopeless and can be pruned"),p=2;break}}if(e.parm.fp_heur&&(t(0==e.reason),e.reason=i_,Ue(e),e.reason=0,!i(e,o))){e.parm.msg_lev>=Pc&&Jl("Current branch became hopeless and can be pruned"),p=2;break}if(t(null!=e.local),t(0==e.local.size),null!=e.parm.cb_func&&(t(0==e.reason),e.reason=r_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop)){_=k_,p=3;break}if(0!=e.curr.level&&0!=d||(t(0==e.reason),e.reason=r_,function(e){if(e.parm.mir_cuts==Qc||e.parm.gmi_cuts==Qc||e.parm.cov_cuts==Qc||e.parm.clq_cuts==Qc){var n,i,r;for(i=e.n,i<1e3&&(i=1e3),r=0,n=e.orig_m+1;n<=e.mip.m;n++)e.mip.row[n].origin==Wc&&r++;r>=i||(e.parm.gmi_cuts==Qc&&e.curr.changed<5&&xe(e),e.parm.mir_cuts==Qc&&(t(null!=e.mir_gen),ke(e,e.mir_gen)),e.parm.cov_cuts==Qc&&Ee(e),e.parm.clq_cuts==Qc&&null!=e.clq_gen&&(0==e.curr.level&&e.curr.changed<50||e.curr.level>0&&e.curr.changed<5)&&Se(e,e.clq_gen))}}(e),e.reason=0),e.local.size>0&&(t(0==e.reason),e.reason=r_,Be(e),e.reason=0),ue(e.local),e.reopt){e.reopt=0,e.curr.changed++,p=1;break}if(function(e){var n,i=0,r=null;for(t(null!=e.curr),n=e.orig_m+1;n<=e.mip.m;n++)e.mip.row[n].origin==Wc&&e.mip.row[n].level==e.curr.level&&e.mip.row[n].stat==tc&&(null==r&&(r=new Int32Array(1+e.mip.m)),r[++i]=n);i>0&&(bs(e.mip,i,r),t(0==cu(e.mip)))}(e),e.parm.msg_lev>=Ec&&0==e.curr.level&&r(e),null!=e.pcost&&Fe(e),t(0==e.br_var),t(0==e.br_sel),null!=e.parm.cb_func&&(t(0==e.reason),t(0==e.br_var),t(0==e.br_sel),e.reason=o_,e.parm.cb_func(e,e.parm.cb_info),e.reason=0,e.stop)){_=k_,p=3;break}if(0==e.br_var&&(e.br_var=ze(e,function(t){e.br_sel=t})),a=e.curr.p,_=function(e,n,i){var r,o,a,l,s,u,c,_,d,f,b,p,m,h,g=e.mip,v=g.m,y=g.n,x=new Array(3),w=null,k=null;switch(t(1<=n&&n<=y),o=g.col[n].type,_=g.col[n].lb,d=g.col[n].ub,f=g.col[n].prim,b=Math.floor(f),p=Math.ceil(f),o){case Ju:a=Zu,l=$u;break;case $u:t(_<=b),a=_==b?ec:Qu,t(_+1<=p),l=$u;break;case Zu:t(b<=d-1),a=Zu,t(p<=d),l=p==d?ec:Qu;break;case Qu:t(_<=b&&b<=d-1),a=_==b?ec:Qu,t(_+1<=p&&p<=d),l=p==d?ec:Qu;break;default:t(o!=o)}return ne(e,n,function(e,t){w=e,k=t}),m=ie(e,w),h=ie(e,k),s=!re(e,m),u=!re(e,h),s&&u?(e.parm.msg_lev>=Pc&&Jl("Both down- and up-branches are hopeless"),2):u?(e.parm.msg_lev>=Pc&&Jl("Up-branch is hopeless"),us(g,n,a,_,b),e.curr.lp_obj=w,g.dir==Vu?e.curr.bound<m&&(e.curr.bound=m):g.dir==Xu?e.curr.bound>m&&(e.curr.bound=m):t(g!=g),1):s?(e.parm.msg_lev>=Pc&&Jl("Down-branch is hopeless"),us(g,n,l,p,d),e.curr.lp_obj=k,g.dir==Vu?e.curr.bound<h&&(e.curr.bound=h):g.dir==Xu?e.curr.bound>h&&(e.curr.bound=h):t(g!=g),1):(e.parm.msg_lev>=Pc&&Jl("Branching on column "+n+", primal value is "+f),t(null!=e.curr),c=e.curr.p,e.curr.br_var=n,e.curr.br_val=f,Z(e),Q(e,c,2,x),e.parm.msg_lev>=Pc&&Jl("Node "+x[1]+" begins down branch, node "+x[2]+" begins up branch "),r=e.slot[x[1]].node,t(null!=r),t(null!=r.up),t(null==r.b_ptr),r.b_ptr={},r.b_ptr.k=v+n,r.b_ptr.type=a,r.b_ptr.lb=_,r.b_ptr.ub=b,r.b_ptr.next=null,r.lp_obj=w,g.dir==Vu?r.bound<m&&(r.bound=m):g.dir==Xu?r.bound>m&&(r.bound=m):t(g!=g),r=e.slot[x[2]].node,t(null!=r),t(null!=r.up),t(null==r.b_ptr),r.b_ptr={},r.b_ptr.k=v+n,r.b_ptr.type=l,r.b_ptr.lb=p,r.b_ptr.ub=d,r.b_ptr.next=null,r.lp_obj=k,g.dir==Vu?r.bound<h&&(r.bound=h):g.dir==Xu?r.bound>h&&(r.bound=h):t(g!=g),t(0==e.child),i==s_?e.child=0:i==u_?e.child=x[1]:i==c_?e.child=x[2]:t(i!=i),0)}(e,e.br_var,e.br_sel),e.br_var=e.br_sel=0,0==_){d=a,p=0;break}if(1==_){e.curr.solved=e.curr.changed=0,p=1;break}if(2==_){p=2;break}t(_!=_);case 2:e.parm.msg_lev>=Pc&&Jl("Node "+o+" fathomed"),Z(e),ee(e,o),e.mip.mip_stat==pc&&function(e){var n,r,o=0;for(t(e.mip.mip_stat==pc),n=e.head;null!=n;n=r)r=n.next,i(e,n.p)||(ee(e,n.p),o++);e.parm.msg_lev>=Pc&&(1==o?Jl("One hopeless branch has been pruned"):o>1&&Jl(o+" hopeless branches have been pruned"))}(e),d=0,p=0;break;case 3:return e.parm.msg_lev>=Ac&&n(e,0),e.mir_gen=null,e.clq_gen=null,_}if(null==p)break;b=p}}function fe(e){var n;return t(e>=0),n={},n.n=e,n.nnz=0,n.pos=new Int32Array(1+e),n.ind=new Int32Array(1+e),n.val=new Float64Array(1+e),n}function be(e){var n,i,r;for(t(e.n>=0),r=0,n=e.n;n>=1;n--)i=e.pos[n],t(0<=i&&i<=e.nnz),0!=i&&(t(e.ind[i]==n),r++);t(e.nnz==r)}function pe(e,n){var i;return t(1<=n&&n<=e.n),i=e.pos[n],t(0<=i&&i<=e.nnz),0==i?0:e.val[i]}function me(e,n,i){t(1<=n&&n<=e.n);var r=e.pos[n];0==i?0!=r&&(e.pos[n]=0,r<e.nnz&&(e.pos[e.ind[e.nnz]]=r,e.ind[r]=e.ind[e.nnz],e.val[r]=e.val[e.nnz]),e.nnz--):(0==r&&(r=++e.nnz,e.pos[n]=r,e.ind[r]=n),e.val[r]=i)}function he(e){for(var t=1;t<=e.nnz;t++)e.pos[e.ind[t]]=0;e.nnz=0}function ge(e,t){for(var n=0,i=1;i<=e.nnz;i++)0==Math.abs(e.val[i])||Math.abs(e.val[i])<t?e.pos[e.ind[i]]=0:(n++,e.pos[e.ind[i]]=n,e.ind[n]=e.ind[i],e.val[n]=e.val[i]);e.nnz=n}function ve(e,n){t(e!=n),t(e.n==n.n),he(e),e.nnz=n.nnz,r(e.ind,1,n.ind,1,e.nnz),r(e.val,1,n.val,1,e.nnz);for(var i=1;i<=e.nnz;i++)e.pos[e.ind[i]]=i}function ye(e,n,i){var r,o,a;t(e!=i),t(e.n==i.n);for(var l=1;l<=i.nnz;l++)r=i.ind[l],o=pe(e,r),a=i.val[l],me(e,r,o+n*a)}function xe(e){function n(e){return e-Math.floor(e)}var i,r,o,a,l,s=e.mip,c=s.m,_=s.n,d={};for(i=new Array(1+_),d.ind=new Int32Array(1+_),d.val=new Float64Array(1+_),d.phi=new Float64Array(1+c+_),o=0,a=1;a<=_;a++){var f,b=s.col[a];b.kind==Wu&&(b.type!=ec&&b.stat==tc&&.05<=(f=n(b.prim))&&f<=.95&&(o++,i[o].j=a,i[o].f=f))}for(u(i,1,o,function(e,t){return e.f>t.f?-1:e.f<t.f?1:0}),l=k(e),r=1;r<=o&&!(k(e)-l>=50);r++)!function(e,i,r){var o,a,l,s,u,c,_,d,f,b,p,m,h,g,v=e.mip,y=v.m,x=v.n,w=i.ind,k=i.val,A=i.phi;for(l=gu(v,y+r,w,k),f=v.col[r].prim,a=1;a<=y+x;a++)A[a]=0;for(m=n(f),r=1;r<=l;r++){if(a=w[r],t(1<=a&&a<=y+x),a<=y?(h=v.row[a],s=Ku,c=h.lb,_=h.ub,u=h.stat):(g=v.col[a-y],s=g.kind,c=g.lb,_=g.ub,u=g.stat),t(u!=tc),b=k[r],Math.abs(b)>1e5)return;if(!(Math.abs(b)<1e-10)){switch(u){case rc:return;case nc:d=-b;break;case ic:d=+b;break;case oc:continue;default:t(u!=u)}switch(s){case Wu:if(Math.abs(d-Math.floor(d+.5))<1e-10)continue;p=n(d)<=n(f)?n(d):n(f)/(1-n(f))*(1-n(d));break;case Ku:p=d>=0?+d:n(f)/(1-n(f))*-d;break;default:t(s!=s)}switch(u){case nc:A[a]=+p,m+=p*c;break;case ic:A[a]=-p,m-=p*_;break;default:t(u!=u)}}}for(o=1;o<=y;o++){var E;if(!(Math.abs(A[o])<1e-10))for(h=v.row[o],t(h.type!=ec),E=h.ptr;null!=E;E=E.r_next)A[y+E.col.j]+=A[o]*E.val}for(l=0,r=1;r<=x;r++)Math.abs(A[y+r])<1e-10||(g=v.col[r],g.type==ec?m-=A[y+r]*g.lb:(l++,w[l]=r,k[l]=A[y+r]));for(Math.abs(m)<1e-12&&(m=0),a=1;a<=l;a++){if(Math.abs(k[a])<.001)return;if(Math.abs(k[a])>1e3)return}M(e,null,Yc,0,l,w,k,$u,m)}(e,d,i[r].j)}function we(e){var n,i=e.mip,r=i.m,o=i.n;return Fu&&Jl("ios_mir_init: warning: debug mode enabled"),n={},n.m=r,n.n=o,n.skip=new Int8Array(1+r),n.isint=new Int8Array(1+r+o),n.lb=new Float64Array(1+r+o),n.vlb=new Int32Array(1+r+o),n.ub=new Float64Array(1+r+o),n.vub=new Int32Array(1+r+o),n.x=new Float64Array(1+r+o),n.agg_row=new Int32Array(1+Ru),n.agg_vec=fe(r+o),n.subst=new Int8Array(1+r+o),n.mod_vec=fe(r+o),n.cut_vec=fe(r+o),function(e,n){var i,r=e.mip,o=n.m;for(i=1;i<=o;i++){var a=r.row[i];switch(n.skip[i]=0,n.isint[i]=0,a.type){case Ju:n.lb[i]=-Bl,n.ub[i]=+Bl;break;case $u:n.lb[i]=a.lb,n.ub[i]=+Bl;break;case Zu:n.lb[i]=-Bl,n.ub[i]=a.ub;break;case Qu:n.lb[i]=a.lb,n.ub[i]=a.ub;break;case ec:n.lb[i]=n.ub[i]=a.lb;break;default:t(a!=a)}n.vlb[i]=n.vub[i]=0}}(e,n),function(e,n){var i,r=e.mip,o=n.m,a=n.n;for(i=o+1;i<=o+a;i++){var l=r.col[i-o];switch(l.kind){case Ku:n.isint[i]=0;break;case Wu:n.isint[i]=1;break;default:t(l!=l)}switch(l.type){case Ju:n.lb[i]=-Bl,n.ub[i]=+Bl;break;case $u:n.lb[i]=l.lb,n.ub[i]=+Bl;break;case Zu:n.lb[i]=-Bl,n.ub[i]=l.ub;break;case Qu:n.lb[i]=l.lb,n.ub[i]=l.ub;break;case ec:n.lb[i]=n.ub[i]=l.lb;break;default:t(l!=l)}n.vlb[i]=n.vub[i]=0}}(e,n),function(e,t){var n,i,r,o,a,l,s=e.mip,u=t.m;for(i=1;i<=u;i++)if((0==t.lb[i]&&t.ub[i]==+Bl||t.lb[i]==-Bl&&0==t.ub[i])&&null!=(n=s.row[i].ptr)&&(r=u+n.col.j,a=n.val,null!=(n=n.r_next)&&(o=u+n.col.j,l=n.val,null==n.r_next))){if(!t.isint[r]&&t.isint[o]);else{if(!t.isint[r]||t.isint[o])continue;o=r,l=a,r=u+n.col.j,a=n.val}t.lb[o]!=-Bl&&t.ub[o]!=+Bl&&t.lb[o]!=t.ub[o]&&(0==t.ub[i]&&(a=-a,l=-l),a>0?0==t.vlb[r]&&(t.lb[r]=-l/a,t.vlb[r]=o,t.skip[i]=1):0==t.vub[r]&&(t.ub[r]=-l/a,t.vub[r]=o,t.skip[i]=1))}}(e,n),function(e,t){var n,i,r,o,a=e.mip,l=t.m;for(i=1;i<=l;i++)if(t.lb[i]!=-Bl||t.ub[i]!=+Bl){for(o=0,n=a.row[i].ptr;null!=n;n=n.r_next){if(r=l+n.col.j,t.lb[r]==-Bl&&t.ub[r]==+Bl){t.skip[i]=1;break}if(t.isint[r]&&t.lb[r]==-Bl||t.isint[r]&&t.ub[r]==+Bl){t.skip[i]=1;break}0==t.vlb[r]&&0==t.vub[r]&&t.lb[r]==t.ub[r]||o++}0==o&&(t.skip[i]=1)}else t.skip[i]=1}(e,n),n}function ke(e,n){function i(e,n,i,r,o,a,c){function _(e,t){return e.v<t.v?-1:e.v>t.v?1:0}function d(e,t,n,i,r,o,a){var u,c,_;for(c=a,_=n,u=1;u<=e;u++)c[u]=t[u]/o,r[u]&&(c[u]=-c[u]),_-=t[u]*i[u];if(_/=o,function(e,t,n,i){var r,o,a;if(Math.abs(n-Math.floor(n+.5))<.01)return 1;for(o=n-Math.floor(n),r=1;r<=e;r++)a=t[r]-Math.floor(t[r])-o,i[r]=a<=0?Math.floor(t[r]):Math.floor(t[r])+a/(1-o);return l=Math.floor(n),s=1/(1-o),0}(e,c,_,a))return 1;for(u=1;u<=e;u++)r[u]&&(a[u]=-a[u],l+=a[u]*i[u]);return s/=o,0}var f,b,p,m,h,g,v,y,x,w,k,M=new Array(4);for(w=new Int8Array(1+e),k=new Array(1+e),b=1;b<=e;b++)w[b]=o[b]>=.5*r[b];for(x=g=0,b=1;b<=e;b++)if(t(0!=n[b]),v=1e-9*(1+Math.abs(r[b])),!(o[b]<v||o[b]>r[b]-v)&&!(f=d(e,n,i,r,w,Math.abs(n[b]),c))){for(y=-l-s*a,p=1;p<=e;p++)y+=c[p]*o[p];x<y&&(x=y,g=Math.abs(n[b]))}if(x<.001&&(x=0),0==x)return x;for(t(g>0),M[1]=g/2,M[2]=g/4,M[3]=g/8,b=1;b<=3;b++)if(!(f=d(e,n,i,r,w,M[b],c))){for(y=-l-s*a,p=1;p<=e;p++)y+=c[p]*o[p];x<y&&(x=y,g=M[b])}for(m=0,b=1;b<=e;b++)v=1e-9*(1+Math.abs(r[b])),o[b]<v||o[b]>r[b]-v||(m++,k[m].j=b,k[m].v=Math.abs(o[b]-.5*r[b]));for(u(k,1,m,_),h=1;h<=m;h++)if(b=k[h].j,w[b]=!w[b],f=d(e,n,i,r,w,g,c),w[b]=!w[b],!f){for(y=-l-s*a,p=1;p<=e;p++)y+=c[p]*o[p];x<y&&(x=y,w[b]=!w[b])}return f=d(e,n,i,r,w,g,c),t(!f),x}function r(e){var n,i,r,o,a=e.m,l=e.n;for(r=0,o=1,n=1;n<=e.agg_vec.nnz;n++)i=e.agg_vec.ind[n],t(1<=i&&i<=a+l),r+=e.agg_vec.val[n]*e.x[i],o<Math.abs(e.agg_vec.val[n])&&(o=Math.abs(e.agg_vec.val[n]));r-=e.agg_rhs,o<Math.abs(e.agg_rhs)&&(o=Math.abs(e.agg_rhs)),t(Math.abs(r)<=1e-6*o)}function a(e,n){var i,r,o,a,l=e.m,s=e.n;for(o=0,a=1,i=1;i<=e.cut_vec.nnz;i++)r=e.cut_vec.ind[i],t(1<=r&&r<=l+s),o+=e.cut_vec.val[i]*e.x[r],a<Math.abs(e.cut_vec.val[i])&&(a=Math.abs(e.cut_vec.val[i]));o-=e.cut_rhs,a<Math.abs(e.cut_rhs)&&(a=Math.abs(e.cut_rhs)),t(Math.abs(o-n)<=1e-6*a)}var l,s,c,_,d,f=e.mip,b=n.m,p=n.n;for(t(f.m>=b),t(f.n==p),function(e,t){var n,i=e.mip,r=t.m,o=t.n;for(n=1;n<=r;n++)t.x[n]=i.row[n].prim;for(n=r+1;n<=r+o;n++)t.x[n]=i.col[n-r].prim}(e,n),Fu&&function(e){var n,i,r,o,a,l=e.m,s=e.n;for(n=1;n<=l+s;n++)r=e.lb[n],i=e.vlb[n],0!=i&&(t(r!=-Bl),t(!e.isint[n]),t(e.isint[i]),r*=e.x[i]),r!=-Bl&&(a=1e-6*(1+Math.abs(r)),t(e.x[n]>=r-a)),o=e.ub[n],i=e.vub[n],0!=i&&(t(o!=+Bl),t(!e.isint[n]),t(e.isint[i]),o*=e.x[i]),o!=+Bl&&(a=1e-6*(1+Math.abs(o)),t(e.x[n]<=o+a))}(n),o(n.subst,1,Uu,b+p),c=1;c<=b;c++)if(!n.skip[c]){for(function(e,n,i){var r,o=e.mip,a=n.m;for(t(1<=i&&i<=a),t(!n.skip[i]),n.skip[i]=2,n.agg_cnt=1,n.agg_row[1]=i,he(n.agg_vec),me(n.agg_vec,i,1),r=o.row[i].ptr;null!=r;r=r.r_next)me(n.agg_vec,a+r.col.j,-r.val);n.agg_rhs=0,Fu&&be(n.agg_vec)}(e,n,c);;){if(Fu&&r(n),function(e){var n,i,r=e.m,o=e.n;for(n=1;n<=e.agg_vec.nnz;n++)i=e.agg_vec.ind[n],t(1<=i&&i<=r+o),0==e.vlb[i]&&0==e.vub[i]&&e.lb[i]==e.ub[i]&&(e.agg_rhs-=e.agg_vec.val[n]*e.lb[i],e.agg_vec.val[n]=0);ge(e.agg_vec,Vl),Fu&&be(e.agg_vec)}(n),Fu)for(r(n),_=1;_<=b+p;_++)t(n.subst[_]==Uu);!function(e){var n,i,r,o,a,l=e.m,s=e.n;for(n=1;n<=e.agg_vec.nnz;n++)i=e.agg_vec.ind[n],t(1<=i&&i<=l+s),e.isint[i]||(r=e.vlb[i],0==r?o=e.lb[i]==-Bl?Bl:e.x[i]-e.lb[i]:(t(1<=r&&r<=l+s),t(e.isint[r]),t(e.lb[i]!=-Bl),o=e.x[i]-e.lb[i]*e.x[r]),r=e.vub[i],0==r?a=e.vub[i]==+Bl?Bl:e.ub[i]-e.x[i]:(t(1<=r&&r<=l+s),t(e.isint[r]),t(e.ub[i]!=+Bl),a=e.ub[i]*e.x[r]-e.x[i]),t(o!=Bl||a!=Bl),t(e.subst[i]==Uu),e.subst[i]=o<=a?Bu:qu)}(n),function(e){var n,i,r,o,a=e.m,l=e.n;for(ve(e.mod_vec,e.agg_vec),e.mod_rhs=e.agg_rhs,Fu&&be(e.mod_vec),n=e.mod_vec.nnz;n>=1;n--)r=e.mod_vec.ind[n],t(1<=r&&r<=a+l),e.isint[r]||(e.subst[r]==Bu?(t(e.lb[r]!=-Bl),o=e.vlb[r],0==o?e.mod_rhs-=e.mod_vec.val[n]*e.lb[r]:(t(e.isint[o]),i=e.mod_vec.pos[o],0==i&&(me(e.mod_vec,o,1),i=e.mod_vec.pos[o],e.mod_vec.val[i]=0),e.mod_vec.val[i]+=e.mod_vec.val[n]*e.lb[r])):e.subst[r]==qu?(t(e.ub[r]!=+Bl),o=e.vub[r],0==o?e.mod_rhs-=e.mod_vec.val[n]*e.ub[r]:(t(e.isint[o]),i=e.mod_vec.pos[o],0==i&&(me(e.mod_vec,o,1),i=e.mod_vec.pos[o],e.mod_vec.val[i]=0),e.mod_vec.val[i]+=e.mod_vec.val[n]*e.ub[r]),e.mod_vec.val[n]=-e.mod_vec.val[n]):t(r!=r));for(Fu&&be(e.mod_vec),n=1;n<=e.mod_vec.nnz;n++)r=e.mod_vec.ind[n],t(1<=r&&r<=a+l),e.isint[r]&&(t(e.subst[r]==Uu),t(0==e.vlb[r]&&0==e.vub[r]),t(e.lb[r]!=-Bl&&e.ub[r]!=+Bl),Math.abs(e.lb[r])<=Math.abs(e.ub[r])?(e.subst[r]=Bu,e.mod_rhs-=e.mod_vec.val[n]*e.lb[r]):(e.subst[r]=qu,e.mod_rhs-=e.mod_vec.val[n]*e.ub[r],e.mod_vec.val[n]=-e.mod_vec.val[n]));Fu&&be(e.mod_vec)}(n),Fu&&function(e){var n,i,r,o,a,l,s=e.m,u=e.n;for(o=0,a=1,n=1;n<=e.mod_vec.nnz;n++)i=e.mod_vec.ind[n],t(1<=i&&i<=s+u),e.subst[i]==Bu?(t(e.lb[i]!=-Bl),r=e.vlb[i],l=0==r?e.x[i]-e.lb[i]:e.x[i]-e.lb[i]*e.x[r]):e.subst[i]==qu?(t(e.ub[i]!=+Bl),r=e.vub[i],l=0==r?e.ub[i]-e.x[i]:e.ub[i]*e.x[r]-e.x[i]):t(i!=i),o+=e.mod_vec.val[n]*l,a<Math.abs(e.mod_vec.val[n])&&(a=Math.abs(e.mod_vec.val[n]));o-=e.mod_rhs,a<Math.abs(e.mod_rhs)&&(a=Math.abs(e.mod_rhs)),t(Math.abs(o)<=1e-6*a)}(n),d=function(e){var n,r,o,a,l,s,u,c,_,d=e.m,f=e.n,b=0;for(ve(e.cut_vec,e.mod_vec),e.cut_rhs=e.mod_rhs,ge(e.cut_vec,Vl),Fu&&be(e.cut_vec),n=1;n<=e.cut_vec.nnz;n++)r=e.cut_vec.ind[n],t(1<=r&&r<=d+f),!e.isint[r]&&e.cut_vec.val[n]>0&&(e.cut_vec.val[n]=0);for(ge(e.cut_vec,0),Fu&&be(e.cut_vec),a=0,n=1;n<=e.cut_vec.nnz;n++)if(r=e.cut_vec.ind[n],t(1<=r&&r<=d+f),e.isint[r]){var p;a++,o=e.cut_vec.ind[a],e.cut_vec.pos[r]=a,e.cut_vec.pos[o]=n,e.cut_vec.ind[a]=r,e.cut_vec.ind[n]=o,p=e.cut_vec.val[a],e.cut_vec.val[a]=e.cut_vec.val[n],e.cut_vec.val[n]=p}if(Fu&&be(e.cut_vec),0==a)return b;for(s=new Float64Array(1+a),u=new Float64Array(1+a),c=new Float64Array(1+a),n=1;n<=a;n++)r=e.cut_vec.ind[n],t(d+1<=r&&r<=d+f),t(e.isint[r]),s[n]=e.ub[r]-e.lb[r],t(s[n]>=1),e.subst[r]==Bu?u[n]=e.x[r]-e.lb[r]:e.subst[r]==qu?u[n]=e.ub[r]-e.x[r]:t(r!=r),t(u[n]>=-.001),u[n]<0&&(u[n]=0);for(l=0,n=a+1;n<=e.cut_vec.nnz;n++)r=e.cut_vec.ind[n],t(1<=r&&r<=d+f),t(!e.isint[r]),e.subst[r]==Bu?(t(e.lb[r]!=-Bl),o=e.vlb[r],u=0==o?e.x[r]-e.lb[r]:e.x[r]-e.lb[r]*e.x[o]):e.subst[r]==qu?(t(e.ub[r]!=+Bl),o=e.vub[r],u=0==o?e.ub[r]-e.x[r]:e.ub[r]*e.x[o]-e.x[r]):t(r!=r),t(u>=-.001),u<0&&(u=0),l-=e.cut_vec.val[n]*u;if(t(l>=0),_=e.cut_rhs,0==(b=i(a,e.cut_vec.val,_,s,u,l,c)))return b;for(t(b>0),n=1;n<=a;n++)e.cut_vec.val[n]=c[n];for(n=a+1;n<=e.cut_vec.nnz;n++)(r=e.cut_vec.ind[n])<=d+f&&(e.cut_vec.val[n]*=null);return e.cut_rhs=null,Fu&&be(e.cut_vec),b}(n),d>0&&(Fu&&function(e,n){var i,r,o,a,l,s,u=e.m,c=e.n;for(a=0,l=1,i=1;i<=e.cut_vec.nnz;i++)r=e.cut_vec.ind[i],t(1<=r&&r<=u+c),e.subst[r]==Bu?(t(e.lb[r]!=-Bl),o=e.vlb[r],s=0==o?e.x[r]-e.lb[r]:e.x[r]-e.lb[r]*e.x[o]):e.subst[r]==qu?(t(e.ub[r]!=+Bl),o=e.vub[r],s=0==o?e.ub[r]-e.x[r]:e.ub[r]*e.x[o]-e.x[r]):t(r!=r),a+=e.cut_vec.val[i]*s,l<Math.abs(e.cut_vec.val[i])&&(l=Math.abs(e.cut_vec.val[i]));a-=e.cut_rhs,l<Math.abs(e.cut_rhs)&&(l=Math.abs(e.cut_rhs)),t(Math.abs(a-n)<=1e-6*l)}(n,d),function(e){var n,i,r,o,a=e.m,l=e.n;for(n=1;n<=e.cut_vec.nnz;n++)r=e.cut_vec.ind[n],t(1<=r&&r<=a+l),e.isint[r]&&(e.subst[r]==Bu?(t(e.lb[r]!=-Bl),t(0==e.vlb[r]),e.cut_rhs+=e.cut_vec.val[n]*e.lb[r]):e.subst[r]==qu?(t(e.ub[r]!=+Bl),t(0==e.vub[r]),e.cut_rhs-=e.cut_vec.val[n]*e.ub[r],e.cut_vec.val[n]=-e.cut_vec.val[n]):t(r!=r));for(n=1;n<=e.cut_vec.nnz;n++)r=e.cut_vec.ind[n],t(1<=r&&r<=a+l),e.isint[r]||(e.subst[r]==Bu?(t(e.lb[r]!=-Bl),o=e.vlb[r],0==o?e.cut_rhs+=e.cut_vec.val[n]*e.lb[r]:(i=e.cut_vec.pos[o],0==i&&(me(e.cut_vec,o,1),i=e.cut_vec.pos[o],t(0!=i),e.cut_vec.val[i]=0),e.cut_vec.val[i]-=e.cut_vec.val[n]*e.lb[r])):e.subst[r]==qu?(t(e.ub[r]!=+Bl),o=e.vub[r],0==o?e.cut_rhs-=e.cut_vec.val[n]*e.ub[r]:(i=e.cut_vec.pos[o],0==i&&(me(e.cut_vec,o,1),i=e.cut_vec.pos[o],t(0!=i),e.cut_vec.val[i]=0),e.cut_vec.val[i]+=e.cut_vec.val[n]*e.ub[r]),e.cut_vec.val[n]=-e.cut_vec.val[n]):t(r!=r));Fu&&be(e.cut_vec)}(n),Fu&&a(n,d),function(e,n){var i,r,o,a,l,s=e.mip,u=n.m,c=n.n;for(r=n.cut_vec.nnz;r>=1;r--)if(o=n.cut_vec.ind[r],t(1<=o&&o<=u+c),!(o>u)){for(i=s.row[o].ptr;null!=i;i=i.r_next)a=u+i.col.j,l=n.cut_vec.pos[a],0==l&&(me(n.cut_vec,a,1),l=n.cut_vec.pos[a],n.cut_vec.val[l]=0),n.cut_vec.val[l]+=n.cut_vec.val[r]*i.val;n.cut_vec.val[r]=0}ge(n.cut_vec,0)}(e,n),Fu&&a(n,d),function(e,n){var i,r,o,a=n.m,l=n.n,s=new Int32Array(1+l),u=new Float64Array(1+l);for(o=0,i=n.cut_vec.nnz;i>=1;i--)r=n.cut_vec.ind[i],t(a+1<=r&&r<=a+l),o++,s[o]=r-a,u[o]=n.cut_vec.val[i];M(e,null,Jc,0,o,s,u,Zu,n.cut_rhs)}(e,n));for(var m=1;m<=n.mod_vec.nnz;m++)_=n.mod_vec.ind[m],t(1<=_&&_<=b+p),t(n.subst[_]!=Uu),n.subst[_]=Uu;if(!(0==d&&n.agg_cnt<Ru&&0==function(e,n){var i,r,o,a,l,s,u,c,_,d,f=e.mip,b=n.m,p=n.n,m=0,h=0,g=0;for(a=1;a<=n.agg_vec.nnz;a++)s=n.agg_vec.ind[a],t(1<=s&&s<=b+p),s<=b||n.isint[s]||Math.abs(n.agg_vec.val[a])<.001||(u=n.vlb[s],0==u?c=n.lb[s]==-Bl?Bl:n.x[s]-n.lb[s]:(t(1<=u&&u<=b+p),t(n.isint[u]),t(n.lb[s]!=-Bl),c=n.x[s]-n.lb[s]*n.x[u]),u=n.vub[s],0==u?_=n.vub[s]==+Bl?Bl:n.ub[s]-n.x[s]:(t(1<=u&&u<=b+p),t(n.isint[u]),t(n.ub[s]!=+Bl),_=n.ub[s]*n.x[u]-n.x[s]),t(c!=Bl||_!=Bl),d=c<=_?c:_,t(d!=Bl),d<.001||g<d&&(g=d,m=s));if(0==m)return h=1;for(t(b+1<=m&&m<=b+p),t(!n.isint[m]),o=1;o<=b;o++)if(!n.skip[o]){for(i=f.row[o].ptr;null!=i&&i.col.j!=m-b;i=i.r_next);if(null!=i&&Math.abs(i.val)>=.001)break}if(o>b)return h=2;for(n.agg_cnt++,t(n.agg_cnt<=Ru),n.agg_row[n.agg_cnt]=o,n.skip[o]=2,r=fe(b+p),me(r,o,1),i=f.row[o].ptr;null!=i;i=i.r_next)me(r,b+i.col.j,-i.val);return Fu&&be(r),a=n.agg_vec.pos[m],t(0!=a),l=r.pos[m],t(0!=l),ye(n.agg_vec,-n.agg_vec.val[a]/r.val[l],r),me(n.agg_vec,m,0),Fu&&be(n.agg_vec),h}(e,n)))break}var h;for(_=1;_<=n.agg_cnt;_++)h=n.agg_row[_],t(1<=h&&h<=b),t(2==n.skip[h]),n.skip[h]=0}}function Me(e,n,i,r,o){function a(e,t,n,i,r,o,a){var l,s,u,c,_=0,d=0,f=.001;for(u=.001*(1+Math.abs(n)),l=1;l<=e;l++)for(s=l+1;s<=e;s++){if(++_>y)return d;t[l]+t[s]+o>n+u&&(c=t[l]+t[s]-n,g=1/(c+i),v=2-g*c,c=r[l]+r[s]+g*o-v,f<c&&(f=c,a[1]=l,a[2]=s,d=1))}return d}function l(e,t,n,i,r,o,a){var l,s,u,c,_,d=0,f=0,b=.001;for(c=.001*(1+Math.abs(n)),l=1;l<=e;l++)for(s=l+1;s<=e;s++)for(u=s+1;u<=e;u++){if(++d>y)return f;t[l]+t[s]+t[u]+o>n+c&&(_=t[l]+t[s]+t[u]-n,g=1/(_+i),v=3-g*_,_=r[l]+r[s]+r[u]+g*o-v,b<_&&(b=_,a[1]=l,a[2]=s,a[3]=u,f=1))}return f}function s(e,t,n,i,r,o,a){var l,s,u,c,_,d,f=0,b=0,p=.001;for(_=.001*(1+Math.abs(n)),l=1;l<=e;l++)for(s=l+1;s<=e;s++)for(u=s+1;u<=e;u++)for(c=u+1;c<=e;c++){if(++f>y)return b;t[l]+t[s]+t[u]+t[c]+o>n+_&&(d=t[l]+t[s]+t[u]+t[c]-n,g=1/(d+i),v=4-g*d,d=r[l]+r[s]+r[u]+r[c]+g*o-v,p<d&&(p=d,a[1]=l,a[2]=s,a[3]=u,a[4]=c,b=1))}return b}var u,c,_,d,f,b,p,m,h,g=null,v=null,y=1e3,x=new Array(5);for(d=0,c=1;c<=n;c++)u=i[c],ft(e,u)==S_?r[0]-=r[c]*bt(e,u):(d++,i[d]=i[c],r[d]=r[c]);for(n=d,_=0,c=1;c<=n;c++)if(u=i[c],Et(e,u)==F_&&ft(e,u)==C_&&0==bt(e,u)&&1==pt(e,u)){var w,k;_++,w=i[_],k=r[_],i[_]=i[c],r[_]=r[c],i[c]=w,r[c]=k}if(_<2)return 0;for(b=p=0,c=_+1;c<=n;c++){if(u=i[c],ft(e,u)!=C_)return 0;r[c]>0?(b+=r[c]*bt(e,u),p+=r[c]*pt(e,u)):(b+=r[c]*pt(e,u),p+=r[c]*bt(e,u))}for(m=p-b,h=0,c=_+1;c<=n;c++)u=i[c],h+=r[c]*kt(e,u);for(h-=b,h<0&&(h=0),h>m&&(h=m),r[0]-=b,c=1;c<=_;c++)u=i[c],o[c]=kt(e,u),o[c]<0&&(o[c]=0),o[c]>1&&(o[c]=1);for(c=1;c<=_;c++)r[c]<0&&(i[c]=-i[c],r[c]=-r[c],r[0]+=r[c],o[c]=1-o[c]);if(0==(f=function(e,n,i,r,o,u,c){var _;for(t(e>=2),_=1;_<=e;_++)t(n[_]>0);for(t(i>-1e-5),t(r>=0),_=1;_<=e;_++)t(0<=o[_]&&o[_]<=1);return t(0<=u&&u<=r),a(e,n,i,r,o,u,c)?2:l(e,n,i,r,o,u,c)?3:s(e,n,i,r,o,u,c)?4:0}(_,r,r[0],m,o,h,x)))return 0;for(t(2<=f&&f<=4),i[0]=0,r[0]=v,u=1;u<=f;u++)x[u]=i[x[u]];for(t(f<=_),c=1;c<=f;c++)x[c]>0?(i[c]=+x[c],r[c]=1):(i[c]=-x[c],r[c]=-1,r[0]-=1);for(c=_+1;c<=n;c++)f++,i[f]=i[c],r[f]=g*r[c];return r[0]+=g*b,t(f<=n),n=f}function Ae(e,t,i,r){var o,a,l=st(e),s=0;for(t<0&&n("lpx_eval_row: len = "+t+"; invalid row length"),a=1;a<=t;a++)o=i[a],1<=o&&o<=l||n("lpx_eval_row: j = "+o+"; column number out of range"),s+=r[a]*kt(e,o);return s}function Ee(e){var n,i,r,o,a,l,s,u,c=e.mip,_=lt(c),d=st(c);for(t(xt(c)==R_),l=new Int32Array(1+d),s=new Float64Array(1+d),u=new Float64Array(1+d),n=1;n<=_;n++)for(o=1;o<=2;o++){if(r=ut(c,n),1==o){if(r!=O_&&r!=C_)continue;a=ht(c,n,l,s),s[0]=_t(c,n)}else{if(r!=j_&&r!=C_)continue;for(a=ht(c,n,l,s),i=1;i<=a;i++)s[i]=-s[i];s[0]=-ct(c,n)}a=Me(c,a,l,s,u),0!=a&&(Ae(c,a,l,s)-s[0]<.001||M(e,null,$c,0,a,l,s,Zu,s[0]))}}function Pe(e){function n(e,n){var i;switch(ut(e,n)){case P_:case O_:i=-Bl;break;case j_:case C_:case S_:i=ct(e,n);break;default:t(e!=e)}return i}function i(e,n){var i;switch(ut(e,n)){case P_:case j_:i=+Bl;break;case O_:case C_:case S_:i=_t(e,n);break;default:t(e!=e)}return i}function r(e,n){var i;switch(ft(e,n)){case P_:case O_:i=-Bl;break;case j_:case C_:case S_:i=bt(e,n);break;default:t(e!=e)}return i}function o(e,n){var i;switch(ft(e,n)){case P_:case j_:i=+Bl;break;case O_:case C_:case S_:i=pt(e,n);break;default:t(e!=e)}return i}function a(e,t){return Et(e,t)==F_&&ft(e,t)==C_&&0==bt(e,t)&&1==pt(e,t)}function l(e,n,i,a){var l,s,u,c,_;for(_=0,s=1;s<=n;s++)if(l=i[s],a[s]>0){if((u=r(e,l))==-Bl){_=-Bl;break}_+=a[s]*u}else if(a[s]<0){if((c=o(e,l))==+Bl){_=-Bl;break}_+=a[s]*c}else t(a!=a);return _}function s(e,n,i,a){var l,s,u,c,_;for(_=0,s=1;s<=n;s++)if(l=i[s],a[s]>0){if((c=o(e,l))==+Bl){_=+Bl;break}_+=a[s]*c}else if(a[s]<0){if((u=r(e,l))==-Bl){_=+Bl;break}_+=a[s]*u}else t(a!=a);return _}function u(e,n,i,r,o,a,l,s,u){var c;return t(1<=l&&l<u&&u<=e),i!=-Bl&&s&&(i-=n[l]),r!=+Bl&&s&&(r-=n[l]),o!=-Bl&&(n[l]<0&&(o-=n[l]),n[u]<0&&(o-=n[u])),a!=+Bl&&(n[l]>0&&(a-=n[l]),n[u]>0&&(a-=n[u])),(c=n[u]>0?i==-Bl||a==+Bl?-Bl:(i-a)/n[u]:r==+Bl||o==-Bl?-Bl:(r-o)/n[u])>.001?2:(c=n[u]>0?r==+Bl||o==-Bl?+Bl:(r-o)/n[u]:i==-Bl||a==+Bl?+Bl:(i-a)/n[u],c<.999?1:0)}var c,_,d,f,b,p,m,h,g,v,y,x,w,k,M,A,E=null;for(Jl("Creating the conflict graph..."),c=lt(e),_=st(e),d=0,v=new Int32Array(1+_),y=new Int32Array(1+_),g=new Int32Array(1+_),A=new Float64Array(1+_),f=1;f<=c;f++)if(x=n(e,f),w=i(e,f),(x!=-Bl||w!=+Bl)&&!((h=ht(e,f,g,A))>500))for(k=l(e,h,g,A),M=s(e,h,g,A),p=1;p<=h;p++)if(a(e,g[p]))for(m=p+1;m<=h;m++)a(e,g[m])&&(u(h,A,x,w,k,M,p,0,m)||u(h,A,x,w,k,M,p,1,m))&&(b=g[p],0==v[b]&&(d++,v[b]=d,y[d]=b),b=g[m],0==v[b]&&(d++,v[b]=d,y[d]=b));if(0==d||d>4e3)return Jl("The conflict graph is either empty or too big"),E;for(E={},E.n=_,E.nb=d,E.ne=0,E.vert=v,E.orig=y,h=d+d,h=h*(h-1)/2,h=(h+(Xl-1))/Xl,E.a=new Array(h),b=1;b<=d;b++)je(E,+y[b],-y[b]);for(f=1;f<=c;f++)if(x=n(e,f),w=i(e,f),(x!=-Bl||w!=+Bl)&&!((h=ht(e,f,g,A))>500))for(k=l(e,h,g,A),M=s(e,h,g,A),p=1;p<=h;p++)if(a(e,g[p]))for(m=p+1;m<=h;m++)if(a(e,g[m])){switch(u(h,A,x,w,k,M,p,0,m)){case 0:break;case 1:je(E,-g[p],+g[m]);break;case 2:je(E,-g[p],-g[m]);break;default:t(e!=e)}switch(u(h,A,x,w,k,M,p,1,m)){case 0:break;case 1:je(E,+g[p],+g[m]);break;case 2:je(E,+g[p],-g[m]);break;default:t(e!=e)}}return Jl("The conflict graph has 2*"+E.nb+" vertices and "+E.ne+" edges"),E}function je(e,n,i){var r;t(n!=i),n>0?(t(1<=n&&n<=e.n),n=e.vert[n],t(0!=n)):(n=-n,t(1<=n&&n<=e.n),n=e.vert[n],t(0!=n),n+=e.nb),i>0?(t(1<=i&&i<=e.n),i=e.vert[i],t(0!=i)):(i=-i,t(1<=i&&i<=e.n),i=e.vert[i],t(0!=i),i+=e.nb),n<i&&(r=n,n=i,i=r),r=(n-1)*(n-2)/2+(i-1),e.a[r/Xl]|=1<<Xl-1-r%Xl,e.ne++}function Oe(e,n,i,r){function o(e,t,n){return t==n?0:t>n?a(e,t,n):a(e,n,t)}function a(e,t,n){return u(e,t*(t-1)/2+n)}function u(e,t){return e.a[t/Xl]&1<<Xl-1-t%Xl}function c(e,t,n,i,r,a){var l,s,u,_,d,f,b,p;if(p=new Int32Array(e.n),t<=0){if(0==t&&(e.set[i++]=n[0],r+=a),r>e.record)for(e.record=r,e.rec_level=i,l=0;l<i;l++)e.rec[l+1]=e.set[l]}else for(l=t;l>=0;l--){if(0==i&&l<t)return;if(u=n[l],i>0&&e.clique[u]<=e.record-r)return;if(e.set[i]=u,_=r+e.wt[u+1],(a-=e.wt[u+1])<=e.record-_)return;for(f=0,b=0,d=0;b<n+l;)s=n[b],b++,o(e,s,u)&&(p[f]=s,f++,d+=e.wt[s+1]);d<=e.record-_||c(e,f-1,p,i+1,_,d)}}var _,d,f,b,p,m,h,g,v,y,x,w=st(e),k=0;for(m=new Int32Array(1+2*n.nb),h=new Int32Array(1+2*n.nb),x=new Float64Array(1+w),d=1;d<=n.nb;d++)_=n.orig[d],g=kt(e,_),p=100*g+.5|0,p<0&&(p=0),p>100&&(p=100),m[d]=p,m[n.nb+d]=100-p;for(b=function(e,t,n,i){var r,a,u,_,d,f,b,p,m,h,g={};for(g.n=e,g.wt=t,g.a=n,g.record=0,g.rec_level=0,g.rec=i,g.clique=new Int32Array(g.n),g.set=new Int32Array(g.n),b=new Int32Array(g.n),p=new Int32Array(g.n),m=new Int32Array(g.n),h=l(),r=0;r<g.n;r++)for(p[r]=0,a=0;a<g.n;a++)o(g,r,a)&&(p[r]+=g.wt[a+1]);for(r=0;r<g.n;r++)b[r]=0;for(r=g.n-1;r>=0;r--){for(_=-1,d=-1,a=0;a<g.n;a++)!b[a]&&(g.wt[a+1]>_||g.wt[a+1]==_&&p[a]>d)&&(_=g.wt[a+1],d=p[a],u=a);for(m[r]=u,b[u]=1,a=0;a<g.n;a++)!b[a]&&a!=u&&o(g,u,a)&&(p[a]-=g.wt[u+1])}for(f=0,r=0;r<g.n;r++)f+=g.wt[m[r]+1],c(g,r,m,0,0,f),g.clique[m[r]]=g.record,s(l(),h)>=4.999&&(Jl("level = "+r+"1 ("+g.n+"); best = "+g.record),h=l());for(r=1;r<=g.rec_level;r++)i[r]++;return g.rec_level}(2*n.nb,m,n.a,h),v=0,d=1;d<=b;d++)f=h[d],t(1<=f&&f<=2*n.nb),f<=n.nb?(_=n.orig[f],g=kt(e,_),v+=g):(_=n.orig[f-n.nb],g=kt(e,_),v+=1-g);if(v>=1.01){for(y=1,d=1;d<=b;d++)f=h[d],f<=n.nb?(_=n.orig[f],t(1<=_&&_<=w),x[_]+=1):(_=n.orig[f-n.nb],t(1<=_&&_<=w),x[_]-=1,y-=1);for(t(0==k),_=1;_<=w;_++)0!=x[_]&&(k++,i[k]=_,r[k]=x[_]);i[0]=0,r[0]=y}return k}function Ce(e){var n=e.mip;return t(null!=n),Pe(n)}function Se(e,n){var i,r,o,a=st(e.mip);t(null!=n),r=new Int32Array(1+a),o=new Float64Array(1+a),(i=Oe(e.mip,n,r,o))>0&&M(e,null,Zc,0,i,r,o,Zu,o[0])}function ze(e,n){var i;return e.parm.br_tech==Tc?i=Ne(e,n):e.parm.br_tech==Ic?i=Le(e,n):e.parm.br_tech==Dc?i=Te(e,n):e.parm.br_tech==Fc?i=Ie(e,n):e.parm.br_tech==Rc?i=Re(e,n):t(e!=e),i}function Ne(e,n){var i,r,o;for(i=1;i<=e.n&&!e.non_int[i];i++);return t(1<=i&&i<=e.n),o=Qs(e.mip,i),r=o-Math.floor(o)<Math.ceil(o)-o?u_:c_,n(r),i}function Le(e,n){var i,r,o;for(i=e.n;i>=1&&!e.non_int[i];i--);return t(1<=i&&i<=e.n),o=Qs(e.mip,i),r=o-Math.floor(o)<Math.ceil(o)-o?u_:c_,n(r),i}function Te(e,t){var n,i,r,o,a,l;for(i=0,a=Bl,n=1;n<=e.n;n++)e.non_int[n]&&(o=Qs(e.mip,n),l=Math.floor(o)+.5,a>Math.abs(o-l)&&(i=n,a=Math.abs(o-l),r=o<l?u_:c_));return t(r),i}function Ie(e,n){var i,r,o,a,l,s,u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M=e.mip,A=M.m,E=M.n,P=e.non_int;for(t(Vs(M)==gc),_=new Int32Array(1+E),k=new Float64Array(1+E),r=0,w=-1,i=1;i<=E;i++)if(P[i]){for(d=Qs(M,i),u=gu(M,A+i,_,k),s=-1;s<=1;s+=2){if(o=wu(M,u,_,k,s,1e-9),0!=o&&(o=_[o]),0==o)h=e.mip.dir==Vu?+Bl:-Bl;else{for(a=1;a<=u&&_[a]!=o;a++);switch(t(1<=a&&a<=u),b=k[a],p=(s<0?Math.floor(d):Math.ceil(d))-d,m=p/b,o>A&&nu(M,o-A)!=Ku&&Math.abs(m-Math.floor(m+.5))>.001&&(m=m>0?Math.ceil(m):Math.floor(m)),o<=A?(c=Ys(M,o),f=$s(M,o)):(c=Zs(M,o-A),f=eu(M,o-A)),e.mip.dir){case Vu:(c==nc&&f<0||c==ic&&f>0||c==rc)&&(f=0);break;case Xu:(c==nc&&f>0||c==ic&&f<0||c==rc)&&(f=0);break;default:t(e!=e)}h=f*m}switch(e.mip.dir){case Vu:t(h>=0);break;case Xu:t(h<=0);break;default:t(e!=e)}s<0?g=h:v=h}if((w<Math.abs(g)||w<Math.abs(v))&&(r=i,Math.abs(g)<Math.abs(v)?(l=u_,w=Math.abs(v)):(l=c_,w=Math.abs(g)),y=g,x=v,w==Bl))break}return t(1<=r&&r<=E),w<1e-6*(1+.001*Math.abs(M.obj_val))?r=Te(e,n):(e.parm.msg_lev>=Pc&&(Jl("branch_drtom: column "+r+" chosen to branch on"),Jl(Math.abs(y)==Bl?"branch_drtom: down-branch is infeasible":"branch_drtom: down-branch bound is "+(wt(M)+y)),Jl(Math.abs(x)==Bl?"branch_drtom: up-branch   is infeasible":"branch_drtom: up-branch   bound is "+(wt(M)+x))),n(l),r)}function De(e){var t,n=e.n,i={};for(i.dn_cnt=new Int32Array(1+n),i.dn_sum=new Float64Array(1+n),i.up_cnt=new Int32Array(1+n),i.up_sum=new Float64Array(1+n),t=1;t<=n;t++)i.dn_cnt[t]=i.up_cnt[t]=0,i.dn_sum[t]=i.up_sum[t]=0;return i}function Fe(e){var n,i,r,o,a=e.pcost;t(null!=a),t(null!=e.curr),null!=e.curr.up&&(n=e.curr.up.br_var,t(1<=n&&n<=e.n),i=e.mip.col[n].prim-e.curr.up.br_val,t(0!=i),r=e.mip.obj_val-e.curr.up.lp_obj,o=Math.abs(r/i),i<0?(a.dn_cnt[n]++,a.dn_sum[n]+=o):(a.up_cnt[n]++,a.up_sum[n]+=o))}function Re(e,n){function i(e,n,i){var r,o,a;t(Vs(e)==gc),r=es(),ps(r,e,0),us(r,n,ec,i,i);var l=new Gs;return l.msg_lev=kc,l.meth=Cc,l.it_lim=30,l.out_dly=1e3,l.meth=Cc,o=Hs(r,l),0==o||o==g_?Xs(r)==hc?a=Bl:Ks(r)==pc?(e.dir==Vu?a=r.obj_val-e.obj_val:e.dir==Xu?a=e.obj_val-r.obj_val:t(e!=e),a<1e-6*(1+.001*Math.abs(e.obj_val))&&(a=0)):a=0:a=0,a}function r(e,n,r){var o,a,l,s=e.pcost;if(t(null!=s),t(1<=n&&n<=e.n),r==u_){if(0==s.dn_cnt[n]){if(o=e.mip.col[n].prim,(a=i(e.mip,n,Math.floor(o)))==Bl)return l=Bl;s.dn_cnt[n]=1,s.dn_sum[n]=a/(o-Math.floor(o))}l=s.dn_sum[n]/s.dn_cnt[n]}else if(r==c_){if(0==s.up_cnt[n]){if(o=e.mip.col[n].prim,(a=i(e.mip,n,Math.ceil(o)))==Bl)return l=Bl;s.up_cnt[n]=1,s.up_sum[n]=a/(Math.ceil(o)-o)}l=s.up_sum[n]/s.up_cnt[n]}else t(r!=r);return l}var o,a,u,c,_,d,f,b,p,m=l();for(null==e.pcost&&(e.pcost=De(e)),a=0,p=-1,o=1;o<=e.n;o++)if(A(e,o)){if(c=e.mip.col[o].prim,(_=r(e,o,u_))==Bl)return a=o,u=u_,n(u),a;if(d=_*(c-Math.floor(c)),(_=r(e,o,c_))==Bl)return a=o,u=c_,n(u),a;f=_*(Math.ceil(c)-c),b=d>f?d:f,p<b&&(p=b,a=o,u=d<=f?u_:c_),e.parm.msg_lev>=Qc&&s(l(),m)>=10&&(!function(e){var t,n=e.pcost,i=0,r=0;for(t=1;t<=e.n;t++)A(e,t)&&(i++,n.dn_cnt[t]>0&&n.up_cnt[t]>0&&r++);Jl("Pseudocosts initialized for "+r+" of "+i+" variables")}(e),m=l())}return 0==p?a=Te(e,n):(n(u),a)}function Ue(e){for(var n,i,r,o,c,_,d,f,b,p,m,h,g=e.mip,v=g.n,y=null,x=null,w=null,k=0;;){var M=null;switch(k){case 0:if(t(Vs(g)==gc),0!=e.curr.level||1!=e.curr.solved){M=5;break}for(f=0,r=1;r<=v;r++)if(n=g.col[r],n.kind!=Ku&&n.type!=ec){if(t(n.kind==Wu),n.type!=Qu||0!=n.lb||1!=n.ub){e.parm.msg_lev>=Ec&&Jl("FPUMP heuristic cannot be applied due to general integer variables"),M=5;break}f++}if(null!=M)break;if(0==f){M=5;break}for(e.parm.msg_lev>=Ec&&Jl("Applying FPUMP heuristic..."),x=new Array(1+f),a(x,1,f),o=0,r=1;r<=v;r++)n=g.col[r],n.kind==Wu&&n.type==Qu&&(x[++o].j=r);t(o==f),y=es();case 1:if(ps(y,g,e_),g.mip_stat==pc){var A,P,j;for(rs(y,1),A=new Int32Array(1+v),P=new Float64Array(1+v),r=1;r<=v;r++)A[r]=r,P[r]=g.col[r].coef;_s(y,y.m,v,A,P),j=.1*g.obj_val+.9*g.mip_obj,g.dir==Vu?ss(y,y.m,Zu,0,j-g.c0):g.dir==Xu?ss(y,y.m,$u,j-g.c0,0):t(g!=g)}for(d=0,o=1;o<=f;o++)x[o].x=-1;case 2:if(d++,e.parm.msg_lev>=Ec&&Jl("Pass "+d),m=Bl,_=0,d>1){var O;for(null==w&&(w=vl()),o=1;o<=f;o++)r=x[o].j,n=y.col[r],O=Ml(w,-.3,.7),O<0&&(O=0),Math.abs(x[o].x-n.prim)+O>.5&&(x[o].x=1-x[o].x);M=4;break}case 3:for(p=1,o=1;o<=f;o++)n=y.col[x[o].j],c=n.prim<.5?0:1,x[o].x!=c&&(p=0,x[o].x=c);if(p){for(o=1;o<=f;o++)n=y.col[x[o].j],x[o].d=Math.abs(n.prim-x[o].x);for(u(x,1,f,function(e,t){return e.d>t.d?-1:e.d<t.d?1:0}),o=1;o<=f&&!(o>=5&&x[o].d<.35||o>=10);o++)x[o].x=1-x[o].x}case 4:if(e.parm.tm_lim<Gl&&e.parm.tm_lim-1<=1e3*s(l(),e.tm_beg)){M=5;break}for(y.dir=Vu,y.c0=0,r=1;r<=v;r++)y.col[r].coef=0;for(o=1;o<=f;o++)r=x[o].j,0==x[o].x?y.col[r].coef=1:(y.col[r].coef=-1,y.c0+=1);if(i=new Gs,e.parm.msg_lev<=Mc?i.msg_lev=e.parm.msg_lev:e.parm.msg_lev<=Ec&&(i.msg_lev=Ac,i.out_dly=1e4),0!=(b=Hs(y,i))){e.parm.msg_lev>=Mc&&Jl("Warning: glp_simplex returned "+b),M=5;break}if((b=Vs(y))!=gc){e.parm.msg_lev>=Mc&&Jl("Warning: glp_get_status returned "+b),M=5;break}for(e.parm.msg_lev>=Pc&&Jl("delta = "+y.obj_val),h=.3*e.parm.tol_int,o=1;o<=f&&(n=y.col[x[o].j],!(h<n.prim&&n.prim<1-h));o++);if(o>f){var C=new Float64Array(1+v);for(r=1;r<=v;r++)C[r]=y.col[r].prim,g.col[r].kind==Wu&&(C[r]=Math.floor(C[r]+.5));for(y.c0=g.c0,y.dir=g.dir,o=1;o<=f;o++)y.col[x[o].j].lb=C[x[o].j],y.col[x[o].j].ub=C[x[o].j],y.col[x[o].j].type=ec;for(r=1;r<=v;r++)y.col[r].coef=g.col[r].coef;if(0!=(b=Hs(y,i))){e.parm.msg_lev>=Mc&&Jl("Warning: glp_simplex returned "+b),M=5;break}if((b=Vs(y))!=gc){e.parm.msg_lev>=Mc&&Jl("Warning: glp_get_status returned "+b),M=5;break}for(r=1;r<=v;r++)g.col[r].kind!=Wu&&(C[r]=y.col[r].prim);if(0==(b=E(e,C))){if(re(e,e.curr.bound)){M=1;break}M=5;break}}if(m==Bl||y.obj_val<=m-1e-6*(1+m)?(_=0,m=y.obj_val):_++,_<3){M=3;break}if(d<5){M=2;break}}if(null==M)break;k=M}}function Be(e){var n,i,r,o,a,l,s,c,_,d,f,b;for(t(null!=e.curr),n=e.local,t(null!=n),t(n.size>0),o=new Array(1+n.size),d=new Int32Array(1+e.n),f=new Float64Array(1+e.n),b=new Float64Array(1+e.n),a=0,i=n.head;null!=i;i=i.next)a++,o[a].cut=i,o[a].flag=0;for(t(a==n.size),a=1;a<=n.size;a++){var p,m=null,h=null;for(i=o[a].cut,c=0,p=0,r=i.ptr;null!=r;r=r.next)t(1<=r.j&&r.j<=e.n),c++,d[c]=r.j,f[c]=r.val,p+=r.val*r.val;p<Vl*Vl&&(p=Vl),c=yu(e.mip,c,d,f),_=w(e.mip,c,d,f,i.type,i.rhs,1e-9,function(e,t,n,i,r,o){m=r,h=o}),0==_?(o[a].eff=Math.abs(m)/Math.sqrt(p),e.mip.dir==Vu?(h<0&&(h=0),o[a].deg=+h):(h>0&&(h=0),o[a].deg=-h)):1==_?o[a].eff=o[a].deg=0:2==_?(o[a].eff=1,o[a].deg=Bl):t(_!=_),o[a].deg<.01&&(o[a].deg=0)}for(u(o,1,n.size,function(e,t){if(0==e.deg&&0==t.deg){if(e.eff>t.eff)return-1;if(e.eff<t.eff)return 1}else{if(e.deg>t.deg)return-1;if(e.deg<t.deg)return 1}return 0}),s=0==e.curr.level?90:10,s>n.size&&(s=n.size),a=1;a<=s;a++){var g;if(!(o[a].deg<.01&&o[a].eff<.01)){for(l=1;l<a&&!(o[l].flag&&function(e,t,n){var i,r,o=0,a=0,l=0;for(i=e.ptr;null!=i;i=i.next)n[i.j]=i.val,a+=i.val*i.val;for(i=t.ptr;null!=i;i=i.next)o+=n[i.j]*i.val,l+=i.val*i.val;for(i=e.ptr;null!=i;i=i.next)n[i.j]=0;return r=Math.sqrt(a)*Math.sqrt(l),r<Vl*Vl&&(r=Vl),o/r}(o[a].cut,o[l].cut,b)>.9);l++);if(!(l<a)){for(i=o[a].cut,o[a].flag=1,g=rs(e.mip,1),null!=i.name&&as(e.mip,g,i.name),t(e.mip.row[g].origin==Wc),e.mip.row[g].klass=i.klass,c=0,r=i.ptr;null!=r;r=r.next)c++,d[c]=r.j,f[c]=r.val;_s(e.mip,g,c,d,f),t(i.type==$u||i.type==Zu),ss(e.mip,g,i.type,i.rhs,i.rhs)}}}}function qe(e){var n;return e.parm.bt_tech==Uc?(t(null!=e.tail),n=e.tail.p):e.parm.bt_tech==Bc?(t(null!=e.head),n=e.head.p):e.parm.bt_tech==qc?n=function(e){var n,i,r,o=null;switch(e.mip.dir){case Vu:for(i=+Bl,n=e.head;null!=n;n=n.next)i>n.bound&&(i=n.bound);for(t(i!=+Bl),r=.001*(1+Math.abs(i)),n=e.head;null!=n;n=n.next)n.bound<=i+r&&(t(null!=n.up),(null==o||o.up.ii_sum>n.up.ii_sum)&&(o=n));break;case Xu:for(i=-Bl,n=e.head;null!=n;n=n.next)i<n.bound&&(i=n.bound);for(t(i!=-Bl),r=.001*(1+Math.abs(i)),n=e.head;null!=n;n=n.next)n.bound>=i-r&&(t(null!=n.up),(null==o||o.lp_obj<n.lp_obj)&&(o=n));break;default:t(e!=e)}return t(null!=o),o.p}(e):e.parm.bt_tech==Hc?n=e.mip.mip_stat==bc?function(e){var n,i,r;for(i=0,r=Bl,n=e.head;null!=n;n=n.next)t(null!=n.up),r>n.up.ii_sum&&(i=n.p,r=n.up.ii_sum);return i}(e):function(e){var n,i,r,o,a,l;for(t(e.mip.mip_stat==pc),n=e.slot[1].node,t(null!=n),t(n.ii_sum>0),a=(e.mip.mip_obj-n.bound)/n.ii_sum,r=0,o=Bl,i=e.head;null!=i;i=i.next)t(null!=i.up),l=i.up.bound+a*i.up.ii_sum,e.mip.dir==Xu&&(l=-l),o>l&&(r=i.p,o=l);return r}(e):t(e!=e),n}function He(e,n){var i;for(t(e>0&&n>0);n>0;)i=e%n,e=n,n=i;return e}function Ge(e,n){var i,r=0;for(t(e>0),i=1;i<=e&&(t(n[i]>0),1!=(r=1==i?n[1]:He(r,n[i])));i++);return r}function Ve(e){t(e>0);var n=Math.floor(Math.log(e)/Math.log(2))+1,i=e/Math.pow(2,n);return Math.pow(2,i<=.75?n-1:n)}function Xe(e,t){var n=Number(e);if(isNaN(n))return 2;switch(n){case Number.POSITIVE_INFINITY:case Number.NEGATIVE_INFINITY:return 1;default:return t(n),0}}function Ke(e,t){var n=Number(e);if(isNaN(n))return 2;switch(n){case Number.POSITIVE_INFINITY:case Number.NEGATIVE_INFINITY:return 1;default:return n%1==0?(t(n),0):2}}function We(e,t,n){var i,r,o,a;return 1<=e&&e<=31&&1<=t&&t<=12&&1<=n&&n<=4e3?(t>=3?t-=3:(t+=9,n--),i=n/100|0,r=n-100*i,o=146097*i/4|0,o+=1461*r/4|0,o+=(153*t+2)/5|0,o+=e+1721119,Ye(o,function(e){a=e}),e!=a&&(o=-1),o):-1}function Ye(e,t){var n,i,r;return 1721426<=e&&e<=3182395?(e-=1721119,r=(4*e-1)/146097|0,e=(4*e-1)%146097,n=e/4|0,e=(4*n+3)/1461|0,n=(4*n+3)%1461,n=(n+4)/4|0,i=(5*n-3)/153|0,n=(5*n-3)%153,n=(n+5)/5|0,r=100*r+e,i<=9?i+=3:(i-=9,r++),t(n,i,r),0):1}function Je(){var e;return E_&&Jl("lpf_create_it: warning: debug mode enabled"),e={},e.valid=0,e.m0_max=e.m0=0,e.luf=St(),e.m=0,e.B=null,e.n_max=50,e.n=0,e.R_ptr=e.R_len=null,e.S_ptr=e.S_len=null,e.scf=null,e.P_row=e.P_col=null,e.Q_row=e.Q_col=null,e.v_size=1e3,e.v_ptr=0,e.v_ind=null,e.v_val=null,e.work1=e.work2=null,e}function $e(e,i,r,o,a){var l;if(E_)var s,u,c,_,d,f;switch(t(r==r),i<1&&n("lpf_factorize: m = "+i+"; invalid parameter"),i>Kl&&n("lpf_factorize: m = "+i+"; matrix too big"),e.m0=e.m=i,e.valid=0,null==e.R_ptr&&(e.R_ptr=new Int32Array(1+e.n_max)),null==e.R_len&&(e.R_len=new Int32Array(1+e.n_max)),null==e.S_ptr&&(e.S_ptr=new Int32Array(1+e.n_max)),null==e.S_len&&(e.S_len=new Int32Array(1+e.n_max)),null==e.scf&&(e.scf=Al(e.n_max)),null==e.v_ind&&(e.v_ind=new Int32Array(1+e.v_size)),null==e.v_val&&(e.v_val=new Float64Array(1+e.v_size)),e.m0_max<i&&(e.m0_max=i+100,e.P_row=new Int32Array(1+e.m0_max+e.n_max),e.P_col=new Int32Array(1+e.m0_max+e.n_max),e.Q_row=new Int32Array(1+e.m0_max+e.n_max),e.Q_col=new Int32Array(1+e.m0_max+e.n_max),e.work1=new Float64Array(1+e.m0_max+e.n_max),e.work2=new Float64Array(1+e.m0_max+e.n_max)),Bt(e.luf,i,o,a)){case 0:break;case Ld:return A_;case Td:return LPF_ECOND;default:t(e!=e)}if(e.valid=1,E_){for(t(i<=32767),e.B=d=new Float64Array(1+i*i),_=new Int32Array(1+i),f=new Float64Array(1+i),l=1;l<=i*i;l++)d[l]=0;for(u=1;u<=i;u++)for(c=o(a,u,_,f),t(0<=c&&c<=i),l=1;l<=c;l++)s=_[l],t(1<=s&&s<=i),t(0==d[(s-1)*i+u]),t(0!=f[l]),d[(s-1)*i+u]=f[l]}for(e.n=0,Dl(e.scf),l=1;l<=i;l++)e.P_row[l]=e.P_col[l]=l,e.Q_row[l]=e.Q_col[l]=l;return e.v_ptr=1,0}function Ze(e,t,n,i,r){var o,a,l,s,u,c=e.n,_=e.R_ptr,d=e.R_len,f=e.v_ind,b=e.v_val;for(o=1;o<=c;o++)if(0!=i[o+r])for(u=n*i[o+r],a=_[o],l=a+d[o],s=a;s<l;s++)t[f[s]]+=u*b[s]}function Qe(e,t,n,i,r){var o,a,l,s,u,c=e.n,_=e.R_ptr,d=e.R_len,f=e.v_ind,b=e.v_val;for(o=1;o<=c;o++){for(u=0,a=_[o],l=a+d[o],s=a;s<l;s++)u+=b[s]*r[f[s]];t[o+n]+=i*u}}function et(e,t,n,i,r){var o,a,l,s,u,c=e.n,_=e.S_ptr,d=e.S_len,f=e.v_ind,b=e.v_val;for(o=1;o<=c;o++){for(u=0,a=_[o],l=a+d[o],s=a;s<l;s++)u+=b[s]*r[f[s]];t[o+n]+=i*u}}function tt(e,t,n,i,r){var o,a,l,s,u,c=e.n,_=e.S_ptr,d=e.S_len,f=e.v_ind,b=e.v_val;for(o=1;o<=c;o++)if(0!=i[o+r])for(u=n*i[o+r],a=_[o],l=a+d[o],s=a;s<l;s++)t[f[s]]+=u*b[s]}function nt(e,t,n,i){var r,o,a,l,s,u,c=e.m,_=e.B,d=0;for(r=1;r<=c;r++){for(l=0,u=1,o=1;o<=c;o++)s=t?_[c*(o-1)+r]*n[o]:_[c*(r-1)+o]*n[o],u<Math.abs(s)&&(u=Math.abs(s)),l+=s;a=Math.abs(l-i[r])/u,d<a&&(d=a)}d>1e-8&&Jl((t?"lpf_btran":"lpf_ftran")+": dmax = "+d+"; relative error too large")}function it(e,i){var r,o,a=e.m0,l=e.m,s=e.n,u=e.P_col,c=e.Q_col,_=e.work1,d=_,f=_;if(E_)var b;if(e.valid||n("lpf_ftran: the factorization is not valid"),t(0<=l&&l<=a+s),E_)for(b=new Float64Array(1+l),r=1;r<=l;r++)b[r]=i[r];for(r=1;r<=a+s;r++)_[r]=(o=u[r])<=l?i[o]:0;for(qt(e.luf,0,d),et(e,f,a,-1,d),Il(e.scf,0,f,a),Ze(e,d,-1,f,a),Ht(e.luf,0,d),r=1;r<=l;r++)i[r]=_[c[r]];E_&&nt(e,0,i,b)}function rt(e,i){var r,o,a=e.m0,l=e.m,s=e.n,u=e.P_row,c=e.Q_row,_=e.work1,d=_,f=_;if(E_)var b;if(e.valid||n("lpf_btran: the factorization is not valid"),t(0<=l&&l<=a+s),E_)for(b=new Float64Array(1+l),r=1;r<=l;r++)b[r]=i[r];for(r=1;r<=a+s;r++)_[r]=(o=c[r])<=l?i[o]:0;for(Ht(e.luf,1,d),Qe(e,f,a,-1,d),Il(e.scf,1,f,a),tt(e,d,-1,f,a),qt(e.luf,1,d),r=1;r<=l;r++)i[r]=_[u[r]];E_&&nt(e,1,i,b)}function ot(e,n){var i=e.v_size,o=e.v_ptr-1,a=e.v_ind,l=e.v_val;for(t(i<n);i<n;)i+=i;e.v_size=i,e.v_ind=new Int32Array(1+i),e.v_val=new Float64Array(1+i),t(o>=0),r(e.v_ind,1,a,1,o),r(e.v_val,1,l,1,o)}function at(e,i,r,o,a,l,s){var u=e.m0,c=e.m;if(E_)var _=e.B;var d,f,b,p,m=e.n,h=e.R_ptr,g=e.R_len,v=e.S_ptr,y=e.S_len,x=e.P_row,w=e.P_col,k=e.Q_row,M=e.Q_col,A=e.v_ptr,E=e.v_ind,P=e.v_val,j=e.work2,O=e.work1,C=O,S=O,z=e.work2,N=z,L=z,T=S,I=L;if(t(r==r),e.valid||n("lpf_update_it: the factorization is not valid"),1<=i&&i<=c||n("lpf_update_it: j = "+i+"; column number out of range"),t(0<=c&&c<=u+m),m==e.n_max)return e.valid=0,LPF_ELIMIT;for(f=1;f<=c;f++)j[f]=0;for(p=1;p<=o;p++)f=a[l+p],1<=f&&f<=c||n("lpf_update_it: ind["+p+"] = "+f+"; row number out of range"),0!=j[f]&&n("lpf_update_it: ind["+p+"] = "+f+"; duplicate row index not allowed"),0==s[p]&&n("lpf_update_it: val["+p+"] = "+s[p]+"; zero element not allowed"),j[f]=s[p];if(E_)for(f=1;f<=c;f++)_[(f-1)*c+i]=j[f];for(f=1;f<=u+m;f++)O[f]=(b=w[f])<=c?j[b]:0;for(f=1;f<=u+m;f++)z[f]=0;for(z[M[i]]=1,qt(e.luf,0,C),Ht(e.luf,1,N),e.v_size<A+u+u&&(ot(e,A+u+u),E=e.v_ind,P=e.v_val),h[m+1]=A,f=1;f<=u;f++)0!=C[f]&&(E[A]=f,P[A]=C[f],A++);for(g[m+1]=A-e.v_ptr,e.v_ptr=A,v[m+1]=A,f=1;f<=u;f++)0!=N[f]&&(E[A]=f,P[A]=N[f],A++);for(y[m+1]=A-e.v_ptr,e.v_ptr=A,et(e,T,0,-1,C),Qe(e,I,0,-1,N),d=0,f=1;f<=u;f++)d-=N[f]*C[f];switch(Nl(e.scf,T,u,I,u,d)){case 0:break;case Dm:return e.valid=0,A_;case Fm:t(e!=e);default:t(e!=e)}return x[u+m+1]=w[u+m+1]=u+m+1,k[u+m+1]=M[u+m+1]=u+m+1,f=M[i],b=M[u+m+1],k[f]=u+m+1,M[u+m+1]=f,k[b]=i,M[i]=b,e.n++,t(e.n<=e.n_max),0}function lt(e){return vs(e)}function st(e){return ys(e)}function ut(e,t){return ks(e,t)-Ju+P_}function ct(e,t){var n=Ms(e,t);return n==-Bl&&(n=0),n}function _t(e,t){var n=As(e,t);return n==+Bl&&(n=0),n}function dt(e,t,n){n(ut(e,t),ct(e,t),_t(e,t))}function ft(e,t){return Es(e,t)-Ju+P_}function bt(e,t){var n=Ps(e,t);return n==-Bl&&(n=0),n}function pt(e,t){var n=js(e,t);return n==+Bl&&(n=0),n}function mt(e,t,n){n(ft(e,t),bt(e,t),pt(e,t))}function ht(e,t,n,i){return Os(e,t,n,i)}function gt(e,t,n,i){return Cs(e,t,n,i)}function vt(e,t,n){Us(e,t,n-z_+tc)}function yt(e,t,n){Bs(e,t,n-z_+tc)}function xt(e){var n;switch(Vs(e)){case gc:n=R_;break;case pc:n=U_;break;case mc:n=B_;break;case hc:n=q_;break;case vc:n=H_;break;case bc:n=G_;break;default:t(e!=e)}return n}function wt(e){return Ws(e)}function kt(e,t){return Qs(e,t)}function Mt(e,t,n,i){return gu(e,t,n,i)}function At(e,n,i,r,o,a){var l=wu(e,n,i,r,o,a);return t(0<=l&&l<=n),0==l?0:i[l]}function Et(e,t){return nu(e,t)==Ku?D_:F_}function Pt(e){var n=e.parms;t(null!=n),n.msg_lev=3,n.scale=1,n.dual=0,n.price=1,n.relax=.07,n.tol_bnd=1e-7,n.tol_dj=1e-7,n.tol_piv=1e-9,n.round=0,n.obj_ll=-Bl,n.obj_ul=+Bl,n.it_lim=-1,n.tm_lim=-1,n.out_frq=200,n.out_dly=0,n.branch=2,n.btrack=3,n.tol_int=1e-5,n.tol_obj=1e-7,n.mps_info=1,n.mps_obj=2,n.mps_orig=0,n.mps_wide=1,n.mps_free=0,n.mps_skip=0,n.lpt_orig=0,n.presol=0,n.binarize=0,n.use_cuts=0,n.mip_gap=0}function jt(e){return null==e.parms&&(e.parms={},Pt(e)),e.parms}function Ot(e,i){var r=jt(e),o=0;switch(i){case Z_:o=r.msg_lev;break;case Q_:o=r.scale;break;case ed:o=r.dual;break;case td:o=r.price;break;case ad:o=r.round;break;case ud:o=r.it_lim;break;case cd:o=e.it_cnt;break;case dd:o=r.out_frq;break;case bd:o=r.branch;break;case pd:o=r.btrack;break;case gd:o=r.mps_info;break;case vd:o=r.mps_obj;break;case yd:o=r.mps_orig;break;case xd:o=r.mps_wide;break;case wd:o=r.mps_free;break;case kd:o=r.mps_skip;break;case Md:o=r.lpt_orig;break;case Ad:o=r.presol;break;case Ed:o=r.binarize;break;case Pd:o=r.use_cuts;break;case jd:switch(i={},_u(e,i),i.type){case yc:o=1;break;case xc:o=2;break;case wc:o=3;break;default:t(e!=e)}break;default:n("lpx_get_int_parm: parm = "+i+"; invalid parameter")}return o}function Ct(e,t){var i=jt(e),r=0;switch(t){case nd:r=i.relax;break;case id:r=i.tol_bnd;break;case rd:r=i.tol_dj;break;case od:r=i.tol_piv;break;case ld:r=i.obj_ll;break;case sd:r=i.obj_ul;break;case _d:r=i.tm_lim;break;case fd:r=i.out_dly;break;case md:r=i.tol_int;break;case hd:r=i.tol_obj;break;case Od:r=i.mip_gap;break;default:n("lpx_get_real_parm: parm = "+t+"; invalid parameter")}return r}function St(){var e={};return e.n_max=e.n=0,e.valid=0,e.fr_ptr=e.fr_len=null,e.fc_ptr=e.fc_len=null,e.vr_ptr=e.vr_len=e.vr_cap=null,e.vr_piv=null,e.vc_ptr=e.vc_len=e.vc_cap=null,e.pp_row=e.pp_col=null,e.qq_row=e.qq_col=null,e.sv_size=0,e.sv_beg=e.sv_end=0,e.sv_ind=null,e.sv_val=null,e.sv_head=e.sv_tail=0,e.sv_prev=e.sv_next=null,e.vr_max=null,e.rs_head=e.rs_prev=e.rs_next=null,e.cs_head=e.cs_prev=e.cs_next=null,e.flag=null,e.work=null,e.new_sva=0,e.piv_tol=.1,e.piv_lim=4,e.suhl=1,e.eps_tol=1e-15,e.max_gro=1e10,e.nnz_a=e.nnz_f=e.nnz_v=0,e.max_a=e.big_v=0,e.rank=0,e}function zt(e){var t,n,i,o=e.n,a=e.vr_ptr,l=e.vr_len,s=e.vr_cap,u=e.vc_ptr,c=e.vc_len,_=e.vc_cap,d=e.sv_ind,f=e.sv_val,b=e.sv_next,p=1;for(i=e.sv_head;0!=i;i=b[i])if(i<=o){if(t=i,a[t]!=p)break;s[t]=l[t],p+=s[t]}else{if(n=i-o,u[n]!=p)break;_[n]=c[n],p+=_[n]}for(;0!=i;i=b[i])i<=o?(t=i,r(d,p,d,a[t],l[t]),r(f,p,f,a[t],l[t]),a[t]=p,s[t]=l[t],p+=s[t]):(n=i-o,r(d,p,d,u[n],c[n]),r(f,p,f,u[n],c[n]),u[n]=p,_[n]=c[n],p+=_[n]);e.sv_beg=p}function Nt(e,n,i){var o,a,l,s=e.n,u=e.vr_ptr,c=e.vr_len,_=e.vr_cap,d=e.vc_cap,f=e.sv_ind,b=e.sv_val,p=e.sv_prev,m=e.sv_next,h=0;return t(1<=n&&n<=s),t(_[n]<i),e.sv_end-e.sv_beg<i&&(zt(e),e.sv_end-e.sv_beg<i)?h=1:(o=_[n],r(f,e.sv_beg,f,u[n],c[n]),r(b,e.sv_beg,b,u[n],c[n]),u[n]=e.sv_beg,_[n]=i,e.sv_beg+=i,a=n,0==p[a]?e.sv_head=m[a]:(l=p[a],l<=s?_[l]+=o:d[l-s]+=o,m[p[a]]=m[a]),0==m[a]?e.sv_tail=p[a]:p[m[a]]=p[a],p[a]=e.sv_tail,m[a]=0,0==p[a]?e.sv_head=a:m[p[a]]=a,e.sv_tail=a,h)}function Lt(e,n,i){var o,a,l,s=e.n,u=e.vr_cap,c=e.vc_ptr,_=e.vc_len,d=e.vc_cap,f=e.sv_ind,b=e.sv_val,p=e.sv_prev,m=e.sv_next,h=0;return t(1<=n&&n<=s),t(d[n]<i),e.sv_end-e.sv_beg<i&&(zt(e),e.sv_end-e.sv_beg<i)?h=1:(o=d[n],r(f,e.sv_beg,f,c[n],_[n]),r(b,e.sv_beg,b,c[n],_[n]),c[n]=e.sv_beg,d[n]=i,e.sv_beg+=i,a=s+n,0==p[a]?e.sv_head=m[a]:(l=p[a],l<=s?u[l]+=o:d[l-s]+=o,m[p[a]]=m[a]),0==m[a]?e.sv_tail=p[a]:p[m[a]]=p[a],p[a]=e.sv_tail,m[a]=0,0==p[a]?e.sv_head=a:m[p[a]]=a,e.sv_tail=a,h)}function Tt(e,t){var n=e.n_max;e.n=t,t<=n||(e.n_max=n=t+100,e.fr_ptr=new Int32Array(1+n),e.fr_len=new Int32Array(1+n),e.fc_ptr=new Int32Array(1+n),e.fc_len=new Int32Array(1+n),e.vr_ptr=new Int32Array(1+n),e.vr_len=new Int32Array(1+n),e.vr_cap=new Int32Array(1+n),e.vr_piv=new Float64Array(1+n),e.vc_ptr=new Int32Array(1+n),e.vc_len=new Int32Array(1+n),e.vc_cap=new Int32Array(1+n),e.pp_row=new Int32Array(1+n),e.pp_col=new Int32Array(1+n),e.qq_row=new Int32Array(1+n),e.qq_col=new Int32Array(1+n),e.sv_prev=new Int32Array(1+n+n),e.sv_next=new Int32Array(1+n+n),e.vr_max=new Float64Array(1+n),e.rs_head=new Int32Array(1+n),e.rs_prev=new Int32Array(1+n),e.rs_next=new Int32Array(1+n),e.cs_head=new Int32Array(1+n),e.cs_prev=new Int32Array(1+n),e.cs_next=new Int32Array(1+n),e.flag=new Int32Array(1+n),e.work=new Float64Array(1+n))}function It(e,t,i){var r,o,a,l,s,u,c,_,d,f,b,p,m,h=e.n,g=e.fc_ptr,v=e.fc_len,y=e.vr_ptr,x=e.vr_len,w=e.vr_cap,k=e.vc_ptr,M=e.vc_len,A=e.vc_cap,E=e.pp_row,P=e.pp_col,j=e.qq_row,O=e.qq_col,C=e.sv_ind,S=e.sv_val,z=e.sv_prev,N=e.sv_next,L=e.vr_max,T=e.rs_head,I=e.rs_prev,D=e.rs_next,F=e.cs_head,R=e.cs_prev,U=e.cs_next,B=e.flag,q=e.work,H=0;for(d=1,f=e.sv_size+1,a=1;a<=h;a++)g[a]=f,v[a]=0;for(r=1;r<=h;r++)x[r]=w[r]=0,B[r]=0;for(_=0,p=0,a=1;a<=h;a++){var G=E,V=q;if(c=t(i,a,G,V),0<=c&&c<=h||n("luf_factorize: j = "+a+"; len = "+c+"; invalid column length"),f-d<c)return H=1;for(k[a]=d,M[a]=A[a]=c,_+=c,b=1;b<=c;b++)r=G[b],m=V[b],1<=r&&r<=h||n("luf_factorize: i = "+r+"; j = "+a+"; invalid row index"),B[r]&&n("luf_factorize: i = "+r+"; j = "+a+"; duplicate element not allowed"),0==m&&n("luf_factorize: i = "+r+"; j = "+a+"; zero element not allowed"),C[d]=r,S[d]=m,d++,m<0&&(m=-m),p<m&&(p=m),B[r]=1,w[r]++;for(b=1;b<=c;b++)B[G[b]]=0}for(r=1;r<=h;r++){if(c=w[r],f-d<c)return H=1;y[r]=d,d+=c}for(a=1;a<=h;a++)for(l=k[a],s=l+M[a]-1,u=l;u<=s;u++)r=C[u],m=S[u],o=y[r]+x[r],C[o]=a,S[o]=m,x[r]++;for(u=1;u<=h;u++)E[u]=P[u]=j[u]=O[u]=u;for(e.sv_beg=d,e.sv_end=f,e.sv_head=h+1,e.sv_tail=h,r=1;r<=h;r++)z[r]=r-1,N[r]=r+1;for(z[1]=h+h,N[h]=0,a=1;a<=h;a++)z[h+a]=h+a-1,N[h+a]=h+a+1;for(z[h+1]=0,N[h+h]=1,u=1;u<=h;u++)B[u]=0,q[u]=0;for(e.nnz_a=_,e.nnz_f=0,e.nnz_v=_,e.max_a=p,e.big_v=p,e.rank=-1,r=1;r<=h;r++)L[r]=-1;for(c=0;c<=h;c++)T[c]=0;for(r=1;r<=h;r++)c=x[r],I[r]=0,D[r]=T[c],0!=D[r]&&(I[D[r]]=r),T[c]=r;for(c=0;c<=h;c++)F[c]=0;for(a=1;a<=h;a++)c=M[a],R[a]=0,U[a]=F[c],0!=U[a]&&(R[U[a]]=a),F[c]=a;return H}function Dt(e,n){function i(){return n(r,o),0==r}var r,o,a,l,s,u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M=e.n,A=e.vr_ptr,E=e.vr_len,P=e.vc_ptr,j=e.vc_len,O=e.sv_ind,C=e.sv_val,S=e.vr_max,z=e.rs_head,N=e.rs_next,L=e.cs_head,T=e.cs_prev,I=e.cs_next,D=e.piv_tol,F=e.piv_lim,R=e.suhl;if(r=o=0,y=Bl,p=0,0!=(_=L[1]))return t(1==j[_]),r=O[P[_]],o=_,i();if(0!=(l=z[1]))return t(1==E[l]),r=l,o=O[A[l]],i();for(a=2;a<=M;a++){for(_=L[a];0!=_;_=m){for(d=P[_],f=d+j[_]-1,m=I[_],h=g=0,v=Gl,b=d;b<=f;b++)if(l=O[b],s=A[l],u=s+E[l]-1,!(E[l]>=v)){if((w=S[l])<0){for(c=s;c<=u;c++)k=C[c],k<0&&(k=-k),w<k&&(w=k);S[l]=w}for(c=A[l];O[c]!=_;c++);if(t(c<=u),k=C[c],k<0&&(k=-k),!(k<D*w)&&(h=l,g=_,(v=E[l])<=a))return r=h,o=g,i()}if(0!=h){if(p++,x=(v-1)*(a-1),x<y&&(r=h,o=g,y=x),p==F)return i()}else R&&(0==T[_]?L[a]=I[_]:I[T[_]]=I[_],0==I[_]||(T[I[_]]=T[_]),T[_]=I[_]=_)}for(l=z[a];0!=l;l=N[l]){if(s=A[l],u=s+E[l]-1,(w=S[l])<0){for(c=s;c<=u;c++)k=C[c],k<0&&(k=-k),w<k&&(w=k);S[l]=w}for(h=g=0,v=Gl,c=s;c<=u;c++)if(_=O[c],!(j[_]>=v)&&(k=C[c],k<0&&(k=-k),!(k<D*w)&&(h=l,g=_,(v=j[_])<=a)))return r=h,o=g,i();if(0!=h){if(p++,x=(a-1)*(v-1),x<y&&(r=h,o=g,y=x),p==F)return i()}else t(h!=h)}}return i()}function Ft(e,n,i){var r,o,a,l,s,u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M,A=e.n,E=e.fc_ptr,P=e.fc_len,j=e.vr_ptr,O=e.vr_len,C=e.vr_cap,S=e.vr_piv,z=e.vc_ptr,N=e.vc_len,L=e.vc_cap,T=e.sv_ind,I=e.sv_val,D=e.sv_prev,F=e.sv_next,R=e.vr_max,U=e.rs_head,B=e.rs_prev,q=e.rs_next,H=e.cs_head,G=e.cs_prev,V=e.cs_next,X=e.flag,K=e.work,W=e.eps_tol,Y=e.fr_len,J=0;for(t(1<=n&&n<=A),t(1<=i&&i<=A),0==B[n]?U[O[n]]=q[n]:q[B[n]]=q[n],0==q[n]||(B[q[n]]=B[n]),0==G[i]?H[N[i]]=V[i]:V[G[i]]=V[i],0==V[i]||(G[V[i]]=G[i]),p=j[n],m=p+O[n]-1,h=p;T[h]!=i;h++);for(t(h<=m),k=S[n]=I[h],T[h]=T[m],I[h]=I[m],O[n]--,m--,g=z[i],v=g+N[i]-1,y=g;T[y]!=n;y++);for(t(y<=v),T[y]=T[v],N[i]--,v--,h=p;h<=m;h++){for(c=T[h],X[c]=1,K[c]=I[h],0==G[c]?H[N[c]]=V[c]:V[G[c]]=V[c],0==V[c]||(G[V[c]]=G[c]),_=z[c],d=_+N[c]-1,f=_;T[f]!=n;f++);t(f<=d),T[f]=T[d],N[c]--}for(;g<=v;){for(a=T[g],0==B[a]?U[O[a]]=q[a]:q[B[a]]=q[a],0==q[a]||(B[q[a]]=B[a]),l=j[a],s=l+O[a]-1,u=l;T[u]!=i;u++);for(t(u<=s),x=I[u]/k,T[u]=T[s],I[u]=I[s],O[a]--,s--,T[g]=T[v],N[i]--,v--,o=O[n],u=l;u<=s;u++)if(c=T[u],X[c])if(M=I[u]-=x*K[c],M<0&&(M=-M),X[c]=0,o--,0==M||M<W){for(T[u]=T[s],I[u]=I[s],O[a]--,u--,s--,_=z[c],d=_+N[c]-1,f=_;T[f]!=a;f++);t(f<=d),T[f]=T[d],N[c]--}else e.big_v<M&&(e.big_v=M);if(O[a]+o>C[a]){if(Nt(e,a,O[a]+o))return J=1;p=j[n],m=p+O[n]-1,g=z[i],v=g+N[i]-1}for(r=0,h=p;h<=m;h++)c=T[h],X[c]?(M=w=-x*K[c],M<0&&(M=-M),0==M||M<W||(u=j[a]+O[a],T[u]=c,I[u]=w,O[a]++,Y[++r]=c,e.big_v<M&&(e.big_v=M))):X[c]=1;for(b=1;b<=r;b++){if(c=Y[b],N[c]+1>L[c]){if(Lt(e,c,N[c]+10))return J=1;p=j[n],m=p+O[n]-1,g=z[i],v=g+N[i]-1}f=z[c]+N[c],T[f]=a,N[c]++}if(B[a]=0,q[a]=U[O[a]],0!=q[a]&&(B[q[a]]=a),U[O[a]]=a,R[a]=-1,e.sv_end-e.sv_beg<1){if(zt(e),e.sv_end-e.sv_beg<1)return J=1;p=j[n],m=p+O[n]-1,g=z[i],v=g+N[i]-1}e.sv_end--,T[e.sv_end]=a,I[e.sv_end]=x,P[n]++}for(t(0==N[i]),L[i]=0,b=A+i,0==D[b]?e.sv_head=F[b]:F[D[b]]=F[b],0==F[b]?e.sv_tail=D[b]:D[F[b]]=D[b],E[n]=e.sv_end,h=p;h<=m;h++)c=T[h],X[c]=0,K[c]=0,1!=N[c]&&G[c]==c&&V[c]==c||(G[c]=0,V[c]=H[N[c]],0!=V[c]&&(G[V[c]]=c),H[N[c]]=c);return J}function Rt(e){var t,n,i,r,o,a,l,s,u=e.n,c=e.vr_ptr,_=e.vr_len,d=e.vc_ptr,f=e.vc_len,b=e.vc_cap,p=e.sv_ind,m=e.sv_val,h=e.sv_prev,g=e.sv_next,v=0;for(s=0,t=1;t<=u;t++){for(n=c[t],i=n+_[t]-1,r=n;r<=i;r++)b[p[r]]++;s+=_[t]}if(e.nnz_v=s,e.sv_end-e.sv_beg<s)return v=1;for(o=1;o<=u;o++)d[o]=e.sv_beg,e.sv_beg+=b[o];for(t=1;t<=u;t++)for(n=c[t],i=n+_[t]-1,r=n;r<=i;r++)o=p[r],a=d[o]+f[o],p[a]=t,m[a]=m[r],f[o]++;for(l=u+1;l<=u+u;l++)h[l]=l-1,g[l]=l+1;return h[u+1]=e.sv_tail,g[e.sv_tail]=u+1,g[u+u]=0,e.sv_tail=u+u,v}function Ut(e){var t,n,i,r,o,a,l,s=e.n,u=e.fr_ptr,c=e.fr_len,_=e.fc_ptr,d=e.fc_len,f=e.sv_ind,b=e.sv_val,p=0;for(t=1;t<=s;t++)c[t]=0;for(l=0,n=1;n<=s;n++){for(i=_[n],r=i+d[n]-1,o=i;o<=r;o++)c[f[o]]++;l+=d[n]}if(e.nnz_f=l,e.sv_end-e.sv_beg<l)return p=1;for(t=1;t<=s;t++)u[t]=e.sv_end,e.sv_end-=c[t];for(n=1;n<=s;n++)for(i=_[n],r=i+d[n]-1,o=i;o<=r;o++)t=f[o],a=--u[t],f[a]=n,b[a]=b[o];return p}function Bt(e,i,r,o){var a,l,s,u,c,_,d,f,b,p,m=e.max_gro,h=null;for(i<1&&n("luf_factorize: n = "+i+"; invalid parameter"),i>Wl&&n("luf_factorize: n = "+i+"; matrix too big"),e.valid=0,Tt(e,i),a=e.pp_row,l=e.pp_col,s=e.qq_row,u=e.qq_col,0==e.sv_size&&0==e.new_sva&&(e.new_sva=5*(i+10));function(){if(e.new_sva>0&&(e.sv_size=e.new_sva,e.sv_ind=new Int32Array(1+e.sv_size),e.sv_val=new Float64Array(1+e.sv_size),e.new_sva=0),It(e,r,o))return e.new_sva=e.sv_size+e.sv_size,t(e.new_sva>e.sv_size),!0;for(d=1;d<=i;d++){if(Dt(e,function(e,t){f=e,b=t}))return e.rank=d-1,h=Ld,!1;if(c=l[f],_=s[b],t(d<=c&&c<=i&&d<=_&&_<=i),p=a[d],a[c]=p,l[p]=c,a[d]=f,l[f]=d,p=u[d],u[_]=p,s[p]=_,u[d]=b,s[b]=d,Ft(e,f,b))return e.new_sva=e.sv_size+e.sv_size,t(e.new_sva>e.sv_size),!0;if(e.big_v>m*e.max_a)return e.rank=d-1,h=Td,!1}return zt(e),Rt(e)?(e.new_sva=e.sv_size+e.sv_size,t(e.new_sva>e.sv_size),!0):!!Ut(e)&&(e.new_sva=e.sv_size+e.sv_size,t(e.new_sva>e.sv_size),!0)}(););if(null!=h)return h;if(e.valid=1,e.rank=i,h=0,p=3*(i+e.nnz_v)+2*e.nnz_f,e.sv_size<p)for(e.new_sva=e.sv_size;e.new_sva<p;)d=e.new_sva,e.new_sva=d+d,t(e.new_sva>d);return h}function qt(e,t,i){var r,o,a,l,s,u,c,_=e.n,d=e.fr_ptr,f=e.fr_len,b=e.fc_ptr,p=e.fc_len,m=e.pp_row,h=e.sv_ind,g=e.sv_val;if(e.valid||n("luf_f_solve: LU-factorization is not valid"),t){for(r=_;r>=1;r--)if(a=m[r],0!=(c=i[a]))for(l=d[a],s=l+f[a]-1,u=l;u<=s;u++)i[h[u]]-=g[u]*c}else for(o=1;o<=_;o++)if(a=m[o],0!=(c=i[a]))for(l=b[a],s=l+p[a]-1,u=l;u<=s;u++)i[h[u]]-=g[u]*c}function Ht(e,t,i){var r,o,a,l,s,u,c,_=e.n,d=e.vr_ptr,f=e.vr_len,b=e.vr_piv,p=e.vc_ptr,m=e.vc_len,h=e.pp_row,g=e.qq_col,v=e.sv_ind,y=e.sv_val,x=e.work;for(e.valid||n("luf_v_solve: LU-factorization is not valid"),a=1;a<=_;a++)x[a]=i[a],i[a]=0;if(t){for(a=1;a<=_;a++)if(r=h[a],o=g[a],0!=(c=x[o]))for(i[r]=c/=b[r],l=d[r],s=l+f[r]-1,u=l;u<=s;u++)x[v[u]]-=y[u]*c}else for(a=_;a>=1;a--)if(r=h[a],o=g[a],0!=(c=x[r]))for(i[o]=c/=b[r],l=p[o],s=l+m[o]-1,u=l;u<=s;u++)x[v[u]]-=y[u]*c}function Gt(){return{index:{},par:{},set:{},var_:{},con:{},arg:{},loop:{}}}function Vt(e){var n;n=e.token==ff?"_|_":e.token==hf?"'...'":e.image,t(0<=e.c_ptr&&e.c_ptr<_f),e.context[e.c_ptr++]=" ",e.c_ptr==_f&&(e.c_ptr=0);for(var i=0;i<n.length;i++)e.context[e.c_ptr++]=n[i],e.c_ptr==_f&&(e.c_ptr=0)}function Xt(e){for(var t;e.c_ptr>0;)e.c_ptr--,t=e.context[0],r(e.context,0,e.context,1,_f-1),e.context[_f-1]=t;Jl("Context: "+e.line+" > "+(" "==e.context[0]?"":"...")+e.context.join("").trim())}function Kt(e){var t;e.c!=Id&&("\n"==e.c&&(e.line++,e.column=0),t=Yo(e),e.column++,t==Id?"\n"==e.c?e.line--:na(e,"final NL missing before end of file"):"\n"==t||(_(t)?t=" ":d(t)&&(Vt(e),ta(e,"control character "+t+" not allowed"))),e.c=t)}function Wt(e){t(0<=e.imlen),e.image+=e.c,e.imlen++,Kt(e)}function Yt(e){function n(){Vt(e),ta(e,"keyword s.t. incomplete")}function i(){Vt(e),ta(e,"cannot convert numeric literal "+e.image+" to floating-point number")}function r(){if("e"==e.c||"E"==e.c)for(Wt(e),"+"!=e.c&&"-"!=e.c||Wt(e),p(e.c)||(Vt(e),ta(e,"numeric literal "+e.image+" incomplete"));p(e.c);)Wt(e);(f(e.c)||"_"==e.c)&&(Vt(e),ta(e,"symbol "+e.image+e.c+"... should be enclosed in quotes"))}function o(){for(;;){if(("\n"==e.c&&!s||e.c==Id)&&(Vt(e),ta(e,"unexpected end of line; string literal incomplete")),e.c==l)if(Kt(e),e.c==l){if(s){if(Kt(e),e.c==l){Kt(e);break}e.image+='""',e.imlen+=2}}else{if(!s)break;e.image+='"',e.imlen++}Wt(e)}}if(e.b_token=e.token,e.b_imlen=e.imlen,e.b_image=e.image,e.b_value=e.value,e.f_scan)return e.f_scan=0,e.token=e.f_token,e.imlen=e.f_imlen,e.image=e.f_image,void(e.value=e.f_value);for(;;){for(e.token=0,e.imlen=0,e.image="",e.value=0;" "==e.c||"\n"==e.c;)Kt(e);if(e.c==Id)e.token=ff;else{if("#"==e.c){for(;"\n"!=e.c&&e.c!=Id;)Kt(e);continue}if(e.flag_d||!f(e.c)&&"_"!=e.c)if(!e.flag_d&&p(e.c)){for(e.token=mf;p(e.c);)Wt(e);var a=!1;if("."==e.c)if(Wt(e),"."==e.c)e.imlen--,e.image=e.image.substr(0,e.image.length-1),e.f_dots=1,a=!0;else for(;p(e.c);)Wt(e);a||r(),Xe(e.image,function(t){e.value=t})&&i()}else if("'"==e.c||'"'==e.c){var l=e.c,s=!1;e.token=hf,Kt(e),e.c==l?(Kt(e),e.c==l&&(s=!0,Kt(e),o())):o()}else if(e.flag_d||"+"!=e.c)if(e.flag_d||"-"!=e.c){if("*"==e.c)e.token=Rf,Wt(e),"*"==e.c&&(e.token=Bf,Wt(e));else if("/"==e.c){if(e.token=Uf,Wt(e),"*"==e.c){for(Kt(e);;)if(e.c==Id)ta(e,"unexpected end of file; comment sequence incomplete");else if("*"==e.c){if(Kt(e),"/"==e.c)break}else Kt(e);Kt(e);continue}}else if("^"==e.c)e.token=Bf,Wt(e);else if("<"==e.c)e.token=qf,Wt(e),"="==e.c?(e.token=Hf,Wt(e)):">"==e.c?(e.token=Kf,Wt(e)):"-"==e.c&&(e.token=cb,Wt(e));else if("="==e.c)e.token=Gf,Wt(e),"="==e.c&&Wt(e);else if(">"==e.c)e.token=Xf,Wt(e),"="==e.c?(e.token=Vf,Wt(e)):">"==e.c&&(e.token=sb,Wt(e));else if("!"==e.c)e.token=Cf,Wt(e),"="==e.c&&(e.token=Kf,Wt(e));else if("&"==e.c)e.token=Wf,Wt(e),"&"==e.c&&(e.token=gf,Wt(e));else if("|"==e.c)e.token=Yf,Wt(e),"|"==e.c&&(e.token=Sf,Wt(e));else if(e.flag_d||"."!=e.c)if(","==e.c)e.token=$f,Wt(e);else if(":"==e.c)e.token=Zf,Wt(e),"="==e.c&&(e.token=eb,Wt(e));else if(";"==e.c)e.token=Qf,Wt(e);else if("("==e.c)e.token=nb,Wt(e);else if(")"==e.c)e.token=ib,Wt(e);else if("["==e.c)e.token=rb,Wt(e);else if("]"==e.c)e.token=ob,Wt(e);else if("{"==e.c)e.token=ab,Wt(e);else if("}"==e.c)e.token=lb,Wt(e);else if("~"==e.c)e.token=ub,Wt(e);else if(b(e.c)||m("+-._",e.c)>=0){for(t(e.flag_d),e.token=pf;b(e.c)||m("+-._",e.c)>=0;)Wt(e);switch(Xe(e.image,function(t){e.value=t})){case 0:e.token=mf;break;case 1:i();break;case 2:break;default:t(e!=e)}}else Vt(e),ta(e,"character "+e.c+" not allowed");else if(e.token=Jf,Wt(e),e.f_dots)e.token=tb,e.imlen=2,e.image="..",e.f_dots=0;else if("."==e.c)e.token=tb,Wt(e);else if(p(e.c)){for(e.token=mf,Wt(e);p(e.c);)Wt(e);r(),Xe(e.image,function(t){e.value=t})&&i()}}else e.token=Ff,Wt(e);else e.token=Df,Wt(e);else{for(e.token=bf;b(e.c)||"_"==e.c;)Wt(e);"and"==e.image?e.token=gf:"by"==e.image?e.token=vf:"cross"==e.image?e.token=yf:"diff"==e.image?e.token=xf:"div"==e.image?e.token=wf:"else"==e.image?e.token=kf:"if"==e.image?e.token=Mf:"in"==e.image?e.token=Af:"Infinity"==e.image?e.token=Ef:"inter"==e.image?e.token=Pf:"less"==e.image?e.token=jf:"mod"==e.image?e.token=Of:"not"==e.image?e.token=Cf:"or"==e.image?e.token=Sf:"s"==e.image&&"."==e.c?(e.token=zf,Wt(e),"t"!=e.c&&n(),Wt(e),"."!=e.c&&n(),Wt(e)):"symdiff"==e.image?e.token=Nf:"then"==e.image?e.token=Lf:"union"==e.image?e.token=Tf:"within"==e.image&&(e.token=If)}}break}Vt(e),e.flag_x=0}function Jt(e){t(!e.f_scan),e.f_scan=1,e.f_token=e.token,e.f_imlen=e.imlen,e.f_image=e.image,e.f_value=e.value,e.token=e.b_token,e.imlen=e.b_imlen,e.image=e.b_image,e.value=e.b_value}function $t(e,t){return e.token==bf&&e.image==t}function Zt(e){return e.token==gf&&"a"==e.image[0]||e.token==vf||e.token==yf||e.token==xf||e.token==wf||e.token==kf||e.token==Mf||e.token==Af||e.token==Pf||e.token==jf||e.token==Of||e.token==Cf&&"n"==e.image[0]||e.token==Sf&&"o"==e.image[0]||e.token==Nf||e.token==Lf||e.token==Tf||e.token==If}function Qt(e,n,i,r,o){var a,l,s,u={};switch(u.op=n,u.vflag=0,u.arg=Gt(),u.value={},n){case hb:u.arg.num=i.num;break;case gb:u.arg.str=i.str;break;case vb:u.arg.index.slot=i.index.slot,u.arg.index.next=i.index.next;break;case yb:case xb:for(s=i.par.list;null!=s;s=s.next)t(null!=s.x),t(null==s.x.up),s.x.up=u,u.vflag|=s.x.vflag;u.arg.par.par=i.par.par,u.arg.par.list=i.par.list;break;case wb:for(s=i.set.list;null!=s;s=s.next)t(null!=s.x),t(null==s.x.up),s.x.up=u,u.vflag|=s.x.vflag;u.arg.set.set=i.set.set,u.arg.set.list=i.set.list;break;case kb:for(s=i.var_.list;null!=s;s=s.next)t(null!=s.x),t(null==s.x.up),s.x.up=u,u.vflag|=s.x.vflag;u.arg.var_.var_=i.var_.var_,u.arg.var_.list=i.var_.list,u.arg.var_.suff=i.var_.suff;break;case Mb:for(s=i.con.list;null!=s;s=s.next)t(null!=s.x),t(null==s.x.up),s.x.up=u,u.vflag|=s.x.vflag;u.arg.con.con=i.con.con,u.arg.con.list=i.con.list,u.arg.con.suff=i.con.suff;break;case Ab:case Eb:for(s=i.list;null!=s;s=s.next)t(null!=s.x),t(null==s.x.up),s.x.up=u,u.vflag|=s.x.vflag;u.arg.list=i.list;break;case Pb:t(null!=i.slice),u.arg.slice=i.slice;break;case jb:case Ob:case Cb:case Sb:u.vflag=1;break;case zb:case Nb:case Lb:case Tb:case Ib:case Db:case Fb:case Rb:case Ub:case Bb:case qb:case Hb:case Gb:case Vb:case Xb:case Kb:case Wb:case Yb:case Jb:case $b:case Zb:case Qb:t(null!=i.arg.x),t(null==i.arg.x.up),i.arg.x.up=u,u.vflag|=i.arg.x.vflag,u.arg.arg.x=i.arg.x;break;case ep:case tp:case np:case ip:case rp:case op:case ap:case lp:case sp:case up:case cp:case _p:n==_p&&(u.vflag=1);case dp:n==dp&&(u.vflag=1);case fp:case bp:case pp:case mp:case hp:case gp:case vp:case yp:case xp:case wp:case kp:case Mp:case Ap:case Ep:case Pp:case jp:case Op:case Cp:case Sp:case zp:case Np:t(null!=i.arg.x),t(null==i.arg.x.up),i.arg.x.up=u,u.vflag|=i.arg.x.vflag,t(null!=i.arg.y),t(null==i.arg.y.up),i.arg.y.up=u,u.vflag|=i.arg.y.vflag,u.arg.arg.x=i.arg.x,u.arg.arg.y=i.arg.y;break;case Lp:case Tp:case Ip:t(null!=i.arg.x),t(null==i.arg.x.up),i.arg.x.up=u,u.vflag|=i.arg.x.vflag,t(null!=i.arg.y),t(null==i.arg.y.up),i.arg.y.up=u,u.vflag|=i.arg.y.vflag,null!=i.arg.z&&(t(null==i.arg.z.up),i.arg.z.up=u,u.vflag|=i.arg.z.vflag),u.arg.arg.x=i.arg.x,u.arg.arg.y=i.arg.y,u.arg.arg.z=i.arg.z;break;case Dp:case Fp:for(s=i.list;null!=s;s=s.next)t(null!=s.x),t(null==s.x.up),s.x.up=u,u.vflag|=s.x.vflag;u.arg.list=i.list;break;case Rp:case Up:case Bp:case qp:case Hp:case Gp:case Vp:case Xp:for(a=i.loop.domain,t(null!=a),null!=a.code&&(t(null==a.code.up),a.code.up=u,u.vflag|=a.code.vflag),l=a.list;null!=l;l=l.next)t(null!=l.code),t(null==l.code.up),l.code.up=u,u.vflag|=l.code.vflag;null!=i.loop.x&&(t(null==i.loop.x.up),i.loop.x.up=u,u.vflag|=i.loop.x.vflag),u.arg.loop.domain=i.loop.domain,u.arg.loop.x=i.loop.x;break;default:t(n!=n)}return u.type=r,u.dim=o,u.up=null,u.valid=0,u.value={},u}function en(e,n,i,r,o){var a=Gt();return t(null!=i),a.arg.x=i,Qt(e,n,a,r,o)}function tn(e,n,i,r,o,a){var l=Gt();return t(null!=i),t(null!=r),l.arg.x=i,l.arg.y=r,Qt(e,n,l,o,a)}function nn(e,n,i,r,o,a,l){var s=Gt();return t(null!=i),t(null!=r),s.arg.x=i,s.arg.y=r,s.arg.z=o,Qt(e,n,s,a,l)}function rn(e){var n,i=Gt();return t(e.token==mf),i.num=e.value,n=Qt(e,hb,i,ef,0),Yt(e),n}function on(e){var n,i=Gt();return t(e.token==hf),i.str=e.image,n=Qt(e,gb,i,lf,0),Yt(e),n}function an(e,n,i){var r,o={};if(t(null!=i),o.x=i,o.next=null,null==n)n=o;else{for(r=n;null!=r.next;r=r.next);r.next=o}return n}function ln(e,t){var n,i;for(i=0,n=t;null!=n;n=n.next)i++;return i}function sn(e){for(var n,i=null;;)if(n=Ln(e),n.type==ef&&(n=en(e,Nb,n,lf,0)),n.type!=lf&&ta(e,"subscript expression has invalid type"),t(0==n.dim),i=an(e,i,n),e.token==$f)Yt(e);else{if(e.token==ob)break;ta(e,"syntax error in subscript list")}return i}function un(e){var n,i,r,o,a,l,s,u,c,_,d=Gt();t(e.token==bf);var f=e.tree[e.image];switch(null==f&&ta(e,e.image+" not defined"),f.type){case Kd:n=f.link,u=n.name,c=0;break;case of:i=f.link,u=i.name,c=i.dim,0==i.dimen&&(i.dimen=1);break;case nf:r=f.link,u=r.name,c=r.dim;break;case cf:o=f.link,u=o.name,c=o.dim;break;case Rd:a=f.link,u=a.name,c=a.dim;break;default:t(f!=f)}switch(Yt(e),e.token==rb?(0==c&&ta(e,u+" cannot be subscripted"),Yt(e),l=sn(e),c!=ln(e,l)&&ta(e,u+" must have "+c+" subscript"+(1==c?"":"s")+" rather than "+ln(e,l)),t(e.token==ob),Yt(e)):(0!=c&&ta(e,u+" must be subscripted"),l=null),_=e.flag_s||f.type!=cf?pb:_b,e.token==Jf&&(Yt(e),e.token!=bf&&ta(e,"invalid use of period"),f.type!=cf&&f.type!=Rd&&ta(e,u+" cannot have a suffix"),"lb"==e.image?_=db:"ub"==e.image?_=fb:"status"==e.image?_=bb:"val"==e.image?_=pb:"dual"==e.image?_=mb:ta(e,"suffix ."+e.image+" invalid"),Yt(e)),f.type){case Kd:d.index.slot=n,d.index.next=n.list,s=Qt(e,vb,d,lf,0),n.list=s;break;case of:d.set.set=i,d.set.list=l,s=Qt(e,wb,d,qd,i.dimen);break;case nf:d.par.par=r,d.par.list=l,s=r.type==lf?Qt(e,xb,d,lf,0):Qt(e,yb,d,ef,0);break;case cf:e.flag_s||_!=bb&&_!=pb&&_!=mb||ta(e,"invalid reference to status, primal value, or dual value of variable "+o.name+" above solve statement"),d.var_.var_=o,d.var_.list=l,d.var_.suff=_,s=Qt(e,kb,d,_==_b?Xd:ef,0);break;case Rd:e.flag_s||_!=bb&&_!=pb&&_!=mb||ta(e,"invalid reference to status, primal value, or dual value of "+(a.type==Rd?"constraint":"objective")+" "+a.name+" above solve statement"),d.con.con=a,d.con.list=l,d.con.suff=_,s=Qt(e,Mb,d,ef,0);break;default:t(f!=f)}return s}function cn(e,n){var i=Ln(e);return i.type==lf&&(i=en(e,zb,i,ef,0)),i.type!=ef&&ta(e,"argument for "+n+" has invalid type"),t(0==i.dim),i}function _n(e,n){var i=Ln(e);return i.type==ef&&(i=en(e,Nb,i,lf,0)),i.type!=lf&&ta(e,"argument for "+n+" has invalid type"),t(0==i.dim),i}function dn(e,n){var i=Fn(e);return i.type!=qd&&ta(e,"argument for "+n+" has invalid type"),t(i.dim>0),i}function fn(e){var n,i,r,o=Gt();if(t(e.token==bf),"abs"==e.image?i=Ub:"ceil"==e.image?i=Bb:"floor"==e.image?i=qb:"exp"==e.image?i=Hb:"log"==e.image?i=Gb:"log10"==e.image?i=Vb:"sqrt"==e.image?i=Xb:"sin"==e.image?i=Kb:"cos"==e.image?i=Wb:"atan"==e.image?i=Yb:"min"==e.image?i=Dp:"max"==e.image?i=Fp:"round"==e.image?i=Jb:"trunc"==e.image?i=$b:"Irand224"==e.image?i=jb:"Uniform01"==e.image?i=Ob:"Uniform"==e.image?i=_p:"Normal01"==e.image?i=Cb:"Normal"==e.image?i=dp:"card"==e.image?i=Zb:"length"==e.image?i=Qb:"substr"==e.image?i=Sp:"str2time"==e.image?i=zp:"time2str"==e.image?i=Np:"gmtime"==e.image?i=Sb:ta(e,"function "+e.image+" unknown"),r=e.image,t(r.length<16),Yt(e),t(e.token==nb),Yt(e),i==Dp||i==Fp)for(o.list=null;;)if(o.list=an(e,o.list,cn(e,r)),e.token==$f)Yt(e);else{if(e.token==ib)break;ta(e,"syntax error in argument list for "+r)}else if(i==jb||i==Ob||i==Cb||i==Sb)e.token!=ib&&ta(e,r+" needs no arguments");else if(i==_p||i==dp)o.arg.x=cn(e,r),e.token==$f||(e.token==ib?ta(e,r+" needs two arguments"):ta(e,"syntax error in argument for "+r)),Yt(e),o.arg.y=cn(e,r),e.token==$f?ta(e,r+" needs two argument"):e.token==ib||ta(e,"syntax error in argument for "+r);else if(i==Yb||i==Jb||i==$b){if(o.arg.x=cn(e,r),e.token==$f){switch(i){case Yb:i=sp;break;case Jb:i=up;break;case $b:i=cp;break;default:t(i!=i)}Yt(e),o.arg.y=cn(e,r)}e.token==$f?ta(e,r+" needs one or two arguments"):e.token==ib||ta(e,"syntax error in argument for "+r)}else i==Sp?(o.arg.x=_n(e,r),e.token==$f||(e.token==ib?ta(e,r+" needs two or three arguments"):ta(e,"syntax error in argument for "+r)),Yt(e),o.arg.y=cn(e,r),e.token==$f&&(i=Ip,Yt(e),o.arg.z=cn(e,r)),e.token==$f?ta(e,r+" needs two or three arguments"):e.token==ib||ta(e,"syntax error in argument for "+r)):i==zp?(o.arg.x=_n(e,r),e.token==$f||(e.token==ib?ta(e,r+" needs two arguments"):ta(e,"syntax error in argument for "+r)),Yt(e),o.arg.y=_n(e,r),e.token==$f?ta(e,r+" needs two argument"):e.token==ib||ta(e,"syntax error in argument for "+r)):i==Np?(o.arg.x=cn(e,r),e.token==$f||(e.token==ib?ta(e,r+" needs two arguments"):ta(e,"syntax error in argument for "+r)),Yt(e),o.arg.y=_n(e,r),e.token==$f?ta(e,r+" needs two argument"):e.token==ib||ta(e,"syntax error in argument for "+r)):(o.arg.x=i==Zb?dn(e,r):i==Qb?_n(e,r):cn(e,r),e.token==$f?ta(e,r+" needs one argument"):e.token==ib||ta(e,"syntax error in argument for "+r));return n=i==Sp||i==Ip||i==Np?Qt(e,i,o,lf,0):Qt(e,i,o,ef,0),t(e.token==ib),Yt(e),n}function bn(e,n,i){var r;if(t(null!=n),t(null!=i),t(null==i.next),null==n.list)n.list=i;else{for(r=n.list;null!=r.next;r=r.next);r.next=i}}function pn(e,n,i,r){var o,a={};if(t(null!=n),a.name=i,a.code=r,a.value=null,a.list=null,a.next=null,null==n.list)n.list=a;else{for(o=n.list;null!=o.next;o=o.next);o.next=a}return a}function mn(e){function n(){i=qn(e),(e.token==$f||u>1)&&(i.type==ef&&(i=en(e,Nb,i,lf,0)),i.type!=lf&&ta(e,"component expression has invalid type"),t(0==i.dim)),o[u].name=null,o[u].code=i}var i,r=Gt(),o=new Array(21);a(o,0,21);var l,s,u,c,_=0;for(t(e.token==nb),l=e.flag_x,Yt(e),u=1;;u++){if(u>20&&ta(e,"too many components within parentheses"),e.token==bf)if(Yt(e),s=e.token,Jt(e),!l||s!=$f&&s!=ib||null!=e.tree[e.image])n();else{for(c=1;c<u;c++)null!=o[c].name&&o[c].name==e.image&&ta(e,"duplicate dummy index "+e.image+" not allowed");o[u].name=e.image,o[u].code=null,Yt(e),_=1,1==u&&e.token==ib&&ta(e,o[u].name+" not defined")}else n();if(e.token==$f)Yt(e);else{if(e.token==ib)break;ta(e,"right parenthesis missing where expected")}}if(1!=u||_)if(_){for(r.slice={},c=1;c<=u;c++)pn(e,r.slice,o[c].name,o[c].code);i=Qt(e,Pb,r,uf,u)}else{for(r.list=null,c=1;c<=u;c++)r.list=an(e,r.list,o[c].code);i=Qt(e,Ab,r,uf,u)}else i=o[1].code;return Yt(e),_&&e.token!=Af&&ta(e,"keyword in missing where expected"),l&&e.token==Af&&!_&&(1==u?ta(e,"syntax error in indexing expression"):ta(e,"0-ary slice not allowed")),i}function hn(e,n){var i,r=Gt();for(t(null!=n),r.list=null,i=1;;i++){if(n.type==ef&&(n=en(e,Nb,n,lf,0)),n.type==lf&&(n=en(e,Tb,n,uf,1)),n.type!=uf&&ta(e,"member expression has invalid type"),null!=r.list&&r.list.x.dim!=n.dim&&ta(e,"member "+(i-1)+" has "+r.list.x.dim+" component"+(1==r.list.x.dim?"":"s")+" while member "+i+" has "+n.dim+" component"+(1==n.dim?"":"s")),r.list=an(e,r.list,n),e.token==$f)Yt(e);else{if(e.token==lb)break;ta(e,"syntax error in literal set")}n=Ln(e)}return n=Qt(e,Eb,r,qd,r.list.x.dim)}function gn(e){var n,i,r,o;for(t(e.token==ab),Yt(e),e.token==lb&&ta(e,"empty indexing expression not allowed"),n={};;){if(i=null,o=null,e.token==bf){var a,l;Yt(e),a=e.token,Jt(e),a==Af&&null==e.tree[e.image]&&(i={},l=e.image,pn(e,i,l,null),Yt(e),t(e.token==Af),Yt(e))}else e.token==nb&&(e.flag_x=1,o=Fn(e),o.op==Pb&&(i=o.arg.slice,o=null,t(e.token==Af),Yt(e)));if(null==o&&(o=Fn(e)),o.type!=qd&&(null!=i&&ta(e,"domain expression has invalid type"),o=hn(e,o)),t(null!=o),t(o.type==qd),t(o.dim>0),null==i){var s;for(i={},s=1;s<=o.dim;s++)pn(e,i,null,null)}var u=0;for(r=i.list;null!=r;r=r.next)u++;for(u!=o.dim&&ta(e,u+" "+(1==u?"index":"indices")+" specified for set of dimension "+o.dim),t(null==i.code),i.code=o,bn(e,n,i),r=i.list;null!=r;r=r.next)if(null!=r.name){t(null==e.tree[r.name]),e.tree[r.name]={type:Kd,link:r}}if(e.token==$f)Yt(e);else{if(e.token==Zf||e.token==lb)break;ta(e,"syntax error in indexing expression")}}return e.token==Zf&&(Yt(e),o=qn(e),o.type==lf&&(o=en(e,zb,o,ef,0)),o.type==ef&&(o=en(e,Lb,o,Jd,0)),o.type!=Jd&&ta(e,"expression following colon has invalid type"),t(0==o.dim),n.code=o,e.token!=lb&&ta(e,"syntax error in indexing expression")),Yt(e),n}function vn(e,n){var i,r,o;for(t(null!=n),i=n.list;null!=i;i=i.next)for(r=i.list;null!=r;r=r.next)null!=r.name&&(o=e.tree[r.name],t(null!=o),t(o.type==Kd),delete e.tree[r.name])}function yn(e){var n,i;for(n=e.arg.loop.domain.list;null!=n;n=n.next)for(i=n.list;null!=i;i=i.next)null!=i.code&&(t(null==i.code.up),i.code.up=e)}function xn(e){function n(){ta(e,"integrand following "+o+"{...} has invalid type")}var i,r,o,a=Gt();switch(t(e.token==bf),"sum"==e.image?r=Rp:"prod"==e.image?r=Up:"min"==e.image?r=Bp:"max"==e.image?r=qp:"forall"==e.image?r=Hp:"exists"==e.image?r=Gp:"setof"==e.image?r=Vp:ta(e,"operator "+e.image+" unknown"),o=e.image,t(o.length<8),Yt(e),t(e.token==ab),a.loop.domain=gn(e),r){case Rp:case Up:case Bp:case qp:a.loop.x=zn(e),a.loop.x.type==lf&&(a.loop.x=en(e,zb,a.loop.x,ef,0)),a.loop.x.type==ef||r==Rp&&a.loop.x.type==Xd||n(),t(0==a.loop.x.dim),i=Qt(e,r,a,a.loop.x.type,0);break;case Hp:case Gp:a.loop.x=Bn(e),a.loop.x.type==lf&&(a.loop.x=en(e,zb,a.loop.x,ef,0)),a.loop.x.type==ef&&(a.loop.x=en(e,Lb,a.loop.x,Jd,0)),a.loop.x.type!=Jd&&n(),t(0==a.loop.x.dim),i=Qt(e,r,a,Jd,0);break;case Vp:a.loop.x=Ln(e),a.loop.x.type==ef&&(a.loop.x=en(e,Nb,a.loop.x,lf,0)),a.loop.x.type==lf&&(a.loop.x=en(e,Tb,a.loop.x,uf,1)),a.loop.x.type!=uf&&n(),t(a.loop.x.dim>0),i=Qt(e,r,a,qd,a.loop.x.dim);break;default:t(r!=r)}return vn(e,a.loop.domain),yn(i),i}function wn(e,t){for(var n=0,i=t.list;null!=i;i=i.next)for(var r=i.list;null!=r;r=r.next)null==r.code&&n++;return n}function kn(e){var n,i=Gt();return t(e.token==ab),Yt(e),e.token==lb?(i.list=null,n=Qt(e,Eb,i,qd,1),Yt(e)):(Jt(e),i.loop.domain=gn(e),i.loop.x=null,vn(e,i.loop.domain),n=Qt(e,Xp,i,qd,wn(e,i.loop.domain)),yn(n)),n}function Mn(e){var n,i,r;return t(e.token==Mf),Yt(e),n=qn(e),n.type==lf&&(n=en(e,zb,n,ef,0)),n.type==ef&&(n=en(e,Lb,n,Jd,0)),n.type!=Jd&&ta(e,"expression following if has invalid type"),t(0==n.dim),e.token!=Lf&&ta(e,"keyword then missing where expected"),Yt(e),i=Fn(e),i.type!=ef&&i.type!=lf&&i.type!=qd&&i.type!=Xd&&ta(e,"expression following then has invalid type"),e.token!=kf?(i.type==qd&&ta(e,"keyword else missing where expected"),r=null):(Yt(e),r=Fn(e),r.type!=ef&&r.type!=lf&&r.type!=qd&&r.type!=Xd&&ta(e,"expression following else has invalid type"),i.type!=Xd&&r.type!=Xd||(i.type==lf&&(i=en(e,zb,i,ef,0)),i.type==ef&&(i=en(e,Ib,i,Xd,0)),r.type==lf&&(r=en(e,zb,r,ef,0)),r.type==ef&&(r=en(e,Ib,r,Xd,0))),i.type!=lf&&r.type!=lf||(i.type==ef&&(i=en(e,Nb,i,lf,0)),r.type==ef&&(r=en(e,Nb,r,lf,0))),i.type!=r.type&&ta(e,"expressions following then and else have incompatible types"),i.dim!=r.dim&&ta(e,"expressions following then and else have different dimensions "+i.dim+" and "+r.dim+", respectively")),nn(e,Tp,n,i,r,i.type,i.dim)}function An(e){var t;if(e.token==mf)t=rn(e);else if(e.token==Ef){var n=Gt();n.num=Bl,t=Qt(e,hb,n,ef,0),Yt(e)}else if(e.token==hf)t=on(e);else if(e.token==bf){var i;switch(Yt(e),i=e.token,Jt(e),i){case rb:t=un(e);break;case nb:t=fn(e);break;case ab:t=xn(e);break;default:t=un(e)}}else e.token==nb?t=mn(e):e.token==ab?t=kn(e):e.token==Mf?t=Mn(e):Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"syntax error in expression");return t}function En(e,t){ta(e,"operand preceding "+t+" has invalid type")}function Pn(e,t){ta(e,"operand following "+t+" has invalid type")}function jn(e,t,n,i){ta(e,"operands preceding and following "+t+" have different dimensions "+n+" and "+i+", respectively")}function On(e){return An(e)}function Cn(e){var n,i=On(e);if(e.token==Bf){var r=e.image;t(r.length<8),i.type==lf&&(i=en(e,zb,i,ef,0)),i.type!=ef&&En(e,r),Yt(e),n=e.token==Df||e.token==Ff?Sn(e):Cn(e),n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&Pn(e,r),i=tn(e,lp,i,n,ef,0)}return i}function Sn(e){var t;return e.token==Df?(Yt(e),t=Cn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&t.type!=Xd&&Pn(e,"+"),t=en(e,Db,t,t.type,0)):e.token==Ff?(Yt(e),t=Cn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&t.type!=Xd&&Pn(e,"-"),t=en(e,Fb,t,t.type,0)):t=Cn(e),t}function zn(e){for(var t,n=Sn(e);;)if(e.token==Rf)n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&n.type!=Xd&&En(e,"*"),Yt(e),t=Sn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&t.type!=Xd&&Pn(e,"*"),n.type==Xd&&t.type==Xd&&ta(e,"multiplication of linear forms not allowed"),n=n.type==ef&&t.type==ef?tn(e,ip,n,t,ef,0):tn(e,ip,n,t,Xd,0);else if(e.token==Uf)n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&n.type!=Xd&&En(e,"/"),Yt(e),t=Sn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&Pn(e,"/"),n=n.type==ef?tn(e,rp,n,t,ef,0):tn(e,rp,n,t,Xd,0);else if(e.token==wf)n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&En(e,"div"),Yt(e),t=Sn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&Pn(e,"div"),n=tn(e,op,n,t,ef,0);else{if(e.token!=Of)break;n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&En(e,"mod"),Yt(e),t=Sn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&Pn(e,"mod"),n=tn(e,ap,n,t,ef,0)}return n}function Nn(e){for(var t,n=zn(e);;)if(e.token==Df)n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&n.type!=Xd&&En(e,"+"),Yt(e),t=zn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&t.type!=Xd&&Pn(e,"+"),n.type==ef&&t.type==Xd&&(n=en(e,Ib,n,Xd,0)),n.type==Xd&&t.type==ef&&(t=en(e,Ib,t,Xd,0)),n=tn(e,ep,n,t,n.type,0);else if(e.token==Ff)n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&n.type!=Xd&&En(e,"-"),Yt(e),t=zn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&t.type!=Xd&&Pn(e,"-"),n.type==ef&&t.type==Xd&&(n=en(e,Ib,n,Xd,0)),n.type==Xd&&t.type==ef&&(t=en(e,Ib,t,Xd,0)),n=tn(e,tp,n,t,n.type,0);else{if(e.token!=jf)break;n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&En(e,"less"),Yt(e),t=zn(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&Pn(e,"less"),n=tn(e,np,n,t,ef,0)}return n}function Ln(e){for(var t,n=Nn(e);e.token==Wf;)n.type==ef&&(n=en(e,Nb,n,lf,0)),n.type!=lf&&En(e,"&"),Yt(e),t=Nn(e),t.type==ef&&(t=en(e,Nb,t,lf,0)),t.type!=lf&&Pn(e,"&"),n=tn(e,fp,n,t,lf,0);return n}function Tn(e){var t,n,i=Ln(e);return e.token==tb&&(i.type==lf&&(i=en(e,zb,i,ef,0)),i.type!=ef&&En(e,".."),Yt(e),t=Ln(e),t.type==lf&&(t=en(e,zb,t,ef,0)),t.type!=ef&&Pn(e,".."),e.token==vf?(Yt(e),n=Ln(e),n.type==lf&&(n=en(e,zb,n,ef,0)),n.type!=ef&&Pn(e,"by")):n=null,i=nn(e,Lp,i,t,n,qd,1)),i}function In(e){for(var t,n=Tn(e);e.token==yf;)n.type!=qd&&En(e,"cross"),Yt(e),t=Tn(e),t.type!=qd&&Pn(e,"cross"),n=tn(e,Ep,n,t,qd,n.dim+t.dim);return n}function Dn(e){for(var t,n=In(e);e.token==Pf;)n.type!=qd&&En(e,"inter"),Yt(e),t=In(e),t.type!=qd&&Pn(e,"inter"),n.dim!=t.dim&&jn(e,"inter",n.dim,t.dim),n=tn(e,Ap,n,t,qd,n.dim);return n}function Fn(e){for(var t,n=Dn(e);;)if(e.token==Tf)n.type!=qd&&En(e,"union"),Yt(e),t=Dn(e),t.type!=qd&&Pn(e,"union"),n.dim!=t.dim&&jn(e,"union",n.dim,t.dim),n=tn(e,wp,n,t,qd,n.dim);else if(e.token==xf)n.type!=qd&&En(e,"diff"),Yt(e),t=Dn(e),t.type!=qd&&Pn(e,"diff"),n.dim!=t.dim&&jn(e,"diff",n.dim,t.dim),n=tn(e,kp,n,t,qd,n.dim);else{if(e.token!=Nf)break;n.type!=qd&&En(e,"symdiff"),Yt(e),t=Dn(e),t.type!=qd&&Pn(e,"symdiff"),n.dim!=t.dim&&jn(e,"symdiff",n.dim,t.dim),n=tn(e,Mp,n,t,qd,n.dim)}return n}function Rn(e){var n,i=-1,r="",o=Fn(e);switch(e.token){case qf:i=bp;break;case Hf:i=pp;break;case Gf:i=mp;break;case Vf:i=hp;break;case Xf:i=gp;break;case Kf:i=vp;break;case Af:i=Pp;break;case If:i=Op;break;case Cf:r=e.image,Yt(e),e.token==Af?i=jp:e.token==If?i=Cp:ta(e,"invalid use of "+r),r+=" ";break;default:return o}switch(r+=e.image,t(r.length<16),i){case mp:case vp:case bp:case pp:case gp:case hp:o.type!=ef&&o.type!=lf&&En(e,r),Yt(e),n=Fn(e),n.type!=ef&&n.type!=lf&&Pn(e,r),o.type==ef&&n.type==lf&&(o=en(e,Nb,o,lf,0)),o.type==lf&&n.type==ef&&(n=en(e,Nb,n,lf,0)),o=tn(e,i,o,n,Jd,0);break;case Pp:case jp:o.type==ef&&(o=en(e,Nb,o,lf,0)),o.type==lf&&(o=en(e,Tb,o,uf,1)),o.type!=uf&&En(e,r),Yt(e),n=Fn(e),n.type!=qd&&Pn(e,r),o.dim!=n.dim&&jn(e,r,o.dim,n.dim),o=tn(e,i,o,n,Jd,0);break;case Op:case Cp:o.type!=qd&&En(e,r),Yt(e),n=Fn(e),n.type!=qd&&Pn(e,r),o.dim!=n.dim&&jn(e,r,o.dim,n.dim),o=tn(e,i,o,n,Jd,0);break;default:t(i!=i)}return o}function Un(e){var n,i;return e.token==Cf?(i=e.image,t(i.length<8),Yt(e),n=Rn(e),n.type==lf&&(n=en(e,zb,n,ef,0)),n.type==ef&&(n=en(e,Lb,n,Jd,0)),n.type!=Jd&&Pn(e,i),n=en(e,Rb,n,Jd,0)):n=Rn(e),n}function Bn(e){for(var n,i="",r=Un(e);e.token==gf;)i=e.image,t(i.length<8),r.type==lf&&(r=en(e,zb,r,ef,0)),r.type==ef&&(r=en(e,Lb,r,Jd,0)),r.type!=Jd&&En(e,i),Yt(e),n=Un(e),n.type==lf&&(n=en(e,zb,n,ef,0)),n.type==ef&&(n=en(e,Lb,n,Jd,0)),n.type!=Jd&&Pn(e,i),r=tn(e,yp,r,n,Jd,0);return r}function qn(e){for(var n,i=Bn(e);e.token==Sf;){var r=e.image;t(r.length<8),i.type==lf&&(i=en(e,zb,i,ef,0)),i.type==ef&&(i=en(e,Lb,i,Jd,0)),i.type!=Jd&&En(e,r),Yt(e),n=Bn(e),n.type==lf&&(n=en(e,zb,n,ef,0)),n.type==ef&&(n=en(e,Lb,n,Jd,0)),n.type!=Jd&&Pn(e,r),i=tn(e,xp,i,n,Jd,0)}return i}function Hn(e){function n(){ta(e,"at most one := or default/data allowed")}function i(){ta(e,e.image+" not a plain set")}function r(){ta(e,"dimension of "+e.image+" too small")}function o(){ta(e,"component number must be integer between 1 and "+s.set.dimen)}var a,l,s,u=0;for(t($t(e,"set")),Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"symbolic name missing where expected")),null!=e.tree[e.image]&&ta(e,e.image+" multiply declared"),a={},a.name=e.image,a.alias=null,a.dim=0,a.domain=null,a.dimen=0,a.within=null,a.assign=null,a.option=null,a.gadget=null,a.data=0,a.array=null,Yt(e),e.token==hf&&(a.alias=e.image,Yt(e)),e.token==ab&&(a.domain=gn(e),a.dim=wn(e,a.domain)),l=e.tree[a.name]={},l.type=of,l.link=a;;){if(e.token==$f)Yt(e);else if(e.token==Qf)break;if($t(e,"dimen")){var c;Yt(e),e.token==mf&&1<=e.value&&e.value<=20&&Math.floor(e.value)==e.value||ta(e,"dimension must be integer between 1 and 20"),c=e.value+.5|0,u&&ta(e,"at most one dimension attribute allowed"),a.dimen>0&&ta(e,"dimension "+c+" conflicts with dimension "+a.dimen+" already determined"),a.dimen=c,u=1,Yt(e)}else if(e.token==If||e.token==Af){var _,d;if(e.token!=Af||e.as_within||(na(e,"keyword in understood as within"),e.as_within=1),Yt(e),_={},_.code=null,_.next=null,null==a.within)a.within=_;else{for(d=a.within;null!=d.next;d=d.next);d.next=_}_.code=Fn(e),_.code.type!=qd&&ta(e,"expression following within has invalid type"),t(_.code.dim>0),0==a.dimen&&(a.dimen=_.code.dim),a.dimen!=_.code.dim&&ta(e,"set expression following within must have dimension "+a.dimen+" rather than "+_.code.dim)}else if(e.token==eb)null==a.assign&&null==a.option&&null==a.gadget||n(),Yt(e),a.assign=Fn(e),a.assign.type!=qd&&ta(e,"expression following := has invalid type"),t(a.assign.dim>0),0==a.dimen&&(a.dimen=a.assign.dim),a.dimen!=a.assign.dim&&ta(e,"set expression following := must have dimension "+a.dimen+" rather than "+a.assign.dim);else if($t(e,"default"))null==a.assign&&null==a.option||n(),Yt(e),a.option=Fn(e),a.option.type!=qd&&ta(e,"expression following default has invalid type"),t(a.option.dim>0),0==a.dimen&&(a.dimen=a.option.dim),a.dimen!=a.option.dim&&ta(e,"set expression following default must have dimension "+a.dimen+" rather than "+a.option.dim);else if($t(e,"data")){var f,b=0,p=new Array(20);for(null==a.assign&&null==a.gadget||n(),Yt(e),a.gadget=s={},e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"set name missing where expected")),l=e.tree[e.image],null==l&&ta(e,e.image+" not defined"),l.type!=of&&i(),s.set=l.link,0!=s.set.dim&&i(),s.set==a&&ta(e,"set cannot be initialized by itself"),a.dim>=s.set.dimen&&r(),0==a.dimen&&(a.dimen=s.set.dimen-a.dim),a.dim+a.dimen>s.set.dimen?r():a.dim+a.dimen<s.set.dimen&&ta(e,"dimension of "+e.image+" too big"),Yt(e),e.token==nb?Yt(e):ta(e,"left parenthesis missing where expected"),f=0;f<s.set.dimen;f++)p[f]=0;for(f=0;;)if(e.token!=mf&&ta(e,"component number missing where expected"),0!=Ke(e.image,function(e){b=e})&&o(),1<=b&&b<=s.set.dimen||o(),0!=p[b-1]&&ta(e,"component "+b+" multiply specified"),s.ind[f++]=b,p[b-1]=1,t(f<=s.set.dimen),Yt(e),e.token==$f)Yt(e);else{if(e.token==ib)break;ta(e,"syntax error in data attribute")}f<s.set.dimen&&ta(e,"there are must be "+s.set.dimen+" components rather than "+f),Yt(e)}else ta(e,"syntax error in set statement")}return null!=a.domain&&vn(e,a.domain),0==a.dimen&&(a.dimen=1),t(e.token==Qf),Yt(e),a}function Gn(e){function n(){l&&ta(e,"at most one binary allowed"),r.type==lf&&ta(e,"symbolic parameter cannot be binary"),r.type=Dd,l=1,Yt(e)}function i(){ta(e,"at most one := or default allowed")}var r,o,a=0,l=0,s=0;t($t(e,"param")),Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"symbolic name missing where expected")),null!=e.tree[e.image]&&ta(e,e.image+" multiply declared"),r={},r.name=e.image,r.alias=null,r.dim=0,r.domain=null,r.type=ef,r.cond=null,r.in_=null,r.assign=null,r.option=null,r.data=0,r.defval=null,r.array=null,Yt(e),e.token==hf&&(r.alias=e.image,Yt(e)),e.token==ab&&(r.domain=gn(e),r.dim=wn(e,r.domain));var u=e.tree[r.name]={};for(u.type=nf,u.link=r;;){if(e.token==$f)Yt(e);else if(e.token==Qf)break;if($t(e,"integer"))a&&ta(e,"at most one integer allowed"),r.type==lf&&ta(e,"symbolic parameter cannot be integer"),r.type!=Dd&&(r.type=Yd),a=1,Yt(e);else if($t(e,"binary"))n();else if($t(e,"logical"))e.as_binary||(na(e,"keyword logical understood as binary"),e.as_binary=1),n();else if($t(e,"symbolic"))s&&ta(e,"at most one symbolic allowed"),r.type!=ef&&ta(e,"integer or binary parameter cannot be symbolic"),null==r.cond&&null==r.in_&&null==r.assign&&null==r.option||ta(e,"keyword symbolic must precede any other parameter attributes"),r.type=lf,s=1,Yt(e);else if(e.token==qf||e.token==Hf||e.token==Gf||e.token==Vf||e.token==Xf||e.token==Kf){var c,_={};switch(e.token){case qf:_.rho=bp,c=e.image;break;case Hf:_.rho=pp,c=e.image;break;case Gf:_.rho=mp,c=e.image;break;case Vf:_.rho=hp,c=e.image;break;case Xf:_.rho=gp,c=e.image;break;case Kf:_.rho=vp,c=e.image;break;default:t(e.token!=e.token)}if(t(c.length<8),_.code=null,_.next=null,null==r.cond)r.cond=_;else{for(o=r.cond;null!=o.next;o=o.next);o.next=_}Yt(e),_.code=Ln(e),_.code.type!=ef&&_.code.type!=lf&&ta(e,"expression following "+c+" has invalid type"),t(0==_.code.dim),r.type!=lf&&_.code.type==lf&&(_.code=en(e,zb,_.code,ef,0)),r.type==lf&&_.code.type!=lf&&(_.code=en(e,Nb,_.code,lf,0))}else if(e.token==Af||e.token==If){var d;if(e.token!=If||e.as_in||(na(e,"keyword within understood as in"),e.as_in=1),Yt(e),d={},d.code=null,d.next=null,null==r.in_)r.in_=d;else{for(o=r.in_;null!=o.next;o=o.next);o.next=d}d.code=Fn(e),d.code.type!=qd&&ta(e,"expression following in has invalid type"),t(d.code.dim>0),1!=d.code.dim&&ta(e,"set expression following in must have dimension 1 rather than "+d.code.dim)}else e.token==eb?(null==r.assign&&null==r.option||i(),Yt(e),r.assign=Ln(e),r.assign.type!=ef&&r.assign.type!=lf&&ta(e,"expression following := has invalid type"),t(0==r.assign.dim),r.type!=lf&&r.assign.type==lf&&(r.assign=en(e,zb,r.assign,ef,0)),r.type==lf&&r.assign.type!=lf&&(r.assign=en(e,Nb,r.assign,lf,0))):$t(e,"default")?(null==r.assign&&null==r.option||i(),Yt(e),r.option=Ln(e),r.option.type!=ef&&r.option.type!=lf&&ta(e,"expression following default has invalid type"),t(0==r.option.dim),r.type!=lf&&r.option.type==lf&&(r.option=en(e,zb,r.option,ef,0)),r.type==lf&&r.option.type!=lf&&(r.option=en(e,Nb,r.option,lf,0))):ta(e,"syntax error in parameter statement")}return null!=r.domain&&vn(e,r.domain),t(e.token==Qf),Yt(e),r}function Vn(e){function n(){r&&ta(e,"at most one binary allowed"),o.type=Dd,r=1,Yt(e)}var i=0,r=0;t($t(e,"var")),e.flag_s&&ta(e,"variable statement must precede solve statement"),Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"symbolic name missing where expected")),null!=e.tree[e.image]&&ta(e,e.image+" multiply declared");var o={};o.name=e.image,o.alias=null,o.dim=0,o.domain=null,o.type=ef,o.lbnd=null,o.ubnd=null,o.array=null,Yt(e),e.token==hf&&(o.alias=e.image,Yt(e)),e.token==ab&&(o.domain=gn(e),o.dim=wn(e,o.domain));var a=e.tree[o.name]={};for(a.type=cf,a.link=o;;){if(e.token==$f)Yt(e);else if(e.token==Qf)break;if($t(e,"integer"))i&&ta(e,"at most one integer allowed"),o.type!=Dd&&(o.type=Yd),i=1,Yt(e);else if($t(e,"binary"))n();else if($t(e,"logical"))e.as_binary||(na(e,"keyword logical understood as binary"),e.as_binary=1),n();else if($t(e,"symbolic"))ta(e,"variable cannot be symbolic");else if(e.token==Vf)null!=o.lbnd&&(o.lbnd==o.ubnd?ta(e,"both fixed value and lower bound not allowed"):ta(e,"at most one lower bound allowed")),Yt(e),o.lbnd=Ln(e),o.lbnd.type==lf&&(o.lbnd=en(e,zb,o.lbnd,ef,0)),o.lbnd.type!=ef&&ta(e,"expression following >= has invalid type"),t(0==o.lbnd.dim);else if(e.token==Hf)null!=o.ubnd&&(o.ubnd==o.lbnd?ta(e,"both fixed value and upper bound not allowed"):ta(e,"at most one upper bound allowed")),Yt(e),o.ubnd=Ln(e),o.ubnd.type==lf&&(o.ubnd=en(e,zb,o.ubnd,ef,0)),o.ubnd.type!=ef&&ta(e,"expression following <= has invalid type"),t(0==o.ubnd.dim);else if(e.token==Gf){var l;null==o.lbnd&&null==o.ubnd||(o.lbnd==o.ubnd?ta(e,"at most one fixed value allowed"):null!=o.lbnd?ta(e,"both lower bound and fixed value not allowed"):ta(e,"both upper bound and fixed value not allowed")),l=e.image,t(l.length<8),Yt(e),o.lbnd=Ln(e),o.lbnd.type==lf&&(o.lbnd=en(e,zb,o.lbnd,ef,0)),o.lbnd.type!=ef&&ta(e,"expression following "+l+" has invalid type"),t(0==o.lbnd.dim),o.ubnd=o.lbnd}else e.token==qf||e.token==Xf||e.token==Kf?ta(e,"strict bound not allowed"):ta(e,"syntax error in variable statement")}return null!=o.domain&&vn(e,o.domain),t(e.token==Qf),Yt(e),o}function Xn(e){function n(){ta(e,"syntax error in constraint statement")}var i,r,o,a,l;e.flag_s&&ta(e,"constraint statement must precede solve statement"),$t(e,"subject")?(Yt(e),$t(e,"to")||ta(e,"keyword subject to incomplete"),Yt(e)):$t(e,"subj")?(Yt(e),$t(e,"to")||ta(e,"keyword subj to incomplete"),Yt(e)):e.token==zf&&Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"symbolic name missing where expected")),null!=e.tree[e.image]&&ta(e,e.image+" multiply declared");var s={};s.name=e.image,s.alias=null,s.dim=0,s.domain=null,s.type=Rd,s.code=null,s.lbnd=null,s.ubnd=null,s.array=null,Yt(e),e.token==hf&&(s.alias=e.image,Yt(e)),e.token==ab&&(s.domain=gn(e),s.dim=wn(e,s.domain));var u=e.tree[s.name]={};switch(u.type=Rd,u.link=s,e.token!=Zf&&ta(e,"colon missing where expected"),Yt(e),i=Ln(e),i.type==lf&&(i=en(e,zb,i,ef,0)),i.type!=ef&&i.type!=Xd&&ta(e,"expression following colon has invalid type"),t(0==i.dim),e.token==$f&&Yt(e),e.token){case Hf:case Vf:case Gf:break;case qf:case Xf:case Kf:ta(e,"strict inequality not allowed");break;case Qf:ta(e,"constraint must be equality or inequality");break;default:n()}if(a=e.token,l=e.image,t(l.length<8),Yt(e),r=Ln(e),r.type==lf&&(r=en(e,zb,r,ef,0)),r.type!=ef&&r.type!=Xd&&ta(e,"expression following "+l+" has invalid type"),t(0==r.dim),e.token==$f&&(Yt(e),e.token==Qf&&n()),e.token==qf||e.token==Hf||e.token==Gf||e.token==Vf||e.token==Xf||e.token==Kf?(a!=Gf&&e.token==a||ta(e,"double inequality must be ... <= ... <= ... or ... >= ... >= ..."),i.type==Xd&&ta(e,"leftmost expression in double inequality cannot be linear form"),Yt(e),o=Ln(e),o.type==lf&&(o=en(e,zb,r,ef,0)),o.type!=ef&&o.type!=Xd&&ta(e,"rightmost expression in double inequality constraint has invalid type"),t(0==o.dim),o.type==Xd&&ta(e,"rightmost expression in double inequality cannot be linear form")):o=null,null!=s.domain&&vn(e,s.domain),i.type!=Xd&&(i=en(e,Ib,i,Xd,0)),r.type!=Xd&&(r=en(e,Ib,r,Xd,0)),null!=o&&(o=en(e,Ib,o,Xd,0)),null==o)switch(a){case Hf:s.code=i,s.lbnd=null,s.ubnd=r;break;case Vf:s.code=i,s.lbnd=r,s.ubnd=null;break;case Gf:s.code=i,s.lbnd=r,s.ubnd=r;break;default:t(a!=a)}else switch(a){case Hf:s.code=r,s.lbnd=i,s.ubnd=o;break;case Vf:s.code=r,s.lbnd=o,s.ubnd=i;break;default:t(a!=a)}return e.token!=Qf&&n(),Yt(e),s}function Kn(e){var n,i;$t(e,"minimize")?i=Zd:$t(e,"maximize")?i=$d:t(e!=e),e.flag_s&&ta(e,"objective statement must precede solve statement"),Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"symbolic name missing where expected")),null!=e.tree[e.image]&&ta(e,e.image+" multiply declared"),n={},n.name=e.image,n.alias=null,n.dim=0,n.domain=null,n.type=i,n.code=null,n.lbnd=null,n.ubnd=null,n.array=null,Yt(e),e.token==hf&&(n.alias=e.image,Yt(e)),e.token==ab&&(n.domain=gn(e),n.dim=wn(e,n.domain));var r=e.tree[n.name]={};return r.type=Rd,r.link=n,e.token!=Zf&&ta(e,"colon missing where expected"),Yt(e),n.code=Ln(e),n.code.type==lf&&(n.code=en(e,zb,n.code,ef,0)),n.code.type==ef&&(n.code=en(e,Ib,n.code,Xd,0)),n.code.type!=Xd&&ta(e,"expression following colon has invalid type"),t(0==n.code.dim),null!=n.domain&&vn(e,n.domain),e.token!=Qf&&ta(e,"syntax error in objective statement"),Yt(e),n}function Wn(e){var n,i,r,o,a,l,s,u,c,_,d;t($t(e,"table")),Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"symbolic name missing where expected")),null!=e.tree[e.image]&&ta(e,e.image+" multiply declared");var f={u:{in_:{},out:{}}};for(f.name=e.image,Yt(e),e.token==hf?(f.alias=e.image,Yt(e)):f.alias=null,e.token==ab?(f.type=tf,f.u.out.domain=gn(e),$t(e,"OUT")||ta(e,"keyword OUT missing where expected"),Yt(e)):(f.type=Wd,$t(e,"IN")||ta(e,"keyword IN missing where expected"),Yt(e)),f.arg=n=null;;)if(i={},e.token!=$f&&e.token!=Zf&&e.token!=Qf||ta(e,"argument expression missing where expected"),i.code=Ln(e),i.code.type==ef&&(i.code=en(e,Nb,i.code,lf,0)),i.code.type!=lf&&ta(e,"argument expression has invalid type"),i.next=null,null==n?f.arg=i:n.next=i,n=i,e.token==$f)Yt(e);else if(e.token==Zf||e.token==Qf)break;switch(t(null!=f.arg),e.token==Zf?Yt(e):ta(e,"colon missing where expected"),f.type){case Wd:for(e.token==bf?(c=e.tree[e.image],null==c&&ta(e,e.image+" not defined"),c.type!=of&&ta(e,e.image+" not a set"),f.u.in_.set=c.link,null!=f.u.in_.set.assign&&ta(e,e.image+" needs no data"),0!=f.u.in_.set.dim&&ta(e,e.image+" must be a simple set"),Yt(e),e.token==cb?Yt(e):ta(e,"delimiter <- missing where expected")):Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):f.u.in_.set=null,f.u.in_.fld=r=null,_=0,e.token==rb?Yt(e):ta(e,"field list missing where expected");;)if(o={},e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"field name missing where expected")),o.name=e.image,Yt(e),o.next=null,null==r?f.u.in_.fld=o:r.next=o,r=o,_++,e.token==$f)Yt(e);else{if(e.token==ob)break;ta(e,"syntax error in field list")}for(null!=f.u.in_.set&&f.u.in_.set.dimen!=_&&ta(e,"there must be "+f.u.in_.set.dimen+" field"+(1==f.u.in_.set.dimen?"":"s")+" rather than "+_),Yt(e),f.u.in_.list=a=null;e.token==$f;)Yt(e),l={},e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"parameter name missing where expected")),c=e.tree[e.image],null==c&&ta(e,e.image+" not defined"),c.type!=nf&&ta(e,e.image+" not a parameter"),l.par=c.link,l.par.dim!=_&&ta(e,e.image+" must have "+_+" subscript"+(1==_?"":"s")+" rather than "+l.par.dim),null!=l.par.assign&&ta(e,e.image+" needs no data"),Yt(e),e.token==ub?(Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"field name missing where expected")),d=e.image,Yt(e)):d=l.par.name,l.name=d,l.next=null,null==a?f.u.in_.list=l:a.next=l,a=l;break;case tf:for(f.u.out.list=s=null;;)if(u={},e.token!=$f&&e.token!=Qf||ta(e,"expression missing where expected"),d=e.token==bf?e.image:"",u.code=Ln(e),e.token==ub&&(Yt(e),e.token==bf||(Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"field name missing where expected")),d=e.image,Yt(e)),""==d&&ta(e,"field name required"),u.name=d,u.next=null,null==s?f.u.out.list=u:s.next=u,s=u,e.token==$f)Yt(e);else{if(e.token==Qf)break;ta(e,"syntax error in output list")}vn(e,f.u.out.domain);break;default:t(f!=f)}return e.token!=Qf&&ta(e,"syntax error in table statement"),Yt(e),f}function Yn(e){return t($t(e,"solve")),e.flag_s&&ta(e,"at most one solve statement allowed"),e.flag_s=1,Yt(e),e.token!=Qf&&ta(e,"syntax error in solve statement"),Yt(e),null}function Jn(e){t($t(e,"check"));var n={};return n.domain=null,n.code=null,Yt(e),e.token==ab&&(n.domain=gn(e)),e.token==Zf&&Yt(e),n.code=qn(e),n.code.type!=Jd&&ta(e,"expression has invalid type"),t(0==n.code.dim),null!=n.domain&&vn(e,n.domain),e.token!=Qf&&ta(e,"syntax error in check statement"),Yt(e),n}function $n(e){function n(){o.type=Gd,o.u.code=qn(e)}var i;t($t(e,"display"));var r={};for(r.domain=null,r.list=i=null,Yt(e),e.token==ab&&(r.domain=gn(e)),e.token==Zf&&Yt(e);;){var o={u:{}};if(o.type=0,o.next=null,null==r.list?r.list=o:i.next=o,i=o,e.token==bf){var a,l;if(Yt(e),l=e.token,Jt(e),l!=$f&&l!=Qf)n();else{switch(a=e.tree[e.image],null==a&&ta(e,e.image+" not defined"),o.type=a.type,a.type){case Kd:o.u.slot=a.link;break;case of:o.u.set=a.link;break;case nf:o.u.par=a.link;break;case cf:o.u.var_=a.link,e.flag_s||ta(e,"invalid reference to variable "+o.u.var_.name+" above solve statement");break;case Rd:o.u.con=a.link,e.flag_s||ta(e,"invalid reference to "+(o.u.con.type==Rd?"constraint":"objective")+" "+o.u.con.name+" above solve statement");break;default:t(a!=a)}Yt(e)}}else n();if(e.token!=$f)break;Yt(e)}return null!=r.domain&&vn(e,r.domain),e.token!=Qf&&ta(e,"syntax error in display statement"),Yt(e),r}function Zn(e){var n,i;t($t(e,"printf"));var r={};for(r.domain=null,r.fmt=null,r.list=i=null,Yt(e),e.token==ab&&(r.domain=gn(e)),e.token==Zf&&Yt(e),r.fmt=Ln(e),r.fmt.type==ef&&(r.fmt=en(e,Nb,r.fmt,lf,0)),r.fmt.type!=lf&&ta(e,"format expression has invalid type");e.token==$f;)Yt(e),n={},n.code=null,n.next=null,null==r.list?r.list=n:i.next=n,i=n,n.code=Fn(e),n.code.type!=ef&&n.code.type!=lf&&n.code.type!=Jd&&ta(e,"only numeric, symbolic, or logical expression allowed");return null!=r.domain&&vn(e,r.domain),r.fname=null,r.app=0,e.token!=Xf&&e.token!=sb||(r.app=e.token==sb,Yt(e),r.fname=Ln(e),r.fname.type==ef&&(r.fname=en(e,Nb,r.fname,lf,0)),r.fname.type!=lf&&ta(e,"file name expression has invalid type")),e.token!=Qf&&ta(e,"syntax error in printf statement"),Yt(e),r}function Qn(e){var n,i;t($t(e,"for"));var r={};if(r.domain=null,r.list=i=null,Yt(e),e.token!=ab&&ta(e,"indexing expression missing where expected"),r.domain=gn(e),e.token==Zf&&Yt(e),e.token!=ab)r.list=ti(e,1);else{for(Yt(e);e.token!=lb;)n=ti(e,1),null==i?r.list=n:i.next=n,i=n;Yt(e)}return t(null!=r.domain),vn(e,r.domain),r}function ei(e){!e.flag_d&&$t(e,"end")||e.flag_d&&ci(e,"end")?(Yt(e),e.token==Qf?Yt(e):na(e,"no semicolon following end statement; missing semicolon inserted")):na(e,"unexpected end of file; missing end statement inserted"),e.token!=ff&&na(e,"some text detected beyond end statement; text ignored")}function ti(e,t){var n={u:{}};return n.line=e.line,n.column=e.column,n.next=null,$t(e,"set")?(t&&ta(e,"set statement not allowed here"),n.type=of,n.u.set=Hn(e)):$t(e,"param")?(t&&ta(e,"parameter statement not allowed here"),n.type=nf,n.u.par=Gn(e)):$t(e,"var")?(t&&ta(e,"variable statement not allowed here"),n.type=cf,n.u.var_=Vn(e)):$t(e,"subject")||$t(e,"subj")||e.token==zf?(t&&ta(e,"constraint statement not allowed here"),n.type=Rd,n.u.con=Xn(e)):$t(e,"minimize")||$t(e,"maximize")?(t&&ta(e,"objective statement not allowed here"),n.type=Rd,n.u.con=Kn(e)):$t(e,"table")?(t&&ta(e,"table statement not allowed here"),n.type=sf,n.u.tab=Wn(e)):$t(e,"solve")?(t&&ta(e,"solve statement not allowed here"),n.type=af,n.u.slv=Yn(e)):$t(e,"check")?(n.type=Fd,n.u.chk=Jn(e)):$t(e,"display")?(n.type=Ud,n.u.dpy=$n(e)):$t(e,"printf")?(n.type=rf,n.u.prt=Zn(e)):$t(e,"for")?(n.type=Vd,n.u.fur=Qn(e)):e.token==bf?(t&&ta(e,"constraint statement not allowed here"),n.type=Rd,n.u.con=Xn(e)):Zt(e)?ta(e,"invalid use of reserved keyword "+e.image):ta(e,"syntax error in model section"),n}function ni(e){var n,i;for(t(null==e.model),i=null;e.token!=ff&&!$t(e,"data")&&!$t(e,"end");)n=ti(e,0),null==i?e.model=n:i.next=n,i=n}function ii(e,t,n){var i,r={};if(r.sym=n,r.next=null,null==t)t=r;else{for(i=t;null!=i.next;i=i.next);i.next=r}return t}function ri(e,t){var n,i=0;for(n=t;null!=n;n=n.next)i++;return i}function oi(e,t){var n,i=0;for(n=t;null!=n;n=n.next)null==n.sym&&i++;return i}function ai(e,t){for(var n=null;t-- >0;)n=ii(e,n,null);return n}function li(e,t){for(var n;null!=t;)n=t,t=n.next}function si(e){return e.token==mf}function ui(e){return e.token==mf||e.token==pf||e.token==hf}function ci(e,t){return ui(e)&&e.image==t}function _i(e){t(si(e));var n=e.value;return Yt(e),n}function di(e){var n;return t(ui(e)),n=si(e)?Ji(e,e.value):$i(e,e.image),Yt(e),n}function fi(e,n,i){var r,o;switch(t(null!=n),e.token){case rb:o=ob;break;case nb:t(i>0),o=ib;break;default:t(e!=e)}for(0==i&&ta(e,n+" cannot be subscripted"),Yt(e),r=null;;)if(ui(e)?r=ii(e,r,di(e)):e.token==Rf?(r=ii(e,r,null),Yt(e)):ta(e,"number, symbol, or asterisk missing where expected"),e.token==$f)Yt(e);else{if(e.token==o)break;ta(e,"syntax error in slice")}if(ri(e,r)!=i)switch(o){case ob:ta(e,n+" must have "+i+" subscript"+(1==i?"":"s")+", not "+ri(e,r));break;case ib:ta(e,n+" has dimension "+i+", not "+ri(e,r));break;default:t(o!=o)}return Yt(e),r}function bi(e,n){var i,r;return t(null!=n),r=e.tree[n],null!=r&&r.type==of||ta(e,n+" not a set"),i=r.link,null==i.assign&&null==i.gadget||ta(e,n+" needs no data"),i.data=1,i}function pi(e,n,i,r){var o,a,l,s=null;for(t(null!=n),t(null!=i),t(null!=r),t(n.dimen==ri(e,r)),t(i.value.set.dim==n.dimen),oi(e,r)>0&&t(ui(e)),o=null,a=r;null!=a;a=a.next){if(null==a.sym){if(!ui(e)){var u=oi(e,a);t(null!=s),1==u?ta(e,"one item missing in data group beginning with "+er(e,s)):ta(e,u+" items missing in data group beginning with "+er(e,s))}l=di(e),null==s&&(s=l)}else l=Zi(e,a.sym);o=nr(e,o,l),null!=a.next&&e.token==$f&&Yt(e)}_r(e,i.value.set,o)}function mi(e,n,i,r,o){var a,l,s,u,c;for(t(null!=n),t(null!=i),t(null!=r),t(n.dimen==ri(e,r)),t(i.value.set.dim==n.dimen),t(2==oi(e,r)),a=null;e.token!=eb;)ui(e)||ta(e,"number, symbol, or := missing where expected"),a=ii(e,a,di(e));for(Yt(e);ui(e);)for(c=di(e),l=a;null!=l;l=l.next){var _=0;if(ci(e,"+"));else{if(ci(e,"-")){Yt(e);continue}var d=ri(e,l);1==d?ta(e,"one item missing in data group beginning with "+er(e,c)):ta(e,d+" items missing in data group beginning with "+er(e,c))}for(u=null,s=r;null!=s;s=s.next)if(null==s.sym)switch(++_){case 1:u=nr(e,u,Zi(e,o?l.sym:c));break;case 2:u=nr(e,u,Zi(e,o?c:l.sym));break;default:t(_!=_)}else u=nr(e,u,Zi(e,s.sym));t(2==_),_r(e,i.value.set,u),Yt(e)}li(e,a)}function hi(e){function n(){ta(e,"slice currently used must specify 2 asterisks, not "+oi(e,s))}function i(){ta(e,"transpose indicator (tr) incomplete")}function r(){Yt(e),ci(e,"tr")||i(),2!=oi(e,s)&&n(),Yt(e),e.token!=ib&&i(),Yt(e),e.token==Zf&&Yt(e),u=1,mi(e,o,l,s,u)}var o,a,l,s,u=0;if(t(ci(e,"set")),Yt(e),ui(e)||ta(e,"set name missing where expected"),o=bi(e,e.image),Yt(e),a=null,e.token==rb){for(0==o.dim&&ta(e,o.name+" cannot be subscripted"),Yt(e);;)if(ui(e)||ta(e,"number or symbol missing where expected"),a=nr(e,a,di(e)),e.token==$f)Yt(e);else{if(e.token==ob)break;ta(e,"syntax error in subscript list")}o.dim!=ir(e,a)&&ta(e,o.name+" must have "+o.dim+" subscript"+(1==o.dim?"":"s")+" rather than "+ir(e,a)),Yt(e)}else 0!=o.dim&&ta(e,o.name+" must be subscripted");for(null!=Cr(e,o.array,a)&&ta(e,o.name+lr(e,"[",a)+" already defined"),l=Sr(e,o.array,a),l.value.set=sr(e,o.dimen),s=ai(e,o.dimen);;)if(e.token==$f&&Yt(e),e.token==eb)Yt(e);else if(e.token==nb){var c;Yt(e),c=ci(e,"tr"),Jt(e),c?r():(li(e,s),s=fi(e,o.name,o.dimen),u=0,0==oi(e,s)&&pi(e,o,l,s))}else if(ui(e))pi(e,o,l,s);else if(e.token==Zf)2!=oi(e,s)&&n(),Yt(e),mi(e,o,l,s,u);else if(e.token==nb)r();else{if(e.token==Qf){Yt(e);break}ta(e,"syntax error in set data block")}li(e,s)}function gi(e,n){var i,r;return t(null!=n),r=e.tree[n],null!=r&&r.type==nf||ta(e,n+" not a parameter"),i=r.link,null!=i.assign&&ta(e,n+" needs no data"),i.data&&ta(e,n+" already provided with data"),i.data=1,i}function vi(e,n,i){t(null!=n),t(null!=i),null!=n.option&&ta(e,"default value for "+n.name+" already specified in model section"),t(null==n.defval),n.defval=i}function yi(e,n,i){var r;switch(t(null!=n),t(ui(e)),null!=Cr(e,n.array,i)&&ta(e,n.name+lr(e,"[",i)+" already defined"),r=Sr(e,n.array,i),n.type){case ef:case Yd:case Dd:si(e)||ta(e,n.name+" requires numeric data"),r.value.num=_i(e);break;case lf:r.value.sym=di(e);break;default:t(n!=n)}return r}function xi(e,n,i){var r,o,a,l=null;for(t(null!=n),t(n.dim==ri(e,i)),t(ui(e)),r=null,o=i;null!=o;o=o.next){if(null==o.sym){if(!ui(e)){var s=oi(e,o)+1;t(null!=l),t(s>1),ta(e,s+" items missing in data group beginning with "+er(e,l))}a=di(e),null==l&&(l=a)}else a=Zi(e,o.sym);r=nr(e,r,a),e.token==$f&&Yt(e)}ui(e)||(t(null!=l),ta(e,"one item missing in data group beginning with "+er(e,l))),yi(e,n,r)}function wi(e,n,i,r){var o,a,l,s,u;for(t(null!=n),t(n.dim==ri(e,i)),t(2==oi(e,i)),o=null;e.token!=eb;)ui(e)||ta(e,"number, symbol, or := missing where expected"),o=ii(e,o,di(e));for(Yt(e);ui(e);)for(u=di(e),a=o;null!=a;a=a.next){var c=0;if(ci(e,"."))Yt(e);else{for(s=null,l=i;null!=l;l=l.next)if(null==l.sym)switch(++c){case 1:s=nr(e,s,Zi(e,r?a.sym:u));break;case 2:s=nr(e,s,Zi(e,r?u:a.sym));break;default:t(c!=c)}else s=nr(e,s,Zi(e,l.sym));if(t(2==c),!ui(e)){var _=ri(e,a);1==_?ta(e,"one item missing in data group beginning with "+er(e,u)):ta(e,_+" items missing in data group beginning with "+er(e,u))}yi(e,n,s)}}li(e,o)}function ki(e,n){var i,r,o,a,l,s,u=null,c=0,_=null;for(ui(e)&&(Yt(e),l=e.token,Jt(e),l==Zf&&(u=bi(e,e.image),0!=u.dim&&ta(e,u.name+" must be a simple set"),null!=u.array.head&&ta(e,u.name+" already defined"),Sr(e,u.array,null).value.set=sr(e,u.dimen),_=u.name,c=u.dimen,Yt(e),t(e.token==Zf),Yt(e))),r=null;e.token!=eb;)ui(e)||ta(e,"parameter name or := missing where expected"),i=gi(e,e.image),0==i.dim&&ta(e,e.image+" not a subscripted parameter"),0!=c&&i.dim!=c&&(t(null!=_),ta(e,_+" has dimension "+c+" while "+i.name+" has dimension "+i.dim)),null!=n&&vi(e,i,Zi(e,n)),r=ii(e,r,i),_=i.name,c=i.dim,Yt(e),e.token==$f&&Yt(e);for(0==ri(e,r)&&ta(e,"at least one parameter name required"),Yt(e),e.token==$f&&Yt(e);ui(e);){var d;for(a=null,s=1;s<=c;s++)ui(e)||(d=ri(e,r)+c-s+1,t(null!=a),t(d>1),ta(e,d+" items missing in data group beginning with "+er(e,a.sym))),a=nr(e,a,di(e)),s<c&&e.token==$f&&Yt(e);for(null!=u&&_r(e,u.array.head.value.set,rr(e,a)),e.token==$f&&Yt(e),o=r;null!=o;o=o.next)ci(e,".")?Yt(e):(ui(e)||(d=ri(e,o),t(null!=a),1==d?ta(e,"one item missing in data group beginning with "+er(e,a.sym)):ta(e,d+" items missing in data group beginning with "+er(e,a.sym))),yi(e,o.sym,rr(e,a)),null!=o.next&&e.token==$f&&Yt(e));e.token==$f&&(Yt(e),ui(e)||Jt(e))}for(o=r;null!=o;o=o.next)o.sym=null;li(e,r)}function Mi(e){function n(){ta(e,o.name+" not a subscripted parameter")}function i(){ta(e,"slice currently used must specify 2 asterisks, not "+oi(e,a))}function r(){ta(e,"transpose indicator (tr) incomplete")}var o,a,l=null,s=0;if(t(ci(e,"param")),Yt(e),ci(e,"default")&&(Yt(e),ui(e)||ta(e,"default value missing where expected"),l=di(e),e.token!=Zf&&ta(e,"colon missing where expected")),e.token==Zf)return Yt(e),e.token==$f&&Yt(e),ki(e,l),e.token!=Qf&&ta(e,"symbol, number, or semicolon missing where expected"),void Yt(e);for(ui(e)||ta(e,"parameter name missing where expected"),o=gi(e,e.image),Yt(e),ci(e,"default")&&(Yt(e),ui(e)||ta(e,"default value missing where expected"),l=di(e),vi(e,o,l)),a=ai(e,o.dim);;)if(e.token==$f&&Yt(e),e.token==eb)Yt(e);else if(e.token==rb)li(e,a),a=fi(e,o.name,o.dim),s=0;else if(ui(e))xi(e,o,a);else if(e.token==Zf)0==o.dim&&n(),2!=oi(e,a)&&i(),Yt(e),wi(e,o,a,s);else if(e.token==nb)Yt(e),ci(e,"tr")||r(),0==o.dim&&n(),2!=oi(e,a)&&i(),Yt(e),e.token!=ib&&r(),Yt(e),e.token==Zf&&Yt(e),s=1,wi(e,o,a,s);else{if(e.token==Qf){Yt(e);break}ta(e,"syntax error in parameter data block")}li(e,a)}function Ai(e){for(;e.token!=ff&&!ci(e,"end");)ci(e,"set")?hi(e):ci(e,"param")?Mi(e):ta(e,"syntax error in data section")}function Ei(e,t,n){return(t>0&&n>0&&t>.999*Bl-n||t<0&&n<0&&t<-.999*Bl-n)&&ta(e,t+" + "+n+"; floating-point overflow"),t+n}function Pi(e,t,n){return(t>0&&n<0&&t>.999*Bl+n||t<0&&n>0&&t<-.999*Bl+n)&&ta(e,t+" - "+n+"; floating-point overflow"),t-n}function ji(e,t,n){return t<n?0:(t>0&&n<0&&t>.999*Bl+n&&ta(e,t+" less "+n+"; floating-point overflow"),t-n)}function Oi(e,t,n){return Math.abs(n)>1&&Math.abs(t)>.999*Bl/Math.abs(n)&&ta(e,t+" * "+n+"; floating-point overflow"),t*n}function Ci(e,t,n){return Math.abs(n)<ql&&ta(e,t+" / "+n+"; floating-point zero divide"),Math.abs(n)<1&&Math.abs(t)>.999*Bl*Math.abs(n)&&ta(e,t+" / "+n+"; floating-point overflow"),t/n}function Si(e,t,n){return Math.abs(n)<ql&&ta(e,t+" div "+n+"; floating-point zero divide"),Math.abs(n)<1&&Math.abs(t)>.999*Bl*Math.abs(n)&&ta(e,t+" div "+n+"; floating-point overflow"),t/=n,t>0?Math.floor(t):t<0?Math.ceil(t):0}function zi(e,t,n){var i;return 0==t?i=0:0==n?i=t:0!=(i=Math.abs(t)%Math.abs(n))&&(t<0&&(i=-i),(t>0&&n<0||t<0&&n>0)&&(i+=n)),i}function Ni(e,t,n){var i;return(0==t&&n<=0||t<0&&n!=Math.floor(n))&&ta(e,t+" ** "+n+"; result undefined"),0==t?i=Math.pow(t,n):((Math.abs(t)>1&&n>1&&+Math.log(Math.abs(t))>.999*Math.log(Bl)/n||Math.abs(t)<1&&n<-1&&+Math.log(Math.abs(t))<.999*Math.log(Bl)/n)&&ta(e,t+" ** "+n+"; floating-point overflow"),i=Math.abs(t)>1&&n<-1&&-Math.log(Math.abs(t))<.999*Math.log(Bl)/n||Math.abs(t)<1&&n>1&&-Math.log(Math.abs(t))>.999*Math.log(Bl)/n?0:Math.pow(t,n)),i}function Li(e,t){return t>.999*Math.log(Bl)&&ta(e,"exp("+t+"); floating-point overflow"),Math.exp(t)}function Ti(e,t){return t<=0&&ta(e,"log("+t+"); non-positive argument"),Math.log(t)}function Ii(e,t){return t<=0&&ta(e,"log10("+t+"); non-positive argument"),Math.log(t)/Math.LN10}function Di(e,t){return t<0&&ta(e,"sqrt("+t+"); negative argument"),Math.sqrt(t)}function Fi(e,t){return-1e6<=t&&t<=1e6||ta(e,"sin("+t+"); argument too large"),Math.sin(t)}function Ri(e,t){return-1e6<=t&&t<=1e6||ta(e,"cos("+t+"); argument too large"),Math.cos(t)}function Ui(e,t){return Math.atan(t)}function Bi(e,t,n){return Math.atan2(t,n)}function qi(e,t,n){var i;return n!=Math.floor(n)&&ta(e,"round("+t+", "+n+"); non-integer second argument"),n<=Hl+2&&(i=Math.pow(10,n),Math.abs(t)<.999*Bl/i&&0!=(t=Math.floor(t*i+.5))&&(t/=i)),t}function Hi(e,t,n){var i;return n!=Math.floor(n)&&ta(e,"trunc("+t+", "+n+"); non-integer second argument"),n<=Hl+2&&(i=Math.pow(10,n),Math.abs(t)<.999*Bl/i&&0!=(t=t>=0?Math.floor(t*i):Math.ceil(t*i))&&(t/=i)),t}function Gi(e){return wl(e.rand,16777216)}function Vi(e){return xl(e.rand)/2147483648}function Xi(e,t,n){var i;return t>=n&&ta(e,"Uniform("+t+", "+n+"); invalid range"),i=Vi(e),i=Ei(e,t*(1-i),n*i)}function Ki(e){var t,n,i;do{t=2*Vi(e)-1,n=2*Vi(e)-1,i=t*t+n*n}while(i>1||0==i);return n*Math.sqrt(-2*Math.log(i)/i)}function Wi(e,t,n){return Ei(e,t,Oi(e,n,Ki(e)))}function Yi(e,t,n){return t==n?0:t>n?1:-1}function Ji(e,t){var n={};return n.num=t,n.str=null,n}function $i(e,n){t(null!=n);var i={};return i.num=0,i.str=n,i}function Zi(e,n){t(null!=n);var i={};return null==n.str?(i.num=n.num,i.str=null):(i.num=0,i.str=n.str),i}function Qi(e,n,i){return t(null!=n),t(null!=i),null==n.str&&null==i.str?n.num<i.num?-1:n.num>i.num?1:0:null==n.str?-1:null==i.str?1:Yi(e,n.str,i.str)}function er(e,n){function i(e){l<255&&(r+=e,l++)}t(null!=n);var r;if(null==n.str)r=String(n.num);else{var o,a,l,s=n.str;if(f(s[0])||"_"==s[0]){for(o=!1,a=1;a<s.length;a++)if(!(b(s[a])||m("+-._",s[a])>=0)){o=!0;break}}else o=!0;for(r="",l=0,o&&i("'"),a=0;a<s.length;a++)o&&"'"==s[a]&&i("'"),i(s[a]);o&&i("'"),255==l&&(r=r.slice(0,252)+"...")}return t(r.length<=255),r}function tr(e,t,n){var i,r;return i=null==t.str?String(t.num):t.str,r=null==n.str?String(n.num):n.str,$i(e,i+r)}function nr(e,n,i){var r;t(null!=i);var o={};if(o.sym=i,o.next=null,null==n)n=o;else{for(r=n;null!=r.next;r=r.next);r.next=o}return n}function ir(e,t){for(var n=0,i=t;null!=i;i=i.next)n++;return n}function rr(e,n){var i,r;if(null==n)i=null;else{for(i=r={};null!=n;n=n.next)t(null!=n.sym),r.sym=Zi(e,n.sym),null!=n.next&&(r=r.next={});r.next=null}return i}function or(e,n,i){var r,o,a;for(r=n,o=i;null!=r;r=r.next,o=o.next)if(t(null!=o),t(null!=r.sym),t(null!=o.sym),0!=(a=Qi(e,r.sym,o.sym)))return a;return t(null==o),0}function ar(e,n,i){for(var r=null,o=1,a=n;o<=i;o++,a=a.next)t(null!=a),r=nr(e,r,Zi(e,a.sym));return r}function lr(e,n,i){function r(e){l<255&&(s+=e),l++}var o,a,l=0,s="",u="",c=ir(e,i);for("["==n&&c>0&&r("["),"("==n&&c>1&&r("("),o=i;null!=o;o=o.next)for(o!=i&&r(","),t(null!=o.sym),u=er(e,o.sym),t(u.length<=255),a=0;a<u.length;a++)r(u[a]);return"["==n&&c>0&&r("]"),"("==n&&c>1&&r(")"),255==l&&(s=s.slice(0,252)+"..."),t(s.length<=255),s}function sr(e,n){return t(n>0),jr(e,Qd,n)}function ur(e,n,i){return t(null!=n),t(n.type==Qd),t(n.dim==ir(e,i)),Cr(e,n,i)}function cr(e,n,i){var r;return t(null!=n),t(n.type==Qd),t(n.dim==ir(e,i)),r=Sr(e,n,i),r.value.none=null,r}function _r(e,t,n){return null!=ur(e,t,n)&&ta(e,"duplicate tuple "+lr(e,"(",n)+" detected"),cr(e,t,n)}function dr(e,n){var i,r;for(t(null!=n),t(n.type==Qd),t(n.dim>0),i=sr(e,n.dim),r=n.head;null!=r;r=r.next)cr(e,i,rr(e,r.tuple));return i}function fr(e,n,i,r){var o;return 0==r&&ta(e,n+" .. "+i+" by "+r+"; zero stride not allowed"),o=i>0&&n<0&&i>.999*Bl+n?+Bl:i<0&&n>0&&i<-.999*Bl+n?-Bl:i-n,Math.abs(r)<1&&Math.abs(o)>.999*Bl*Math.abs(r)?o=o>0&&r>0||o<0&&r<0?+Bl:0:(o=Math.floor(o/r)+1)<0&&(o=0),t(o>=0),o>Gl-1&&ta(e,n+" .. "+i+" by "+r+"; set too large"),o+.5|0}function br(e,n,i,r,o){return t(1<=o&&o<=fr(e,n,i,r)),n+(o-1)*r}function pr(e,t,n,i){for(var r=sr(e,1),o=fr(e,t,n,i),a=1;a<=o;a++)cr(e,r,nr(e,null,Ji(e,br(e,t,n,i,a))));return r}function mr(e,n,i){t(null!=n),t(n.type==Qd),t(n.dim>0),t(null!=i),t(i.type==Qd),t(i.dim>0),t(n.dim==i.dim);for(var r=i.head;null!=r;r=r.next)null==ur(e,n,r.tuple)&&cr(e,n,rr(e,r.tuple));return n}function hr(e,n,i){t(null!=n),t(n.type==Qd),t(n.dim>0),t(null!=i),t(i.type==Qd),t(i.dim>0),t(n.dim==i.dim);for(var r=sr(e,n.dim),o=n.head;null!=o;o=o.next)null==ur(e,i,o.tuple)&&cr(e,r,rr(e,o.tuple));return r}function gr(e,n,i){var r;t(null!=n),t(n.type==Qd),t(n.dim>0),t(null!=i),t(i.type==Qd),t(i.dim>0),t(n.dim==i.dim);var o=sr(e,n.dim);for(r=n.head;null!=r;r=r.next)null==ur(e,i,r.tuple)&&cr(e,o,rr(e,r.tuple));for(r=i.head;null!=r;r=r.next)null==ur(e,n,r.tuple)&&cr(e,o,rr(e,r.tuple));return o}function vr(e,n,i){t(null!=n),t(n.type==Qd),t(n.dim>0),t(null!=i),t(i.type==Qd),t(i.dim>0),t(n.dim==i.dim);for(var r=sr(e,n.dim),o=n.head;null!=o;o=o.next)null!=ur(e,i,o.tuple)&&cr(e,r,rr(e,o.tuple));return r}function yr(e,n,i){var r,o,a,l;t(null!=n),t(n.type==Qd),t(n.dim>0),t(null!=i),t(i.type==Qd),t(i.dim>0);var s=sr(e,n.dim+i.dim);for(r=n.head;null!=r;r=r.next)for(o=i.head;null!=o;o=o.next){for(a=rr(e,r.tuple),l=o.tuple;null!=l;l=l.next)a=nr(e,a,Zi(e,l.sym));cr(e,s,a)}return s}function xr(e,t){var n;return 0==t?n=null:(n={},n.coef=t,n.var_=null,n.next=null),n}function wr(e,n){t(null!=n);var i={};return i.coef=1,i.var_=n,i.next=null,i}function kr(e,t){var n,i;if(null==t)n=null;else{for(n=i={};null!=t;t=t.next)i.coef=t.coef,i.var_=t.var_,null!=t.next&&(i=i.next={});i.next=null}return n}function Mr(e,t,n,i,r){var o,a,l=null,s=0;for(o=n;null!=o;o=o.next)null==o.var_?s=Ei(e,s,Oi(e,t,o.coef)):o.var_.temp=Ei(e,o.var_.temp,Oi(e,t,o.coef));for(o=r;null!=o;o=o.next)null==o.var_?s=Ei(e,s,Oi(e,i,o.coef)):o.var_.temp=Ei(e,o.var_.temp,Oi(e,i,o.coef));for(o=n;null!=o;o=o.next)null!=o.var_&&0!=o.var_.temp&&(a={},a.coef=o.var_.temp,a.var_=o.var_,a.next=l,l=a,o.var_.temp=0);for(o=r;null!=o;o=o.next)null!=o.var_&&0!=o.var_.temp&&(a={},a.coef=o.var_.temp,a.var_=o.var_,a.next=l,l=a,o.var_.temp=0);return 0!=s&&(a={},a.coef=s,a.var_=null,a.next=l,l=a),l}function Ar(e,t,n){for(var i,r=null,o=0;null!=t;)i=t,t=t.next,null==i.var_?o=Ei(e,o,i.coef):(i.next=r,r=i);return n(o),r}function Er(e,t){var n,i,r=0;for(n=t;null!=n;n=n.next)null==n.var_?r=Ei(e,r,n.coef):n.var_.temp=Ei(e,n.var_.temp,n.coef);for(i=t,t=null,n=i;null!=n;n=i)i=n.next,null==n.var_&&0!=r?(n.coef=r,r=0,n.next=t,t=n):null!=n.var_&&0!=n.var_.temp&&(n.coef=n.var_.temp,n.var_.temp=0,n.next=t,t=n);return t}function Pr(e,n,i){switch(t(null!=i),n){case Qd:i.none=null;break;case ef:i.num=0;break;case lf:i.sym=null;break;case Jd:i.bit=0;break;case uf:i.tuple=null;break;case qd:i.set=null;break;case Hd:i.var_=null;break;case Xd:i.form=null;break;case Bd:i.con=null;break;default:t(n!=n)}}function jr(e,n,i){t(n==Qd||n==ef||n==lf||n==qd||n==Hd||n==Bd),t(i>=0);var r={};return r.type=n,r.dim=i,r.size=0,r.head=null,r.tail=null,r.tree=!1,r.prev=null,r.next=e.a_list,null!=r.next&&(r.next.prev=r),e.a_list=r,r}function Or(e,t,n){return or(e,t,n)}function Cr(e,n,i){var r;if(t(null!=n),t(ir(e,i)==n.dim),n.size>30&&!n.tree)for(n.tree=P(Or,e),r=n.head;null!=r;r=r.next)O(j(n.tree,r.tuple),r);if(r=null,n.tree){var o=C(n.tree,i);r=null==o?null:S(o)}else for(r=n.head;null!=r&&0!=or(e,r.tuple,i);r=r.next);return r}function Sr(e,n,i){t(null!=n),t(ir(e,i)==n.dim);var r={};return r.tuple=i,r.next=null,r.value={},n.size++,null==n.head?n.head=r:n.tail.next=r,n.tail=r,null!=n.tree&&O(j(n.tree,r.tuple),r),r}function zr(e,n,i){var r,o;if(t(null!=n),t(null!=i),null!=n.value){if(0==Qi(e,n.value,i))return;n.value=null}for(r=n.list;null!=r;r=r.arg.index.next)for(t(r.op==vb),o=r;null!=o;o=o.up)o.valid&&(o.valid=0,Pr(e,o.type,o.value));n.value=Zi(e,i)}function Nr(e,n){var i,r;if(null!=n.backup)for(i=n.list,r=n.backup;null!=i;i=i.next,r=r.next)t(null!=r),t(null!=r.sym),zr(e,i,r.sym)}function Lr(e,n,i,r,o){var a,l=0;return t(null!=n.code),wo(e,n.code,i)?(a=n.backup,n.backup=i,Nr(e,n),o(e,r),n.backup=a,Nr(e,n),l):l=1}function Tr(e,n){if(null!=n.block){var i,r,o=null,a=null;for(i=n.block,n.block=i.next,r=i.list;null!=r;r=r.next)null==o?o=a={}:a=a.next={},null==r.code?(t(null!=n.tuple),a.sym=n.tuple.sym,t(null!=a.sym),n.tuple=n.tuple.next):a.sym=po(e,r.code);for(a.next=null,Lr(e,i,o,n,Tr)&&(n.failure=1),r=i.list;null!=r;r=r.next)t(null!=o),a=o,o=o.next}else t(null==n.tuple),null==n.domain.code||ho(e,n.domain.code)?n.func(e,n.info):n.failure=2}function Ir(e,n,i,r,o){var a={};return null==n?(t(null==i),o(e,r),a.failure=0):(t(null!=i),a.domain=n,a.block=n.list,a.tuple=i,a.info=r,a.func=o,a.failure=0,Tr(e,a)),a.failure}function Dr(e,n){if(null!=n.block){var i,r,o;for(i=n.block,n.block=i.next,o=null,r=i.list;null!=r;r=r.next)null!=r.code&&(o=nr(e,o,po(e,r.code)));if(t(null!=i.code),i.code.op==Lp){var a,l,s,u,c,_;for(u=bo(e,i.code.arg.arg.x),c=bo(e,i.code.arg.arg.y),_=null==i.code.arg.arg.z?1:bo(e,i.code.arg.arg.z),l=fr(e,u,c,_),a=nr(e,null,Ji(e,0)),t(null==o),s=1;s<=l&&n.looping;s++)a.sym.num=br(e,u,c,_,s),Lr(e,i,a,n,Dr)}else{var d,f,b,p;for(d=yo(e,i.code),f=d.head;null!=f&&n.looping;f=f.next){b=f.tuple,p=o;var m=!1;for(r=i.list;null!=r;r=r.next){if(t(null!=b),null!=r.code){if(t(null!=p),0!=Qi(e,b.sym,p.sym)){m=!0;break}p=p.next}b=b.next}m||(t(null==b),t(null==p),Lr(e,i,f.tuple,n,Dr))}}n.block=i}else(null==n.domain.code||ho(e,n.domain.code))&&(n.looping=!n.func(e,n.info))}function Fr(e,t,n,i){var r={};null==t?i(e,n):(r.domain=t,r.block=t.list,r.looping=1,r.info=n,r.func=i,Dr(e,r))}function Rr(e,n,i){t(null!=n),t(null!=i),ta(e,n+lr(e,"[",i)+" out of domain")}function Ur(e,n){var i=null;if(null!=n)for(var r=n.list;null!=r;r=r.next)for(var o=r.list;null!=o;o=o.next)null==o.code&&(t(null!=o.value),i=nr(e,i,Zi(e,o.value)));return i}function Br(e,n,i,r){for(var o=n.within,a=1;null!=o;o=o.next,a++){t(null!=o.code);for(var l=r.head;null!=l;l=l.next)if(!wo(e,o.code,l.tuple)){var s=lr(e,"(",l.tuple);t(s.length<255),ta(e,n.name+lr(e,"[",i)+" contains "+s+" which not within specified set; see ("+a+")")}}}function qr(e,t,n){function i(){Br(e,t,n,r),o=Sr(e,t.array,rr(e,n)),o.value.set=r}var r,o=Cr(e,t.array,n);return null!=o?r=o.value.set:null!=t.assign?(r=yo(e,t.assign),i()):null!=t.option?(r=yo(e,t.option),i()):ta(e,"no value for "+t.name+lr(e,"[",n)),r}function Hr(e,t){null!=t.memb?Br(e,t.set,t.memb.tuple,t.memb.value.set):t.refer=qr(e,t.set,t.tuple)}function Gr(e,n){var i,r,o,a,l,s=n.gadget,u=new Array(20);for(Jl("Generating "+n.name+"..."),Kr(e,s.set),t(null!=s.set.array),t(null!=s.set.array.head),t(s.set.array.head==s.set.array.tail),i=s.set.array.head.value.set,t(i.type==Qd),t(i.dim==s.set.dimen),r=i.head;null!=r;r=r.next){for(a=rr(e,r.tuple),l=0;l<s.set.dimen;l++)u[l]=null;for(l=0;null!=a;a=a.next)u[s.ind[l++]-1]=a;for(t(l==s.set.dimen),l=0;l<s.set.dimen;l++)t(null!=u[l]),u[l].next=u[l+1];0==n.dim?a=null:(a=u[0],u[n.dim-1].next=null),o=Cr(e,n.array,a),null==o&&(o=Sr(e,n.array,a),o.value.set=sr(e,n.dimen)),a=u[n.dim],t(n.dim+n.dimen==s.set.dimen),u[s.set.dimen-1].next=null,cr(e,o.value.set,a)}n.data=1}function Vr(e,n,i){var r={};if(t(n.dim==ir(e,i)),r.set=n,r.tuple=i,null!=n.gadget&&0==n.data&&Gr(e,n),1==n.data){var o=n.array.tail;for(n.data=2,r.memb=n.array.head;null!=r.memb&&(Ir(e,n.domain,r.memb.tuple,r,Hr)&&Rr(e,n.name,r.memb.tuple),r.memb!=o);r.memb=r.memb.next);}return r.memb=null,Ir(e,r.set.domain,r.tuple,r,Hr)&&Rr(e,n.name,r.tuple),r.refer}function Xr(e,t){return Vr(e,t,Ur(e,t.domain)),0}function Kr(e,t){Fr(e,t.domain,t,Xr)}function Wr(e,n,i,r){function o(t){ta(e,n.name+lr(e,"[",i)+" = "+r+" not "+t+" "+s+"; see ("+l+")")}var a,l;switch(n.type){case ef:break;case Yd:r!=Math.floor(r)&&ta(e,n.name+lr(e,"[",i)+" = "+r+" not integer");break;case Dd:0!=r&&1!=r&&ta(e,n.name+lr(e,"[",i)+" = "+r+" not binary");break;default:t(n!=n)}for(a=n.cond,l=1;null!=a;a=a.next,l++){var s;switch(t(null!=a.code),s=bo(e,a.code),a.rho){case bp:r<s||o("<");break;case pp:r<=s||o("<=");break;case mp:r!=s&&o("=");break;case hp:r>=s||o(">=");break;case gp:r>s||o(">");break;case vp:r==s&&o("<>");break;default:t(a!=a)}}l=1;for(var u=n.in_;null!=u;u=u.next,l++){t(null!=u.code),t(1==u.code.dim);var c=nr(e,null,Ji(e,r));wo(e,u.code,c)||ta(e,n.name+lr(e,"[",i)+" = "+r+" not in specified set; see ("+l+")")}}function Yr(e,t,n){function i(i){return Wr(e,t,n,i),r=Sr(e,t.array,rr(e,n)),r.value.num=i,i}var r=Cr(e,t.array,n);return null!=r?r.value.num:null!=t.assign?i(bo(e,t.assign)):null!=t.option?i(bo(e,t.option)):null!=t.defval?(null!=t.defval.str&&ta(e,"cannot convert "+er(e,t.defval)+" to floating-point number"),i(t.defval.num)):ta(e,"no value for "+t.name+lr(e,"[",n))}function Jr(e,t){null!=t.memb?Wr(e,t.par,t.memb.tuple,t.memb.value.num):t.value=Yr(e,t.par,t.tuple)}function $r(e,n,i){var r={};if(t(n.type==ef||n.type==Yd||n.type==Dd),t(n.dim==ir(e,i)),r.par=n,r.tuple=i,1==n.data){var o=n.array.tail;for(n.data=2,r.memb=n.array.head;null!=r.memb&&(Ir(e,n.domain,r.memb.tuple,r,Jr)&&Rr(e,n.name,r.memb.tuple),r.memb!=o);r.memb=r.memb.next);}return r.memb=null,Ir(e,r.par.domain,r.tuple,r,Jr)&&Rr(e,n.name,r.tuple),r.value}function Zr(e,n,i,r){for(var o,a=1,l=n.cond;null!=l;l=l.next,a++){var s;t(null!=l.code);var u=po(e,l.code);switch(l.rho){case bp:Qi(e,r,u)<0||(s=er(e,u),t(s.length<=255),ta(e,n.name+lr(e,"[",i)+" = "+er(e,r)+" not < "+s));break;case pp:Qi(e,r,u)<=0||(s=er(e,u),t(s.length<=255),ta(e,n.name+lr(e,"[",i)+" = "+er(e,r)+" not <= "+s));break;case mp:0!=Qi(e,r,u)&&(s=er(e,u),t(s.length<=255),ta(e,n.name+lr(e,"[",i)+" = "+er(e,r)+" not = "+s));break;case hp:Qi(e,r,u)>=0||(s=er(e,u),t(s.length<=255),ta(e,n.name+lr(e,"[",i)+" = "+er(e,r)+" not >= "+s));break;case gp:Qi(e,r,u)>0||(s=er(e,u),t(s.length<=255),ta(e,n.name+lr(e,"[",i)+" = "+er(e,r)+" not > "+s));break;case vp:0==Qi(e,r,u)&&(s=er(e,u),t(s.length<=255),ta(e,n.name+lr(e,"[",i)+" <> "+er(e,r)+" not > "+s));break;default:t(l!=l)}}for(a=1,o=n.in_;null!=o;o=o.next,a++){t(null!=o.code),t(1==o.code.dim);var c=nr(e,null,Zi(e,r));wo(e,o.code,c)||ta(e,n.name,lr(e,"[",i)+" = "+er(e,r)+" not in specified set; see ("+a+")")}}function Qr(e,t,n){function i(i){return Zr(e,t,n,i),r=Sr(e,t.array,rr(e,n)),r.value.sym=Zi(e,i),i}var r=Cr(e,t.array,n);return null!=r?Zi(e,r.value.sym):null!=t.assign?i(po(e,t.assign)):null!=t.option?i(po(e,t.option)):null!=t.defval?Zi(e,t.defval):ta(e,"no value for "+t.name+lr(e,"[",n))}function eo(e,t){null!=t.memb?Zr(e,t.par,t.memb.tuple,t.memb.value.sym):t.value=Qr(e,t.par,t.tuple)}function to(e,n,i){var r={};if(t(n.type==lf),t(n.dim==ir(e,i)),r.par=n,r.tuple=i,1==n.data){var o=n.array.tail;for(n.data=2,r.memb=n.array.head;null!=r.memb&&(Ir(e,n.domain,r.memb.tuple,r,eo)&&Rr(e,n.name,r.memb.tuple),r.memb!=o);r.memb=r.memb.next);}return r.memb=null,Ir(e,r.par.domain,r.tuple,r,eo)&&Rr(e,n.name,r.tuple),r.value}function no(e,n){var i=Ur(e,n.domain);switch(n.type){case ef:case Yd:case Dd:$r(e,n,i);break;case lf:to(e,n,i);break;default:t(n!=n)}return 0}function io(e,t){Fr(e,t.domain,t,no)}function ro(e,t,n){var i,r=Cr(e,t.array,n);return null!=r?i=r.value.var_:(r=Sr(e,t.array,rr(e,n)),i=r.value.var_={},i.j=0,i.var_=t,i.memb=r,null==t.lbnd?i.lbnd=0:i.lbnd=bo(e,t.lbnd),null==t.ubnd?i.ubnd=0:t.ubnd==t.lbnd?i.ubnd=i.lbnd:i.ubnd=bo(e,t.ubnd),i.temp=0,i.stat=0,i.prim=i.dual=0),i}function oo(e,t){t.refer=ro(e,t.var_,t.tuple)}function ao(e,n,i){var r={};return t(n.dim==ir(e,i)),r.var_=n,r.tuple=i,Ir(e,r.var_.domain,r.tuple,r,oo)&&Rr(e,n.name,r.tuple),r.refer}function lo(e,n,i){var r,o=null,a=Cr(e,n.array,i);if(null!=a)r=a.value.con;else{if(a=Sr(e,n.array,rr(e,i)),r=a.value.con={},r.i=0,r.con=n,r.memb=a,t(null!=n.code),r.form=Mo(e,n.code),null==n.lbnd&&null==n.ubnd)t(n.type==Zd||n.type==$d),r.form=Ar(e,r.form,function(e){o=e}),r.lbnd=r.ubnd=-o;else if(null!=n.lbnd&&null==n.ubnd)t(n.type==Rd),r.form=Mr(e,1,r.form,-1,Mo(e,n.lbnd)),r.form=Ar(e,r.form,function(e){o=e}),r.lbnd=-o,r.ubnd=0;else if(null==n.lbnd&&null!=n.ubnd)t(n.type==Rd),r.form=Mr(e,1,r.form,-1,Mo(e,n.ubnd)),r.form=Ar(e,r.form,function(e){o=e}),r.lbnd=0,r.ubnd=-o;else if(n.lbnd==n.ubnd)t(n.type==Rd),r.form=Mr(e,1,r.form,-1,Mo(e,n.lbnd)),r.form=Ar(e,r.form,function(e){o=e}),r.lbnd=r.ubnd=-o;else{var l=null,s=null;t(n.type==Rd),r.form=Ar(e,r.form,function(e){o=e}),t(null==Ar(e,Mo(e,n.lbnd),function(e){l=e})),t(null==Ar(e,Mo(e,n.ubnd),function(e){s=e})),r.lbnd=Pi(e,l,o),r.ubnd=Pi(e,s,o)}r.stat=0,r.prim=r.dual=0}return r}function so(e,t){t.refer=lo(e,t.con,t.tuple)}function uo(e,n,i){var r={};return t(n.dim==ir(e,i)),r.con=n,r.tuple=i,Ir(e,r.con.domain,r.tuple,r,so)&&Rr(e,n.name,r.tuple),r.refer}function co(e,t){return uo(e,t,Ur(e,t.domain)),0}function _o(e,t){Fr(e,t.domain,t,co)}function fo(e,n){var i=bo(e,n.code.arg.loop.x);switch(n.code.op){case Rp:n.value=Ei(e,n.value,i);break;case Up:n.value=Oi(e,n.value,i);break;case Bp:n.value>i&&(n.value=i);break;case qp:n.value<i&&(n.value=i);break;default:t(n!=n)}return 0}function bo(e,n){var i,r,o,a,l,s,u;if(t(null!=n),t(n.type==ef),t(0==n.dim),n.vflag&&n.valid&&(n.valid=0,Pr(e,n.type,n.value)),n.valid)return n.value.num;switch(n.op){case hb:i=n.arg.num;break;case yb:for(r=null,o=n.arg.par.list;null!=o;o=o.next)r=nr(e,r,po(e,o.x));i=$r(e,n.arg.par.par,r);break;case kb:var c;for(r=null,o=n.arg.var_.list;null!=o;o=o.next)r=nr(e,r,po(e,o.x));switch(c=ao(e,n.arg.var_.var_,r),n.arg.var_.suff){case db:i=null==c.var_.lbnd?-Bl:c.lbnd;break;case fb:i=null==c.var_.ubnd?+Bl:c.ubnd;break;case bb:i=c.stat;break;case pb:i=c.prim;break;case mb:i=c.dual;break;default:t(n!=n)}break;case Mb:var _;for(r=null,o=n.arg.con.list;null!=o;o=o.next)r=nr(e,r,po(e,o.x));switch(_=uo(e,n.arg.con.con,r),n.arg.con.suff){case db:i=null==_.con.lbnd?-Bl:_.lbnd;break;case fb:i=null==_.con.ubnd?+Bl:_.ubnd;break;case bb:i=_.stat;break;case pb:i=_.prim;break;case mb:i=_.dual;break;default:t(n!=n)}break;case jb:i=Gi(e);break;case Ob:i=Vi(e);break;case Cb:i=Ki(e);break;case Sb:i=ia(e);break;case zb:a=po(e,n.arg.arg.x),null==a.str?i=a.num:Xe(a.str,function(e){i=e})&&ta(e,"cannot convert "+er(e,a)+" to floating-point number");break;case Db:i=+bo(e,n.arg.arg.x);break;case Fb:i=-bo(e,n.arg.arg.x);break;case Ub:i=Math.abs(bo(e,n.arg.arg.x));break;case Bb:i=Math.ceil(bo(e,n.arg.arg.x));break;case qb:i=Math.floor(bo(e,n.arg.arg.x));break;case Hb:i=Li(e,bo(e,n.arg.arg.x));break;case Gb:i=Ti(e,bo(e,n.arg.arg.x));break;case Vb:i=Ii(e,bo(e,n.arg.arg.x));break;case Xb:i=Di(e,bo(e,n.arg.arg.x));break;case Kb:i=Fi(e,bo(e,n.arg.arg.x));break;case Wb:i=Ri(e,bo(e,n.arg.arg.x));break;case Yb:i=Ui(e,bo(e,n.arg.arg.x));break;case sp:i=Bi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case Jb:i=qi(e,bo(e,n.arg.arg.x),0);break;case up:i=qi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case $b:i=Hi(e,bo(e,n.arg.arg.x),0);break;case cp:i=Hi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case ep:i=Ei(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case tp:i=Pi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case np:i=ji(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case ip:i=Oi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case rp:i=Ci(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case op:i=Si(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case ap:i=zi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case lp:i=Ni(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case _p:i=Xi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case dp:i=Wi(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y));break;case Zb:var d=yo(e,n.arg.arg.x);i=d.size;break;case Qb:a=po(e,n.arg.arg.x),l=null==a.str?String(a.num):a.str,i=l.length;break;case zp:var f;a=po(e,n.arg.arg.x),l=null==a.str?String(a.num):a.str,a=po(e,n.arg.arg.y),f=null==a.str?String(a.num):a.str,i=aa(e,l,f);break;case Tp:i=ho(e,n.arg.arg.x)?bo(e,n.arg.arg.y):null==n.arg.arg.z?0:bo(e,n.arg.arg.z);break;case Dp:for(i=+Bl,o=n.arg.list;null!=o;o=o.next)s=bo(e,o.x),i>s&&(i=s);break;case Fp:for(i=-Bl,o=n.arg.list;null!=o;o=o.next)s=bo(e,o.x),i<s&&(i=s);break;case Rp:u={},u.code=n,u.value=0,Fr(e,n.arg.loop.domain,u,fo),i=u.value;break;case Up:u={},u.code=n,u.value=1,Fr(e,n.arg.loop.domain,u,fo),i=u.value;break;case Bp:u={},u.code=n,u.value=+Bl,Fr(e,n.arg.loop.domain,u,fo),u.value==+Bl&&ta(e,"min{} over empty set; result undefined"),i=u.value;break;case qp:u={},u.code=n,u.value=-Bl,Fr(e,n.arg.loop.domain,u,fo),u.value==-Bl&&ta(e,"max{} over empty set; result undefined"),i=u.value;break;default:t(n!=n)}return t(!n.valid),n.valid=1,n.value.num=i,i}function po(e,n){var i,r;if(t(null!=n),t(n.type==lf),t(0==n.dim),n.vflag&&n.valid&&(n.valid=0,Pr(e,n.type,n.value)),n.valid)return Zi(e,n.value.sym);switch(n.op){case gb:i=$i(e,n.arg.str);break;case vb:t(null!=n.arg.index.slot.value),i=Zi(e,n.arg.index.slot.value);break;case xb:var o,a;for(o=null,a=n.arg.par.list;null!=a;a=a.next)o=nr(e,o,po(e,a.x));i=to(e,n.arg.par.par,o);break;case Nb:i=Ji(e,bo(e,n.arg.arg.x));break;case fp:i=tr(e,po(e,n.arg.arg.x),po(e,n.arg.arg.y));break;case Tp:i=ho(e,n.arg.arg.x)?po(e,n.arg.arg.y):null==n.arg.arg.z?Ji(e,0):po(e,n.arg.arg.z);break;case Sp:case Ip:var l,s;i=po(e,n.arg.arg.x),r=null==i.str?String(i.num):i.str,n.op==Sp?(l=bo(e,n.arg.arg.y),l!=Math.floor(l)&&ta(e,"substr('...', "+l+"); non-integer second argument"),(l<1||l>r.length+1)&&ta(e,"substr('...', "+l+"); substring out of range")):(l=bo(e,n.arg.arg.y),s=bo(e,n.arg.arg.z),l==Math.floor(l)&&s==Math.floor(s)||ta(e,"substr('...', "+l+", "+s+"); non-integer second and/or third argument"),(l<1||s<0||l+s>r.length+1)&&ta(e,"substr('...', "+l+", "+s+"); substring out of range")),i=$i(e,r.slice(l-1,l+s-1));break;case Np:var u,c,_;u=bo(e,n.arg.arg.x),c=po(e,n.arg.arg.y),_=null==c.str?String(c.num):c.str,r=ca(e,u,_),i=$i(e,r);break;default:t(n!=n)}return t(!n.valid),n.valid=1,n.value.sym=Zi(e,i),i}function mo(e,n){var i=0;switch(n.code.op){case Hp:n.value&=ho(e,n.code.arg.loop.x),n.value||(i=1);break;case Gp:n.value|=ho(e,n.code.arg.loop.x),n.value&&(i=1);break;default:t(n!=n)}return i}function ho(e,n){var i,r,o,a,l,s,u;if(t(n.type==Jd),t(0==n.dim),n.vflag&&n.valid&&(n.valid=0,Pr(e,n.type,n.value)),n.valid)return n.value.bit;switch(n.op){case Lb:i=0!=bo(e,n.arg.arg.x);break;case Rb:i=!ho(e,n.arg.arg.x);break;case bp:t(null!=n.arg.arg.x),n.arg.arg.x.type==ef?i=bo(e,n.arg.arg.x)<bo(e,n.arg.arg.y):(r=po(e,n.arg.arg.x),o=po(e,n.arg.arg.y),i=Qi(e,r,o)<0);break;case pp:t(null!=n.arg.arg.x),n.arg.arg.x.type==ef?i=bo(e,n.arg.arg.x)<=bo(e,n.arg.arg.y):(r=po(e,n.arg.arg.x),o=po(e,n.arg.arg.y),i=Qi(e,r,o)<=0);break;case mp:t(null!=n.arg.arg.x),n.arg.arg.x.type==ef?i=bo(e,n.arg.arg.x)==bo(e,n.arg.arg.y):(r=po(e,n.arg.arg.x),o=po(e,n.arg.arg.y),i=0==Qi(e,r,o));break;case hp:t(null!=n.arg.arg.x),n.arg.arg.x.type==ef?i=bo(e,n.arg.arg.x)>=bo(e,n.arg.arg.y):(r=po(e,n.arg.arg.x),o=po(e,n.arg.arg.y),i=Qi(e,r,o)>=0);break;case gp:t(null!=n.arg.arg.x),n.arg.arg.x.type==ef?i=bo(e,n.arg.arg.x)>bo(e,n.arg.arg.y):(r=po(e,n.arg.arg.x),o=po(e,n.arg.arg.y),i=Qi(e,r,o)>0);break;case vp:t(null!=n.arg.arg.x),n.arg.arg.x.type==ef?i=bo(e,n.arg.arg.x)!=bo(e,n.arg.arg.y):(r=po(e,n.arg.arg.x),o=po(e,n.arg.arg.y),i=0!=Qi(e,r,o));break;case yp:i=ho(e,n.arg.arg.x)&&ho(e,n.arg.arg.y);break;case xp:i=ho(e,n.arg.arg.x)||ho(e,n.arg.arg.y);break;case Pp:a=go(e,n.arg.arg.x),i=wo(e,n.arg.arg.y,a);break;case jp:a=go(e,n.arg.arg.x),i=!wo(e,n.arg.arg.y,a);break;case Op:for(l=yo(e,n.arg.arg.x),i=1,s=l.head;null!=s;s=s.next)if(!wo(e,n.arg.arg.y,s.tuple)){i=0;break}break;case Cp:for(l=yo(e,n.arg.arg.x),i=1,s=l.head;null!=s;s=s.next)if(wo(e,n.arg.arg.y,s.tuple)){i=0;break}break;case Hp:u={},u.code=n,u.value=1,Fr(e,n.arg.loop.domain,u,mo),i=u.value;break;case Gp:u={},u.code=n,u.value=0,Fr(e,n.arg.loop.domain,u,mo),i=u.value;break;default:t(n!=n)}return t(!n.valid),n.valid=1,n.value.bit=i,i}function go(e,n){var i;if(t(null!=n),t(n.type==uf),t(n.dim>0),n.vflag&&n.valid&&(n.valid=0,Pr(e,n.type,n.value)),n.valid)return rr(e,n.value.tuple);switch(n.op){case Ab:i=null;for(var r=n.arg.list;null!=r;r=r.next)i=nr(e,i,po(e,r.x));break;case Tb:i=nr(e,null,po(e,n.arg.arg.x));break;default:t(n!=n)}return t(!n.valid),n.valid=1,n.value.tuple=rr(e,i),i}function vo(e,n){var i;switch(n.code.op){case Vp:i=go(e,n.code.arg.loop.x),null==ur(e,n.value,i)&&cr(e,n.value,i);break;case Xp:cr(e,n.value,Ur(e,n.code.arg.loop.domain));break;default:t(n!=n)}return 0}function yo(e,n){var i,r,o;if(t(null!=n),t(n.type==qd),t(n.dim>0),n.vflag&&n.valid&&(n.valid=0,Pr(e,n.type,n.value)),n.valid)return dr(e,n.value.set);switch(n.op){case wb:var a;for(a=null,r=n.arg.set.list;null!=r;r=r.next)a=nr(e,a,po(e,r.x));i=dr(e,Vr(e,n.arg.set.set,a));break;case Eb:for(i=sr(e,n.dim),r=n.arg.list;null!=r;r=r.next)_r(e,i,go(e,r.x));break;case wp:i=mr(e,yo(e,n.arg.arg.x),yo(e,n.arg.arg.y));break;case kp:i=hr(e,yo(e,n.arg.arg.x),yo(e,n.arg.arg.y));break;case Mp:i=gr(e,yo(e,n.arg.arg.x),yo(e,n.arg.arg.y));break;case Ap:i=vr(e,yo(e,n.arg.arg.x),yo(e,n.arg.arg.y));break;case Ep:i=yr(e,yo(e,n.arg.arg.x),yo(e,n.arg.arg.y));break;case Lp:i=pr(e,bo(e,n.arg.arg.x),bo(e,n.arg.arg.y),null==n.arg.arg.z?1:bo(e,n.arg.arg.z));break;case Tp:i=ho(e,n.arg.arg.x)?yo(e,n.arg.arg.y):yo(e,n.arg.arg.z);break;case Vp:case Xp:o={},o.code=n,o.value=sr(e,n.dim),Fr(e,n.arg.loop.domain,o,vo),i=o.value;break;default:t(n!=n)}return t(!n.valid),n.valid=1,n.value.set=dr(e,i),i}function xo(e,n){t(null==n)}function wo(e,n,i){var r,o,a,l;switch(t(null!=n),t(n.type==qd),t(n.dim>0),t(null!=i),n.op){case wb:var s;for(a=null,o=n.arg.set.list;null!=o;o=o.next)a=nr(e,a,po(e,o.x));s=Vr(e,n.arg.set.set,a),a=ar(e,i,s.dim),r=null!=ur(e,s,a);break;case Eb:var u;for(r=0,a=ar(e,i,n.dim),o=n.arg.list;null!=o&&(u=go(e,o.x),!(r=0==or(e,a,u)));o=o.next);break;case wp:r=wo(e,n.arg.arg.x,i)||wo(e,n.arg.arg.y,i);break;case kp:r=wo(e,n.arg.arg.x,i)&&!wo(e,n.arg.arg.y,i);break;case Mp:var c=wo(e,n.arg.arg.x,i),_=wo(e,n.arg.arg.y,i);r=c&&!_||!c&&_;break;case Ap:r=wo(e,n.arg.arg.x,i)&&wo(e,n.arg.arg.y,i);break;case Ep:if(r=wo(e,n.arg.arg.x,i)){for(l=1;l<=n.arg.arg.x.dim;l++)t(null!=i),i=i.next;r=wo(e,n.arg.arg.y,i)}break;case Lp:var d,f,b,p;if(t(1==n.dim),f=bo(e,n.arg.arg.x),b=bo(e,n.arg.arg.y),p=null==n.arg.arg.z?1:bo(e,n.arg.arg.z),fr(e,f,b,p),t(null!=i.sym),null!=i.sym.str){r=0;break}if(d=i.sym.num,p>0&&!(f<=d&&d<=b)||p<0&&!(b<=d&&d<=f)){r=0;break}l=1+((d-f)/p+.5|0),r=br(e,f,b,p,l)==d;break;case Tp:r=ho(e,n.arg.arg.x)?wo(e,n.arg.arg.y,i):wo(e,n.arg.arg.z,i);break;case Vp:ta(e,"implementation restriction; in/within setof{} not allowed");break;case Xp:a=ar(e,i,n.dim),r=0==Ir(e,n.arg.loop.domain,a,null,xo);break;default:t(n!=n)}return r}function ko(e,n){switch(n.code.op){case Rp:var i,r=Mo(e,n.code.arg.loop.x);for(null==n.value?(t(null==n.tail),n.value=r):(t(null!=n.tail),n.tail.next=r),i=r;null!=i;i=i.next)n.tail=i;break;default:t(n!=n)}return 0}function Mo(e,n){var i;if(t(null!=n),t(n.type==Xd),t(0==n.dim),n.vflag&&n.valid&&(n.valid=0,Pr(e,n.type,n.value)),n.valid)return kr(e,n.value.form);switch(n.op){case kb:var r,o=null;for(r=n.arg.var_.list;null!=r;r=r.next)o=nr(e,o,po(e,r.x));t(n.arg.var_.suff==_b),i=wr(e,ao(e,n.arg.var_.var_,o));break;case Ib:i=xr(e,bo(e,n.arg.arg.x));break;case Db:i=Mr(e,0,xr(e,0),1,Mo(e,n.arg.arg.x));break;case Fb:i=Mr(e,0,xr(e,0),-1,Mo(e,n.arg.arg.x));break;case ep:i=Mr(e,1,Mo(e,n.arg.arg.x),1,Mo(e,n.arg.arg.y));break;case tp:i=Mr(e,1,Mo(e,n.arg.arg.x),-1,Mo(e,n.arg.arg.y));break;case ip:t(null!=n.arg.arg.x),t(null!=n.arg.arg.y),n.arg.arg.x.type==ef?(t(n.arg.arg.y.type==Xd),i=Mr(e,bo(e,n.arg.arg.x),Mo(e,n.arg.arg.y),0,xr(e,0))):(t(n.arg.arg.x.type==Xd),t(n.arg.arg.y.type==ef),i=Mr(e,bo(e,n.arg.arg.y),Mo(e,n.arg.arg.x),0,xr(e,0)));break;case rp:i=Mr(e,Ci(e,1,bo(e,n.arg.arg.y)),Mo(e,n.arg.arg.x),0,xr(e,0));break;case Tp:i=ho(e,n.arg.arg.x)?Mo(e,n.arg.arg.y):null==n.arg.arg.z?xr(e,0):Mo(e,n.arg.arg.z);break;case Rp:var a={};a.code=n,a.value=xr(e,0),a.tail=null,Fr(e,n.arg.loop.domain,a,ko),i=Er(e,a.value);break;default:t(n!=n)}return t(!n.valid),n.valid=1,n.value.form=kr(e,i),i}function Ao(e,n){var i,r,o,a=e.dca;for(o=0,i=n.u.out.list;null!=i;i=i.next)switch(o++,i.code.type){case ef:a.type[o]="N",a.num[o]=bo(e,i.code),a.str[o][0]="\0";break;case lf:r=po(e,i.code),null==r.str?(a.type[o]="N",a.num[o]=r.num,a.str[o][0]="\0"):(a.type[o]="S",a.num[o]=0,a.str[o]=r.str);break;default:t(i!=i)}return fa(e),0}function Eo(e,n){var i,r,o,a,l,s,u,c;for(t(null==e.dca),e.dca=l={},l.id=0,l.link=null,l.na=0,l.arg=null,l.nf=0,l.name=null,l.type=null,l.num=null,l.str=null,t(0==l.na),i=n.arg;null!=i;i=i.next)l.na++;for(l.arg=new Array(1+l.na),u=1;u<=l.na;u++)l.arg[u]=null;for(u=0,i=n.arg;null!=i;i=i.next){u++,t(i.code.type==lf);var _=po(e,i.code);c=null==_.str?String(_.num):_.str,l.arg[u]=c}switch(n.type){case Wd:for(s=n.u.in_.set,null!=s&&(s.data&&ta(e,s.name+" already provided with data"),t(null==s.array.head),Sr(e,s.array,null).value.set=sr(e,s.dimen),s.data=1),o=n.u.in_.list;null!=o;o=o.next)o.par.data&&ta(e,o.par.name+" already provided with data"),o.par.data=1;for(t(0==l.nf),r=n.u.in_.fld;null!=r;r=r.next)l.nf++;for(o=n.u.in_.list;null!=o;o=o.next)l.nf++;for(l.name=new Array(1+l.nf),l.type=new Array(1+l.nf),l.num=new Float64Array(1+l.nf),l.str=new Array(1+l.nf),u=0,r=n.u.in_.fld;null!=r;r=r.next)u++,l.name[u]=r.name,l.type[u]="?",l.num[u]=0,l.str[u]="";for(o=n.u.in_.list;null!=o;o=o.next)u++,l.name[u]=o.name,l.type[u]="?",l.num[u]=0,l.str[u]="";for(_a(e,"R");;){var d;for(u=1;u<=l.nf;u++)l.type[u]="?";if(da(e))break;for(u=1;u<=l.nf;u++)"?"==l.type[u]&&ta(e,"field "+l.name[u]+" missing in input table");for(d=null,u=0,r=n.u.in_.fld;null!=r;r=r.next)switch(u++,t(u<=l.nf),l.type[u]){case"N":d=nr(e,d,Ji(e,l.num[u]));break;case"S":d=nr(e,d,$i(e,l.str[u]));break;default:t(l!=l)}for(null!=n.u.in_.set&&_r(e,n.u.in_.set.array.head.value.set,rr(e,d)),o=n.u.in_.list;null!=o;o=o.next){var f;switch(u++,t(u<=l.nf),null!=Cr(e,o.par.array,d)&&ta(e,o.par.name+lr(e,"[",d)+" already defined"),f=Sr(e,o.par.array,rr(e,d)),o.par.type){case ef:case Yd:case Dd:"N"!=l.type[u]&&ta(e,o.par.name+" requires numeric data"),f.value.num=l.num[u];break;case lf:switch(l.type[u]){case"N":f.value.sym=Ji(e,l.num[u]);break;case"S":f.value.sym=$i(e,l.str[u]);break;default:t(l!=l)}break;default:t(o!=o)}}}e.dca=null;break;case tf:for(t(0==l.nf),a=n.u.out.list;null!=a;a=a.next)l.nf++;for(l.name=new Array(1+l.nf),l.type=new Array(1+l.nf),l.num=new Float64Array(1+l.nf),l.str=new Array(1+l.nf),u=0,a=n.u.out.list;null!=a;a=a.next)u++,l.name[u]=a.name,l.type[u]="?",l.num[u]=0,l.str[u]="";_a(e,"W"),Fr(e,n.u.out.domain,n,Ao),ba(e),e.dca=null;break;default:t(n!=n)}}function Po(e,t){return ho(e,t.code)||ta(e,"check"+lr(e,"[",Ur(e,t.domain))+" failed"),0}function jo(e,t){Fr(e,t.domain,t,Po)}function Oo(e,t,n){var i,r=n.value.set;for(Qo(e,t.name+lr(e,"[",n.tuple)+(null==r.head?" is empty":":")),i=r.head;null!=i;i=i.next)Qo(e,"   "+lr(e,"(",i.tuple))}function Co(e,n,i){switch(n.type){case ef:case Yd:case Dd:Qo(e,n.name+lr(e,"[",i.tuple)+" = "+i.value.num);break;case lf:Qo(e,n.name+lr(e,"[",i.tuple)+" = "+er(e,i.value.sym));break;default:t(n!=n)}}function So(e,n,i,r){r==_b||r==pb?Qo(e,n.name+lr(e,"[",i.tuple)+".val = "+i.value.var_.prim):r==db?Qo(e,n.name+lr(e,"[",i.tuple)+".lb = "+(null==i.value.var_.var_.lbnd?-Bl:i.value.var_.lbnd)):r==fb?Qo(e,n.name+lr(e,"[",i.tuple)+".ub = "+(null==i.value.var_.var_.ubnd?+Bl:i.value.var_.ubnd)):r==bb?Qo(e,n.name+lr(e,"[",i.tuple)+".status = "+i.value.var_.stat):r==mb?Qo(e,n.name+lr(e,"[",i.tuple)+".dual = "+i.value.var_.dual):t(r!=r)}function zo(e,n,i,r){r==_b||r==pb?Qo(e,n.name+lr(e,"[",i.tuple)+".val = "+i.value.con.prim):r==db?Qo(e,n.name+lr(e,"[",i.tuple)+".lb = "+(null==i.value.con.con.lbnd?-Bl:i.value.con.lbnd)):r==fb?Qo(e,n.name+lr(e,"[",i.tuple)+".ub = "+(null==i.value.con.con.ubnd?+Bl:i.value.con.ubnd)):r==bb?Qo(e,n.name+lr(e,"[",i.tuple)+".status = "+i.value.con.stat):r==mb?Qo(e,n.name+lr(e,"[",i.tuple)+".dual = "+i.value.con.dual):t(r!=r)}function No(e,n){var i,r={value:{}};for(t(n.op==yb||n.op==xb||n.op==wb||n.op==kb||n.op==Mb),r.tuple=null,i=n.arg.par.list||n.arg.var_.list;null!=i;i=i.next)r.tuple=nr(e,r.tuple,po(e,i.x));switch(n.op){case yb:r.value.num=$r(e,n.arg.par.par,r.tuple),Co(e,n.arg.par.par,r);break;case xb:r.value.sym=to(e,n.arg.par.par,r.tuple),Co(e,n.arg.par.par,r);break;case wb:r.value.set=Vr(e,n.arg.set.set,r.tuple),Oo(e,n.arg.set.set,r);break;case kb:r.value.var_=ao(e,n.arg.var_.var_,r.tuple),So(e,n.arg.var_.var_,r,n.arg.var_.suff);break;case Mb:r.value.con=uo(e,n.arg.con.con,r.tuple),zo(e,n.arg.con.con,r,n.arg.con.suff);break;default:t(n!=n)}}function Lo(e,n){switch(n.type){case ef:var i=bo(e,n);Qo(e,String(i));break;case lf:Qo(e,er(e,po(e,n)));break;case Jd:Qo(e,ho(e,n)?"true":"false");break;case uf:Qo(e,lr(e,"(",go(e,n)));break;case qd:var r=yo(e,n);0==r.head&&Qo(e,"set is empty");for(var o=r.head;null!=o;o=o.next)Qo(e,"   "+lr(e,"(",o.tuple));break;case Xd:var a,l=Mo(e,n);for(null==l&&Qo(e,"linear form is empty"),a=l;null!=a;a=a.next)null==a.var_?Qo(e,"   "+a.coef):Qo(e,"   "+a.coef+" "+a.var_.var_.name+lr(e,"[",a.var_.memb.tuple));break;default:t(n!=n)}}function To(e,n){for(var i,r=n.list;null!=r;r=r.next)if(r.type==Kd){var o=r.u.slot;Qo(e,o.name+" = "+er(e,o.value))}else if(r.type==of){var a=r.u.set;for(null!=a.assign?Kr(e,a):(null!=a.gadget&&0==a.data&&Gr(e,a),null!=a.array.head&&Vr(e,a,a.array.head.tuple)),null==a.array.head&&Qo(e,a.name+" has empty content"),i=a.array.head;null!=i;i=i.next)Oo(e,a,i)}else if(r.type==nf){var l=r.u.par;for(null!=l.assign?io(e,l):null!=l.array.head&&(l.type!=lf?$r(e,l,l.array.head.tuple):to(e,l,l.array.head.tuple)),null==l.array.head&&Qo(e,l.name+" has empty content"),i=l.array.head;null!=i;i=i.next)Co(e,l,i)}else if(r.type==cf){var s=r.u.var_;for(t(e.flag_p),null==s.array.head&&Qo(e,s.name+" has empty content"),i=s.array.head;null!=i;i=i.next)So(e,s,i,_b)}else if(r.type==Rd){var u=r.u.con;for(t(e.flag_p),null==u.array.head&&Qo(e,u.name+" has empty content"),i=u.array.head;null!=i;i=i.next)zo(e,u,i,_b)}else if(r.type==Gd){var c=r.u.code;c.op==yb||c.op==xb||c.op==wb||c.op==kb||c.op==Mb?No(e,c):Lo(e,c)}else t(r!=r);return 0}function Io(e,t){Fr(e,t.domain,t,To)}function Do(e,t){null==e.prt_fp?Zo(e,t):e.prt_fp(t)}function Fo(e,n){t(n.length<df);for(var i=0;i<n.length;i++)Do(e,n[i])}function Ro(e,n){var i,r,o,a,l,s=po(e,n.fmt);for(r=null==s.str?String(s.num):s.str,i=n.list,a=0;a<r.length;a++)if("%"==r[a]){if(o=a++,"%"==r[a]){Do(e,"%");continue}if(null==i)break;for(;"-"==r[a]||"+"==r[a]||" "==r[a]||"#"==r[a]||"0"==r[a];)a++;for(;p(r[a]);)a++;if("."==r[a])for(a++;p(r[a]);)a++;if("d"==r[a]||"i"==r[a]||"e"==r[a]||"E"==r[a]||"f"==r[a]||"F"==r[a]||"g"==r[a]||"G"==r[a]){switch(t(null!=i),i.code.type){case ef:l=bo(e,i.code);break;case lf:s=po(e,i.code),null!=s.str&&ta(e,"cannot convert "+er(e,s)+" to floating-point number"),l=s.num;break;case Jd:l=ho(e,i.code)?1:0;break;default:t(i!=i)}if("d"==r[a]||"i"==r[a]){var u=Gl;-u<=l&&l<=+u||ta(e,"cannot convert "+l+" to integer"),Fo(e,g(r.slice(o,a+1),0|Math.floor(l+.5)))}else Fo(e,g(r.slice(o,a+1),l))}else if("s"==r[a]){switch(i.code.type){case ef:l=String(bo(e,i.code));break;case Jd:l=ho(e,i.code)?"T":"F";break;case lf:s=po(e,i.code),l=null==s.str?String(s.num):s.str;break;default:t(i!=i)}Fo(e,g(r.slice(o,a+1),l))}else ta(e,"format specifier missing or invalid");i=i.next}else"\\"==r[a]?(a++,"t"==r[a]?Do(e,"\t"):"n"==r[a]?Do(e,"\n"):"\0"==r[a]?ta(e,"invalid use of escape character \\ in format control string"):Do(e,r[a])):Do(e,r[a]);return 0}function Uo(e,t){if(null==t.fname)e.prt_file=null;else{var n=po(e,t.fname);null==n.str?e.prt_file=n.num:e.prt_file=n.str}Fr(e,t.domain,t,Ro)}function Bo(e,t){for(var n=e.stmt,i=t.list;null!=i;i=i.next)Ho(e,i);return e.stmt=n,0}function qo(e,t){Fr(e,t.domain,t,Bo)}function Ho(e,n){switch(e.stmt=n,n.type){case of:case nf:case cf:break;case Rd:Jl("Generating "+n.u.con.name+"..."),_o(e,n.u.con);break;case sf:switch(n.u.tab.type){case Wd:Jl("Reading "+n.u.tab.name+"...");break;case tf:Jl("Writing "+n.u.tab.name+"...");break;default:t(n!=n)}Eo(e,n.u.tab);break;case af:break;case Fd:Jl("Checking (line "+n.line+")..."),jo(e,n.u.chk);break;case Ud:Qo(e,"Display statement at line "+n.line),Io(e,n.u.dpy);break;case rf:Uo(e,n.u.prt);break;case Vd:qo(e,n.u.fur);break;default:t(n!=n)}}function Go(e){var n;for(n=e.model;null!=n;n=n.next)switch(n.type){case of:t(null==n.u.set.array),n.u.set.array=jr(e,qd,n.u.set.dim);break;case nf:switch(t(null==n.u.par.array),n.u.par.type){case ef:case Yd:case Dd:n.u.par.array=jr(e,ef,n.u.par.dim);break;case lf:n.u.par.array=jr(e,lf,n.u.par.dim);break;default:t(n!=n)}break;case cf:t(null==n.u.var_.array),n.u.var_.array=jr(e,Hd,n.u.var_.dim);break;case Rd:t(null==n.u.con.array),n.u.con.array=jr(e,Bd,n.u.con.dim);break;case sf:case af:case Fd:case Ud:case rf:case Vd:break;default:t(n!=n)}}function Vo(e){var n;for(t(!e.flag_p),n=e.model;null!=n&&(Ho(e,n),e.stmt.type!=af);n=n.next);e.stmt=n}function Xo(e){var n,i,r,o,a,l,s;for(t(0==e.m),t(0==e.n),t(null==e.row),t(null==e.col),n=e.model;null!=n;n=n.next)if(n.type==cf)for(r=n.u.var_,i=r.array.head;null!=i;i=i.next)t(0==i.value.var_.j);for(n=e.model;null!=n;n=n.next)if(n.type==Rd)for(o=n.u.con,i=o.array.head;null!=i;i=i.next)for(t(0==i.value.con.i),i.value.con.i=++e.m,a=i.value.con.form;null!=a;a=a.next)t(null!=a.var_),a.var_.memb.value.var_.j=-1;for(n=e.model;null!=n;n=n.next)if(n.type==cf)for(r=n.u.var_,i=r.array.head;null!=i;i=i.next)0!=i.value.var_.j&&(i.value.var_.j=++e.n);for(e.row=new Array(1+e.m),l=1;l<=e.m;l++)e.row[l]=null;for(n=e.model;null!=n;n=n.next)if(n.type==Rd)for(o=n.u.con,i=o.array.head;null!=i;i=i.next)l=i.value.con.i,t(1<=l&&l<=e.m),t(null==e.row[l]),e.row[l]=i.value.con;for(l=1;l<=e.m;l++)t(null!=e.row[l]);for(e.col=new Array(1+e.n),s=1;s<=e.n;s++)e.col[s]=null;for(n=e.model;null!=n;n=n.next)if(n.type==cf)for(r=n.u.var_,i=r.array.head;null!=i;i=i.next)0!=(s=i.value.var_.j)&&(t(1<=s&&s<=e.n),t(null==e.col[s]),e.col[s]=i.value.var_);for(s=1;s<=e.n;s++)t(null!=e.col[s])}function Ko(e){var n;for(t(!e.flag_p),e.flag_p=1,n=e.stmt;null!=n;n=n.next)Ho(e,n);e.stmt=null}function Wo(e,n,i){e.line=0,e.column=0,e.c="\n",e.token=0,e.imlen=0,e.image="",e.value=0,e.b_token=ff,e.b_imlen=0,e.b_image="",e.b_value=0,e.f_dots=0,e.f_scan=0,e.f_token=0,e.f_imlen=0,e.f_image="",e.f_value=0,o(e.context,0," ",_f),e.c_ptr=0,t(null==e.in_fp),e.in_fp=i,e.in_file=n||"input",Kt(e),Yt(e)}function Yo(e){var n;return t(null!=e.in_fp),n=e.in_fp(),n<0&&(n=Id),n}function Jo(e){t(null!=e.in_fp),e.in_fp=null}function $o(e,n,i){t(null==e.out_fp),null==i?e.out_fp=function(e){Jl(e)}:(e.out_fp=i,e.out_file=n),e.out_buffer=""}function Zo(e,n){t(null!=e.out_fp),"\n"==n?(e.out_fp(e.out_buffer,e.prt_file),e.out_buffer=""):e.out_buffer+=n}function Qo(e,n){t(null!=e.out_fp),e.out_fp(n,e.prt_file)}function ea(e){t(null!=e.out_fp),e.out_buffer.length>0&&(e.out_fp(e.out_buffer,e.prt_file),e.out_buffer="")}function ta(e,n){var i;switch(e.phase){case 1:case 2:i=new Error(e.in_file+":"+e.line+": "+n),i.line=e.line,i.column=e.column,Xt(e);break;case 3:var r=null==e.stmt?0:e.stmt.line,o=null==e.stmt?0:e.stmt.column;i=new Error(r+": "+n),i.line=r,i.column=o;break;default:t(e!=e)}throw e.phase=4,i}function na(e,n){switch(e.phase){case 1:case 2:Jl(e.in_file+":"+e.line+": warning: "+n);break;case 3:Jl(e.mod_file+":"+(null==e.stmt?0:e.stmt.line)+": warning: "+n);break;default:t(e!=e)}}function ia(e){return Math.round(Date.now()/1e3)}function ra(e,t){for(var n="";t>0;)n+=e,t--;return n}function oa(e,t,n,i,r,o){Jl("Input string passed to str2time:"),Jl(t),Jl(ra("^",n+1)),Jl("Format string passed to str2time:\n"),Jl(i),Jl(ra("^",r+1)),ta(e,o)}function aa(e,n,i){function r(){oa(e,n,p,i,m,"time zone offset value incomplete or invalid")}function o(){oa(e,n,p,i,m,"time zone offset value out of range")}function a(){n[p]!=i[m]&&oa(e,n,p,i,m,"character mismatch"),p++}var l,s,u,c,_,d,f,b,p,m;for(s=u=c=_=d=f=-1,b=Gl,p=0,m=0;m<i.length;m++)if("%"==i[m])if(m++,"b"==i[m]||"h"==i[m]){var h,g;for(u>=0&&oa(e,n,p,i,m,"month multiply specified");" "==n[p];)p++;for(u=1;u<=12;u++){g=zm[u-1];var v=!1;for(h=0;h<=2;h++)if(p[h].toUpperCase()!=g[h].toUpperCase()){v=!0;break}if(!v){for(p+=3,h=3;"\0"!=g[h]&&n[p].toUpperCase()==g[h].toUpperCase();h++)p++;break}}u>12&&oa(e,n,p,i,m,"abbreviated month name missing or invalid")}else if("d"==i[m]){for(c>=0&&oa(e,n,p,i,m,"day multiply specified");" "==n[p];)p++;"0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"day missing or invalid"),c=n[p++]-"0","0"<=n[p]&&n[p]<="9"&&(c=10*c+(n[p++]-"0")),1<=c&&c<=31||oa(e,n,p,i,m,"day out of range")}else if("H"==i[m]){for(_>=0&&oa(e,n,p,i,m,"hour multiply specified");" "==n[p];)p++;"0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"hour missing or invalid"),_=n[p++]-"0","0"<=n[p]&&n[p]<="9"&&(_=10*_+(n[p++]-"0")),0<=_&&_<=23||oa(e,n,p,i,m,"hour out of range")}else if("m"==i[m]){for(u>=0&&oa(e,n,p,i,m,"month multiply specified");" "==n[p];)p++;"0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"month missing or invalid"),u=n[p++]-"0","0"<=n[p]&&n[p]<="9"&&(u=10*u+(n[p++]-"0")),1<=u&&u<=12||oa(e,n,p,i,m,"month out of range")}else if("M"==i[m]){for(d>=0&&oa(e,n,p,i,m,"minute multiply specified");" "==n[p];)p++;"0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"minute missing or invalid"),d=n[p++]-"0","0"<=n[p]&&n[p]<="9"&&(d=10*d+(n[p++]-"0")),0<=d&&d<=59||oa(e,n,p,i,m,"minute out of range")}else if("S"==i[m]){for(f>=0&&oa(e,n,p,i,m,"second multiply specified");" "==n[p];)p++;"0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"second missing or invalid"),f=n[p++]-"0","0"<=n[p]&&n[p]<="9"&&(f=10*f+(n[p++]-"0")),0<=f&&f<=60||oa(e,n,p,i,m,"second out of range")}else if("y"==i[m]){for(s>=0&&oa(e,n,p,i,m,"year multiply specified");" "==n[p];)p++;"0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"year missing or invalid"),s=n[p++]-"0","0"<=n[p]&&n[p]<="9"&&(s=10*s+(n[p++]-"0")),s+=s>=69?1900:2e3}else if("Y"==i[m]){for(s>=0&&oa(e,n,p,i,m,"year multiply specified");" "==n[p];)p++;for("0"<=n[p]&&n[p]<="9"||oa(e,n,p,i,m,"year missing or invalid"),s=0,l=1;l<=4&&("0"<=n[p]&&n[p]<="9");l++)s=10*s+(n[p++]-"0");1<=s&&s<=4e3||oa(e,n,p,i,m,"year out of range")}else if("z"==i[m]){var y;for(b!=Gl&&oa(e,n,p,i,m,"time zone offset multiply specified");" "==n[p];)p++;if("Z"==n[p])y=_=d=0,p++;else{for("+"==n[p]?(y=1,p++):"-"==n[p]?(y=-1,p++):oa(e,n,p,i,m,"time zone offset sign missing"),_=0,l=1;l<=2;l++)"0"<=n[p]&&n[p]<="9"||r(),_=10*_+(n[p++]-"0");if(_>23&&o(),":"==n[p]&&(p++,"0"<=n[p]&&n[p]<="9"||r()),d=0,"0"<=n[p]&&n[p]<="9"){for(l=1;l<=2;l++)"0"<=n[p]&&n[p]<="9"||r(),d=10*d+(n[p++]-"0");d>59&&o()}}b=y*(60*_+d)}else"%"==i[m]?a():oa(e,n,p,i,m,"invalid conversion specifier");else" "==i[m]||a();return s<0&&(s=1970),u<0&&(u=1),c<0&&(c=1),_<0&&(_=0),d<0&&(d=0),f<0&&(f=0),b==Gl&&(b=0),l=We(c,u,s),t(l>=0),60*(60*(24*(l-We(1,1,1970))+_)+d)+f-60*b}function la(e,t,n,i){Jl("Format string passed to time2str:"),Jl(t),Jl(ra("^",n)),ta(e,i)}function sa(e){return(e+We(1,1,1970))%7+1}function ua(e){var n;switch(n=We(1,1,e)-We(1,1,1970),sa(n)){case 1:n+=0;break;case 2:n-=1;break;case 3:n-=2;break;case 4:n-=3;break;case 5:n+=3;break;case 6:n+=2;break;case 7:n+=1;break;default:t(n!=n)}return t(1==sa(n)),n}function ca(e,n,i){var r,o,a,l,s,u,c,_,d=0,f=0,b=0,p="";for(-62135596800<=n&&n<=64092211199||ta(e,"time2str("+n+",...); argument out of range"),n=Math.floor(n+.5),u=Math.abs(n)/86400,r=Math.floor(u),n<0&&(r=u==Math.floor(u)?-r:-(r+1)),t(0==Ye(r+We(1,1,1970),function(e,t,n){b=e,f=t,d=n})),l=n-86400*r|0,t(0<=l&&l<86400),a=l/60,l%=60,o=a/60,a%=60,s=0,c=0;c<i.length;c++){if("%"==i[c])if(c++,"a"==i[c])_=Sm[sa(r)-1].slice(0,3);else if("A"==i[c])_=Sm[sa(r)-1];else if("b"==i[c]||"h"==i[c])_=zm[f-1].slice(0,3);else if("B"==i[c])_=zm[f-1];else if("C"==i[c])_=String(Math.floor(d/100));else if("d"==i[c])_=String(b);else if("D"==i[c])_=f+"/"+b+"/"+d%100;else if("e"==i[c])_=String(b);else if("F"==i[c])g(_,d+"-"+f+"-"+b);else if("g"==i[c]){var m;m=r<ua(d)?d-1:r<ua(d+1)?d:d+1,_=String(m%100)}else if("G"==i[c]){var m;m=r<ua(d)?d-1:r<ua(d+1)?d:d+1,_=String(m)}else if("H"==i[c])_=String(o);else if("I"==i[c])_=String(0==o?12:o<=12?o:o-12);else if("j"==i[c])_=String(We(b,f,d)-We(1,1,d)+1);else if("k"==i[c])_=String(o);else if("l"==i[c])_=String(0==o?12:o<=12?o:o-12);else if("m"==i[c])_=String(f);else if("M"==i[c])_=String(a);else if("p"==i[c])_=o<=11?"AM":"PM";else if("P"==i[c])_=o<=11?"am":"pm";else if("r"==i[c])_=(0==o?12:o<=12?o:o-12)+":"+a+":"+l+" "+(o<=11?"AM":"PM");else if("R"==i[c])_=o+":"+a;else if("S"==i[c])_=String(l);else if("T"==i[c])_=o+":"+a+":"+l;else if("u"==i[c])_=String(sa(r));else if("U"==i[c]){var h=We(1,1,d)-We(1,1,1970);h+=7-sa(h),_=String((r+7-h)/7)}else if("V"==i[c]){var m;m=r<ua(d)?r-ua(d-1):r<ua(d+1)?r-ua(d):r-ua(d+1),_=String(m/7+1)}else if("w"==i[c])_=String(sa(r)%7);else if("W"==i[c]){var v=We(1,1,d)-We(1,1,1970);v+=(8-sa(v))%7,_=String((r+7-v)/7)}else"y"==i[c]?_=String(d%100):"Y"==i[c]?_=String(d):"%"==i[c]?_="%":la(e,i,c,"invalid conversion specifier");else _=i[c];p+=_,s+=_.length}return p}function _a(e,n){var i=e.dca;t(0==i.id),t(null==i.link),t(i.na>=1);var r=Nm[i.arg[1].toLowerCase()];r?i.link=new r(i,n,e.tablecb):ta(e,"Invalid table driver '"+i.arg[1]+"'"),null==i.link&&ta(e,"error on opening table "+e.stmt.u.tab.name)}function da(e){var t=e.dca,n=t.link.readRecord(t);return n>0&&ta(e,"error on reading data from table "+e.stmt.u.tab.name),n}function fa(e){var t=e.dca;t.link.writeRecord(t)&&ta(e,"error on writing data to table "+e.stmt.u.tab.name)}function ba(e){var t=e.dca;t.link.flush(t)}function pa(e,i,r){this.mode=i,this.fname=null,this.count=0,this.c="\n",this.what=0,this.field="",this.nf=0,this.ref=[],this.tablecb=r,this.CSV_EOF=0,this.CSV_EOR=1,this.CSV_NUM=2,this.CSV_STR=3,im(e)<2&&n("csv_driver: file name not specified\n"),this.fname=rm(e,2);var o;if("R"==i){for(r?(this.data=r(e.arg,i),this.cursor=0):n("csv_driver: unable to open "+this.fname),this.nskip=0,this.readField(),t(this.what==this.CSV_EOR),t(0==this.nf);this.readField(),this.what!=this.CSV_EOR;){for(this.what!=this.CSV_STR&&n(this.fname+":"+this.count+": invalid field name\n"),this.nf++,o=om(e);o>=1&&am(e,o)!=this.field;o--);this.ref[this.nf]=o}for(o=om(e);o>=1&&"RECNO"!=am(e,o);o--);this.ref[0]=o}else if("W"==i){this.data="";var a=om(e);for(o=1;o<=a;o++)this.data+=am(e,o)+(o<a?",":"\n");this.count++}else t(i!=i)}function ma(e,i,r){this.mode=i,this.fname=null,im(e)<2&&n("json driver: file name not specified"),this.fname=rm(e,2);var o;if("R"==i){this.ref={},r?(this.data=r(e.arg,i),"string"==typeof this.data&&(this.data=JSON.parse(this.data)),this.cursor=1):n("json driver: unable to open "+this.fname);for(var a=0,l=this.data[0];a<l.length;a++)this.ref[l[a]]=a}else if("W"==i){this.tablecb=r;var s=[];this.data=[s];var u=om(e);for(o=1;o<=u;o++)s.push(am(e,o))}else t(i!=i)}function ha(){}function ga(){var e={};return e.orig_dir=0,e.orig_m=e.orig_n=e.orig_nnz=0,e.name=e.obj=null,e.c0=0,e.nrows=e.ncols=0,e.r_head=e.r_tail=null,e.c_head=e.c_tail=null,e.top=null,e.m=e.n=e.nnz=0,e.row_ref=e.col_ref=null,e.sol=e.scaling=0,e.p_stat=e.d_stat=e.t_stat=e.i_stat=0,e.r_stat=null,e.r_pi=null,e.c_stat=null,e.c_value=null,e}function va(e,t,n){0==n?(t.prev=null,t.next=e.r_head,null==t.next?e.r_tail=t:t.next.prev=t,e.r_head=t):(t.prev=e.r_tail,t.next=null,null==t.prev?e.r_head=t:t.prev.next=t,e.r_tail=t)}function ya(e,t){null==t.prev?e.r_head=t.next:t.prev.next=t.next,null==t.next?e.r_tail=t.prev:t.next.prev=t.prev}function xa(e,t){t.temp||(t.temp=1,ya(e,t),va(e,t,0))}function wa(e,t){t.temp&&(t.temp=0,ya(e,t),va(e,t,1))}function ka(e,t,n){0==n?(t.prev=null,t.next=e.c_head,null==t.next?e.c_tail=t:t.next.prev=t,e.c_head=t):(t.prev=e.c_tail,t.next=null,null==t.prev?e.c_head=t:t.prev.next=t,e.c_tail=t)}function Ma(e,t){null==t.prev?e.c_head=t.next:t.prev.next=t.next,null==t.next?e.c_tail=t.prev:t.next.prev=t.prev}function Aa(e,t){t.temp||(t.temp=1,Ma(e,t),ka(e,t,0))}function Ea(e,t){t.temp&&(t.temp=0,Ma(e,t),ka(e,t,1))}function Pa(e){var t={};return t.i=++e.nrows,t.name=null,t.lb=-Bl,t.ub=+Bl,t.ptr=null,t.temp=0,va(e,t,1),t}function ja(e){var t={};return t.j=++e.ncols,t.name=null,t.is_int=0,t.lb=t.ub=t.coef=0,t.ptr=null,t.temp=0,t.ll={},t.uu={},ka(e,t,1),t}function Oa(e,t,n){var i={};return i.row=e,i.col=t,i.val=n,i.r_prev=null,i.r_next=e.ptr,i.c_prev=null,i.c_next=t.ptr,null!=i.r_next&&(i.r_next.r_prev=i),null!=i.c_next&&(i.c_next.c_prev=i),e.ptr=t.ptr=i,i}function Ca(e,t){var n;return n={},n.func=t,n.info={},n.link=e.top,e.top=n,n.info}function Sa(e){for(var t;null!=e.ptr;)t=e.ptr,e.ptr=t.r_next,null==t.c_prev?t.col.ptr=t.c_next:t.c_prev.c_next=t.c_next,null!=t.c_next&&(t.c_next.c_prev=t.c_prev)}function za(e,t){Sa(t),ya(e,t)}function Na(e,t){for(var n;null!=t.ptr;)n=t.ptr,t.ptr=n.c_next,null==n.r_prev?n.row.ptr=n.r_next:n.r_prev.r_next=n.r_next,null!=n.r_next&&(n.r_next.r_prev=n.r_prev);Ma(e,t)}function La(e,n,i,r,o){var a,l,s,u,c=n.m,_=n.n;for(t(i==e_||i==Qc),t(r==_c||r==dc||r==fc),t(o==e_||o==Qc),r==fc&&t(!o),e.orig_dir=n.dir,e.orig_dir==Vu?u=1:e.orig_dir==Xu?u=-1:t(e!=e),e.orig_m=c,e.orig_n=_,e.orig_nnz=n.nnz,i&&null!=n.name&&(e.name=n.name),i&&null!=n.obj&&(e.obj=n.obj),e.c0=u*n.c0,a=new Array(1+c),l=1;l<=c;l++){var d,f=n.row[l];if(a[l]=d=Pa(e),t(d.i==l),i&&null!=f.name&&(d.name=f.name),o){var b=f.rii;f.type==Ju?(d.lb=-Bl,d.ub=+Bl):f.type==$u?(d.lb=f.lb*b,d.ub=+Bl):f.type==Zu?(d.lb=-Bl,d.ub=f.ub*b):f.type==Qu?(d.lb=f.lb*b,d.ub=f.ub*b):f.type==ec?d.lb=d.ub=f.lb*b:t(f!=f)}else f.type==Ju?(d.lb=-Bl,d.ub=+Bl):f.type==$u?(d.lb=f.lb,d.ub=+Bl):f.type==Zu?(d.lb=-Bl,d.ub=f.ub):f.type==Qu?(d.lb=f.lb,d.ub=f.ub):f.type==ec?d.lb=d.ub=f.lb:t(f!=f)}for(s=1;s<=_;s++){var p,m,h=n.col[s];if(m=ja(e),t(m.j==s),i&&null!=h.name&&(m.name=h.name),r==fc&&(m.is_int=Number(h.kind==Wu)),o){var g=h.sjj;for(h.type==Ju?(m.lb=-Bl,m.ub=+Bl):h.type==$u?(m.lb=h.lb/g,m.ub=+Bl):h.type==Zu?(m.lb=-Bl,m.ub=h.ub/g):h.type==Qu?(m.lb=h.lb/g,m.ub=h.ub/g):h.type==ec?m.lb=m.ub=h.lb/g:t(h!=h),m.coef=u*h.coef*g,p=h.ptr;null!=p;p=p.c_next)Oa(a[p.row.i],m,p.row.rii*p.val*g)}else for(h.type==Ju?(m.lb=-Bl,m.ub=+Bl):h.type==$u?(m.lb=h.lb,m.ub=+Bl):h.type==Zu?(m.lb=-Bl,m.ub=h.ub):h.type==Qu?(m.lb=h.lb,m.ub=h.ub):h.type==ec?m.lb=m.ub=h.lb:t(h!=h),m.coef=u*h.coef,p=h.ptr;null!=p;p=p.c_next)Oa(a[p.row.i],m,p.val)}e.sol=r,e.scaling=o}function Ta(e,n){var i,r,o,a,l,s,u,c,_,d;for(ms(n),ts(n,e.name),ns(n,e.obj),is(n,e.orig_dir),e.orig_dir==Vu?_=1:e.orig_dir==Xu?_=-1:t(e!=e),cs(n,0,_*e.c0),i=e.r_head;null!=i;i=i.next)i.temp=a=rs(n,1),as(n,a,i.name),s=i.lb==-Bl&&i.ub==+Bl?Ju:i.ub==+Bl?$u:i.lb==-Bl?Zu:i.lb!=i.ub?Qu:ec,ss(n,a,s,i.lb,i.ub);for(c=new Int32Array(1+n.m),d=new Float64Array(1+n.m),r=e.c_head;null!=r;r=r.next){for(l=os(n,1),ls(n,l,r.name),tu(n,l,r.is_int?Wu:Ku),s=r.lb==-Bl&&r.ub==+Bl?Ju:r.ub==+Bl?$u:r.lb==-Bl?Zu:r.lb!=r.ub?Qu:ec,us(n,l,s,r.lb,r.ub),cs(n,l,_*r.coef),u=0,o=r.ptr;null!=o;o=o.c_next)u++,c[u]=o.row.temp,d[u]=o.val;ds(n,l,u,c,d)}for(e.m=n.m,e.n=n.n,e.nnz=n.nnz,e.row_ref=new Int32Array(1+e.m),e.col_ref=new Int32Array(1+e.n),i=e.r_head,a=0;null!=i;i=i.next)e.row_ref[++a]=i.i;for(r=e.c_head,l=0;null!=r;r=r.next)e.col_ref[++l]=r.j;e.name=e.obj=null,e.c0=0,e.r_head=e.r_tail=null,e.c_head=e.c_tail=null}function Ia(e,n){var i,r,o,a,l,s,u;if(t(e.orig_dir==n.dir),e.orig_dir==Vu?u=1:e.orig_dir==Xu?u=-1:t(e!=e),t(e.m==n.m),t(e.n==n.n),t(e.nnz==n.nnz),e.sol==_c?(e.p_stat=n.pbs_stat,e.d_stat=n.dbs_stat):e.sol==dc?e.t_stat=n.ipt_stat:e.sol==fc?e.i_stat=n.mip_stat:t(e!=e),e.sol==_c){for(null==e.r_stat&&(e.r_stat=new Int8Array(1+e.nrows)),a=1;a<=e.nrows;a++)e.r_stat[a]=0;for(null==e.c_stat&&(e.c_stat=new Int8Array(1+e.ncols)),l=1;l<=e.ncols;l++)e.c_stat[l]=0}for(null==e.c_value&&(e.c_value=new Float64Array(1+e.ncols)),l=1;l<=e.ncols;l++)e.c_value[l]=Bl;if(e.sol!=fc)for(null==e.r_pi&&(e.r_pi=new Float64Array(1+e.nrows)),a=1;a<=e.nrows;a++)e.r_pi[a]=Bl;if(e.sol==_c){for(a=1;a<=e.m;a++)i=n.row[a],s=e.row_ref[a],e.r_stat[s]=i.stat,e.r_pi[s]=u*i.dual;for(l=1;l<=e.n;l++)r=n.col[l],s=e.col_ref[l],e.c_stat[s]=r.stat,e.c_value[s]=r.prim}else if(e.sol==dc){for(a=1;a<=e.m;a++)i=n.row[a],s=e.row_ref[a],e.r_pi[s]=u*i.dval;for(l=1;l<=e.n;l++)r=n.col[l],s=e.col_ref[l],e.c_value[s]=r.pval}else if(e.sol==fc)for(l=1;l<=e.n;l++)r=n.col[l],s=e.col_ref[l],e.c_value[s]=r.mipx;else t(e!=e);for(o=e.top;null!=o;o=o.link)t(null!=o.func),t(0==o.func(e,o.info))}function Da(e,n){var i,r,o,a,l,s,u;if(t(e.orig_dir==n.dir),e.orig_dir==Vu?l=1:e.orig_dir==Xu?l=-1:t(e!=e),t(e.orig_m==n.m),t(e.orig_n==n.n),t(e.orig_nnz==n.nnz),e.sol==_c){for(n.valid=0,n.pbs_stat=e.p_stat,n.dbs_stat=e.d_stat,n.obj_val=n.c0,n.some=0,o=1;o<=n.m;o++)i=n.row[o],i.stat=e.r_stat[o],e.scaling?i.dual=l*e.r_pi[o]*i.rii:i.dual=l*e.r_pi[o],i.stat==tc?i.dual=0:i.stat==nc?(t(i.type==$u||i.type==Qu),i.prim=i.lb):i.stat==ic?(t(i.type==Zu||i.type==Qu),i.prim=i.ub):i.stat==rc?(t(i.type==Ju),i.prim=0):i.stat==oc?(t(i.type==ec),i.prim=i.lb):t(i!=i);for(a=1;a<=n.n;a++)r=n.col[a],r.stat=e.c_stat[a],e.scaling?r.prim=e.c_value[a]*r.sjj:r.prim=e.c_value[a],r.stat==tc?r.dual=0:r.stat==nc?(t(r.type==$u||r.type==Qu),r.prim=r.lb):r.stat==ic?(t(r.type==Zu||r.type==Qu),r.prim=r.ub):r.stat==rc?(t(r.type==Ju),r.prim=0):r.stat==oc?(t(r.type==ec),r.prim=r.lb):t(r!=r),n.obj_val+=r.coef*r.prim;for(o=1;o<=n.m;o++)if(i=n.row[o],i.stat==tc){for(u=0,s=i.ptr;null!=s;s=s.r_next)u+=s.val*s.col.prim;i.prim=u}for(a=1;a<=n.n;a++)if(r=n.col[a],r.stat!=tc){for(u=r.coef,s=r.ptr;null!=s;s=s.c_next)u-=s.val*s.row.dual;r.dual=u}}else if(e.sol==dc){for(n.ipt_stat=e.t_stat,n.ipt_obj=n.c0,o=1;o<=n.m;o++)i=n.row[o],e.scaling?i.dval=l*e.r_pi[o]*i.rii:i.dval=l*e.r_pi[o];for(a=1;a<=n.n;a++)r=n.col[a],e.scaling?r.pval=e.c_value[a]*r.sjj:r.pval=e.c_value[a],n.ipt_obj+=r.coef*r.pval;for(o=1;o<=n.m;o++){for(i=n.row[o],u=0,s=i.ptr;null!=s;s=s.r_next)u+=s.val*s.col.pval;i.pval=u}for(a=1;a<=n.n;a++){for(r=n.col[a],u=r.coef,s=r.ptr;null!=s;s=s.c_next)u-=s.val*s.row.dval;r.dval=u}}else if(e.sol==fc){for(t(!e.scaling),n.mip_stat=e.i_stat,n.mip_obj=n.c0,a=1;a<=n.n;a++)r=n.col[a],r.mipx=e.c_value[a],r.kind==Wu&&t(r.mipx==Math.floor(r.mipx)),n.mip_obj+=r.coef*r.mipx;for(o=1;o<=n.m;o++){for(i=n.row[o],u=0,s=i.ptr;null!=s;s=s.r_next)u+=s.val*s.col.mipx;i.mipx=u}}else t(e!=e)}function Fa(e,n){var i;t(n.lb==-Bl&&n.ub==+Bl),i=Ca(e,function(e,t){return e.sol==_c&&(e.r_stat[t.p]=tc),e.sol!=fc&&(e.r_pi[t.p]=0),0}),i.p=n.i,za(e,n)}function Ra(e,n){var i,r,o;for(t(0!=n.lb),t(n.lb!=-Bl),t(n.lb<n.ub),i=Ca(e,function(e,t){if(e.sol==_c){if(e.c_stat[t.q]!=tc&&e.c_stat[t.q]!=nc&&e.c_stat[t.q]!=ic)return ha(),1;e.c_stat[t.q]=e.c_stat[t.q]}return e.c_value[t.q]=t.bnd+e.c_value[t.q],0}),i.q=n.j,i.bnd=n.lb,e.c0+=n.coef*n.lb,o=n.ptr;null!=o;o=o.c_next)r=o.row,r.lb==r.ub?r.ub=r.lb-=o.val*n.lb:(r.lb!=-Bl&&(r.lb-=o.val*n.lb),r.ub!=+Bl&&(r.ub-=o.val*n.lb));n.ub!=+Bl&&(n.ub-=n.lb),n.lb=0}function Ua(e,n){var i,r,o;for(t(n.lb==n.ub),i=Ca(e,function(e,t){return e.sol==_c&&(e.c_stat[t.q]=oc),e.c_value[t.q]=t.s,0}),i.q=n.j,i.s=n.lb,e.c0+=n.coef*n.lb,o=n.ptr;null!=o;o=o.c_next)r=o.row,r.lb==r.ub?r.ub=r.lb-=o.val*n.lb:(r.lb!=-Bl&&(r.lb-=o.val*n.lb),r.ub!=+Bl&&(r.ub-=o.val*n.lb));Na(e,n)}function Ba(e,n){var i,r,o,a;return t(n.lb!=-Bl),t(n.ub!=+Bl),t(n.lb<n.ub),o=1e-9+1e-12*Math.abs(n.lb),n.ub-n.lb>o?0:(i=Ca(e,function(e,t){if(e.sol==_c)if(e.r_stat[t.p]==tc)e.r_stat[t.p]=tc;else{if(e.r_stat[t.p]!=oc)return ha(),1;e.r_pi[t.p]>=0?e.r_stat[t.p]=nc:e.r_stat[t.p]=ic}return 0}),i.p=n.i,r=.5*(n.ub+n.lb),a=Math.floor(r+.5),Math.abs(r-a)<=o&&(r=a),n.lb=n.ub=r,1)}function qa(e,n){var i,r,o,a,l,s;if(t(n.lb!=-Bl),t(n.ub!=+Bl),t(n.lb<n.ub),l=1e-9+1e-12*Math.abs(n.lb),n.ub-n.lb>l)return 0;if(i=Ca(e,function(e,t){var n,i;if(e.sol==_c)if(e.c_stat[t.q]==tc)e.c_stat[t.q]=tc;else{if(e.c_stat[t.q]!=oc)return ha(),1;for(i=t.c,n=t.ptr;null!=n;n=n.next)i-=n.val*e.r_pi[n.ref];e.c_stat[t.q]=i>=0?nc:ic}return 0}),i.q=n.j,i.c=n.coef,i.ptr=null,e.sol==_c)for(r=n.ptr;null!=r;r=r.c_next)o={},o.ref=r.row.i,o.val=r.val,o.next=i.ptr,i.ptr=o;return a=.5*(n.ub+n.lb),s=Math.floor(a+.5),Math.abs(a-s)<=l&&(a=s),n.lb=n.ub=a,1}function Ha(e,n){return t(null==n.ptr),n.lb>.001||n.ub<-.001?1:(n.lb=-Bl,n.ub=+Bl,Fa(e,n),0)}function Ga(e,n){function i(){o.stat=nc,n.ub=n.lb}function r(){o.stat=ic,n.lb=n.ub}var o;return t(null==n.ptr),n.coef>.001&&n.lb==-Bl?1:n.coef<-.001&&n.ub==+Bl?1:(o=Ca(e,function(e,t){return e.sol==_c&&(e.c_stat[t.q]=t.stat),0}),o.q=n.j,n.lb==-Bl&&n.ub==+Bl?(o.stat=rc,n.lb=n.ub=0):n.ub==+Bl?i():n.lb==-Bl?r():n.lb!=n.ub?n.coef>=+Vl?i():n.coef<=-Vl?r():Math.abs(n.lb)<=Math.abs(n.ub)?i():r():o.stat=oc,Ua(e,n),0)}function Va(e,n,i){var r,o;if(t(e==e),t(n.lb<n.ub),n.is_int){if(o=Math.floor(i+.5),!(Math.abs(i-o)<=1e-5))return 2;i=o}if(n.lb!=-Bl){if(r=n.is_int?1e-5:1e-5+1e-8*Math.abs(n.lb),i<n.lb-r)return 1;if(i<n.lb+.001*r)return n.ub=n.lb,0}if(n.ub!=+Bl){if(r=n.is_int?1e-5:1e-5+1e-8*Math.abs(n.ub),i>n.ub+r)return 1;if(i>n.ub-.001*r)return n.lb=n.ub,0}return n.lb=n.ub=i,0}function Xa(e,n){var i,r,o,a,l,s;if(t(n.lb==n.ub),t(null!=n.ptr&&null==n.ptr.r_next),o=n.ptr,r=o.col,s=n.lb/o.val,l=Va(e,r,s),t(0<=l&&l<=2),0!=l)return l;if(i=Ca(e,function(e,t){var n,i;if(e.sol==_c){if(e.c_stat[t.q]!=oc)return ha(),1;e.r_stat[t.p]=oc,e.c_stat[t.q]=tc}if(e.sol!=fc){for(i=t.c,n=t.ptr;null!=n;n=n.next)i-=n.val*e.r_pi[n.ref];e.r_pi[t.p]=i/t.apq}return 0}),i.p=n.i,i.q=r.j,i.apq=o.val,i.c=r.coef,i.ptr=null,e.sol!=fc)for(o=r.ptr;null!=o;o=o.c_next)o.row!=n&&(a={},a.ref=o.row.i,a.val=o.val,a.next=i.ptr,i.ptr=a);return za(e,n),0}function Ka(e,n,i){var r,o,a;if(t(e==e),t(n.lb<n.ub),t(i!=-Bl),n.is_int&&(a=Math.floor(i+.5),i=Math.abs(i-a)<=1e-5?a:Math.ceil(i)),n.lb!=-Bl&&(o=n.is_int?.001:.001+1e-6*Math.abs(n.lb),i<n.lb+o))return r=0;if(n.ub!=+Bl){if(o=n.is_int?1e-5:1e-5+1e-8*Math.abs(n.ub),i>n.ub+o)return r=4;if(i>n.ub-.001*o)return n.lb=n.ub,r=3}return r=n.lb==-Bl?2:n.is_int&&i>n.lb+.5?2:i>n.lb+.3*(1+Math.abs(n.lb))?2:1,n.lb=i,r}function Wa(e,n,i){var r,o,a;if(t(e==e),t(n.lb<n.ub),t(i!=+Bl),n.is_int&&(a=Math.floor(i+.5),i=Math.abs(i-a)<=1e-5?a:Math.floor(i)),n.ub!=+Bl&&(o=n.is_int?.001:.001+1e-6*Math.abs(n.ub),i>n.ub-o))return r=0;if(n.lb!=-Bl){if(o=n.is_int?1e-5:1e-5+1e-8*Math.abs(n.lb),i<n.lb-o)return r=4;if(i<n.lb+.001*o)return n.ub=n.lb,r=3}return r=n.ub==+Bl?2:n.is_int&&i<n.ub-.5?2:i<n.ub-.3*(1+Math.abs(n.ub))?2:1,n.ub=i,r}function Ya(e,n){var i,r,o,a,l,s,u,c,_;if(t(n.lb!=-Bl||n.ub!=+Bl),t(n.lb<n.ub),t(null!=n.ptr&&null==n.ptr.r_next),o=n.ptr,r=o.col,t(r.lb<r.ub),o.val>0?(c=n.lb==-Bl?-Bl:n.lb/o.val,_=n.ub==+Bl?+Bl:n.ub/o.val):(c=n.ub==+Bl?-Bl:n.ub/o.val,_=n.lb==-Bl?+Bl:n.lb/o.val),c==-Bl)s=0;else if(s=Ka(e,r,c),t(0<=s&&s<=4),4==s)return 4;if(_==+Bl)u=0;else if(3==s)u=0;else if(u=Wa(e,r,_),t(0<=u&&u<=4),4==u)return 4;if(!s&&!u)return n.lb=-Bl,n.ub=+Bl,Fa(e,n),0;if(i=Ca(e,function(e,t){function n(){return t.lb_changed?(e.r_stat[t.p]=t.apq>0?nc:ic,e.c_stat[t.q]=tc,e.r_pi[t.p]=o/t.apq):(e.r_stat[t.p]=tc,e.r_pi[t.p]=0),0}function i(){return t.ub_changed?(e.r_stat[t.p]=t.apq>0?ic:nc,e.c_stat[t.q]=tc,e.r_pi[t.p]=o/t.apq):(e.r_stat[t.p]=tc,e.r_pi[t.p]=0),0}var r,o;if(e.sol==fc)return 0;for(o=t.c,r=t.ptr;null!=r;r=r.next)o-=r.val*e.r_pi[r.ref];if(e.sol==_c)if(e.c_stat[t.q]==tc)e.r_stat[t.p]=tc,e.r_pi[t.p]=0;else if(e.c_stat[t.q]==nc)n();else if(e.c_stat[t.q]==ic)i();else{if(e.c_stat[t.q]!=oc)return ha(),1;if(o>1e-7&&(t.apq>0&&t.lb!=-Bl||t.apq<0&&t.ub!=+Bl||!t.lb_changed))return e.c_stat[t.q]=nc,n();if(o<-1e-7&&(t.apq>0&&t.ub!=+Bl||t.apq<0&&t.lb!=-Bl||!t.ub_changed))return e.c_stat[t.q]=ic,i();if(t.lb!=-Bl&&t.ub==+Bl)e.r_stat[t.p]=nc;else if(t.lb==-Bl&&t.ub!=+Bl)e.r_stat[t.p]=ic;else{if(t.lb==-Bl||t.ub==+Bl)return ha(),1;t.apq*e.c_value[t.q]<=.5*(t.lb+t.ub)?e.r_stat[t.p]=nc:e.r_stat[t.p]=ic}e.c_stat[t.q]=tc,e.r_pi[t.p]=o/t.apq}return e.sol==dc&&(o>+Vl&&t.lb_changed||o<-Vl&&t.ub_changed?e.r_pi[t.p]=o/t.apq:e.r_pi[t.p]=0),0}),i.p=n.i,i.q=r.j,i.apq=o.val,i.c=r.coef,i.lb=n.lb,i.ub=n.ub,i.lb_changed=s,i.ub_changed=u,i.ptr=null,e.sol!=fc)for(a=r.ptr;null!=a;a=a.c_next)a!=o&&(l={},l.ref=a.row.i,l.val=a.val,l.next=i.ptr,i.ptr=l);return za(e,n),s>=u?s:u}function Ja(e,n){var i,r,o,a;for(t(!n.is_int),t(n.lb<n.ub),t(null!=n.ptr&&null==n.ptr.c_next),o=n.ptr,r=o.row,t(r.lb==r.ub),i=Ca(e,function(e,t){var n,i;if(e.sol==_c){if(e.r_stat[t.p]==tc||e.r_stat[t.p]==rc)e.c_stat[t.q]=e.r_stat[t.p];else if(e.r_stat[t.p]==nc)e.c_stat[t.q]=t.apq>0?ic:nc;else{if(e.r_stat[t.p]!=ic)return ha(),1;e.c_stat[t.q]=t.apq>0?nc:ic}e.r_stat[t.p]=oc}for(e.sol!=fc&&(e.r_pi[t.p]+=t.c/t.apq),n=t.b,i=t.ptr;null!=i;i=i.next)n-=i.val*e.c_value[i.ref];return e.c_value[t.q]=n/t.apq,0}),i.p=r.i,i.q=n.j,i.apq=o.val,i.b=r.lb,i.c=n.coef,i.ptr=null,o=r.ptr;null!=o;o=o.r_next)o.col!=n&&(a={},a.ref=o.col.j,a.val=o.val,a.next=i.ptr,i.ptr=a,o.col.coef-=i.c*(o.val/i.apq));e.c0+=i.c*(i.b/i.apq),i.apq>0?(r.lb=n.ub==+Bl?-Bl:i.b-i.apq*n.ub,r.ub=n.lb==-Bl?+Bl:i.b-i.apq*n.lb):(r.lb=n.lb==-Bl?-Bl:i.b-i.apq*n.lb,r.ub=n.ub==+Bl?+Bl:i.b-i.apq*n.ub),Na(e,n)}function $a(e,n){function i(){o.stat=nc,a.ub=a.lb}function r(){o.stat=ic,a.lb=a.ub}var o,a,l,s,u,c,_,d,f,b;if(t(n.lb<n.ub),t(null!=n.ptr&&null==n.ptr.c_next),l=n.ptr,a=l.row,t(a.lb!=-Bl||a.ub!=+Bl),t(a.lb<a.ub),(u=a.lb)!=-Bl)for(s=a.ptr;null!=s;s=s.r_next)if(s!=l)if(s.val>0){if(s.col.ub==+Bl){u=-Bl;break}u-=s.val*s.col.ub}else{if(s.col.lb==-Bl){u=-Bl;break}u-=s.val*s.col.lb}if((c=a.ub)!=+Bl)for(s=a.ptr;null!=s;s=s.r_next)if(s!=l)if(s.val>0){if(s.col.lb==-Bl){c=+Bl;break}c-=s.val*s.col.lb}else{if(s.col.ub==+Bl){c=+Bl;break}c-=s.val*s.col.ub}if(_=l.val>0?u==-Bl?-Bl:u/l.val:c==+Bl?-Bl:c/l.val,d=l.val>0?c==+Bl?+Bl:c/l.val:u==-Bl?+Bl:u/l.val,n.lb!=-Bl&&(b=1e-9+1e-12*Math.abs(n.lb),_<n.lb-b))return 1;if(n.ub!=+Bl&&(b=1e-9+1e-12*Math.abs(n.ub),d>n.ub+b))return 1;if(n.lb=-Bl,n.ub=+Bl,o=Ca(e,function(e,n){if(e.sol==_c)if(e.r_stat[n.p]==tc)e.r_stat[n.p]=tc;else{if(e.r_stat[n.p]!=oc)return ha(),1;t(n.stat==nc||n.stat==ic),e.r_stat[n.p]=n.stat}return 0}),o.p=a.i,o.stat=-1,(f=n.coef/l.val)>+Vl)if(a.lb!=-Bl)i();else{if(f>1e-5)return 2;t(a.ub!=+Bl),r()}else if(f<-Vl)if(a.ub!=+Bl)r();else{if(f<-1e-5)return 2;t(a.lb!=-Bl),i()}else a.ub==+Bl?(t(a.lb!=-Bl),i()):a.lb==-Bl?(t(a.ub!=+Bl),r()):Math.abs(a.lb)<=Math.abs(a.ub)?i():r();return 0}function Za(e,n,i){var r,o,a,l,s,u,c=null;for(t(0==i||1==i),u=1,a=n.ptr;null!=a;a=a.r_next)u<Math.abs(a.val)&&(u=Math.abs(a.val));for(a=n.ptr;null!=a;a=a.r_next)if(Math.abs(a.val)<1e-7*u)return 1;for(r=Ca(e,function(e,t){var n,i,r,o,a,l;if(e.sol==fc)return 0;if(e.sol==_c){if(e.r_stat[t.p]!=tc)return ha(),1;for(n=t.ptr;null!=n;n=n.next){if(e.c_stat[n.j]!=oc)return ha(),1;e.c_stat[n.j]=n.stat}}for(n=t.ptr;null!=n;n=n.next){for(o=n.c,r=n.ptr;null!=r;r=r.next)o-=r.val*e.r_pi[r.ref];n.c=o}for(i=null,a=0,n=t.ptr;null!=n;n=n.next)if(o=n.c,l=Math.abs(o/n.a),n.stat==nc)o<0&&a<l&&(i=n,a=l);else{if(n.stat!=ic)return ha(),1;o>0&&a<l&&(i=n,a=l)}return null!=i&&(e.sol==_c&&(e.r_stat[t.p]=t.stat,e.c_stat[i.j]=tc),e.r_pi[t.p]=i.c/i.a),0}),r.p=n.i,n.lb==n.ub?r.stat=oc:0==i?(r.stat=nc,t(n.lb!=-Bl)):(r.stat=ic,t(n.ub!=+Bl)),r.ptr=null,a=n.ptr;null!=a;a=a.r_next)if(o=a.col,t(o.lb<o.ub),e.sol!=fc&&(c={},c.j=o.j,c.stat=-1,c.a=a.val,c.c=o.coef,c.ptr=null,c.next=r.ptr,r.ptr=c),0==i&&a.val<0||0!=i&&a.val>0?(e.sol!=fc&&(c.stat=nc),t(o.lb!=-Bl),o.ub=o.lb):(e.sol!=fc&&(c.stat=ic),t(o.ub!=+Bl),o.lb=o.ub),e.sol!=fc)for(l=o.ptr;null!=l;l=l.c_next)l!=a&&(s={},s.ref=l.row.i,s.val=l.val,s.next=c.ptr,c.ptr=s);return n.lb=-Bl,n.ub=+Bl,0}function Qa(e,n){var i,r,o,a,l=0;for(t(e==e),r=0,i=n.ptr;null!=i;i=i.r_next)if(i.val>0){if(i.col.lb==-Bl){r=-Bl;break}r+=i.val*i.col.lb}else{if(i.col.ub==+Bl){r=-Bl;break}r+=i.val*i.col.ub}for(o=0,i=n.ptr;null!=i;i=i.r_next)if(i.val>0){if(i.col.ub==+Bl){o=+Bl;break}o+=i.val*i.col.ub}else{if(i.col.lb==-Bl){o=+Bl;break}o+=i.val*i.col.lb}return n.lb!=-Bl&&(a=.001+1e-6*Math.abs(n.lb),n.lb-a>o)?l=51:n.ub!=+Bl&&(a=.001+1e-6*Math.abs(n.ub),n.ub+a<r)?l=51:(n.lb!=-Bl&&(a=1e-9+1e-12*Math.abs(n.lb),n.lb-a>r&&(n.lb+a<=o?l|=1:l|=2)),n.ub!=+Bl&&(a=1e-9+1e-12*Math.abs(n.ub),n.ub+a<o&&(n.ub-a>=r?l|=16:l|=32)),l)}function el(e,n,i){var r;e.sol==_c&&(r=Ca(e,function(e,t){return e.sol!=_c?(ha(),1):(e.r_stat[t.p]==tc?e.r_stat[t.p]=tc:e.r_stat[t.p]=t.stat,0)}),r.p=n.i,n.ub==+Bl?r.stat=nc:n.lb==-Bl?r.stat=ic:n.lb!=n.ub?r.stat=0==i?ic:nc:r.stat=oc),0==i?(t(n.lb!=-Bl),n.lb=-Bl):1==i?(t(n.ub!=+Bl),n.ub=+Bl):t(i!=i)}function tl(e,n){var i,r,o,a,l,s=!1;for(t(e==e),o=1,i=n.ptr;null!=i;i=i.r_next)i.col.ll.ll=-Bl,i.col.uu.uu=+Bl,o<Math.abs(i.val)&&(o=Math.abs(i.val));if(a=1e-6*o,n.lb!=-Bl){for(r=null,i=n.ptr;null!=i;i=i.r_next)if(i.val>0&&i.col.ub==+Bl||i.val<0&&i.col.lb==-Bl){if(null!=r){s=!0;break}r=i}if(!s){for(l=n.lb,i=n.ptr;null!=i;i=i.r_next)i==r||(i.val>0?l-=i.val*i.col.ub:l-=i.val*i.col.lb);if(null==r)for(i=n.ptr;null!=i;i=i.r_next)i.val>=+a?i.col.ll.ll=i.col.ub+l/i.val:i.val<=-a&&(i.col.uu.uu=i.col.lb+l/i.val);else r.val>=+a?r.col.ll.ll=l/r.val:r.val<=-a&&(r.col.uu.uu=l/r.val)}}if(s=!1,n.ub!=+Bl){for(r=null,i=n.ptr;null!=i;i=i.r_next)if(i.val>0&&i.col.lb==-Bl||i.val<0&&i.col.ub==+Bl){if(null!=r){s=!0;break}r=i}if(!s){for(l=n.ub,i=n.ptr;null!=i;i=i.r_next)i==r||(i.val>0?l-=i.val*i.col.lb:l-=i.val*i.col.ub);if(null==r)for(i=n.ptr;null!=i;i=i.r_next)i.val>=+a?i.col.uu.uu=i.col.lb+l/i.val:i.val<=-a&&(i.col.ll.ll=i.col.ub+l/i.val);else r.val>=+a?r.col.uu.uu=l/r.val:r.val<=-a&&(r.col.ll.ll=l/r.val)}}}function nl(e){var n,i,r,o,a,l,s,u,c,_,d,f,b;for(_=d=f=b=0,r=e.c_tail;null!=r;r=r.prev)if(r.is_int&&r.lb!=r.ub&&(0!=r.lb||1!=r.ub))if(r.lb<-1e6||r.ub>1e6||r.ub-r.lb>4095)_++;else if(d++,0!=r.lb&&Ra(e,r),t(0==r.lb),l=0|r.ub,t(r.ub==l),1!=l){for(s=2,c=4;l>=c;)s++,c+=c;for(f+=s,n=Ca(e,function(e,t){var n,i,r=e.c_value[t.q];for(n=1,i=2;n<t.n;n++,i+=i)r+=i*e.c_value[t.j+(n-1)];return e.c_value[t.q]=r,0}),n.q=r.j,n.j=0,n.n=s,l<c-1?(i=Pa(e),b++,i.lb=-Bl,i.ub=l):i=null,r.ub=1,null!=i&&Oa(i,r,1),u=1,c=2;u<s;u++,c+=c)for(o=ja(e),o.is_int=1,o.lb=0,o.ub=1,o.coef=c*r.coef,0==n.j?n.j=o.j:t(n.j+(u-1)==o.j),a=r.ptr;null!=a;a=a.c_next)Oa(a.row,o,c*a.val)}return d>0&&Jl(d+" integer variable(s) were replaced by "+f+" binary ones"),b>0&&Jl(b+" row(s) were added due to binarization"),_>0&&Jl("Binarization failed for "+_+" integer variable(s)"),_}function il(e,t){var n,i,r;for(i=null,n=e.ptr;null!=n;n=n.r_next)r={},r.aj=t*n.val,r.xj=n.col,r.next=i,i=r;return i}function rl(e,n,i,r){var o,a,l,s,u;for(t(e==e),o=n;null!=o;o=o.next)t(0!=o.aj),t(o.xj.is_int),t(0==o.xj.lb&&1==o.xj.ub);for(s=0,o=n;null!=o;o=o.next)if(1==o.aj);else{if(-1!=o.aj)break;s++}if(null==o&&i==1-s)return 1;for(o=n;null!=o;o=o.next)o.aj<0&&(i-=o.aj);for(o=n;null!=o;o=o.next)if(Math.abs(o.aj)>i)return 0;for(a=null,o=n;null!=o;o=o.next)(null==a||Math.abs(a.aj)>Math.abs(o.aj))&&(a=o);for(t(null!=a),l=null,o=n;null!=o;o=o.next)o!=a&&(null==l||Math.abs(l.aj)>Math.abs(o.aj))&&(l=o);if(t(null!=l),u=.001+1e-6*Math.abs(i),Math.abs(a.aj)+Math.abs(l.aj)<=i+u)return 0;for(i=1,o=n;null!=o;o=o.next)o.aj>0?o.aj=1:(o.aj=-1,i-=1);return r(i),2}function ol(e,n){var i,r,o,a,l,s,u,c=0;for(t(n.lb<n.ub),l=0;l<=1;l++){if(0==l){if(n.ub==+Bl)continue;o=il(n,1),u=+n.ub}else{if(n.lb==-Bl)continue;o=il(n,-1),u=-n.lb}if(s=rl(e,o,u,function(e){u=e}),t(0<=s&&s<=2),1==l&&1==s||2==s){if(c++,Ul){for(Jl("Original constraint:"),r=n.ptr;null!=r;r=r.r_next)Jl(" "+r.val+" x"+r.col.j);for(n.lb!=-Bl&&Jl(", >= "+n.lb),n.ub!=+Bl&&Jl(", <= "+n.ub),Jl(""),Jl("Equivalent packing inequality:"),a=o;null!=a;a=a.next)Jl(" "+(a.aj>0?"+":"-")+"x"+a.xj.j);Jl(", <= "+u)}if(n.lb==-Bl||n.ub==+Bl)i=null;else for(i=Pa(e),0==l?(i.lb=n.lb,i.ub=+Bl):(i.lb=-Bl,i.ub=n.ub),r=n.ptr;null!=r;r=r.r_next)Oa(i,r.col,r.val);for(Sa(n),n.lb=-Bl,n.ub=u,a=o;null!=a;a=a.next)Oa(n,a.xj,a.aj);null!=i&&(n=i)}}return c}function al(e,n,i,r){var o,a,l;for(t(e==e),o=n;null!=o;o=o.next)t(0!=o.aj),t(o.xj.is_int),t(0==o.xj.lb&&1==o.xj.ub);for(a=0,o=n;null!=o;o=o.next)if(1==o.aj);else{if(-1!=o.aj)break;a++}if(null==o&&i==1-a)return 1;for(o=n;null!=o;o=o.next)o.aj<0&&(i-=o.aj);if(i<.001)return 0;for(l=1e-9+1e-12*Math.abs(i),o=n;null!=o;o=o.next)if(Math.abs(o.aj)<i-l)return 0;for(i=1,o=n;null!=o;o=o.next)o.aj>0?o.aj=1:(o.aj=-1,i-=1);return r(i),2}function ll(e,n){var i,r,o,a,l,s,u,c=0;for(t(n.lb<n.ub),l=0;l<=1;l++){if(0==l){if(n.lb==-Bl)continue;o=il(n,1),u=+n.lb}else{if(n.ub==+Bl)continue;o=il(n,-1),u=-n.ub}if(s=al(e,o,u,function(e){u=e}),t(0<=s&&s<=2),1==l&&1==s||2==s){if(c++,Ul){for(Jl("Original constraint:"),r=n.ptr;null!=r;r=r.r_next)Jl(" "+r.val+" x"+r.col.j);for(n.lb!=-Bl&&Jl(", >= "+n.lb),n.ub!=+Bl&&Jl(", <= "+n.ub),Jl(""),Jl("Equivalent covering inequality:"),a=o;null!=a;a=a.next)Jl(" "+(a.aj>0?"+":"-")+"x"+a.xj.j);Jl(", >= "+u)}if(n.lb==-Bl||n.ub==+Bl)i=null;else for(i=Pa(e),0==l?(i.lb=-Bl,i.ub=n.ub):(i.lb=n.lb,i.ub=+Bl),r=n.ptr;null!=r;r=r.r_next)Oa(i,r.col,r.val);for(Sa(n),n.lb=u,n.ub=+Bl,a=o;null!=a;a=a.next)Oa(n,a.xj,a.aj);null!=i&&(n=i)}}return c}function sl(e,n,i,r){var o,a,l,s,u=0;for(t(e==e),a=0,o=n;null!=o;o=o.next)if(o.aj>0){if(o.xj.lb==-Bl)return u;a+=o.aj*o.xj.lb}else{if(o.xj.ub==+Bl)return u;a+=o.aj*o.xj.ub}for(o=n;null!=o;o=o.next)o.xj.is_int&&0==o.xj.lb&&1==o.xj.ub&&(o.aj>0?(l=a,i-o.aj<l&&l<i&&(s=i-l)>=.001&&o.aj-s>=.01*(1+o.aj)&&(Ul&&Jl("+"),o.aj=s,u++)):(l=a-o.aj,i<l&&l<i-o.aj&&(s=o.aj+(l-i))<=-.001&&s-o.aj>=.01*(1-o.aj)&&(Ul&&Jl("-"),o.aj=s,a+=l-i,i=l,u++)));return r(i),u}function ul(e,n){var i,r,o,a,l,s,u=new Array(2);for(t(n.lb<n.ub),u[0]=u[1]=0,l=0;l<=1;l++){if(0==l){if(n.lb==-Bl)continue;Ul&&Jl("L"),o=il(n,1),s=+n.lb}else{if(n.ub==+Bl)continue;Ul&&Jl("U"),o=il(n,-1),s=-n.ub}if(u[l]=sl(e,o,s,function(e){s=e}),u[l]>0){if(n.lb==-Bl||n.ub==+Bl)i=null;else for(Ul&&Jl("*"),i=Pa(e),0==l?(i.lb=-Bl,i.ub=n.ub):(i.lb=n.lb,i.ub=+Bl),r=n.ptr;null!=r;r=r.r_next)Oa(i,r.col,r.val);for(Sa(n),n.lb=s,n.ub=+Bl,a=o;null!=a;a=a.next)Oa(n,a.xj,a.aj);null!=i&&(n=i)}}return u[0]+u[1]}function cl(e){var n,i,r,o,a;for(t(e==e),n=e.r_head;null!=n;n=i)i=n.next,n.lb==-Bl&&n.ub==+Bl&&(Ul&&Jl("1"),Fa(e,n));for(n=e.r_head;null!=n;n=i)i=n.next,n.lb!=-Bl&&n.ub!=+Bl&&n.lb<n.ub&&(0==(a=Ba(e,n))||(1==a?Ul&&Jl("2"):t(a!=a)));for(r=e.c_head;null!=r;r=o)o=r.next,r.lb==r.ub&&(Ul&&Jl("3"),Ua(e,r));for(r=e.c_head;null!=r;r=o)o=r.next,r.lb!=-Bl&&r.ub!=+Bl&&r.lb<r.ub&&(0==(a=qa(e,r))||1==a&&(Ul&&Jl("4"),Ua(e,r)))}function _l(e,n,i){function r(){for(a=n.ptr;null!=a;a=l){for(Ul&&Jl("H"),o=a.col,l=a.r_next,s=o.ptr;null!=s;s=s.c_next)xa(e,s.row);Ua(e,o)}return Fa(e,n),0}var o,a,l,s,u;if(t(!(n.lb==-Bl&&n.ub==+Bl)),null==n.ptr){if(0==(u=Ha(e,n)))return Ul&&Jl("A"),0;if(1==u)return y_;t(u!=u)}if(null==n.ptr.r_next)if(o=n.ptr.col,n.lb==n.ub){if(0==(u=Xa(e,n))){for(Ul&&Jl("B"),a=o.ptr;null!=a;a=a.c_next)xa(e,a.row);return Ua(e,o),0}if(1==u||2==u)return y_;t(u!=u)}else{if(0<=(u=Ya(e,n))&&u<=3){if(Ul&&Jl("C"),Aa(e,o),u>=2)for(a=o.ptr;null!=a;a=a.c_next)xa(e,a.row);return 3==u&&(Ul&&Jl("D"),Ua(e,o)),0}if(4==u)return y_;t(u!=u)}if(u=Qa(e,n),t(0<=u&&u<=255),51==u)return y_;if(0==(15&u))n.lb!=-Bl&&(Ul&&Jl("F"),el(e,n,0));else if(1==(15&u));else if(2==(15&u)){if(Ul&&Jl("G"),0==Za(e,n,0))return r()}else t(u!=u);if(0==(240&u))n.ub!=+Bl&&(Ul&&Jl("I"),el(e,n,1));else if(16==(240&u));else if(32==(240&u)){if(Ul&&Jl("J"),0==Za(e,n,1))return r()}else t(u!=u);if(n.lb==-Bl&&n.ub==+Bl){for(Ul&&Jl("K"),a=n.ptr;null!=a;a=a.r_next)Aa(e,a.col);return Fa(e,n),0}return e.sol==fc&&i&&dl(e,n,1)<0?y_:0}function dl(e,n,i){var r,o,a,l,s,u,c,_,d=0;for(t(e.sol==fc),t(!(n.lb==-Bl&&n.ub==+Bl)),tl(e,n),o=n.ptr;null!=o;o=a)for(r=o.col,a=o.r_next,s=0;s<=1;s++){if(c=r.lb,_=r.ub,0==s){if(r.ll.ll==-Bl)continue;u=Ka(e,r,r.ll.ll)}else{if(r.uu.uu==+Bl)continue;u=Wa(e,r,r.uu.uu)}if(0==u||1==u)r.lb=c,r.ub=_;else if(2==u||3==u){if(Ul&&Jl("L"),d++,i)for(l=r.ptr;null!=l;l=l.c_next)l.row!=n&&xa(e,l.row);if(3==u){Ul&&Jl("M"),Ua(e,r);break}}else{if(4==u)return-1;t(u!=u)}}return d}function fl(e,n){function i(){if(Ul&&Jl("O"),Ja(e,n),r.lb==-Bl&&r.ub==+Bl){for(Ul&&Jl("P"),o=r.ptr;null!=o;o=o.r_next)Aa(e,o.col);Fa(e,r)}else xa(e,r);return 0}var r,o,a;if(t(n.lb<n.ub),null==n.ptr){if(0==(a=Ga(e,n)))return Ul&&Jl("N"),0;if(1==a)return x_;t(a!=a)}if(null==n.ptr.c_next)if(r=n.ptr.row,r.lb==r.ub){if(!n.is_int)return i()}else if(!n.is_int){if(0==(a=$a(e,n)))return Ul&&Jl("Q"),i();if(1==a);else if(2==a)return x_}return 0}function bl(e,n){function i(){return t(0==l||l==y_||l==x_),Ul&&Jl(""),l}var r,o,a,l;for(cl(e),r=e.r_head;null!=r;r=r.next)r.temp=1;for(o=e.c_head;null!=o;o=o.next)o.temp=1;for(a=1;a;){for(a=0;null!=(r=e.r_head)&&r.temp;){if(wa(e,r),0!=(l=_l(e,r,n)))return i();a=1}for(;null!=(o=e.c_head)&&o.temp;){if(Ea(e,o),0!=(l=fl(e,o)))return i();a=1}}if(e.sol==fc&&!n)for(r=e.r_head;null!=r;r=r.next)if(dl(e,r,0)<0)return l=y_,i();return l=0,i()}function pl(e,n){return t(e.sol==_c),t(n==n),bl(e,0)}function ml(e,n){var i,r,o,a,l,s;if(t(e.sol==fc),t(n==n),0!=(s=bl(e,1)))return s;for(n.binarize&&nl(e),l=0,i=e.r_tail;null!=i;i=r)if(r=i.prev,(i.lb!=-Bl||i.ub!=+Bl)&&i.lb!=i.ub&&null!=i.ptr&&null!=i.ptr.r_next){for(a=i.ptr;null!=a&&(o=a.col,o.is_int&&0==o.lb&&1==o.ub);a=a.r_next);null==a&&(l+=ol(e,i))}for(l>0&&Jl(l+" hidden packing inequaliti(es) were detected"),l=0,i=e.r_tail;null!=i;i=r)if(r=i.prev,(i.lb!=-Bl||i.ub!=+Bl)&&i.lb!=i.ub&&null!=i.ptr&&null!=i.ptr.r_next&&null!=i.ptr.r_next.r_next){for(a=i.ptr;null!=a&&(o=a.col,o.is_int&&0==o.lb&&1==o.ub);a=a.r_next);null==a&&(l+=ll(e,i))}for(l>0&&Jl(l+" hidden covering inequaliti(es) were detected"),l=0,i=e.r_tail;null!=i;i=r)r=i.prev,i.lb!=i.ub&&(l+=ul(e,i));return l>0&&Jl(l+" constraint coefficient(s) were reduced"),s=0}function hl(e,t){return e-t&2147483647}function gl(e){var t,n;for(t=1,n=32;n<=55;t++,n++)e.A[t]=hl(e.A[t],e.A[n]);for(n=1;t<=55;t++,n++)e.A[t]=hl(e.A[t],e.A[n]);return e.fptr=54,e.A[55]}function vl(){var e,t={};for(t.A=new Array(56),t.A[0]=-1,e=1;e<=55;e++)t.A[e]=0;return t.fptr=0,yl(t,1),t}function yl(e,t){var n,i=t,r=1;for(t=i=hl(i,0),e.A[55]=i,n=21;n;n=(n+21)%55)e.A[n]=r,r=hl(i,r),1&t?t=1073741824+(t>>1):t>>=1,r=hl(r,t),i=e.A[n];gl(e),gl(e),gl(e),gl(e),gl(e)}function xl(e){return e.A[e.fptr]>=0?e.A[e.fptr--]:gl(e)}function wl(e,n){var i,r=2147483648-2147483648%n;t(n>0);do{i=xl(e)}while(r<=i);return i%n}function kl(e){var n=xl(e)/2147483647;return t(0<=n&&n<=1),n}function Ml(e,i,r){i>=r&&n("rng_uniform: a = "+i+", b = "+r+"; invalid range");var o=kl(e);return o=i*(1-o)+r*o,t(i<=o&&o<=r),o}function Al(e){Rm&&Jl("scf_create_it: warning: debug mode enabled"),1<=e&&e<=32767||n("scf_create_it: n_max = "+e+"; invalid parameter");var t={};return t.n_max=e,t.n=0,t.f=new Float64Array(1+e*e),t.u=new Float64Array(1+e*(e+1)/2),t.p=new Int32Array(1+e),t.t_opt=Tm,t.rank=0,t.c=Rm?new Float64Array(1+e*e):null,t.w=new Float64Array(1+e),t}function El(e,n,i){var r=e.n_max,o=e.n;return t(1<=n&&n<=o),t(1<=i&&i<=o),(n-1)*r+i}function Pl(e,n,i){var r=e.n_max,o=e.n;return t(1<=n&&n<=o),t(n<=i&&i<=o),(n-1)*r+i-n*(n-1)/2}function jl(e,n,i){var r,o,a,l,s,u,c,_=e.n,d=e.f,f=e.u;for(t(1<=n&&n<=_);n<_;n++){if(l=Pl(e,n,n),o=El(e,n,1),s=El(e,_,1),Math.abs(f[l])<Math.abs(i[n])){for(r=n,a=l;r<=_;r++,a++)c=f[a],f[a]=i[r],i[r]=c;for(r=1,a=o,u=s;r<=_;r++,a++,u++)c=d[a],d[a]=d[u],d[u]=c}if(Math.abs(f[l])<Um&&(f[l]=i[n]=0),0!=i[n]){for(c=i[n]/f[l],r=n+1,a=l+1;r<=_;r++,a++)i[r]-=c*f[a];for(r=1,a=o,u=s;r<=_;r++,a++,u++)d[u]-=c*d[a]}}Math.abs(i[_])<Um&&(i[_]=0),f[Pl(e,_,_)]=i[_]}function Ol(e,t,n){var i,r,o;0==t?(r=1,o=0):Math.abs(e)<=Math.abs(t)?(i=-e/t,o=1/Math.sqrt(1+i*i),r=o*i):(i=-t/e,r=1/Math.sqrt(1+i*i),o=r*i),n(r,o)}function Cl(e,n,i){var r,o,a,l,s,u,c=e.n,_=e.f,d=e.u;for(t(1<=n&&n<=c);n<c;n++)l=Pl(e,n,n),o=El(e,n,1),s=El(e,c,1),Math.abs(d[l])<Um&&Math.abs(i[n])<Um&&(d[l]=i[n]=0),0!=i[n]&&Ol(d[l],i[n],function(e,t){for(r=n,a=l;r<=c;r++,a++){var f=d[a],b=i[r];d[a]=e*f-t*b,i[r]=t*f+e*b}for(r=1,a=o,u=s;r<=c;r++,a++,u++){var p=_[a],m=_[u];_[a]=e*p-t*m,_[u]=t*p+e*m}});Math.abs(i[c])<Um&&(i[c]=0),d[Pl(e,c,c)]=i[c]}function Sl(e,n,i){switch(e.t_opt){case Tm:jl(e,n,i);break;case Im:Cl(e,n,i);break;default:t(e!=e)}}function zl(e){var t,n,i,r=e.n_max,o=e.n,a=e.u,l=0;for(t=1,n=Pl(e,t,t),i=r;t<=o;t++,n+=i,i--)0!=a[n]&&l++;return l}function nt(e,n){var i,r,o,a,l,s,u=e.n,c=e.f,_=e.u,d=e.p,f=e.c,b=0;for(t(null!=f),i=1;i<=u;i++)for(r=1;r<=u;r++){for(l=0,o=1;o<=u;o++)l+=c[El(e,i,o)]*f[El(e,o,r)];o=d[r],s=i<=o?_[Pl(e,i,o)]:0,a=Math.abs(l-s)/(1+Math.abs(s)),b<a&&(b=a)}b>1e-8&&Jl(n+": dmax = "+b+"; relative error too large")}function Nl(e,t,n,i,r,o){var a=e.n_max,l=e.n,s=e.f,u=e.u,c=e.p;if(Rm)var _=e.c;var d,f,b,p,m,h,g,v=e.w,y=0;if(l==a)return y=Fm;for(e.n=++l,d=1,b=El(e,d,l);d<l;d++,b+=a)s[b]=0;for(p=1,h=El(e,l,p);p<l;p++,h++)s[h]=0;for(s[El(e,l,l)]=1,d=1;d<l;d++){for(g=0,p=1,f=El(e,d,1);p<l;p++,f++)g+=s[f]*t[p+n];u[Pl(e,d,l)]=g}for(p=1;p<l;p++)v[p]=i[c[p]+r];if(v[l]=o,c[l]=l,Rm){for(d=1,b=El(e,d,l);d<l;d++,b+=a)_[b]=t[d+n];for(p=1,h=El(e,l,p);p<l;p++,h++)_[h]=i[p+r];_[El(e,l,l)]=o}for(m=1;m<l&&0==v[m];m++);return Sl(e,m,v),e.rank=zl(e),e.rank!=l&&(y=Dm),Rm&&nt(e,"scf_update_exp"),y}function Ll(e,t,n){var i,r,o,a,l=e.n,s=e.f,u=e.u,c=e.p,_=e.w;for(i=1;i<=l;i++){for(a=0,r=1,o=El(e,i,1);r<=l;r++,o++)a+=s[o]*t[r+n];_[i]=a}for(i=l;i>=1;i--){for(a=_[i],r=l,o=Pl(e,i,l);r>i;r--,o--)a-=u[o]*_[r];_[i]=a/u[o]}for(i=1;i<=l;i++)t[c[i]+n]=_[i]}function Tl(e,t,n){var i,r,o,a,l=e.n,s=e.f,u=e.u,c=e.p,_=e.w;for(i=1;i<=l;i++)_[i]=t[c[i]+n];for(i=1;i<=l;i++)for(o=Pl(e,i,i),a=_[i]/=u[o],r=i+1,o++;r<=l;r++,o++)_[r]-=u[o]*a;for(r=1;r<=l;r++)t[r+n]=0;for(i=1;i<=l;i++)for(a=_[i],r=1,o=El(e,i,1);r<=l;r++,o++)t[r+n]+=s[o]*a}function Il(e,t,i,r){e.rank<e.n&&n("scf_solve_it: singular matrix"),t?Tl(e,i,r):Ll(e,i,r)}function Dl(e){e.n=e.rank=0}function Fl(e,n){function i(e,n,i,o){var a=e.m;if(Ul)var l=e.n;var s,u,c,_,d=e.A_ptr,f=e.A_ind,b=e.A_val,p=e.head;if(Ul&&t(1<=n&&n<=a),s=p[n],Ul&&t(1<=s&&s<=a+l),s<=a)u=1,i[1]=s,o[1]=1;else for(c=d[s-a],u=d[s-a+1]-c,r(i,1,f,c,u),r(o,1,b,c,u),_=1;_<=u;_++)o[_]=-o[_];return u}function a(e,n,i,o){var a=e.m;if(Ul)var l=e.n;var s,u,c,_,d,f,b=e.A_ptr,p=e.A_ind,m=e.A_val,h=e.head;for(r(o,1,n,1,a),s=1;s<=a;s++)if(0!=(f=i[s]))if(u=h[s],Ul&&t(1<=u&&u<=a+l),u<=a)o[u]-=f;else for(c=b[u-a],_=b[u-a+1],d=c;d<_;d++)o[p[d]]+=m[d]*f}function u(e,n,i){var r,o=e.m,l=e.work1,s=e.work1;for(a(e,n,i,l),t(e.valid),I(e.bfd,s),r=1;r<=o;r++)i[r]+=s[r]}function c(e,n,i,r){var o=e.m;if(Ul)var a=e.n;var l,s,u,c,_,d,f=e.A_ptr,b=e.A_ind,p=e.A_val,m=e.head;for(l=1;l<=o;l++){if(s=m[l],Ul&&t(1<=s&&s<=o+a),d=n[l],s<=o)d-=i[s];else for(u=f[s-o],c=f[s-o+1],_=u;_<c;_++)d+=p[_]*i[b[_]];r[l]=d}}function _(e,n,i){var r,o=e.m,a=e.work1,l=e.work1;for(c(e,n,i,a),t(e.valid),D(e.bfd,l),r=1;r<=o;r++)i[r]+=l[r]}function d(e){var t,n,i,r,o,a=e.m,l=e.n,s=e.A_ptr,u=e.A_ind,c=e.N_ptr,_=e.N_len;for(t=1;t<=a;t++)_[t]=1;for(n=1;n<=l;n++)for(i=s[n],r=s[n+1],o=i;o<r;o++)_[u[o]]++;for(c[1]=1,t=1;t<=a;t++)_[t]>l&&(_[t]=l),c[t+1]=c[t]+_[t];e.N_ind=new Int32Array(c[a+1]),e.N_val=new Float64Array(c[a+1])}function f(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,l=e.N_ptr,s=e.N_len,u=e.N_ind,c=e.N_val;if(Ul&&(t(1<=n&&n<=o),t(1<=i&&i<=r+o)),i<=r)a=l[i]+s[i]++,Ul&&t(a<l[i+1]),u[a]=n,c[a]=1;else{var _,d,f,b,p=e.A_ptr,m=e.A_ind,h=e.A_val;for(d=p[i-r],f=p[i-r+1],b=d;b<f;b++)_=m[b],a=l[_]+s[_]++,Ul&&t(a<l[_+1]),u[a]=n,c[a]=-h[b]}}function b(e){var n,i,r=e.m,a=e.n,l=e.head,s=e.stat,u=e.N_len;for(o(u,1,0,r),n=1;n<=a;n++)s[n]!=oc&&(i=l[r+n],Ul&&t(1<=i&&i<=r+a),f(e,n,i))}function p(e,n){var i=e.m;if(Ul)var r=e.n;var o,a,l=e.lb,s=e.ub,u=e.head,c=e.stat;switch(Ul&&t(1<=n&&n<=r),o=u[i+n],Ul&&t(1<=o&&o<=i+r),c[n]){case nc:a=l[o];break;case ic:a=s[o];break;case rc:a=0;break;case oc:a=l[o];break;default:t(c!=c)}return a}function m(e,n){var i,o,a,l,s,c,_,d=e.m,f=e.n,b=e.A_ptr,m=e.A_ind,h=e.A_val,g=e.head,v=e.work2;for(i=1;i<=d;i++)v[i]=0;for(o=1;o<=f;o++)if(a=g[d+o],Ul&&t(1<=a&&a<=d+f),0!=(_=p(e,o)))if(a<=d)v[a]-=_;else for(l=b[a-d],s=b[a-d+1],c=l;c<s;c++)v[m[c]]+=_*h[c];r(n,1,v,1,d),t(e.valid),I(e.bfd,n),u(e,v,n)}function h(e,n){var i,o=e.m,a=e.coef,l=e.head,s=e.work2;for(i=1;i<=o;i++)s[i]=a[l[i]];r(n,1,s,1,o),t(e.valid),D(e.bfd,n),_(e,s,n)}function g(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,l,s=e.coef,u=e.head;if(Ul&&t(1<=i&&i<=o),a=u[r+i],Ul&&t(1<=a&&a<=r+o),l=s[a],a<=r)l-=n[a];else{var c,_,d,f=e.A_ptr,b=e.A_ind,p=e.A_val;for(c=f[a-r],_=f[a-r+1],d=c;d<_;d++)l+=p[d]*n[b[d]]}return l}function v(e){if(Ul)var n=e.m;var i=e.n;if(Ul)var r=e.head;var o,a=e.cbar,l=e.work3;if(Ul)var s;for(h(e,l),o=1;o<=i;o++)Ul&&(s=r[n+o],t(1<=s&&s<=n+i)),a[o]=g(e,l,o)}function y(e,n){var i,r,o,a,l,s=e.n,u=e.stat,c=e.cbar,_=e.gamma;for(r=0,a=0,i=1;i<=s;i++){switch(o=c[i],u[i]){case nc:if(o>=-n)continue;break;case ic:if(o<=+n)continue;break;case rc:if(-n<=o&&o<=+n)continue;break;case oc:continue;default:t(u!=u)}Ul&&t(_[i]>0),l=o*o/_[i],a<l&&(r=i,a=l)}e.q=r}function x(e,n){function i(){e.p=u,u>0&&v[k[u]]==ec?e.p_stat=oc:e.p_stat=c,Ul&&t(h>=0),e.teta=p*h}var r=e.m;if(Ul)var o=e.n;var a,l,s,u,c,_,d,f,b,p,m,h,g,v=e.type,y=e.lb,x=e.ub,w=e.coef,k=e.head,M=e.phase,A=e.bbar,E=e.cbar,P=e.q,j=e.tcol_ind,O=e.tcol_vec,C=e.tcol_num;for(Ul&&t(1<=P&&P<=o),Ul&&t(0!=E[P]),p=E[P]>0?-1:1,s=k[r+P],Ul&&t(1<=s&&s<=r+o),v[s]==Qu?(u=-1,c=0,h=x[s]-y[s],f=1):(u=0,c=0,h=Bl,f=0),_=1;_<=C;_++){if(a=j[_],Ul&&t(1<=a&&a<=r),s=k[a],Ul&&t(1<=s&&s<=r+o),d=p*O[a],Ul&&t(0!=d),d>0)if(1==M&&w[s]<0)b=n*(1+S*Math.abs(y[s])),m=(y[s]+b-A[a])/d,l=nc;else{if(1==M&&w[s]>0)continue;if(v[s]!=Zu&&v[s]!=Qu&&v[s]!=ec)continue;b=n*(1+S*Math.abs(x[s])),m=(x[s]+b-A[a])/d,l=ic}else if(1==M&&w[s]>0)b=n*(1+S*Math.abs(x[s])),m=(x[s]-b-A[a])/d,l=ic;else{if(1==M&&w[s]<0)continue;if(v[s]!=$u&&v[s]!=Qu&&v[s]!=ec)continue;b=n*(1+S*Math.abs(y[s])),m=(y[s]-b-A[a])/d,l=nc}m<0&&(m=0),(h>m||h==m&&f<Math.abs(d))&&(u=a,c=l,h=m,f=Math.abs(d))}if(0==n)return i();if(u<=0)return i();if(0==h)return i();for(g=h,u=0,c=0,h=Bl,f=0,_=1;_<=C;_++){if(a=j[_],Ul&&t(1<=a&&a<=r),s=k[a],Ul&&t(1<=s&&s<=r+o),d=p*O[a],Ul&&t(0!=d),d>0)if(1==M&&w[s]<0)m=(y[s]-A[a])/d,l=nc;else{if(1==M&&w[s]>0)continue;if(v[s]!=Zu&&v[s]!=Qu&&v[s]!=ec)continue;m=(x[s]-A[a])/d,l=ic}else if(1==M&&w[s]>0)m=(x[s]-A[a])/d,l=ic;else{if(1==M&&w[s]<0)continue;if(v[s]!=$u&&v[s]!=Qu&&v[s]!=ec)continue;m=(y[s]-A[a])/d,l=nc}m<0&&(m=0),m<=g&&f<Math.abs(d)&&(u=a,c=l,h=m,f=Math.abs(d))}t(0!=u),i()}function w(e){var t,n,i=e.m,r=e.n,o=e.coef,a=e.obj,l=e.zeta;for(t=1;t<=i;t++)o[t]=0;for(n=1;n<=r;n++)o[i+n]=l*a[n]}function k(e,n){var i=e.m;if(Ul)var r=e.n;var o,a,l,s=e.type,u=e.lb,c=e.ub,_=e.coef,d=e.head,f=e.phase,b=e.bbar;for(o=1;o<=i;o++)if(a=d[o],Ul&&t(1<=a&&a<=i+r),1==f&&_[a]<0){if(Ul&&t(s[a]==$u||s[a]==Qu||s[a]==ec),l=n*(1+S*Math.abs(u[a])),b[o]>u[a]+l)return 1}else if(1==f&&_[a]>0){if(Ul&&t(s[a]==Zu||s[a]==Qu||s[a]==ec),l=n*(1+S*Math.abs(c[a])),b[o]<c[a]-l)return 1}else{if((s[a]==$u||s[a]==Qu||s[a]==ec)&&(l=n*(1+S*Math.abs(u[a])),b[o]<u[a]-l))return 1;if((s[a]==Zu||s[a]==Qu||s[a]==ec)&&(l=n*(1+S*Math.abs(c[a])),b[o]>c[a]+l))return 1}return 0}function M(e){var n,i,r,o,a=e.m,l=e.n,s=e.obj,u=e.head,c=e.bbar;for(o=s[0],n=1;n<=a;n++)r=u[n],Ul&&t(1<=r&&r<=a+l),r>a&&(o+=s[r-a]*c[n]);for(i=1;i<=l;i++)r=u[a+i],Ul&&t(1<=r&&r<=a+l),r>a&&(o+=s[r-a]*p(e,i));return o}function A(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,u,c,_,d=e.type,f=e.lb,b=e.ub,p=e.phase,m=e.head,h=e.bbar;if(!(n.msg_lev<Ac)&&!(n.out_dly>0&&1e3*s(l(),e.tm_beg)<n.out_dly)&&e.it_cnt!=e.it_dpy&&(i||e.it_cnt%n.out_frq==0)){for(_=0,c=0,a=1;a<=r;a++)u=m[a],Ul&&t(1<=u&&u<=r+o),d[u]!=$u&&d[u]!=Qu&&d[u]!=ec||h[a]<f[u]&&(_+=f[u]-h[a]),d[u]!=Zu&&d[u]!=Qu&&d[u]!=ec||h[a]>b[u]&&(_+=h[a]-b[u]),d[u]==ec&&c++;Jl((1==p?" ":"*")+e.it_cnt+": obj = "+M(e)+"  infeas = "+_+" ("+c+")"),e.it_dpy=e.it_cnt}}function E(e,n,i,o,a){var l,s,u,c,_,d=e.m,f=e.n,b=e.zeta,p=e.head,m=e.stat,h=e.bbar,g=e.cbar;for(Ul&&(t(n.m==d),t(n.n==f),t(!n.valid&&null==n.bfd),t(e.valid&&null!=e.bfd)),n.valid=1,e.valid=0,n.bfd=e.bfd,e.bfd=null,r(n.head,1,p,1,d),n.pbs_stat=i,n.dbs_stat=o,n.obj_val=M(e),n.it_cnt=e.it_cnt,n.some=a,l=1;l<=d;l++)u=p[l],Ul&&t(1<=u&&u<=d+f),u<=d?(c=n.row[u],c.stat=tc,c.bind=l,c.prim=h[l]/c.rii,c.dual=0):(_=n.col[u-d],_.stat=tc,_.bind=l,_.prim=h[l]*_.sjj,_.dual=0);for(s=1;s<=f;s++)if(u=p[d+s],Ul&&t(1<=u&&u<=d+f),u<=d){switch(c=n.row[u],c.stat=m[s],c.bind=0,m[s]){case nc:c.prim=c.lb;break;case ic:c.prim=c.ub;break;case rc:c.prim=0;break;case oc:c.prim=c.lb;break;default:t(m!=m)}c.dual=g[s]*c.rii/b}else{switch(_=n.col[u-d],_.stat=m[s],_.bind=0,m[s]){case nc:_.prim=_.lb;break;case ic:_.prim=_.ub;break;case rc:_.prim=0;break;case oc:_.prim=_.lb;break;default:t(m!=m)}_.dual=g[s]/_.sjj/b}}var P,j,O,C,S=.1,z=2,N=0,L=0,R=0;for(P=function(e){var n=e.m,i=e.n,r=e.nnz,o={};return t(n>0&&i>0),o.m=n,o.n=i,o.type=new Int8Array(1+n+i),o.lb=new Float64Array(1+n+i),o.ub=new Float64Array(1+n+i),o.coef=new Float64Array(1+n+i),o.obj=new Float64Array(1+i),o.A_ptr=new Int32Array(1+i+1),o.A_ind=new Int32Array(1+r),o.A_val=new Float64Array(1+r),o.head=new Int32Array(1+n+i),o.stat=new Int8Array(1+i),o.N_ptr=new Int32Array(1+n+1),o.N_len=new Int32Array(1+n),o.N_ind=null,o.N_val=null,o.bbar=new Float64Array(1+n),o.cbar=new Float64Array(1+i),o.refsp=new Int8Array(1+n+i),o.gamma=new Float64Array(1+i),o.tcol_ind=new Int32Array(1+n),o.tcol_vec=new Float64Array(1+n),o.trow_ind=new Int32Array(1+i),o.trow_vec=new Float64Array(1+i),o.work1=new Float64Array(1+n),o.work2=new Float64Array(1+n),o.work3=new Float64Array(1+n),o.work4=new Float64Array(1+n),o}(e),function(e,n){var i,a,s,u,c,_,f,p=e.m,m=e.n,h=e.type,g=e.lb,v=e.ub,y=e.coef,x=e.obj,w=e.A_ptr,k=e.A_ind,M=e.A_val,A=e.head,E=e.stat,P=e.refsp,j=e.gamma;for(i=1;i<=p;i++)_=n.row[i],h[i]=_.type,g[i]=_.lb*_.rii,v[i]=_.ub*_.rii,y[i]=0;for(a=1;a<=m;a++)f=n.col[a],h[p+a]=f.type,g[p+a]=f.lb/f.sjj,v[p+a]=f.ub/f.sjj,y[p+a]=f.coef*f.sjj;for(x[0]=n.c0,r(x,1,y,p+1,m),c=0,a=1;a<=m;a++)c<Math.abs(x[a])&&(c=Math.abs(x[a]));switch(0==c&&(c=1),n.dir){case Vu:e.zeta=1/c;break;case Xu:e.zeta=-1/c;break;default:t(n!=n)}for(Math.abs(e.zeta)<1&&(e.zeta*=1e3),u=1,a=1;a<=m;a++){w[a]=u;for(var O=n.col[a].ptr;null!=O;O=O.c_next)k[u]=O.row.i,M[u]=O.row.rii*O.val*O.col.sjj,u++}for(w[m+1]=u,t(u==n.nnz+1),t(n.valid),r(A,1,n.head,1,p),s=0,i=1;i<=p;i++)_=n.row[i],_.stat!=tc&&(s++,t(s<=m),A[p+s]=i,E[s]=_.stat);for(a=1;a<=m;a++)f=n.col[a],f.stat!=tc&&(s++,t(s<=m),A[p+s]=p+a,E[s]=f.stat);for(t(s==m),e.valid=1,n.valid=0,e.bfd=n.bfd,n.bfd=null,d(e),b(e),e.phase=0,e.tm_beg=l(),e.it_beg=e.it_cnt=n.it_cnt,e.it_dpy=-1,e.refct=0,o(P,1,0,p+m),a=1;a<=m;a++)j[a]=1}(P,e),n.msg_lev>=Pc&&Jl("Objective scale factor = "+P.zeta);;){if(0==z){if(0!=(C=function(e){var t=T(e.bfd,e.m,null,i,e);return e.valid=0==t,t}(P)))return n.msg_lev>=Mc&&(Jl("Error: unable to factorize the basis matrix ("+C+")"),Jl("Sorry, basis recovery procedure not implemented yet")),t(!e.valid&&null==e.bfd),e.bfd=P.bfd,P.bfd=null,e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.it_cnt=P.it_cnt,e.some=0,C=p_;P.valid=1,z=1,N=L=0}if(0==N&&(function(e){m(e,e.bbar)}(P),N=1,0==P.phase&&(function(e,t){var n,i,r,o=e.m,a=e.n,l=e.type,s=e.lb,u=e.ub,c=e.coef,_=e.head,d=e.bbar,f=0;for(t*=.9,i=1;i<=o+a;i++)c[i]=0;for(n=1;n<=o;n++)i=_[n],l[i]!=$u&&l[i]!=Qu&&l[i]!=ec||(r=t*(1+S*Math.abs(s[i])),d[n]<s[i]-r&&(c[i]=-1,f++)),l[i]!=Zu&&l[i]!=Qu&&l[i]!=ec||(r=t*(1+S*Math.abs(u[i])),d[n]>u[i]+r&&(c[i]=1,f++));return f}(P,n.tol_bnd)>0?P.phase=1:(w(P),P.phase=2),t(0==k(P,n.tol_bnd)),L=0,A(P,n,1)),k(P,n.tol_bnd)))n.msg_lev>=Mc&&Jl("Warning: numerical instability (primal simplex, phase "+(1==P.phase?"I":"II")+")"),P.phase=0,z=0,R=5;else{switch(t(1==P.phase||2==P.phase),1!=P.phase||function(e,n){var i=e.m;if(Ul)var r=e.n,o=e.type;var a,l,s,u=e.lb,c=e.ub,_=e.coef,d=e.head,f=e.bbar;for(t(1==e.phase),a=1;a<=i;a++)if(l=d[a],Ul&&t(1<=l&&l<=i+r),_[l]<0){if(Ul&&t(o[l]==$u||o[l]==Qu||o[l]==ec),s=n*(1+S*Math.abs(u[l])),f[a]<u[l]-s)return 1}else if(_[l]>0&&(Ul&&t(o[l]==Zu||o[l]==Qu||o[l]==ec),s=n*(1+S*Math.abs(c[l])),f[a]>c[l]+s))return 1;return 0}(P,n.tol_bnd)||(P.phase=2,w(P),L=0,A(P,n,1)),0==L&&(v(P),L=1),n.pricing){case Sc:break;case zc:0==P.refct&&function(e){var n,i,r=e.m,a=e.n,l=e.head,s=e.refsp,u=e.gamma;for(t(0==e.refct),e.refct=1e3,o(s,1,0,r+a),n=1;n<=a;n++)i=l[r+n],s[i]=1,u[n]=1}(P);break;default:t(n!=n)}t(z&&N&&L);if(n.it_lim<Gl&&P.it_cnt-P.it_beg>=n.it_lim){if(1!=N||2==P.phase&&1!=L){1!=N&&(N=0),2==P.phase&&1!=L&&(L=0);continue}switch(A(P,n,1),n.msg_lev>=Ec&&Jl("ITERATION LIMIT EXCEEDED; SEARCH TERMINATED"),P.phase){case 1:j=mc,w(P),v(P);break;case 2:j=pc;break;default:t(P!=P)}return y(P,n.tol_dj),O=0==P.q?pc:mc,E(P,e,j,O,0),C=g_}if(n.tm_lim<Gl&&1e3*s(l(),P.tm_beg)>=n.tm_lim){if(1!=N||2==P.phase&&1!=L){1!=N&&(N=0),2==P.phase&&1!=L&&(L=0);continue}switch(A(P,n,1),n.msg_lev>=Ec&&Jl("TIME LIMIT EXCEEDED; SEARCH TERMINATED"),P.phase){case 1:j=mc,w(P),v(P);break;case 2:j=pc;break;default:t(P!=P)}return y(P,n.tol_dj),O=0==P.q?pc:mc,E(P,e,j,O,0),C=v_}if(A(P,n,0),y(P,n.tol_dj),0==P.q){if(1!=N||1!=L){1!=N&&(N=0),1!=L&&(L=0);continue}switch(A(P,n,1),P.phase){case 1:n.msg_lev>=Ec&&Jl("PROBLEM HAS NO FEASIBLE SOLUTION"),j=hc,w(P),v(P),y(P,n.tol_dj),O=0==P.q?pc:mc;break;case 2:n.msg_lev>=Ec&&Jl("OPTIMAL SOLUTION FOUND"),j=O=pc;break;default:t(P!=P)}return E(P,e,j,O,0),C=0}!function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l=e.head,s=e.q,u=e.tcol_ind,c=e.tcol_vec,_=e.tcol_vec;for(Ul&&t(1<=s&&s<=i),o=l[n+s],Ul&&t(1<=o&&o<=n+i),r=1;r<=n;r++)_[r]=0;if(o<=n)_[o]=-1;else{var d,f,b,p=e.A_ptr,m=e.A_ind,h=e.A_val;for(d=p[o-n],f=p[o-n+1],b=d;b<f;b++)_[m[b]]=h[b]}for(t(e.valid),I(e.bfd,c),a=0,r=1;r<=n;r++)0!=c[r]&&(u[++a]=r);e.tcol_nnz=a}(P),R&&function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l=e.head,s=e.q,c=e.tcol_ind,_=e.tcol_vec,d=e.work3;for(Ul&&t(1<=s&&s<=i),o=l[n+s],Ul&&t(1<=o&&o<=n+i),r=1;r<=n;r++)d[r]=0;if(o<=n)d[o]=-1;else{var f,b,p,m=e.A_ptr,h=e.A_ind,g=e.A_val;for(f=m[o-n],b=m[o-n+1],p=f;p<b;p++)d[h[p]]=g[p]}for(u(e,d,_),a=0,r=1;r<=n;r++)0!=_[r]&&(c[++a]=r);e.tcol_nnz=a}(P),function(e,n){if(Ul)var i=e.m;var r,o,a,l,s,u,c=e.tcol_nnz,_=e.tcol_ind,d=e.tcol_vec;for(l=0,a=1;a<=c;a++)Ul&&(r=_[a],t(1<=r&&r<=i)),u=Math.abs(d[_[a]]),l<u&&(l=u);for(e.tcol_max=l,s=n*(1+.01*l),o=0;o<c;)r=_[c],Math.abs(d[r])<s?c--:(o++,_[c]=_[o],_[o]=r);e.tcol_num=o}(P,n.tol_piv);var U=P.cbar[P.q],B=function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l=e.coef,s=e.head,u=e.q,c=e.tcol_nnz,_=e.tcol_ind,d=e.tcol_vec;for(Ul&&t(1<=u&&u<=i),a=l[s[n+u]],o=1;o<=c;o++)r=_[o],Ul&&t(1<=r&&r<=n),a+=l[s[r]]*d[r];return a}(P);if(t(0!=U),!(Math.abs(U-B)>1e-5*(1+Math.abs(B)))&&(U<0&&B<0||U>0&&B>0)||(n.msg_lev>=Pc&&Jl("d1 = "+U+"; d2 = "+B),1==L&&R)){switch(P.cbar[P.q]=U>0?B>0?B:+Vl:B<0?B:-Vl,n.r_test){case Nc:x(P,0);break;case Lc:x(P,.3*n.tol_bnd);break;default:t(n!=n)}if(0==P.p){if(1!=N||1!=L||!R){1!=N&&(N=0),1!=L&&(L=0),R=1;continue}switch(A(P,n,1),P.phase){case 1:n.msg_lev>=Mc&&Jl("Error: unable to choose basic variable on phase I"),t(!e.valid&&null==e.bfd),e.bfd=P.bfd,P.bfd=null,e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.it_cnt=P.it_cnt,e.some=0,C=p_;break;case 2:n.msg_lev>=Ec&&Jl("PROBLEM HAS UNBOUNDED SOLUTION"),E(P,e,pc,hc,P.head[P.m+P.q]),C=0;break;default:t(P!=P)}return C}if(P.p>0){var q=P.tcol_vec[P.p],H=1e-5*(1+.01*P.tcol_max);if(Math.abs(q)<H&&(n.msg_lev>=Pc&&Jl("piv = "+q+"; eps = "+H),!R)){R=5;continue}}if(P.p>0){var G=P.work4;!function(e,n){var i,r=e.m,o=e.p;for(Ul&&t(1<=o&&o<=r),i=1;i<=r;i++)n[i]=0;n[o]=1,t(e.valid),D(e.bfd,n)}(P,G),R&&function(e,n){var i,r=e.m,o=e.p,a=e.work3;for(Ul&&t(1<=o&&o<=r),i=1;i<=r;i++)a[i]=0;a[o]=1,_(e,a,n)}(P,G),function(e,n){var i=e.m,r=e.n;if(Ul)var o=e.stat;var a,l,s,u,c,_,d,f=e.N_ptr,b=e.N_len,p=e.N_ind,m=e.N_val,h=e.trow_ind,g=e.trow_vec;for(l=1;l<=r;l++)g[l]=0;for(a=1;a<=i;a++)if(0!=(d=n[a]))for(s=f[a],u=s+b[a],c=s;c<u;c++)Ul&&(l=p[c],t(1<=l&&l<=r),t(o[l]!=oc)),g[p[c]]-=d*m[c];for(_=0,l=1;l<=r;l++)0!=g[l]&&(h[++_]=l);e.trow_nnz=_}(P,G)}if(P.p>0){var V=P.tcol_vec[P.p],X=P.trow_vec[P.q];if(t(0!=V),Math.abs(V-X)>1e-8*(1+Math.abs(V))||!(V>0&&X>0||V<0&&X<0)){if(n.msg_lev>=Pc&&Jl("piv1 = "+V+"; piv2 = "+X),1!=z||!R){1!=z&&(z=0),R=5;continue}0==P.trow_vec[P.q]&&(P.trow_nnz++,t(P.trow_nnz<=P.n),P.trow_ind[P.trow_nnz]=P.q),P.trow_vec[P.q]=V}}if(function(e){if(Ul)var n=e.m,i=e.n;var r,o,a=e.bbar,l=e.q,s=e.tcol_nnz,u=e.tcol_ind,c=e.tcol_vec,_=e.p,d=e.teta;if(Ul&&(t(1<=l&&l<=i),t(_<0||1<=_&&_<=n)),_>0&&(a[_]=p(e,l)+d),0!=d)for(o=1;o<=s;o++)(r=u[o])!=_&&(a[r]+=c[r]*d)}(P),N=2,P.p>0&&(function(e){if(Ul)var n=e.n;var i,r,o,a=e.cbar,l=e.q,s=e.trow_nnz,u=e.trow_ind,c=e.trow_vec;for(Ul&&t(1<=l&&l<=n),Ul&&t(0!=c[l]),o=a[l]/=c[l],r=1;r<=s;r++)(i=u[r])!=l&&(a[i]-=c[i]*o)}(P),L=2,1==P.phase)){var K=P.head[P.p];P.cbar[P.q]-=P.coef[K],P.coef[K]=0}if(P.p>0)switch(n.pricing){case Sc:break;case zc:P.refct>0&&function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l,s,u,c,_,d,f,b,p,m,h,g=e.type,v=e.A_ptr,y=e.A_ind,x=e.A_val,w=e.head,k=e.refsp,M=e.gamma,A=e.q,E=e.tcol_nnz,P=e.tcol_ind,j=e.tcol_vec,O=e.p,C=e.trow_nnz,S=e.trow_ind,z=e.trow_vec,N=e.work3;for(Ul&&(t(1<=O&&O<=n),t(1<=A&&A<=i)),t(e.refct>0),e.refct--,_=d=k[w[n+A]]?1:0,r=1;r<=n;r++)N[r]=0;for(l=1;l<=E;l++)r=P[l],k[w[r]]?(N[r]=p=j[r],_+=p*p):N[r]=0;for(t(e.valid),D(e.bfd,N),f=z[A],Ul&&t(0!=f),l=1;l<=C;l++)if((o=S[l])!=A){if(p=z[o]/f,(a=w[n+o])<=n)b=N[a];else for(b=0,s=v[a-n],u=v[a-n+1],c=s;c<u;c++)b-=x[c]*N[y[c]];m=M[o]+p*p*_+2*p*b,h=(k[a]?1:0)+d*p*p,M[o]=m>=h?m:h,M[o]<Vl&&(M[o]=Vl)}g[w[O]]==ec?M[A]=1:(M[A]=_/(f*f),M[A]<Vl&&(M[A]=Vl))}(P);break;default:t(n!=n)}P.p>0&&(C=function(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,l;if(Ul&&(t(1<=n&&n<=r),t(1<=i&&i<=r+o)),i<=r){var s=new Array(2);a=new Array(2),s[1]=i,a[1]=1,t(e.valid),l=F(e.bfd,n,0,1,s,0,a)}else{var u=e.A_ptr,c=e.A_ind,_=e.A_val;a=e.work1;var d,f,b,p;for(d=u[i-r],f=u[i-r+1],p=0,b=d;b<f;b++)a[++p]=-_[b];t(e.valid),l=F(e.bfd,n,0,p,c,d-1,a)}return e.valid=0==l,l}(P,P.p,P.head[P.m+P.q]),0==C?z=2:(P.valid=0,z=0)),P.p>0&&(!function(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,l,s,u=e.N_ptr,c=e.N_len,_=e.N_ind,d=e.N_val;if(Ul&&(t(1<=n&&n<=o),t(1<=i&&i<=r+o)),i<=r){for(l=u[i],a=l;_[a]!=n;a++);s=l+--c[i],Ul&&t(a<=s),_[a]=_[s],d[a]=d[s]}else{var f,b,p,m,h=e.A_ptr,g=e.A_ind;for(b=h[i-r],p=h[i-r+1],m=b;m<p;m++){for(f=g[m],l=u[f],a=l;_[a]!=n;a++);s=l+--c[f],Ul&&t(a<=s),_[a]=_[s],d[a]=d[s]}}}(P,P.q,P.head[P.m+P.q]),P.type[P.head[P.p]]!=ec&&f(P,P.q,P.head[P.p])),function(e){var n=e.m;if(Ul)var i=e.n,r=e.type;var o,a=e.head,l=e.stat,s=e.q,u=e.p,c=e.p_stat;if(Ul&&t(1<=s&&s<=i),u<0)switch(Ul&&(o=a[n+s],t(1<=o&&o<=n+i),t(r[o]==Qu)),l[s]){case nc:l[s]=ic;break;case ic:l[s]=nc;break;default:t(l!=l)}else{if(Ul)switch(t(1<=u&&u<=n),o=a[u],c){case nc:t(r[o]==$u||r[o]==Qu);break;case ic:t(r[o]==Zu||r[o]==Qu);break;case oc:t(r[o]==oc);break;default:t(c!=c)}o=a[u],a[u]=a[n+s],a[n+s]=o,l[s]=c}}(P),P.it_cnt++,R>0&&R--}else 1!=L&&(L=0),R=5}}}function Rl(e,n){function i(e,n,i,o){var a=e.m;if(Ul)var l=e.n;var s,u,c,_,d=e.A_ptr,f=e.A_ind,b=e.A_val,p=e.head;if(Ul&&t(1<=n&&n<=a),s=p[n],Ul&&t(1<=s&&s<=a+l),s<=a)u=1,i[1]=s,o[1]=1;else for(c=d[s-a],u=d[s-a+1]-c,r(i,1,f,c,u),r(o,1,b,c,u),_=1;_<=u;_++)o[_]=-o[_];return u}function a(e,n,i,o){var a=e.m;if(Ul)var l=e.n;var s,u,c,_,d,f,b=e.A_ptr,p=e.A_ind,m=e.A_val,h=e.head;for(r(o,1,n,1,a),s=1;s<=a;s++)if(0!=(f=i[s]))if(u=h[s],Ul&&t(1<=u&&u<=a+l),u<=a)o[u]-=f;else for(c=b[u-a],_=b[u-a+1],d=c;d<_;d++)o[p[d]]+=m[d]*f}function u(e,n,i){var r,o=e.m,l=e.work1,s=e.work1;for(a(e,n,i,l),t(e.valid),I(e.bfd,s),r=1;r<=o;r++)i[r]+=s[r]}function c(e,n,i,r){var o=e.m;if(Ul)var a=e.n;var l,s,u,c,_,d,f=e.A_ptr,b=e.A_ind,p=e.A_val,m=e.head;for(l=1;l<=o;l++){if(s=m[l],Ul&&t(1<=s&&s<=o+a),d=n[l],s<=o)d-=i[s];else for(u=f[s-o],c=f[s-o+1],_=u;_<c;_++)d+=p[_]*i[b[_]];r[l]=d}}function _(e,n,i){var r,o=e.m,a=e.work1,l=e.work1;for(c(e,n,i,a),t(e.valid),D(e.bfd,l),r=1;r<=o;r++)i[r]+=l[r]}function d(e,n){var i=e.m;if(Ul)var r=e.n;var o,a,l=e.lb,s=e.ub,u=e.head,c=e.stat;switch(Ul&&t(1<=n&&n<=r),o=u[i+n],Ul&&t(1<=o&&o<=i+r),c[n]){case nc:a=l[o];break;case ic:a=s[o];break;case rc:a=0;break;case oc:a=l[o];break;default:t(c!=c)}return a}function f(e,n){var i,o,a,l,s,c,_,f=e.m,b=e.n,p=e.A_ptr,m=e.A_ind,h=e.A_val,g=e.head,v=e.work2;for(i=1;i<=f;i++)v[i]=0;for(o=1;o<=b;o++)if(a=g[f+o],Ul&&t(1<=a&&a<=f+b),0!=(_=d(e,o)))if(a<=f)v[a]-=_;else for(l=p[a-f],s=p[a-f+1],c=l;c<s;c++)v[m[c]]+=_*h[c];r(n,1,v,1,f),t(e.valid),I(e.bfd,n),u(e,v,n)}function b(e,n){var i,o=e.m,a=e.coef,l=e.head,s=e.work2;for(i=1;i<=o;i++)s[i]=a[l[i]];r(n,1,s,1,o),t(e.valid),D(e.bfd,n),_(e,s,n)}function p(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,l,s=e.coef,u=e.head;if(Ul&&t(1<=i&&i<=o),a=u[r+i],Ul&&t(1<=a&&a<=r+o),l=s[a],a<=r)l-=n[a];else{var c,_,d,f=e.A_ptr,b=e.A_ind,p=e.A_val;for(c=f[a-r],_=f[a-r+1],d=c;d<_;d++)l+=p[d]*n[b[d]]}return l}function m(e){f(e,e.bbar)}function h(e){if(Ul)var n=e.m;var i=e.n;if(Ul)var r=e.head;var o,a=e.cbar,l=e.work3;if(Ul)var s;for(b(e,l),o=1;o<=i;o++)Ul&&(s=r[n+o],t(1<=s&&s<=n+i)),a[o]=p(e,l,o)}function g(e,t){var n,i,r,o,a,l,s,u=e.m,c=e.n,_=e.A_ptr,d=e.A_ind,f=e.A_val,b=e.head,p=e.stat,m=e.trow_ind,h=e.trow_vec;for(l=0,n=1;n<=c;n++)if(p[n]!=oc){if((i=b[u+n])<=u)s=-t[i];else for(r=_[i-u],o=_[i-u+1],s=0,a=r;a<o;a++)s+=t[d[a]]*f[a];0!=s&&(m[++l]=n),h[n]=s}else h[n]=0;e.trow_nnz=l}function v(e,t){var n,i,r,o,a,l,s,u=e.m,c=e.n,_=e.AT_ptr,d=e.AT_ind,f=e.AT_val,b=e.bind,p=e.stat,m=e.trow_ind,h=e.trow_vec;for(i=1;i<=c;i++)h[i]=0;for(n=1;n<=u;n++)if(0!=(s=t[n]))for(i=b[n]-u,i>=1&&p[i]!=oc&&(h[i]-=s),r=_[n],o=_[n+1],a=r;a<o;a++)(i=b[u+d[a]]-u)>=1&&p[i]!=oc&&(h[i]+=s*f[a]);for(l=0,i=1;i<=c;i++)0!=h[i]&&(m[++l]=i);e.trow_nnz=l}function y(e,n){function i(){e.q=_,e.new_dq=b*m}if(Ul)var r=e.m,o=e.n;var a=e.stat,l=e.cbar;if(Ul)var s=e.p;var u,c,_,d,f,b,p,m,h,g=e.delta,v=e.trow_ind,y=e.trow_vec,x=e.trow_num;for(Ul&&t(1<=s&&s<=r),Ul&&t(0!=g),b=g>0?1:-1,_=0,m=Bl,f=0,c=1;c<=x;c++){if(u=v[c],Ul&&t(1<=u&&u<=o),d=b*y[u],Ul&&t(0!=d),d>0){if(a[u]!=nc&&a[u]!=rc)continue;p=(l[u]+n)/d}else{if(a[u]!=ic&&a[u]!=rc)continue;p=(l[u]-n)/d}p<0&&(p=0),(m>p||m==p&&f<Math.abs(d))&&(_=u,m=p,f=Math.abs(d))}if(0==n)return i();if(0==_)return i();if(0==m)return i();for(h=m,_=0,m=Bl,f=0,c=1;c<=x;c++){if(u=v[c],Ul&&t(1<=u&&u<=o),d=b*y[u],Ul&&t(0!=d),d>0){if(a[u]!=nc&&a[u]!=rc)continue;p=l[u]/d}else{if(a[u]!=ic&&a[u]!=rc)continue;p=l[u]/d}p<0&&(p=0),p<=h&&f<Math.abs(d)&&(_=u,m=p,f=Math.abs(d))}t(0!=_),i()}function x(e,n){var i,r,o=e.m,a=e.n,l=e.orig_type,s=e.head,u=e.cbar;for(i=1;i<=a;i++){if(r=s[o+i],Ul&&t(1<=r&&r<=o+a),u[i]<-n&&(l[r]==$u||l[r]==Ju))return 1;if(u[i]>+n&&(l[r]==Zu||l[r]==Ju))return 1}return 0}function w(e){var n,i,o=e.m,a=e.n,l=e.type,s=e.lb,u=e.ub,c=e.orig_type,_=e.orig_lb,d=e.orig_ub,f=e.head,b=e.stat,p=e.cbar;for(r(l,1,c,1,o+a),r(s,1,_,1,o+a),r(u,1,d,1,o+a),n=1;n<=a;n++)switch(i=f[o+n],Ul&&t(1<=i&&i<=o+a),l[i]){case Ju:b[n]=rc;break;case $u:b[n]=nc;break;case Zu:b[n]=ic;break;case Qu:p[n]>=+Vl?b[n]=nc:p[n]<=-Vl?b[n]=ic:Math.abs(s[i])<=Math.abs(u[i])?b[n]=nc:b[n]=ic;break;case ec:b[n]=oc;break;default:t(l!=l)}}function k(e,t){var n,i=e.n,r=e.stat,o=e.cbar;for(n=1;n<=i;n++){if(o[n]<-t&&(r[n]==nc||r[n]==rc))return 1;if(o[n]>+t&&(r[n]==ic||r[n]==rc))return 1}return 0}function M(e){var n,i,r,o,a=e.m,l=e.n,s=e.obj,u=e.head,c=e.bbar;for(o=s[0],n=1;n<=a;n++)r=u[n],Ul&&t(1<=r&&r<=a+l),r>a&&(o+=s[r-a]*c[n]);for(i=1;i<=l;i++)r=u[a+i],Ul&&t(1<=r&&r<=a+l),r>a&&(o+=s[r-a]*d(e,i));return o}function A(e,t,n){var i,r,o,a,u=e.m,c=e.n,_=e.coef,f=e.orig_type,b=e.head,p=e.stat,m=e.phase,h=e.bbar,g=e.cbar;if(!(t.msg_lev<Ac)&&!(t.out_dly>0&&1e3*s(l(),e.tm_beg)<t.out_dly)&&e.it_cnt!=e.it_dpy&&(n||e.it_cnt%t.out_frq==0)){if(a=0,1==m){for(i=1;i<=u;i++)a-=_[b[i]]*h[i];for(r=1;r<=c;r++)a-=_[b[u+r]]*d(e,r)}else for(r=1;r<=c;r++)g[r]<0&&(p[r]!=nc&&p[r]!=rc||(a-=g[r])),g[r]>0&&(p[r]!=ic&&p[r]!=rc||(a+=g[r]));for(o=0,i=1;i<=u;i++)f[b[i]]==ec&&o++;Jl(1==e.phase?" "+e.it_cnt+":  infeas = "+a+" ("+o+")":"|"+e.it_cnt+": obj = "+M(e)+"  infeas = "+a+" ("+o+")"),e.it_dpy=e.it_cnt}}function E(e,n,i,o,a){var l,s,u,c,_,d=e.m,f=e.n,b=e.zeta,p=e.head,m=e.stat,h=e.bbar,g=e.cbar;for(Ul&&(t(n.m==d),t(n.n==f),t(!n.valid&&null==n.bfd),t(e.valid&&null!=e.bfd)),n.valid=1,e.valid=0,n.bfd=e.bfd,e.bfd=null,r(n.head,1,p,1,d),n.pbs_stat=i,n.dbs_stat=o,n.obj_val=M(e),n.it_cnt=e.it_cnt,n.some=a,l=1;l<=d;l++)u=p[l],Ul&&t(1<=u&&u<=d+f),u<=d?(_=n.row[u],_.stat=tc,_.bind=l,_.prim=h[l]/_.rii,_.dual=0):(c=n.col[u-d],c.stat=tc,c.bind=l,c.prim=h[l]*c.sjj,c.dual=0);for(s=1;s<=f;s++)if(u=p[d+s],Ul&&t(1<=u&&u<=d+f),u<=d){switch(_=n.row[u],_.stat=m[s],_.bind=0,m[s]){case nc:_.prim=_.lb;break;case ic:_.prim=_.ub;break;case rc:_.prim=0;break;case oc:_.prim=_.lb;break;default:t(m!=m)}_.dual=g[s]*_.rii/b}else{switch(c=n.col[u-d],c.stat=m[s],c.bind=0,m[s]){case nc:c.prim=c.lb;break;case ic:c.prim=c.ub;break;case rc:c.prim=0;break;case oc:c.prim=c.lb;break;default:t(m!=m)}c.dual=g[s]/c.sjj/b}}var P=.1;this.chrome_workaround_1=function(e,n){var i,r,o,a=e.A_ptr,l=e.A_ind,s=e.A_val,u=e.n;for(r=1,o=1;o<=u;o++)for(a[o]=r,i=n.col[o].ptr;null!=i;i=i.c_next)l[r]=i.row.i,s[r]=i.row.rii*i.val*i.col.sjj,r++;a[u+1]=r,t(r-1==n.nnz)},this.chrome_workaround_2=function(e,n){var i,r,o,a=e.AT_ptr,l=e.AT_ind,s=e.AT_val,u=e.m;for(i=1,r=1;r<=u;r++)for(a[r]=i,o=n.row[r].ptr;null!=o;o=o.r_next)l[i]=o.col.j,s[i]=o.row.rii*o.val*o.col.sjj,i++;a[u+1]=i,t(i-1==n.nnz)};var j,O,C,S,z=2,N=0,L=0,R=0;for(j=function(e){var n=e.m,i=e.n,r=e.nnz,o={};return t(n>0&&i>0),o.m=n,o.n=i,o.type=new Int8Array(1+n+i),o.lb=new Float64Array(1+n+i),o.ub=new Float64Array(1+n+i),o.coef=new Float64Array(1+n+i),o.orig_type=new Int8Array(1+n+i),o.orig_lb=new Float64Array(1+n+i),o.orig_ub=new Float64Array(1+n+i),o.obj=new Float64Array(1+i),o.A_ptr=new Int32Array(1+i+1),o.A_ind=new Int32Array(1+r),o.A_val=new Float64Array(1+r),o.AT_ptr=new Int32Array(1+n+1),o.AT_ind=new Int32Array(1+r),o.AT_val=new Float64Array(1+r),o.head=new Int32Array(1+n+i),o.bind=new Int32Array(1+n+i),o.stat=new Int8Array(1+i),o.bbar=new Float64Array(1+n),o.cbar=new Float64Array(1+i),o.refsp=new Int8Array(1+n+i),o.gamma=new Float64Array(1+n),o.trow_ind=new Int32Array(1+i),o.trow_vec=new Float64Array(1+i),o.tcol_ind=new Int32Array(1+n),o.tcol_vec=new Float64Array(1+n),o.work1=new Float64Array(1+n),o.work2=new Float64Array(1+n),o.work3=new Float64Array(1+n),o.work4=new Float64Array(1+n),o}(e),function(e,n){var i,a,s,u,c,_,d=e.m,f=e.n,b=e.type,p=e.lb,m=e.ub,h=e.coef,g=e.orig_type,v=e.orig_lb,y=e.orig_ub,x=e.obj,w=e.head,k=e.bind,M=e.stat,A=e.refsp,E=e.gamma;for(i=1;i<=d;i++)c=n.row[i],b[i]=c.type,p[i]=c.lb*c.rii,m[i]=c.ub*c.rii,h[i]=0;for(a=1;a<=f;a++)_=n.col[a],b[d+a]=_.type,p[d+a]=_.lb/_.sjj,m[d+a]=_.ub/_.sjj,h[d+a]=_.coef*_.sjj;for(r(g,1,b,1,d+f),r(v,1,p,1,d+f),r(y,1,m,1,d+f),x[0]=n.c0,r(x,1,h,d+1,f),u=0,a=1;a<=f;a++)u<Math.abs(x[a])&&(u=Math.abs(x[a]));switch(0==u&&(u=1),n.dir){case Vu:e.zeta=1/u;break;case Xu:e.zeta=-1/u;break;default:t(n!=n)}for(Math.abs(e.zeta)<1&&(e.zeta*=1e3),a=1;a<=f;a++)h[d+a]*=e.zeta;for(chrome_workaround_1(e,n),chrome_workaround_2(e,n),t(n.valid),r(w,1,n.head,1,d),s=0,i=1;i<=d;i++)c=n.row[i],c.stat!=tc&&(s++,t(s<=f),w[d+s]=i,M[s]=c.stat);for(a=1;a<=f;a++)_=n.col[a],_.stat!=tc&&(s++,t(s<=f),w[d+s]=d+a,M[s]=_.stat);for(t(s==f),s=1;s<=d+f;s++)k[w[s]]=s;for(e.valid=1,n.valid=0,e.bfd=n.bfd,n.bfd=null,e.phase=0,e.tm_beg=l(),e.it_beg=e.it_cnt=n.it_cnt,e.it_dpy=-1,e.refct=0,o(A,1,0,d+f),i=1;i<=d;i++)E[i]=1}(j,e),n.msg_lev>=Pc&&Jl("Objective scale factor = "+j.zeta);;){if(0==z){if(0!=(S=function(e){var t=T(e.bfd,e.m,null,i,e);return e.valid=0==t,t}(j)))return n.msg_lev>=Mc&&(Jl("Error: unable to factorize the basis matrix ("+S+")"),Jl("Sorry, basis recovery procedure not implemented yet")),t(!e.valid&&null==e.bfd),e.bfd=j.bfd,j.bfd=null,e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.it_cnt=j.it_cnt,e.some=0,S=p_;j.valid=1,z=1,N=L=0}if(0!=L||(h(j),L=1,0==j.phase&&(0!=x(j,.9*n.tol_dj)?(j.phase=1,function(e){var n,i,r=e.m,o=e.n,a=e.type,l=e.lb,s=e.ub,u=e.orig_type,c=e.head,_=e.stat,d=e.cbar;for(i=1;i<=r+o;i++)switch(u[i]){case Ju:a[i]=Qu,l[i]=-1e3,s[i]=1e3;break;case $u:a[i]=Qu,l[i]=0,s[i]=1;break;case Zu:a[i]=Qu,l[i]=-1,s[i]=0;break;case Qu:case ec:a[i]=ec,l[i]=s[i]=0;break;default:t(u!=u)}for(n=1;n<=o;n++)i=c[r+n],Ul&&t(1<=i&&i<=r+o),a[i]==ec?_[n]=oc:d[n]>=0?_[n]=nc:_[n]=ic}(j)):(j.phase=2,w(j)),t(0==k(j,n.tol_dj)),j.refct=0,N=0),0==k(j,n.tol_dj))){switch(t(1==j.phase||2==j.phase),1==j.phase&&0==x(j,n.tol_dj)&&(A(j,n,1),j.phase=2,1!=L&&(h(j),L=1),w(j),j.refct=0,N=0),0==N&&(m(j),2==j.phase&&(j.bbar[0]=M(j)),N=1),n.pricing){case Sc:break;case zc:0==j.refct&&function(e){var n,i,r=e.m,a=e.n,l=e.head,s=e.refsp,u=e.gamma;for(t(0==e.refct),e.refct=1e3,o(s,1,0,r+a),n=1;n<=r;n++)i=l[n],s[i]=1,u[n]=1}(j);break;default:t(n!=n)}t(z&&N&&L);if(2==j.phase&&j.zeta<0&&n.obj_ll>-Bl&&j.bbar[0]<=n.obj_ll){if(1!=N||1!=L){1!=N&&(N=0),1!=L&&(L=0);continue}return A(j,n,1),n.msg_lev>=Ec&&Jl("OBJECTIVE LOWER LIMIT REACHED; SEARCH TERMINATED"),E(j,e,mc,pc,0),S=m_}if(2==j.phase&&j.zeta>0&&n.obj_ul<+Bl&&j.bbar[0]>=n.obj_ul){if(1!=N||1!=L){1!=N&&(N=0),1!=L&&(L=0);continue}return A(j,n,1),n.msg_lev>=Ec&&Jl("OBJECTIVE UPPER LIMIT REACHED; SEARCH TERMINATED"),E(j,e,mc,pc,0),S=h_}if(n.it_lim<Gl&&j.it_cnt-j.it_beg>=n.it_lim){if(2==j.phase&&1!=N||1!=L){2==j.phase&&1!=N&&(N=0),1!=L&&(L=0);continue}switch(A(j,n,1),n.msg_lev>=Ec&&Jl("ITERATION LIMIT EXCEEDED; SEARCH TERMINATED"),j.phase){case 1:C=mc,w(j),m(j);break;case 2:C=pc;break;default:t(j!=j)}return E(j,e,mc,C,0),S=g_}if(n.tm_lim<Gl&&1e3*s(l(),j.tm_beg)>=n.tm_lim){if(2==j.phase&&1!=N||1!=L){2==j.phase&&1!=N&&(N=0),1!=L&&(L=0);continue}switch(A(j,n,1),n.msg_lev>=Ec&&Jl("TIME LIMIT EXCEEDED; SEARCH TERMINATED"),j.phase){case 1:C=mc,w(j),m(j);break;case 2:C=pc;break;default:t(j!=j)}return E(j,e,mc,C,0),S=v_}if(A(j,n,0),function(e,n){var i=e.m;if(Ul)var r=e.n;var o,a,l,s,u,c,_,d,f=e.type,b=e.lb,p=e.ub,m=e.head,h=e.bbar,g=e.gamma;for(l=0,s=0,u=0,o=1;o<=i;o++)a=m[o],Ul&&t(1<=a&&a<=i+r),_=0,f[a]!=$u&&f[a]!=Qu&&f[a]!=ec||(c=n*(1+P*Math.abs(b[a])),h[o]<b[a]-c&&(_=b[a]-h[o])),f[a]!=Zu&&f[a]!=Qu&&f[a]!=ec||(c=n*(1+P*Math.abs(p[a])),h[o]>p[a]+c&&(_=p[a]-h[o])),0!=_&&(Ul&&t(g[o]>=0),d=g[o],d<Vl&&(d=Vl),d=_*_/d,u<d&&(l=o,s=_,u=d));e.p=l,e.delta=s}(j,n.tol_bnd),0==j.p){if(1!=N||1!=L){1!=N&&(N=0),1!=L&&(L=0);continue}switch(A(j,n,1),j.phase){case 1:n.msg_lev>=Ec&&Jl("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"),w(j),m(j),O=mc,C=hc;break;case 2:n.msg_lev>=Ec&&Jl("OPTIMAL SOLUTION FOUND"),O=C=pc;break;default:t(j!=j)}return E(j,e,O,C,0),S=0}var U=j.work4;switch(function(e,n){var i,r=e.m,o=e.p;for(Ul&&t(1<=o&&o<=r),i=1;i<=r;i++)n[i]=0;n[o]=1,t(e.valid),D(e.bfd,U)}(j,U),R&&function(e,n){var i,r=e.m,o=e.p,a=e.work3;for(Ul&&t(1<=o&&o<=r),i=1;i<=r;i++)a[i]=0;a[o]=1,_(e,a,n)}(j,U),function(e,t){var n,i,r,o=e.m;for(i=0,n=1;n<=o;n++)0!=t[n]&&i++;r=i/o,r>=.2?g(e,t):v(e,t)}(j,U),function(e,n){if(Ul)var i=e.n,r=e.stat;var o,a,l,s,u,c,_=e.trow_nnz,d=e.trow_ind,f=e.trow_vec;for(s=0,l=1;l<=_;l++)Ul&&(o=d[l],t(1<=o&&o<=i),t(r[o]!=oc)),c=Math.abs(f[d[l]]),s<c&&(s=c);for(e.trow_max=s,u=n*(1+.01*s),a=0;a<_;)o=d[_],Math.abs(f[o])<u?_--:(a++,d[_]=d[a],d[a]=o);e.trow_num=a}(j,n.tol_bnd),n.r_test){case Nc:y(j,0);break;case Lc:y(j,.3*n.tol_dj);break;default:t(n!=n)}if(0==j.q){if(1!=N||1!=L||!R){1!=N&&(N=0),1!=L&&(L=0),R=1;continue}switch(A(j,n,1),j.phase){case 1:n.msg_lev>=Mc&&Jl("Error: unable to choose basic variable on phase I"),t(!e.valid&&null==e.bfd),e.bfd=j.bfd,j.bfd=null,e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.it_cnt=j.it_cnt,e.some=0,S=p_;break;case 2:n.msg_lev>=Ec&&Jl("PROBLEM HAS NO FEASIBLE SOLUTION"),E(j,e,hc,pc,j.head[j.p]),S=0;break;default:t(j!=j)}return S}var B=j.trow_vec[j.q],q=1e-5*(1+.01*j.trow_max);if(Math.abs(B)<q&&(n.msg_lev>=Pc&&Jl("piv = "+B+"; eps = "+q),!R))R=5;else{!function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l=e.head,s=e.q,u=e.tcol_ind,c=e.tcol_vec,_=e.tcol_vec;for(Ul&&t(1<=s&&s<=i),o=l[n+s],Ul&&t(1<=o&&o<=n+i),r=1;r<=n;r++)_[r]=0;if(o<=n)_[o]=-1;else{var d,f,b,p=e.A_ptr,m=e.A_ind,h=e.A_val;for(d=p[o-n],f=p[o-n+1],b=d;b<f;b++)_[m[b]]=h[b]}for(t(e.valid),I(e.bfd,c),a=0,r=1;r<=n;r++)0!=c[r]&&(u[++a]=r);e.tcol_nnz=a}(j),R&&function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l=e.head,s=e.q,c=e.tcol_ind,_=e.tcol_vec,d=e.work3;for(Ul&&t(1<=s&&s<=i),o=l[n+s],Ul&&t(1<=o&&o<=n+i),r=1;r<=n;r++)d[r]=0;if(o<=n)d[o]=-1;else{var f,b,p,m=e.A_ptr,h=e.A_ind,g=e.A_val;for(f=m[o-n],b=m[o-n+1],p=f;p<b;p++)d[h[p]]=g[p]}for(u(e,d,_),a=0,r=1;r<=n;r++)0!=_[r]&&(c[++a]=r);e.tcol_nnz=a}(j);var H=j.tcol_vec[j.p],G=j.trow_vec[j.q];if(t(0!=H),Math.abs(H-G)>1e-8*(1+Math.abs(H))||!(H>0&&G>0||H<0&&G<0)){if(n.msg_lev>=Pc&&Jl("piv1 = "+H+"; piv2 = "+G),1!=z||!R){1!=z&&(z=0),R=5;continue}0==j.tcol_vec[j.p]&&(j.tcol_nnz++,t(j.tcol_nnz<=j.m),j.tcol_ind[j.tcol_nnz]=j.p),j.tcol_vec[j.p]=G}switch(function(e){if(Ul)var n=e.m,i=e.n;var r,o,a,l=e.bbar,s=e.p,u=e.delta,c=e.q,_=e.tcol_nnz,f=e.tcol_ind,b=e.tcol_vec;if(Ul&&(t(1<=s&&s<=n),t(1<=c&&c<=i),t(0!=b[s])),a=u/b[s],l[s]=d(e,c)+a,0!=a)for(o=1;o<=_;o++)r=f[o],Ul&&t(1<=r&&r<=n),r!=s&&(l[r]+=b[r]*a)}(j),2==j.phase&&(j.bbar[0]+=j.cbar[j.q]/j.zeta*(j.delta/j.tcol_vec[j.p])),N=2,function(e){if(Ul)var n=e.n;var i,r,o=e.cbar,a=e.trow_nnz,l=e.trow_ind,s=e.trow_vec,u=e.q,c=e.new_dq;if(Ul&&t(1<=u&&u<=n),o[u]=c,0!=c)for(r=1;r<=a;r++)i=l[r],Ul&&t(1<=i&&i<=n),i!=u&&(o[i]-=s[i]*c)}(j),L=2,n.pricing){case Sc:break;case zc:j.refct>0&&function(e){var n=e.m;if(Ul)var i=e.n;var r,o,a,l,s,u,c,_,d,f,b=e.type,p=e.head,m=e.refsp,h=e.gamma,g=e.p,v=e.trow_nnz,y=e.trow_ind,x=e.trow_vec,w=e.q,k=e.tcol_nnz,M=e.tcol_ind,A=e.tcol_vec,E=e.work3;for(Ul&&(t(1<=g&&g<=n),t(1<=w&&w<=i)),t(e.refct>0),e.refct--,Ul&&t(b[p[g]]!=Ju),s=u=m[p[g]]?1:0,r=1;r<=n;r++)E[r]=0;for(l=1;l<=v;l++)if(o=y[l],Ul&&t(1<=o&&o<=i),a=p[n+o],Ul&&(t(1<=a&&a<=n+i),t(b[a]!=ec)),m[a])if(_=x[o],s+=_*_,a<=n)E[a]+=_;else{var P,j,O,C=e.A_ptr,S=e.A_ind,z=e.A_val;for(P=C[a-n],j=C[a-n+1],O=P;O<j;O++)E[S[O]]-=_*z[O]}for(t(e.valid),I(e.bfd,E),c=A[g],Ul&&t(0!=c),l=1;l<=k;l++)r=M[l],Ul&&t(1<=r&&r<=n),a=p[r],Ul&&t(1<=a&&a<=n+i),r!=g&&(b[p[r]]!=Ju?(_=A[r]/c,d=h[r]+_*_*s+2*_*E[r],f=(m[a]?1:0)+u*_*_,h[r]=d>=f?d:f,h[r]<Vl&&(h[r]=Vl)):Ul&&t(1==h[r]));if(b[p[n+w]]==Ju?h[g]=1:(h[g]=s/(c*c),h[g]<Vl&&(h[g]=Vl)),a=p[g],b[a]==ec&&m[a])for(m[a]=0,l=1;l<=k;l++){if((r=M[l])==g){if(b[p[n+w]]==Ju)continue;_=1/A[g]}else{if(b[p[r]]==Ju)continue;_=A[r]/A[g]}h[r]-=_*_,h[r]<Vl&&(h[r]=Vl)}}(j);break;default:t(n!=n)}S=function(e,n,i){var r=e.m;if(Ul)var o=e.n;var a,l;if(Ul&&(t(1<=n&&n<=r),t(1<=i&&i<=r+o)),i<=r){var s=new Array(2);l=new Array(2),s[1]=i,l[1]=1,t(e.valid),a=F(e.bfd,n,0,1,s,0,l)}else{var u=e.A_ptr,c=e.A_ind,_=e.A_val;l=e.work1;var d,f,b,p;for(d=u[i-r],f=u[i-r+1],p=0,b=d;b<f;b++)l[++p]=-_[b];t(e.valid),a=F(e.bfd,n,0,p,c,d-1,l)}return e.valid=0==a,a}(j,j.p,j.head[j.m+j.q]),0==S?z=2:(j.valid=0,z=0),function(e){var n=e.m;if(Ul)var i=e.n;var r,o=e.type,a=e.head,l=e.bind,s=e.stat,u=e.p,c=e.delta,_=e.q;Ul&&(t(1<=u&&u<=n),t(1<=_&&_<=i)),r=a[u],a[u]=a[n+_],a[n+_]=r,l[a[u]]=u,l[a[n+_]]=n+_,o[r]==ec?s[_]=oc:c>0?(Ul&&t(o[r]==$u||o[r]==Qu),s[_]=nc):(Ul&&t(o[r]==Zu||o[r]==Qu),s[_]=ic)}(j),j.it_cnt++,R>0&&R--}}else{if(n.msg_lev>=Mc&&Jl("Warning: numerical instability (dual simplex, phase "+(1==j.phase?"I":"II")+")"),n.meth==Oc)return E(j,e,bc,bc,0),S=p_;j.phase=0,z=0,R=5}}}var Ul=!1,Bl=Number.MAX_VALUE,ql=Number.MIN_VALUE,Hl=16,Gl=2147483647,Vl=2.220446049250313e-16,Xl=1,Kl=1e8,Wl=1e8,Yl=-1,Jl=function(e){};e.glp_get_print_func=function(){return Jl},e.glp_set_print_func=function(e){Jl=e};var $l={},Zl=e.glp_version=function(){return Hu+"."+Gu},Ql=3621377730,es=e.glp_create_prob=function(){var e={};return v(e),e},ts=e.glp_set_prob_name=function(e,t){var i=e.tree;null!=i&&0!=i.reason&&n("glp_set_prob_name: operation not allowed"),e.name=t},ns=e.glp_set_obj_name=function(e,t){var i=e.tree;null!=i&&0!=i.reason&&n("glp_set_obj_name: operation not allowed"),e.obj=t},is=e.glp_set_obj_dir=function(e,t){var i=e.tree;null!=i&&0!=i.reason&&n("glp_set_obj_dir: operation not allowed"),t!=Vu&&t!=Xu&&n("glp_set_obj_dir: dir = "+t+"; invalid direction flag"),e.dir=t},rs=e.glp_add_rows=function(e,i){var r,o=e.tree;i<1&&n("glp_add_rows: nrs = "+i+"; invalid number of rows"),i>Kl-e.m&&n("glp_add_rows: nrs = "+i+"; too many rows");var a=e.m+i;if(e.m_max<a){for(;e.m_max<a;)e.m_max+=e.m_max,t(e.m_max>0);e.row.length=1+e.m_max,e.head=new Int32Array(1+e.m_max)}for(var l=e.m+1;l<=a;l++){if(e.row[l]=r={},r.i=l,r.name=null,r.node=null,r.level=0,r.origin=0,r.klass=0,null!=o)switch(o.reason){case 0:break;case t_:t(null!=o.curr),r.level=o.curr.level,r.origin=Kc;break;case r_:t(null!=o.curr),r.level=o.curr.level,r.origin=Wc;break;default:t(o!=o)}r.type=Ju,r.lb=r.ub=0,r.ptr=null,r.rii=1,r.stat=tc,r.bind=0,r.prim=r.dual=0,r.pval=r.dval=0,r.mipx=0}return e.m=a,e.valid=0,null!=o&&0!=o.reason&&(o.reopt=1),a-i+1},os=e.glp_add_cols=function(e,i){var r,o=e.tree;null!=o&&0!=o.reason&&n("glp_add_cols: operation not allowed"),i<1&&n("glp_add_cols: ncs = "+i+"; invalid number of columns"),i>Wl-e.n&&n("glp_add_cols: ncs = "+i+"; too many columns");var a=e.n+i;if(e.n_max<a){for(;e.n_max<a;)e.n_max+=e.n_max,t(e.n_max>0);e.col.length=1+e.n_max}for(var l=e.n+1;l<=a;l++)e.col[l]=r={},r.j=l,r.name=null,r.node=null,r.kind=Ku,r.type=ec,r.lb=r.ub=0,r.coef=0,r.ptr=null,r.sjj=1,r.stat=oc,r.bind=0,r.prim=r.dual=0,r.pval=r.dval=0,r.mipx=0;return e.n=a,a-i+1},as=e.glp_set_row_name=function(e,i,r){var o=e.tree;1<=i&&i<=e.m||n("glp_set_row_name: i = "+i+"; row number out of range");var a=e.row[i];null!=o&&0!=o.reason&&(t(null!=o.curr),t(a.level==o.curr.level)),null!=a.name&&(delete e.r_tree[a.name],a.name=null),null!=r&&(a.name=r,e.r_tree[a.name]=a)},ls=e.glp_set_col_name=function(e,t,i){var r=e.tree;null!=r&&0!=r.reason&&n("glp_set_col_name: operation not allowed"),1<=t&&t<=e.n||n("glp_set_col_name: j = "+t+"; column number out of range");var o=e.col[t];null!=o.name&&(delete e.c_tree[o.name],o.name=null),null!=i&&(o.name=i,e.c_tree[o.name]=o)},ss=e.glp_set_row_bnds=function(e,t,i,r,o){1<=t&&t<=e.m||n("glp_set_row_bnds: i = "+t+"; row number out of range");var a=e.row[t];switch(a.type=i,i){case Ju:a.lb=a.ub=0,a.stat!=tc&&(a.stat=rc);break;case $u:a.lb=r,a.ub=0,a.stat!=tc&&(a.stat=nc);break;case Zu:a.lb=0,a.ub=o,a.stat!=tc&&(a.stat=ic);break;case Qu:a.lb=r,a.ub=o,a.stat!=tc&&a.stat!=nc&&a.stat!=ic&&(a.stat=Math.abs(r)<=Math.abs(o)?nc:ic);break;case ec:a.lb=a.ub=r,a.stat!=tc&&(a.stat=oc);break;default:n("glp_set_row_bnds: i = "+t+"; type = "+i+"; invalid row type")}},us=e.glp_set_col_bnds=function(e,t,i,r,o){1<=t&&t<=e.n||n("glp_set_col_bnds: j = "+t+"; column number out of range");var a=e.col[t];switch(a.type=i,i){case Ju:a.lb=a.ub=0,a.stat!=tc&&(a.stat=rc);break;case $u:a.lb=r,a.ub=0,a.stat!=tc&&(a.stat=nc);break;case Zu:a.lb=0,a.ub=o,a.stat!=tc&&(a.stat=ic);break;case Qu:a.lb=r,a.ub=o,a.stat!=tc&&a.stat!=nc&&a.stat!=ic&&(a.stat=Math.abs(r)<=Math.abs(o)?nc:ic);break;case ec:a.lb=a.ub=r,a.stat!=tc&&(a.stat=oc);break;default:n("glp_set_col_bnds: j = "+t+"; type = "+i+"; invalid column type")}},cs=e.glp_set_obj_coef=function(e,t,i){var r=e.tree;null!=r&&0!=r.reason&&n("glp_set_obj_coef: operation not allowed"),0<=t&&t<=e.n||n("glp_set_obj_coef: j = "+t+"; column number out of range"),0==t?e.c0=i:e.col[t].coef=i},_s=e.glp_set_mat_row=function(e,i,r,o,a){var l,s,u,c,_,d=e.tree;1<=i&&i<=e.m||n("glp_set_mat_row: i = "+i+"; row number out of range");var f=e.row[i];for(null!=d&&0!=d.reason&&(t(null!=d.curr),t(f.level==d.curr.level));null!=f.ptr;)s=f.ptr,f.ptr=s.r_next,l=s.col,null==s.c_prev?l.ptr=s.c_next:s.c_prev.c_next=s.c_next,null!=s.c_next&&(s.c_next.c_prev=s.c_prev),e.nnz--,l.stat==tc&&(e.valid=0);for(0<=r&&r<=e.n||n("glp_set_mat_row: i = "+i+"; len = "+r+"; invalid row length "),r>5e8-e.nnz&&n("glp_set_mat_row: i = "+i+"; len = "+r+"; too many constraint coefficients"),_=1;_<=r;_++)c=o[_],1<=c&&c<=e.n||n("glp_set_mat_row: i = "+i+"; ind["+_+"] = "+c+"; column index out of range"),l=e.col[c],null!=l.ptr&&l.ptr.row.i==i&&n("glp_set_mat_row: i = "+i+"; ind["+_+"] = "+c+"; duplicate column indices not allowed"),s={},e.nnz++,s.row=f,s.col=l,s.val=a[_],s.r_prev=null,s.r_next=f.ptr,s.c_prev=null,s.c_next=l.ptr,null!=s.r_next&&(s.r_next.r_prev=s),null!=s.c_next&&(s.c_next.c_prev=s),f.ptr=l.ptr=s,l.stat==tc&&0!=s.val&&(e.valid=0);for(s=f.ptr;null!=s;s=u)u=s.r_next,0==s.val&&(null==s.r_prev?f.ptr=u:s.r_prev.r_next=u,null!=u&&(u.r_prev=s.r_prev),t(null==s.c_prev),s.col.ptr=s.c_next,null!=s.c_next&&(s.c_next.c_prev=null),e.nnz--)},ds=e.glp_set_mat_col=function(e,i,r,o,a){var l,s,u,c,_,d=e.tree;null!=d&&0!=d.reason&&n("glp_set_mat_col: operation not allowed"),1<=i&&i<=e.n||n("glp_set_mat_col: j = "+i+"; column number out of range");for(var f=e.col[i];null!=f.ptr;)s=f.ptr,f.ptr=s.c_next,l=s.row,null==s.r_prev?l.ptr=s.r_next:s.r_prev.r_next=s.r_next,null!=s.r_next&&(s.r_next.r_prev=s.r_prev),e.nnz--;for(0<=r&&r<=e.m||n("glp_set_mat_col: j = "+i+"; len = "+r+"; invalid column length"),r>5e8-e.nnz&&n("glp_set_mat_col: j = "+i+"; len = "+r+"; too many constraint coefficients"),_=1;_<=r;_++)c=o[_],1<=c&&c<=e.m||n("glp_set_mat_col: j = "+i+"; ind["+_+"] = "+c+"; row index out of range"),l=e.row[c],null!=l.ptr&&l.ptr.col.j==i&&n("glp_set_mat_col: j = "+i+"; ind["+_+"] = "+c+"; duplicate row indices not allowed"),s={},e.nnz++,s.row=l,s.col=f,s.val=a[_],s.r_prev=null,s.r_next=l.ptr,s.c_prev=null,s.c_next=f.ptr,null!=s.r_next&&(s.r_next.r_prev=s),null!=s.c_next&&(s.c_next.c_prev=s),l.ptr=f.ptr=s;for(s=f.ptr;null!=s;s=u)u=s.c_next,0==s.val&&(t(null==s.r_prev),s.row.ptr=s.r_next,null!=s.r_next&&(s.r_next.r_prev=null),null==s.c_prev?f.ptr=u:s.c_prev.c_next=u,null!=u&&(u.c_prev=s.c_prev),e.nnz--);f.stat==tc&&(e.valid=0)},fs=(e.glp_load_matrix=function(e,i,r,o,a){var l,s,u,c,_,d,f,b=e.tree;for(null!=b&&0!=b.reason&&n("glp_load_matrix: operation not allowed"),_=1;_<=e.m;_++)for(l=e.row[_];null!=l.ptr;)u=l.ptr,l.ptr=u.r_next,e.nnz--;for(t(0==e.nnz),d=1;d<=e.n;d++)e.col[d].ptr=null;for(i<0&&n("glp_load_matrix: ne = "+i+"; invalid number of constraint coefficients"),i>5e8&&n("glp_load_matrix: ne = "+i+"; too many constraint coefficients"),f=1;f<=i;f++)_=r[f],d=o[f],1<=_&&_<=e.m||n("glp_load_matrix: ia["+f+"] = "+_+"; row index out of range"),l=e.row[_],1<=d&&d<=e.n||n("glp_load_matrix: ja["+f+"] = "+d+"; column index out of range"),s=e.col[d],u={},e.nnz++,u.row=l,u.col=s,u.val=a[f],u.r_prev=null,u.r_next=l.ptr,null!=u.r_next&&(u.r_next.r_prev=u),l.ptr=u;for(t(e.nnz==i),_=1;_<=e.m;_++)for(u=e.row[_].ptr;null!=u;u=u.r_next){if(s=u.col,null!=s.ptr&&s.ptr.row.i==_){for(f=1;f<=i&&(r[f]!=_||o[f]!=s.j);f++);n("glp_load_mat: ia["+f+"] = "+_+"; ja["+f+"] = "+s.j+"; duplicate indices not allowed")}u.c_prev=null,u.c_next=s.ptr,null!=u.c_next&&(u.c_next.c_prev=u),s.ptr=u}for(_=1;_<=e.m;_++)for(l=e.row[_],u=l.ptr;null!=u;u=c)c=u.r_next,0==u.val&&(null==u.r_prev?l.ptr=c:u.r_prev.r_next=c,null!=c&&(c.r_prev=u.r_prev),null==u.c_prev?u.col.ptr=u.c_next:u.c_prev.c_next=u.c_next,null!=u.c_next&&(u.c_next.c_prev=u.c_prev),e.nnz--);e.valid=0},e.glp_check_dup=function(e,i,r,o,a){var l,s,u,c,_,d;for(e<0&&n("glp_check_dup: m = %d; invalid parameter"),i<0&&n("glp_check_dup: n = %d; invalid parameter"),r<0&&n("glp_check_dup: ne = %d; invalid parameter"),r>0&&null==o&&n("glp_check_dup: ia = "+o+"; invalid parameter"),r>0&&null==a&&n("glp_check_dup: ja = "+a+"; invalid parameter"),u=1;u<=r;u++)if(l=o[u],s=a[u],!(1<=l&&l<=e&&1<=s&&s<=i))return-u;if(0==e||0==i)return 0;for(c=new Int32Array(1+e),_=new Int32Array(1+r),d=new Int8Array(1+i),u=1;u<=r;u++)l=o[u],_[u]=c[l],c[l]=u;for(l=1;l<=e;l++){for(u=c[l];0!=u;u=_[u]){if(s=a[u],d[s]){for(u=1;u<=r&&(o[u]!=l||a[u]!=s);u++);for(t(u<=r),u++;u<=r&&(o[u]!=l||a[u]!=s);u++);return t(u<=r),+u}d[s]=1}for(u=c[l];0!=u;u=_[u])d[a[u]]=0}return 0},e.glp_sort_matrix=function(e){var t,i,r;for(null!=e&&e.magic==Ql||n("glp_sort_matrix: P = "+e+"; invalid problem object"),i=e.m;i>=1;i--)e.row[i].ptr=null;for(r=e.n;r>=1;r--)for(t=e.col[r].ptr;null!=t;t=t.c_next)i=t.row.i,t.r_prev=null,t.r_next=e.row[i].ptr,null!=t.r_next&&(t.r_next.r_prev=t),e.row[i].ptr=t;for(r=e.n;r>=1;r--)e.col[r].ptr=null;for(i=e.m;i>=1;i--)for(t=e.row[i].ptr;null!=t;t=t.r_next)r=t.col.j,t.c_prev=null,t.c_next=e.col[r].ptr,null!=t.c_next&&(t.c_next.c_prev=t),e.col[r].ptr=t}),bs=e.glp_del_rows=function(e,i,r){var o,a,l,s,u=e.tree;for(1<=i&&i<=e.m||n("glp_del_rows: nrs = "+i+"; invalid number of rows"),l=1;l<=i;l++)a=r[l],1<=a&&a<=e.m||n("glp_del_rows: num["+l+"] = "+a+"; row number out of range"),o=e.row[a],null!=u&&0!=u.reason&&(u.reason!=t_&&u.reason!=r_&&n("glp_del_rows: operation not allowed"),t(null!=u.curr),o.level!=u.curr.level&&n("glp_del_rows: num["+l+"] = "+a+"; invalid attempt to delete row created not in current subproblem"),o.stat!=tc&&n("glp_del_rows: num["+l+"] = "+a+"; invalid attempt to delete active row (constraint)"),u.reinv=1),0==o.i&&n("glp_del_rows: num["+l+"] = "+a+"; duplicate row numbers not allowed"),as(e,a,null),t(null==o.node),_s(e,a,0,null,null),t(null==o.ptr),o.i=0;for(s=0,a=1;a<=e.m;a++)o=e.row[a],0!=o.i&&(o.i=++s,e.row[o.i]=o);e.m=s,e.valid=0},ps=(e.glp_del_cols=function(e,i,r){var o,a,l,s,u=e.tree;for(null!=u&&0!=u.reason&&n("glp_del_cols: operation not allowed"),1<=i&&i<=e.n||n("glp_del_cols: ncs = "+i+"; invalid number of columns"),l=1;l<=i;l++)a=r[l],1<=a&&a<=e.n||n("glp_del_cols: num["+l+"] = "+a+"; column number out of range"),o=e.col[a],0==o.j&&n("glp_del_cols: num["+l+"] = "+a+"; duplicate column numbers not allowed"),ls(e,a,null),t(null==o.node),ds(e,a,0,null,null),t(null==o.ptr),o.j=0,o.stat==tc&&(e.valid=0);for(s=0,a=1;a<=e.n;a++)o=e.col[a],0!=o.j&&(o.j=++s,e.col[o.j]=o);if(e.n=s,e.valid){var c=e.m,_=e.head;for(a=1;a<=s;a++)0!=(l=e.col[a].bind)&&(t(1<=l&&l<=c),_[l]=c+a)}},e.glp_copy_prob=function(e,t,i){var r,o,a,l,s,u=e.tree,c={};null!=u&&0!=u.reason&&n("glp_copy_prob: operation not allowed"),e==t&&n("glp_copy_prob: copying problem object to itself not allowed"),i!=Qc&&i!=e_&&n("glp_copy_prob: names = "+i+"; invalid parameter"),ms(e),i&&null!=t.name&&ts(e,t.name),i&&null!=t.obj&&ns(e,t.obj),e.dir=t.dir,e.c0=t.c0,t.m>0&&rs(e,t.m),t.n>0&&os(e,t.n),_u(t,c),du(e,c),e.pbs_stat=t.pbs_stat,e.dbs_stat=t.dbs_stat,e.obj_val=t.obj_val,e.some=t.some,e.ipt_stat=t.ipt_stat,e.ipt_obj=t.ipt_obj,e.mip_stat=t.mip_stat,e.mip_obj=t.mip_obj;var _,d;for(r=1;r<=t.m;r++)_=e.row[r],d=t.row[r],i&&null!=d.name&&as(e,r,d.name),_.type=d.type,_.lb=d.lb,_.ub=d.ub,_.rii=d.rii,_.stat=d.stat,_.prim=d.prim,_.dual=d.dual,_.pval=d.pval,_.dval=d.dval,_.mipx=d.mipx;for(l=new Int32Array(1+t.m),s=new Float64Array(1+t.m),o=1;o<=t.n;o++)_=e.col[o],d=t.col[o],i&&null!=d.name&&ls(e,o,d.name),_.kind=d.kind,_.type=d.type,_.lb=d.lb,_.ub=d.ub,_.coef=d.coef,a=Cs(t,o,l,s),ds(e,o,a,l,s),_.sjj=d.sjj,_.stat=d.stat,_.prim=d.prim,_.dual=d.dual,_.pval=d.pval,_.dval=d.dval,_.mipx=d.mipx}),ms=e.glp_erase_prob=function(e){var t=e.tree;null!=t&&0!=t.reason&&n("glp_erase_prob: operation not allowed"),y(e),v(e)},hs=(e.glp_get_prob_name=function(e){return e.name},e.glp_get_obj_name=function(e){return e.obj}),gs=e.glp_get_obj_dir=function(e){return e.dir},vs=e.glp_get_num_rows=function(e){return e.m},ys=e.glp_get_num_cols=function(e){return e.n},xs=e.glp_get_row_name=function(e,t){return 1<=t&&t<=e.m||n("glp_get_row_name: i = "+t+"; row number out of range"),e.row[t].name},ws=e.glp_get_col_name=function(e,t){return 1<=t&&t<=e.n||n("glp_get_col_name: j = "+t+"; column number out of range"),e.col[t].name},ks=e.glp_get_row_type=function(e,t){return 1<=t&&t<=e.m||n("glp_get_row_type: i = "+t+"; row number out of range"),e.row[t].type},Ms=e.glp_get_row_lb=function(e,i){var r;switch(1<=i&&i<=e.m||n("glp_get_row_lb: i = "+i+"; row number out of range"),e.row[i].type){case Ju:case Zu:r=-Bl;break;case $u:case Qu:case ec:r=e.row[i].lb;break;default:t(e!=e)}return r},As=e.glp_get_row_ub=function(e,i){var r;switch(1<=i&&i<=e.m||n("glp_get_row_ub: i = "+i+"; row number out of range"),e.row[i].type){case Ju:case $u:r=+Bl;break;case Zu:case Qu:case ec:r=e.row[i].ub;break;default:t(e!=e)}return r},Es=e.glp_get_col_type=function(e,t){return 1<=t&&t<=e.n||n("glp_get_col_type: j = "+t+"; column number out of range"),e.col[t].type},Ps=e.glp_get_col_lb=function(e,i){var r;switch(1<=i&&i<=e.n||n("glp_get_col_lb: j = "+i+"; column number out of range"),e.col[i].type){case Ju:case Zu:r=-Bl;break;case $u:case Qu:case ec:r=e.col[i].lb;break;default:t(e!=e)}return r},js=e.glp_get_col_ub=function(e,i){var r;switch(1<=i&&i<=e.n||n("glp_get_col_ub: j = "+i+"; column number out of range"),e.col[i].type){case Ju:case $u:r=+Bl;break;case Zu:case Qu:case ec:r=e.col[i].ub;break;default:t(e!=e)}return r},Os=(e.glp_get_obj_coef=function(e,t){return 0<=t&&t<=e.n||n("glp_get_obj_coef: j = "+t+"; column number out of range"),0==t?e.c0:e.col[t].coef},e.glp_get_num_nz=function(e){return e.nnz},e.glp_get_mat_row=function(e,i,r,o){var a,l;for(1<=i&&i<=e.m||n("glp_get_mat_row: i = "+i+"; row number out of range"),l=0,a=e.row[i].ptr;null!=a;a=a.r_next)l++,null!=r&&(r[l]=a.col.j),null!=o&&(o[l]=a.val);return t(l<=e.n),l}),Cs=e.glp_get_mat_col=function(e,i,r,o){var a,l;for(1<=i&&i<=e.n||n("glp_get_mat_col: j = "+i+"; column number out of range"),l=0,a=e.col[i].ptr;null!=a;a=a.c_next)l++,null!=r&&(r[l]=a.row.i),null!=o&&(o[l]=a.val);return t(l<=e.m),l},Ss=e.glp_create_index=function(e){var t,n,i,r;if(null==e.r_tree)for(e.r_tree={},i=1;i<=e.m;i++)t=e.row[i],null!=t.name&&(e.r_tree[t.name]=t);if(null==e.c_tree)for(e.c_tree={},r=1;r<=e.n;r++)n=e.col[r],null!=n.name&&(e.c_tree[n.name]=n)},zs=e.glp_find_row=function(e,t){var i=0;null==e.r_tree&&n("glp_find_row: row name index does not exist");var r=e.r_tree[t];return r&&(i=r.i),i},Ns=e.glp_find_col=function(e,t){var i=0;null==e.c_tree&&n("glp_find_col: column name index does not exist");var r=e.c_tree[t];return r&&(i=r.j),i},Ls=e.glp_delete_index=function(e){e.r_tree=null,e.r_tree=null},Ts=e.glp_set_rii=function(e,t,i){if(1<=t&&t<=e.m||n("glp_set_rii: i = "+t+"; row number out of range"),i<=0&&n("glp_set_rii: i = "+t+"; rii = "+i+"; invalid scale factor"),e.valid&&e.row[t].rii!=i)for(var r=e.row[t].ptr;null!=r;r=r.r_next)if(r.col.stat==tc){e.valid=0;break}e.row[t].rii=i},Is=e.glp_set_sjj=function(e,t,i){1<=t&&t<=e.n||n("glp_set_sjj: j = "+t+"; column number out of range"),i<=0&&n("glp_set_sjj: j = "+t+"; sjj = "+i+"; invalid scale factor"),e.valid&&e.col[t].sjj!=i&&e.col[t].stat==tc&&(e.valid=0),e.col[t].sjj=i},Ds=e.glp_get_rii=function(e,t){return 1<=t&&t<=e.m||n("glp_get_rii: i = "+t+"; row number out of range"),e.row[t].rii},Fs=e.glp_get_sjj=function(e,t){return 1<=t&&t<=e.n||n("glp_get_sjj: j = "+t+"; column number out of range"),e.col[t].sjj},Rs=e.glp_unscale_prob=function(e){var t,n,i=vs(e),r=ys(e);for(t=1;t<=i;t++)Ts(e,t,1);for(n=1;n<=r;n++)Is(e,n,1)},Us=e.glp_set_row_stat=function(e,i,r){var o;if(1<=i&&i<=e.m||n("glp_set_row_stat: i = "+i+"; row number out of range"),r!=tc&&r!=nc&&r!=ic&&r!=rc&&r!=oc&&n("glp_set_row_stat: i = "+i+"; stat = "+r+"; invalid status"),o=e.row[i],r!=tc)switch(o.type){case Ju:r=rc;break;case $u:r=nc;break;case Zu:r=ic;break;case Qu:r!=ic&&(r=nc);break;case ec:r=oc;break;default:t(o!=o)}(o.stat==tc&&r!=tc||o.stat!=tc&&r==tc)&&(e.valid=0),o.stat=r},Bs=e.glp_set_col_stat=function(e,i,r){var o;if(1<=i&&i<=e.n||n("glp_set_col_stat: j = "+i+"; column number out of range"),r!=tc&&r!=nc&&r!=ic&&r!=rc&&r!=oc&&n("glp_set_col_stat: j = "+i+"; stat = "+r+"; invalid status"),o=e.col[i],r!=tc)switch(o.type){case Ju:r=rc;break;case $u:r=nc;break;case Zu:r=ic;break;case Qu:r!=ic&&(r=nc);break;case ec:r=oc;break;default:t(o!=o)}(o.stat==tc&&r!=tc||o.stat!=tc&&r==tc)&&(e.valid=0),o.stat=r},qs=e.glp_std_basis=function(e){var t,n;for(t=1;t<=e.m;t++)Us(e,t,tc);for(n=1;n<=e.n;n++){var i=e.col[n];i.type==Qu&&Math.abs(i.lb)>Math.abs(i.ub)?Bs(e,n,ic):Bs(e,n,nc)}},Hs=e.glp_simplex=function(e,i){function r(e,n){var i;return uu(e)||(i=cu(e),0==i||(i==__?n.msg_lev>=Mc&&Jl("glp_simplex: initial basis is invalid"):i==d_?n.msg_lev>=Mc&&Jl("glp_simplex: initial basis is singular"):i==f_?n.msg_lev>=Mc&&Jl("glp_simplex: initial basis is ill-conditioned"):t(i!=i)),0==i)?(n.meth==jc?i=Fl(e,n):n.meth==Oc?(i=Rl(e,n))==p_&&e.valid&&(i=Fl(e,n)):n.meth==Cc?i=Rl(e,n):t(n!=n),i):i}var o,a,l;for(null!=e&&e.magic==Ql||n("glp_simplex: P = "+e+"; invalid problem object"),null!=e.tree&&0!=e.tree.reason&&n("glp_simplex: operation not allowed"),null==i&&(i=new Gs),i.msg_lev!=kc&&i.msg_lev!=Mc&&i.msg_lev!=Ac&&i.msg_lev!=Ec&&i.msg_lev!=Pc&&n("glp_simplex: msg_lev = "+i.msg_lev+"; invalid parameter"),i.meth!=jc&&i.meth!=Oc&&i.meth!=Cc&&n("glp_simplex: meth = "+i.meth+"; invalid parameter"),i.pricing!=Sc&&i.pricing!=zc&&n("glp_simplex: pricing = "+i.pricing+"; invalid parameter"),i.r_test!=Nc&&i.r_test!=Lc&&n("glp_simplex: r_test = "+i.r_test+"; invalid parameter"),0<i.tol_bnd&&i.tol_bnd<1||n("glp_simplex: tol_bnd = "+i.tol_bnd+"; invalid parameter"),0<i.tol_dj&&i.tol_dj<1||n("glp_simplex: tol_dj = "+i.tol_dj+"; invalid parameter"),0<i.tol_piv&&i.tol_piv<1||n("glp_simplex: tol_piv = "+i.tol_piv+"; invalid parameter"),i.it_lim<0&&n("glp_simplex: it_lim = "+i.it_lim+"; invalid parameter"),i.tm_lim<0&&n("glp_simplex: tm_lim = "+i.tm_lim+"; invalid parameter"),i.out_frq<1&&n("glp_simplex: out_frq = "+i.out_frq+"; invalid parameter"),i.out_dly<0&&n("glp_simplex: out_dly = "+i.out_dly+"; invalid parameter"),i.presolve!=Qc&&i.presolve!=e_&&n("glp_simplex: presolve = "+i.presolve+"; invalid parameter"),e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.some=0,o=1;o<=e.m;o++){var s=e.row[o];if(s.type==Qu&&s.lb>=s.ub)return i.msg_lev>=Mc&&Jl("glp_simplex: row "+o+": lb = "+s.lb+", ub = "+s.ub+"; incorrect bounds"),l=b_}for(a=1;a<=e.n;a++){var u=e.col[a];if(u.type==Qu&&u.lb>=u.ub)return i.msg_lev>=Mc&&Jl("glp_simplex: column "+a+": lb = "+u.lb+", ub = "+u.ub+"; incorrect bounds"),l=b_}return i.msg_lev>=Ec&&(Jl("GLPK Simplex Optimizer, v"+Zl()),Jl(e.m+" row"+(1==e.m?"":"s")+", "+e.n+" column"+(1==e.n?"":"s")+", "+e.nnz+" non-zero"+(1==e.nnz?"":"s"))),0==e.nnz?(!function(e,t){function n(){o.stat=nc,o.prim=o.lb}function i(){o.stat=ic,o.prim=o.ub}var r,o,a,l,s,u,c;for(e.valid=0,e.pbs_stat=e.dbs_stat=pc,e.obj_val=e.c0,e.some=0,s=u=0,a=1;a<=e.m;a++)r=e.row[a],r.stat=tc,r.prim=r.dual=0,r.type!=$u&&r.type!=Qu&&r.type!=ec||(r.lb>+t.tol_bnd&&(e.pbs_stat=hc,0==e.some&&t.meth!=jc&&(e.some=a)),s<+r.lb&&(s=+r.lb)),r.type!=Zu&&r.type!=Qu&&r.type!=ec||(r.ub<-t.tol_bnd&&(e.pbs_stat=hc,0==e.some&&t.meth!=jc&&(e.some=a)),s<-r.ub&&(s=-r.ub));for(c=1,l=1;l<=e.n;l++)o=e.col[l],c<Math.abs(o.coef)&&(c=Math.abs(o.coef));for(c=(e.dir==Vu?1:-1)/c,l=1;l<=e.n;l++)o=e.col[l],o.type==Ju?(o.stat=rc,o.prim=0):o.type==$u?n():o.type==Zu?i():o.type==Qu?c*o.coef>0?n():c*o.coef<0?i():Math.abs(o.lb)<=Math.abs(o.ub)?n():i():o.type==ec&&(o.stat=oc,o.prim=o.lb),o.dual=o.coef,e.obj_val+=o.coef*o.prim,o.type!=Ju&&o.type!=$u||(c*o.dual<-t.tol_dj&&(e.dbs_stat=hc,0==e.some&&t.meth==jc&&(e.some=e.m+l)),u<-c*o.dual&&(u=-c*o.dual)),o.type!=Ju&&o.type!=Zu||(c*o.dual>+t.tol_dj&&(e.dbs_stat=hc,0==e.some&&t.meth==jc&&(e.some=e.m+l)),u<+c*o.dual&&(u=+c*o.dual));t.msg_lev>=Ac&&0==t.out_dly&&Jl("~"+e.it_cnt+": obj = "+e.obj_val+"  infeas = "+(t.meth==jc?s:u)),t.msg_lev>=Ec&&0==t.out_dly&&Jl(e.pbs_stat==pc&&e.dbs_stat==pc?"OPTIMAL SOLUTION FOUND":e.pbs_stat==hc?"PROBLEM HAS NO FEASIBLE SOLUTION":t.meth==jc?"PROBLEM HAS UNBOUNDED SOLUTION":"PROBLEM HAS NO DUAL FEASIBLE SOLUTION")}(e,i),l=0):l=i.presolve?function(e,n){function i(){return Ia(o,l),l=null,Da(o,e),a=0}var o,a,l=null,s={};if(n.msg_lev>=Ec&&Jl("Preprocessing..."),o=ga(),La(o,e,e_,_c,e_),a=pl(o,n),0==a||(a==y_?n.msg_lev>=Ec&&Jl("PROBLEM HAS NO PRIMAL FEASIBLE SOLUTION"):a==x_?n.msg_lev>=Ec&&Jl("PROBLEM HAS NO DUAL FEASIBLE SOLUTION"):t(a!=a)),0!=a)return a;if(l=es(),Ta(o,l),0==l.m&&0==l.n)return l.pbs_stat=l.dbs_stat=pc,l.obj_val=l.c0,n.msg_lev>=Ac&&0==n.out_dly&&Jl(e.it_cnt+": obj = "+l.obj_val+"  infeas = 0.0"),n.msg_lev>=Ec&&Jl("OPTIMAL SOLUTION FOUND BY LP PREPROCESSOR"),i();n.msg_lev>=Ec&&Jl(l.m+" row"+(1==l.m?"":"s")+", "+l.n+" column"+(1==l.n?"":"s")+", "+l.nnz+" non-zero"+(1==l.nnz?"":"s")),_u(e,s),du(l,s);var u=c(),_=u.term_out;return!_||n.msg_lev<Ec?u.term_out=e_:u.term_out=Qc,Bm(l,cc),u.term_out=_,u=c(),_=u.term_out,!_||n.msg_lev<Ec?u.term_out=e_:u.term_out=Qc,K(l,0),u.term_out=_,l.it_cnt=e.it_cnt,a=r(l,n),e.it_cnt=l.it_cnt,0!=a||l.pbs_stat!=pc||l.dbs_stat!=pc?(n.msg_lev>=Mc&&Jl("glp_simplex: unable to recover undefined or non-optimal solution"),0==a&&(l.pbs_stat==hc?a=y_:l.dbs_stat==hc?a=x_:t(l!=l)),a):i()}(e,i):r(e,i),l},Gs=e.SMCP=function(e){e=e||{},this.msg_lev=e.msg_lev||Ec,this.meth=e.meth||jc,this.pricing=e.pricing||zc,this.r_test=e.r_test||Lc,this.tol_bnd=e.tol_bnd||1e-7,this.tol_dj=e.tol_dj||1e-7,this.tol_piv=e.tol_piv||1e-10,this.obj_ll=e.obj_ll||-Bl,this.obj_ul=e.obj_ul||+Bl,this.it_lim=e.it_lim||Gl,this.tm_lim=e.tm_lim||Gl,this.out_frq=e.out_frq||500,this.out_dly=e.out_dly||0,this.presolve=e.presolve||e_},Vs=e.glp_get_status=function(e){var n;switch(n=Xs(e)){case pc:switch(Ks(e)){case pc:n=gc;break;case hc:n=vc;break;case bc:case mc:break;default:t(e!=e)}break;case bc:case mc:case hc:break;default:t(e!=e)}return n},Xs=e.glp_get_prim_stat=function(e){return e.pbs_stat},Ks=e.glp_get_dual_stat=function(e){return e.dbs_stat},Ws=e.glp_get_obj_val=function(e){return e.obj_val},Ys=e.glp_get_row_stat=function(e,t){return 1<=t&&t<=e.m||n("glp_get_row_stat: i = "+t+"; row number out of range"),e.row[t].stat},Js=e.glp_get_row_prim=function(e,t){return 1<=t&&t<=e.m||n("glp_get_row_prim: i = "+t+"; row number out of range"),e.row[t].prim},$s=e.glp_get_row_dual=function(e,t){return 1<=t&&t<=e.m||n("glp_get_row_dual: i = "+t+"; row number out of range"),e.row[t].dual},Zs=e.glp_get_col_stat=function(e,t){return 1<=t&&t<=e.n||n("glp_get_col_stat: j = "+t+"; column number out of range"),e.col[t].stat},Qs=e.glp_get_col_prim=function(e,t){return 1<=t&&t<=e.n||n("glp_get_col_prim: j = "+t+"; column number out of range"),e.col[t].prim},eu=e.glp_get_col_dual=function(e,t){return 1<=t&&t<=e.n||n("glp_get_col_dual: j = "+t+"; column number out of range"),e.col[t].dual},tu=(e.glp_get_unbnd_ray=function(e){var n=e.some;return t(n>=0),n>e.m+e.n&&(n=0),n},e.glp_set_col_kind=function(e,t,i){1<=t&&t<=e.n||n("glp_set_col_kind: j = "+t+"; column number out of range");var r=e.col[t];switch(i){case Ku:r.kind=Ku;break;case Wu:r.kind=Wu;break;case Yu:r.kind=Wu,r.type==Qu&&0==r.lb&&1==r.ub||us(e,t,Qu,0,1);break;default:n("glp_set_col_kind: j = "+t+"; kind = "+i+"; invalid column kind")}}),nu=e.glp_get_col_kind=function(e,i){1<=i&&i<=e.n||n("glp_get_col_kind: j = "+i+"; column number out of range");var r=e.col[i],o=r.kind;switch(o){case Ku:break;case Wu:r.type==Qu&&0==r.lb&&1==r.ub&&(o=Yu);break;default:t(o!=o)}return o},iu=e.glp_get_num_int=function(e){for(var t,n=0,i=1;i<=e.n;i++)t=e.col[i],t.kind==Wu&&n++;return n},ru=e.glp_get_num_bin=function(e){for(var t,n=0,i=1;i<=e.n;i++)t=e.col[i],t.kind==Wu&&t.type==Qu&&0==t.lb&&1==t.ub&&n++;return n},ou=e.glp_intopt=function(e,i){function r(e,n){var i,r;return Vs(e)!=gc?(n.msg_lev>=Mc&&Jl("glp_intopt: optimal basis to initial LP relaxation not provided"),r=w_):(n.msg_lev>=Ec&&Jl("Integer optimization begins..."),i=J(e,n),r=de(i),te(i),0==r?e.mip_stat==pc?(n.msg_lev>=Ec&&Jl("INTEGER OPTIMAL SOLUTION FOUND"),e.mip_stat=gc):(n.msg_lev>=Ec&&Jl("PROBLEM HAS NO INTEGER FEASIBLE SOLUTION"),e.mip_stat=hc):r==M_?n.msg_lev>=Ec&&Jl("RELATIVE MIP GAP TOLERANCE REACHED; SEARCH TERMINATED"):r==v_?n.msg_lev>=Ec&&Jl("TIME LIMIT EXCEEDED; SEARCH TERMINATED"):r==p_?n.msg_lev>=Mc&&Jl("glp_intopt: cannot solve current LP relaxation"):r==k_?n.msg_lev>=Ec&&Jl("SEARCH TERMINATED BY APPLICATION"):t(r!=r),r)}var o,a,l;for(null!=e&&e.magic==Ql||n("glp_intopt: P = "+e+"; invalid problem object"),null!=e.tree&&n("glp_intopt: operation not allowed"),null==i&&(i=new au),i.msg_lev!=kc&&i.msg_lev!=Mc&&i.msg_lev!=Ac&&i.msg_lev!=Ec&&i.msg_lev!=Pc&&n("glp_intopt: msg_lev = "+i.msg_lev+"; invalid parameter"),i.br_tech!=Tc&&i.br_tech!=Ic&&i.br_tech!=Dc&&i.br_tech!=Fc&&i.br_tech!=Rc&&n("glp_intopt: br_tech = "+i.br_tech+"; invalid parameter"),i.bt_tech!=Uc&&i.bt_tech!=Bc&&i.bt_tech!=qc&&i.bt_tech!=Hc&&n("glp_intopt: bt_tech = "+i.bt_tech+"; invalid parameter"),0<i.tol_int&&i.tol_int<1||n("glp_intopt: tol_int = "+i.tol_int+"; invalid parameter"),0<i.tol_obj&&i.tol_obj<1||n("glp_intopt: tol_obj = "+i.tol_obj+"; invalid parameter"),i.tm_lim<0&&n("glp_intopt: tm_lim = "+i.tm_lim+"; invalid parameter"),i.out_frq<0&&n("glp_intopt: out_frq = "+i.out_frq+"; invalid parameter"),i.out_dly<0&&n("glp_intopt: out_dly = "+i.out_dly+"; invalid parameter"),0<=i.cb_size&&i.cb_size<=256||n("glp_intopt: cb_size = "+i.cb_size+"; invalid parameter"),i.pp_tech!=Gc&&i.pp_tech!=Vc&&i.pp_tech!=Xc&&n("glp_intopt: pp_tech = "+i.pp_tech+"; invalid parameter"),i.mip_gap<0&&n("glp_intopt: mip_gap = "+i.mip_gap+"; invalid parameter"),i.mir_cuts!=Qc&&i.mir_cuts!=e_&&n("glp_intopt: mir_cuts = "+i.mir_cuts+"; invalid parameter"),i.gmi_cuts!=Qc&&i.gmi_cuts!=e_&&n("glp_intopt: gmi_cuts = "+i.gmi_cuts+"; invalid parameter"),i.cov_cuts!=Qc&&i.cov_cuts!=e_&&n("glp_intopt: cov_cuts = "+i.cov_cuts+"; invalid parameter"),i.clq_cuts!=Qc&&i.clq_cuts!=e_&&n("glp_intopt: clq_cuts = "+i.clq_cuts+"; invalid parameter"),i.presolve!=Qc&&i.presolve!=e_&&n("glp_intopt: presolve = "+i.presolve+"; invalid parameter"),i.binarize!=Qc&&i.binarize!=e_&&n("glp_intopt: binarize = "+i.binarize+"; invalid parameter"),i.fp_heur!=Qc&&i.fp_heur!=e_&&n("glp_intopt: fp_heur = "+i.fp_heur+"; invalid parameter"),e.mip_stat=bc,e.mip_obj=0,o=1;o<=e.m;o++){var s=e.row[o];if(s.type==Qu&&s.lb>=s.ub)return i.msg_lev>=Mc&&Jl("glp_intopt: row "+o+": lb = "+s.lb+", ub = "+s.ub+"; incorrect bounds"),b_}for(a=1;a<=e.n;a++)if(l=e.col[a],l.type==Qu&&l.lb>=l.ub)return i.msg_lev>=Mc&&Jl("glp_intopt: column "+a+": lb = "+l.lb+", ub = "+l.ub+"; incorrect bounds"),b_;for(a=1;a<=e.n;a++)if(l=e.col[a],l.kind==Wu){if((l.type==$u||l.type==Qu)&&l.lb!=Math.floor(l.lb))return i.msg_lev>=Mc&&Jl("glp_intopt: integer column "+a+" has non-integer lower bound "+l.lb),b_;if((l.type==Zu||l.type==Qu)&&l.ub!=Math.floor(l.ub))return i.msg_lev>=Mc&&Jl("glp_intopt: integer column "+a+" has non-integer upper bound "+l.ub),b_;if(l.type==ec&&l.lb!=Math.floor(l.lb))return i.msg_lev>=Mc&&Jl("glp_intopt: integer column "+a+" has non-integer fixed value "+l.lb),b_}if(i.msg_lev>=Ec){var u,_=iu(e),d=ru(e);Jl("GLPK Integer Optimizer, v"+Zl()),Jl(e.m+" row"+(1==e.m?"":"s")+", "+e.n+" column"+(1==e.n?"":"s")+", "+e.nnz+" non-zero"+(1==e.nnz?"":"s")),u=0==d?"none of":1==_&&1==d?"":1==d?"one of":d==_?"all of":d+" of",Jl(_+" integer variable"+(1==_?"":"s")+", "+u+" which "+(1==d?"is":"are")+" binary")}return i.presolve?function(e,n){function i(){return Ia(o,u),u=null,Da(o,e),a}var o,a,l=c(),s=l.term_out,u=null,_={};if(n.msg_lev>=Ec&&Jl("Preprocessing..."),o=ga(),La(o,e,e_,fc,e_),!s||n.msg_lev<Ec?l.term_out=e_:l.term_out=Qc,a=ml(o,n),l.term_out=s,0==a||(a==y_?n.msg_lev>=Ec&&Jl("PROBLEM HAS NO PRIMAL FEASIBLE SOLUTION"):a==x_?n.msg_lev>=Ec&&Jl("LP RELAXATION HAS NO DUAL FEASIBLE SOLUTION"):t(a!=a)),0!=a)return a;if(u=es(),Ta(o,u),0==u.m&&0==u.n)return u.mip_stat=gc,u.mip_obj=u.c0,n.msg_lev>=Ec&&(Jl("Objective value = "+u.mip_obj),Jl("INTEGER OPTIMAL SOLUTION FOUND BY MIP PREPROCESSOR")),i();if(n.msg_lev>=Ec){var d,f=iu(u),b=ru(u);Jl(u.m+" row"+(1==u.m?"":"s")+", "+u.n+" column"+(1==u.n?"":"s")+", "+u.nnz+" non-zero"+(1==u.nnz?"":"s")),d=0==b?"none of":1==f&&1==b?"":1==b?"one of":b==f?"all of":b+" of",Jl(f+" integer variable"+(1==f?"":"s")+", "+d+" which "+(1==b?"is":"are")+" binary")}_u(e,_),du(u,_),!s||n.msg_lev<Ec?l.term_out=e_:l.term_out=Qc,Bm(u,ac|lc|sc|uc),l.term_out=s,!s||n.msg_lev<Ec?l.term_out=e_:l.term_out=Qc,K(u,0),l.term_out=s,n.msg_lev>=Ec&&Jl("Solving LP relaxation...");var p=new Gs;return p.msg_lev=n.msg_lev,u.it_cnt=e.it_cnt,a=Hs(u,p),e.it_cnt=u.it_cnt,0!=a?(n.msg_lev>=Mc&&Jl("glp_intopt: cannot solve LP relaxation"),a=p_):(a=Vs(u),a==gc?a=0:a==hc?a=y_:a==vc?a=x_:t(a!=a),0!=a?a:(u.it_cnt=e.it_cnt,a=r(u,n),e.it_cnt=u.it_cnt,u.mip_stat!=gc&&u.mip_stat!=pc?(e.mip_stat=u.mip_stat,a):i()))}(e,i):r(e,i)},au=e.IOCP=function(e){e=e||{},this.msg_lev=e.msg_lev||Ec,this.br_tech=e.br_tech||Fc,this.bt_tech=e.bt_tech||qc,this.tol_int=e.tol_int||1e-5,this.tol_obj=e.tol_obj||1e-7,this.tm_lim=e.tm_lim||Gl,this.out_frq=e.out_frq||5e3,this.out_dly=e.out_dly||1e4,this.cb_func=e.cb_func||null,this.cb_info=e.cb_info||null,this.cb_size=e.cb_size||0,this.pp_tech=e.pp_tech||Xc,this.mip_gap=e.mip_gap||0,this.mir_cuts=e.mir_cuts||e_,this.gmi_cuts=e.gmi_cuts||e_,this.cov_cuts=e.cov_cuts||e_,this.clq_cuts=e.clq_cuts||e_,this.presolve=e.presolve||e_,this.binarize=e.binarize||e_,this.fp_heur=e.fp_heur||e_},lu=(e.glp_mip_status=function(e){return e.mip_stat},e.glp_mip_obj_val=function(e){return e.mip_obj},e.glp_mip_row_val=function(e,t){return 1<=t&&t<=e.m||n("glp_mip_row_val: i = "+t+"; row number out of range"),e.row[t].mipx}),su=e.glp_mip_col_val=function(e,t){return 1<=t&&t<=e.n||n("glp_mip_col_val: j = "+t+"; column number out of range"),e.col[t].mipx},uu=e.glp_bf_exists=function(e){return 0==e.m||e.valid},cu=e.glp_factorize=function(e){function n(e,n,i,r){var o,a,l,s=e.m;if(t(1<=n&&n<=s),(a=e.head[n])<=s)l=1,i[1]=a,r[1]=1;else for(l=0,o=e.col[a-s].ptr;null!=o;o=o.c_next)l++,i[l]=o.row.i,r[l]=-o.row.rii*o.val*o.col.sjj;return l}var i,r,o,a=e.m,l=e.n,s=e.row,u=e.col,c=e.head;for(e.valid=0,i=0,r=1;r<=a+l;r++)if(r<=a?(o=s[r].stat,s[r].bind=0):(o=u[r-a].stat,u[r-a].bind=0),o==tc){if(++i>a)return __;c[i]=r,r<=a?s[r].bind=i:u[r-a].bind=i}if(i<a)return __;if(a>0){switch(null==e.bfd&&(e.bfd=N(),x(e)),T(e.bfd,a,e.head,n,e)){case 0:break;case Au:return d_;case Eu:return f_;default:t(e!=e)}e.valid=1}return 0},_u=(e.glp_bf_updated=function(e){return 0==e.m||e.valid||n("glp_bf_update: basis factorization does not exist"),0==e.m?0:R(e.bfd)},e.glp_get_bfcp=function(e,t){var n=e.bfcp;null==n?(t.type=yc,t.lu_size=0,t.piv_tol=.1,t.piv_lim=4,t.suhl=Qc,t.eps_tol=1e-15,t.max_gro=1e10,t.nfs_max=100,t.upd_tol=1e-6,t.nrs_max=100,t.rs_size=0):i(t,n)}),du=e.glp_set_bfcp=function(e,t){var r=e.bfcp;null==t?null!=r&&(e.bfcp=null):(null==r&&(r=e.bfcp={}),i(r,t),r.type!=yc&&r.type!=xc&&r.type!=wc&&n("glp_set_bfcp: type = "+r.type+"; invalid parameter"),r.lu_size<0&&n("glp_set_bfcp: lu_size = "+r.lu_size+"; invalid parameter"),0<r.piv_tol&&r.piv_tol<1||n("glp_set_bfcp: piv_tol = "+r.piv_tol+"; invalid parameter"),r.piv_lim<1&&n("glp_set_bfcp: piv_lim = "+r.piv_lim+"; invalid parameter"),r.suhl!=Qc&&r.suhl!=e_&&n("glp_set_bfcp: suhl = "+r.suhl+"; invalid parameter"),0<=r.eps_tol&&r.eps_tol<=1e-6||n("glp_set_bfcp: eps_tol = "+r.eps_tol+"; invalid parameter"),r.max_gro<1&&n("glp_set_bfcp: max_gro = "+r.max_gro+"; invalid parameter"),1<=r.nfs_max&&r.nfs_max<=32767||n("glp_set_bfcp: nfs_max = "+r.nfs_max+"; invalid parameter"),0<r.upd_tol&&r.upd_tol<1||n("glp_set_bfcp: upd_tol = "+r.upd_tol+"; invalid parameter"),1<=r.nrs_max&&r.nrs_max<=32767||n("glp_set_bfcp: nrs_max = "+r.nrs_max+"; invalid parameter"),r.rs_size<0&&n("glp_set_bfcp: rs_size = "+r.nrs_max+"; invalid parameter"),0==r.rs_size&&(r.rs_size=20*r.nrs_max)),null!=e.bfd&&x(e)},fu=e.glp_get_bhead=function(e,t){return 0==e.m||e.valid||n("glp_get_bhead: basis factorization does not exist"),1<=t&&t<=e.m||n("glp_get_bhead: k = "+t+"; index out of range"),e.head[t]},bu=e.glp_get_row_bind=function(e,t){return 0==e.m||e.valid||n("glp_get_row_bind: basis factorization does not exist"),1<=t&&t<=e.m||n("glp_get_row_bind: i = "+t+"; row number out of range"),e.row[t].bind},pu=e.glp_get_col_bind=function(e,t){return 0==e.m||e.valid||n("glp_get_col_bind: basis factorization does not exist"),1<=t&&t<=e.n||n("glp_get_col_bind: j = "+t+"; column number out of range"),e.col[t].bind},mu=e.glp_ftran=function(e,t){var i,r,o=e.m,a=e.row,l=e.col;for(0==o||e.valid||n("glp_ftran: basis factorization does not exist"),i=1;i<=o;i++)t[i]*=a[i].rii;for(o>0&&I(e.bfd,t),i=1;i<=o;i++)r=e.head[i],r<=o?t[i]/=a[r].rii:t[i]*=l[r-o].sjj},hu=e.glp_btran=function(e,t){var i,r,o=e.m,a=e.row,l=e.col;for(0==o||e.valid||n("glp_btran: basis factorization does not exist"),i=1;i<=o;i++)r=e.head[i],r<=o?t[i]/=a[r].rii:t[i]*=l[r-o].sjj;for(o>0&&D(e.bfd,t),i=1;i<=o;i++)t[i]*=a[i].rii},gu=(e.glp_warm_up=function(e){var n,i,r,o,a,l,s,u,c,_,d;for(e.pbs_stat=e.dbs_stat=bc,e.obj_val=0,e.some=0,o=1;o<=e.m;o++)n=e.row[o],n.prim=n.dual=0;for(a=1;a<=e.n;a++)i=e.col[a],i.prim=i.dual=0;if(!uu(e)&&0!=(u=cu(e)))return u;for(d=new Float64Array(1+e.m),o=1;o<=e.m;o++)n=e.row[o],n.stat!=tc&&(n.stat==nc?n.prim=n.lb:n.stat==ic?n.prim=n.ub:n.stat==rc?n.prim=0:n.stat==oc?n.prim=n.lb:t(n!=n),d[o]-=n.prim);for(a=1;a<=e.n;a++)if(i=e.col[a],i.stat!=tc&&(i.stat==nc?i.prim=i.lb:i.stat==ic?i.prim=i.ub:i.stat==rc?i.prim=0:i.stat==oc?i.prim=i.lb:t(i!=i),0!=i.prim))for(r=i.ptr;null!=r;r=r.c_next)d[r.row.i]+=r.val*i.prim;for(mu(e,d),e.pbs_stat=pc,o=1;o<=e.m;o++)n=e.row[o],n.stat==tc&&(n.prim=d[n.bind],l=n.type,l!=$u&&l!=Qu&&l!=ec||(c=1e-6+1e-9*Math.abs(n.lb),n.prim<n.lb-c&&(e.pbs_stat=mc)),l!=Zu&&l!=Qu&&l!=ec||(c=1e-6+1e-9*Math.abs(n.ub),n.prim>n.ub+c&&(e.pbs_stat=mc)));for(a=1;a<=e.n;a++)i=e.col[a],i.stat==tc&&(i.prim=d[i.bind],l=i.type,l!=$u&&l!=Qu&&l!=ec||(c=1e-6+1e-9*Math.abs(i.lb),i.prim<i.lb-c&&(e.pbs_stat=mc)),l!=Zu&&l!=Qu&&l!=ec||(c=1e-6+1e-9*Math.abs(i.ub),i.prim>i.ub+c&&(e.pbs_stat=mc)));for(e.obj_val=e.c0,a=1;a<=e.n;a++)i=e.col[a],e.obj_val+=i.coef*i.prim;for(o=1;o<=e.m;o++)d[o]=0;for(a=1;a<=e.n;a++)i=e.col[a],i.stat==tc&&(d[i.bind]=i.coef);for(hu(e,d),e.dbs_stat=pc,o=1;o<=e.m;o++)n=e.row[o],n.stat!=tc?(n.dual=-d[o],s=n.stat,_=e.dir==Vu?+n.dual:-n.dual,((s==rc||s==nc)&&_<-1e-5||(s==rc||s==ic)&&_>1e-5)&&(e.dbs_stat=mc)):n.dual=0;for(a=1;a<=e.n;a++)if(i=e.col[a],i.stat!=tc){for(i.dual=i.coef,r=i.ptr;null!=r;r=r.c_next)i.dual+=r.val*d[r.row.i];s=i.stat,_=e.dir==Vu?+i.dual:-i.dual,((s==rc||s==nc)&&_<-1e-5||(s==rc||s==ic)&&_>1e-5)&&(e.dbs_stat=mc)}else i.dual=0;return 0},e.glp_eval_tab_row=function(e,i,r,o){var a,l,s,u,c,_,d,f,b=e.m,p=e.n;for(0==b||e.valid||n("glp_eval_tab_row: basis factorization does not exist"),1<=i&&i<=b+p||n("glp_eval_tab_row: k = "+i+"; variable number out of range"),a=i<=b?bu(e,i):pu(e,i-b),0==a&&n("glp_eval_tab_row: k = "+i+"; variable must be basic"),t(1<=a&&a<=b),d=new Float64Array(1+b),c=new Int32Array(1+b),f=new Float64Array(1+b),d[a]=1,hu(e,d),s=0,i=1;i<=b+p;i++){if(i<=b){if(Ys(e,i)==tc)continue;_=-d[i]}else{if(Zs(e,i-b)==tc)continue;for(u=Cs(e,i-b,c,f),_=0,l=1;l<=u;l++)_+=d[c[l]]*f[l]}0!=_&&(s++,r[s]=i,o[s]=_)}return t(s<=p),s}),vu=e.glp_eval_tab_col=function(e,t,i,r){var o,a,l,s,u=e.m,c=e.n;if(0==u||e.valid||n("glp_eval_tab_col: basis factorization does not exist"),1<=t&&t<=u+c||n("glp_eval_tab_col: k = "+t+"; variable number out of range"),l=t<=u?Ys(e,t):Zs(e,t-u),l==tc&&n("glp_eval_tab_col: k = "+t+"; variable must be non-basic"),s=new Float64Array(1+u),t<=u)s[t]=-1;else for(a=Cs(e,t-u,i,r),o=1;o<=a;o++)s[i[o]]=r[o];for(mu(e,s),a=0,o=1;o<=u;o++)0!=s[o]&&(a++,i[a]=fu(e,o),r[a]=s[o]);return a},yu=e.glp_transform_row=function(e,i,r,o){var a,l,s,u,c,_,d,f,b,p,m,h,g;for(uu(e)||n("glp_transform_row: basis factorization does not exist "),u=vs(e),c=ys(e),p=new Float64Array(1+c),0<=i&&i<=c||n("glp_transform_row: len = "+i+"; invalid row length"),_=1;_<=i;_++)l=r[_],1<=l&&l<=c||n("glp_transform_row: ind["+_+"] = "+l+"; column index out of range"),0==o[_]&&n("glp_transform_row: val["+_+"] = 0; zero coefficient not allowed"),0!=p[l]&&n("glp_transform_row: ind["+_+"] = "+l+"; duplicate column indices not allowed"),p[l]=o[_];for(m=new Float64Array(1+u),a=1;a<=u;a++)s=fu(e,a),t(1<=s&&s<=u+c),m[a]=s<=u?0:p[s-u];for(h=m,hu(e,h),i=0,a=1;a<=u;a++)Ys(e,a)!=tc&&0!=(b=-h[a])&&(i++,r[i]=a,o[i]=b);for(f=new Int32Array(1+u),g=new Float64Array(1+u),l=1;l<=c;l++)if(Zs(e,l)!=tc){for(b=p[l],d=Cs(e,l,f,g),_=1;_<=d;_++)b+=g[_]*h[f[_]];0!=b&&(i++,r[i]=u+l,o[i]=b)}return t(i<=c),i},xu=(e.glp_transform_col=function(e,t,i,r){var o,a,l,s,u;for(uu(e)||n("glp_transform_col: basis factorization does not exist "),a=vs(e),s=new Float64Array(1+a),0<=t&&t<=a||n("glp_transform_col: len = "+t+"; invalid column length"),l=1;l<=t;l++)o=i[l],1<=o&&o<=a||n("glp_transform_col: ind["+l+"] = "+o+"; row index out of range"),0==r[l]&&n("glp_transform_col: val["+l+"] = 0; zero coefficient not allowed"),0!=s[o]&&n("glp_transform_col: ind["+l+"] = "+o+"; duplicate row indices not allowed"),s[o]=r[l];for(u=s,mu(e,u),t=0,o=1;o<=a;o++)0!=u[o]&&(t++,i[t]=fu(e,o),r[t]=u[o]);return t},e.glp_prim_rtest=function(e,i,r,o,a,l){var s,u,c,_,d,f,b,p,m,h,g,v,y,x;for(Xs(e)!=pc&&n("glp_prim_rtest: basic solution is not primal feasible "),1!=a&&-1!=a&&n("glp_prim_rtest: dir = "+a+"; invalid parameter"),0<l&&l<1||n("glp_prim_rtest: eps = "+l+"; invalid parameter"),u=vs(e),c=ys(e),_=0,x=Bl,m=0,d=1;d<=i;d++)if(s=r[d],1<=s&&s<=u+c||n("glp_prim_rtest: ind["+d+"] = "+s+"; variable number out of range"),s<=u?(f=ks(e,s),g=Ms(e,s),v=As(e,s),b=Ys(e,s),h=Js(e,s)):(f=Es(e,s-u),g=Ps(e,s-u),v=js(e,s-u),b=Zs(e,s-u),h=Qs(e,s-u)),b!=tc&&n("glp_prim_rtest: ind["+d+"] = "+s+"; non-basic variable not allowed"),p=a>0?+o[d]:-o[d],f!=Ju){if(f==$u){if(p>-l)continue;y=(g-h)/p}else if(f==Zu){if(p<+l)continue;y=(v-h)/p}else if(f==Qu)if(p<0){if(p>-l)continue;y=(g-h)/p}else{if(p<+l)continue;y=(v-h)/p}else if(f==ec){if(-l<p&&p<+l)continue;y=0}else t(f!=f);y<0&&(y=0),(x>y||x==y&&m<Math.abs(p))&&(_=d,x=y,m=Math.abs(p))}return _}),wu=e.glp_dual_rtest=function(e,i,r,o,a,l){var s,u,c,_,d,f,b,p,m,h,g,v;for(Ks(e)!=pc&&n("glp_dual_rtest: basic solution is not dual feasible"),1!=a&&-1!=a&&n("glp_dual_rtest: dir = "+a+"; invalid parameter"),0<l&&l<1||n("glp_dual_rtest: eps = "+l+"; invalid parameter"),u=vs(e),c=ys(e),h=gs(e)==Vu?1:-1,_=0,v=Bl,p=0,d=1;d<=i;d++){if(s=r[d],1<=s&&s<=u+c||n("glp_dual_rtest: ind["+d+"] = "+s+"; variable number out of range"),s<=u?(f=Ys(e,s),m=$s(e,s)):(f=Zs(e,s-u),m=eu(e,s-u)),f==tc&&n("glp_dual_rtest: ind["+d+"] = "+s+"; basic variable not allowed"),b=a>0?+o[d]:-o[d],f==nc){if(b<+l)continue;g=h*m/b}else if(f==ic){if(b>-l)continue;g=h*m/b}else if(f==rc){if(-l<b&&b<+l)continue;g=0}else{if(f==oc)continue;t(f!=f)}g<0&&(g=0),(v>g||v==g&&p<Math.abs(b))&&(_=d,v=g,p=Math.abs(b))}return _},ku=(e.glp_analyze_bound=function(e,i,r){function o(){_<0?(k=h,M=d):(A=h,E=d)}var a,l,s,u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M,A,E;for(k=M=A=E=null,null!=e&&e.magic==Ql||n("glp_analyze_bound: P = "+e+"; invalid problem object"),s=e.m,u=e.n,e.pbs_stat==pc&&e.dbs_stat==pc||n("glp_analyze_bound: optimal basic solution required"),0==s||e.valid||n("glp_analyze_bound: basis factorization required"),1<=i&&i<=s+u||n("glp_analyze_bound: k = "+i+"; variable number out of range"),i<=s?(a=e.row[i],c=a.stat,m=a.prim):(l=e.col[i-s],c=l.stat,m=l.prim),c==tc&&n("glp_analyze_bound: k = "+i+"; basic variable not allowed "),p=new Int32Array(1+s),w=new Float64Array(1+s),f=vu(e,i,p,w),t(0<=f&&f<=s),_=-1;_<=1;_+=2)b=xu(e,f,p,w,_,1e-9),0!=b?(t(1<=b&&b<=f),d=p[b],d<=s?(a=e.row[d],g=Ms(e,a.i),v=As(e,a.i),c=a.stat,y=a.prim):(l=e.col[d-s],g=Ps(e,l.j),v=js(e,l.j),c=l.stat,y=l.prim),t(c==tc),_<0&&w[b]>0||_>0&&w[b]<0?(t(g!=-Bl),x=g-y):(t(v!=+Bl),x=v-y),t(0!=w[b]),h=m+x/w[b],o()):(d=0,h=_<0?-Bl:+Bl,o());r(k,M,A,E)},e.glp_analyze_coef=function(e,i,r){function o(){d<0?(T=E,I=b,D=P):(F=E,R=b,U=P)}var a,l,s,u,c,_,d,f,b,p,m,h,g,v,y,x,w,k,M,A,E,P,j,O,C,S,z,N,L,T=null,I=null,D=null,F=null,R=null,U=null;for(null!=e&&e.magic==Ql||n("glp_analyze_coef: P = "+e+"; invalid problem object"),s=e.m,u=e.n,e.pbs_stat==pc&&e.dbs_stat==pc||n("glp_analyze_coef: optimal basic solution required"),0==s||e.valid||n("glp_analyze_coef: basis factorization required"),1<=i&&i<=s+u||n("glp_analyze_coef: k = "+i+"; variable number out of range"),i<=s?(a=e.row[i],c=a.type,w=a.lb,k=a.ub,M=0,_=a.stat,A=a.prim):(l=e.col[i-s],c=l.type,w=l.lb,k=l.ub,M=l.coef,_=l.stat,A=l.prim),_!=tc&&n("glp_analyze_coef: k = "+i+"; non-basic variable not allowed"),y=new Int32Array(1+s),L=new Float64Array(1+s),x=new Int32Array(1+u),N=new Float64Array(1+u),g=gu(e,i,x,N),t(0<=g&&g<=u),d=-1;d<=1;d+=2)e.dir==Vu?p=-d:e.dir==Xu?p=+d:t(e!=e),v=wu(e,g,x,N,p,1e-9),0!=v?(t(1<=v&&v<=g),b=x[v],t(1<=b&&b<=s+u),b<=s?(a=e.row[b],_=a.stat,j=a.dual):(l=e.col[b-s],_=l.stat,j=l.dual),t(0!=N[v]),O=-j/N[v],E=M+O,p=d<0&&N[v]>0||d>0&&N[v]<0?1:-1,e.dir==Xu&&(p=-p),t(p>0?_==nc||_==rc:_==ic||_==rc),m=vu(e,b,y,L),i<=s?(a=e.row[i],a.type=Ju,a.lb=a.ub=0):(l=e.col[i-s],l.type=Ju,l.lb=l.ub=0),h=xu(e,m,y,L,p,1e-9),i<=s?(a=e.row[i],a.type=c,a.lb=w,a.ub=k):(l=e.col[i-s],l.type=c,l.lb=w,l.ub=k),0!=h?(t(1<=h&&h<=m),f=y[h],t(1<=f&&f<=s+u),t(f!=i),f<=s?(a=e.row[f],t(a.stat==tc),C=Ms(e,a.i),S=As(e,a.i),z=a.prim):(l=e.col[f-s],t(l.stat==tc),C=Ps(e,l.j),S=js(e,l.j),z=l.prim),p<0&&L[h]>0||p>0&&L[h]<0?(t(C!=-Bl),O=C-z):(t(S!=+Bl),O=S-z),t(0!=L[h]),P=A+N[v]/L[h]*O,o()):(P=p<0&&N[v]>0||p>0&&N[v]<0?-Bl:+Bl,o())):(E=d<0?-Bl:+Bl,b=0,P=A,o());r(T,I,D,F,R,U)},e.glp_ios_reason=function(e){return e.reason},e.glp_ios_get_prob=function(e){return e.mip},e.glp_mpl_alloc_wksp=function(){return dm()},e._glp_mpl_init_rand=function(e,t){0!=e.phase&&n("glp_mpl_init_rand: invalid call sequence\n"),yl(e.rand,t)},e.glp_mpl_read_model=function(e,i,r,o){var a;return 0!=e.phase&&n("glp_mpl_read_model: invalid call sequence"),a=fm(e,i,r,o),1==a||2==a?a=0:4==a?a=1:t(a!=a),a}),Mu=(e.glp_mpl_read_model_from_string=function(e,t,n,i){var r=0;return ku(e,t,function(){return r<n.length?n[r++]:-1},i)},e.glp_mpl_read_data=function(e,i,r){var o;return 1!=e.phase&&2!=e.phase&&n("glp_mpl_read_data: invalid call sequence"),o=bm(e,i,r),2==o?o=0:4==o?o=1:t(o!=o),o}),Au=(e.glp_mpl_read_data_from_string=function(e,t,n){var i=0;return Mu(e,t,function(){return i<n.length?n[i++]:-1})},e.glp_mpl_generate=function(e,t,i,r){var o;return 1!=e.phase&&2!=e.phase&&n("glp_mpl_generate: invalid call sequence\n"),o=pm(e,t,i,r),3==o?o=0:4==o&&(o=1),o},e.glp_mpl_build_prob=function(e,i){var r,o,a,l,s,u,c,_,d,f,b,p;for(3!=e.phase&&n("glp_mpl_build_prob: invalid call sequence\n"),ms(i),ts(i,mm(e)),r=hm(e),r>0&&rs(i,r),a=1;a<=r;a++){switch(as(i,a,vm(e,a)),c=xm(e,a,function(e,t){f=e,b=t})){case Kp:c=Ju;break;case Wp:c=$u;break;case Yp:c=Zu;break;case Jp:c=Qu;break;case $p:c=ec;break;default:t(c!=c)}c==Qu&&Math.abs(f-b)<1e-9*(1+Math.abs(f))&&(c=ec,Math.abs(f)<=Math.abs(b)?b=f:f=b),ss(i,a,c,f,b),0!=km(e,a)&&Jl("glp_mpl_build_prob: row "+vm(e,a)+"; constant term "+km(e,a)+" ignored")}for(o=gm(e),o>0&&os(i,o),l=1;l<=o;l++){switch(ls(i,l,Mm(e,l)),u=Am(e,l)){case em:break;case tm:case nm:tu(i,l,Wu);break;default:t(u!=u)}switch(c=Em(e,l,function(e,t){f=e,b=t})){case Kp:c=Ju;break;case Wp:c=$u;break;case Yp:c=Zu;break;case Jp:c=Qu;break;case $p:c=ec;break;default:t(c!=c)}u==nm&&((c==Ju||c==Zu||f<0)&&(f=0),(c==Ju||c==$u||b>1)&&(b=1),c=Qu),c==Qu&&Math.abs(f-b)<1e-9*(1+Math.abs(f))&&(c=ec,Math.abs(f)<=Math.abs(b)?b=f:f=b),us(i,l,c,f,b)}for(d=new Int32Array(1+o),p=new Float64Array(1+o),a=1;a<=r;a++)_=wm(e,a,d,p),_s(i,a,_,d,p);for(a=1;a<=r;a++)if((u=ym(e,a))==Zp||u==Qp){for(ns(i,vm(e,a)),is(i,u==Zp?Vu:Xu),cs(i,0,km(e,a)),_=wm(e,a,d,p),s=1;s<=_;s++)cs(i,d[s],p[s]);break}},e.glp_mpl_postsolve=function(e,i,r){var o,a,l,s,u,c,_,d;if((3!=e.phase||e.flag_p)&&n("glp_mpl_postsolve: invalid call sequence"),r!=_c&&r!=dc&&r!=fc&&n("glp_mpl_postsolve: sol = "+r+"; invalid parameter"),l=hm(e),s=gm(e),l==vs(i)&&s==ys(i)||n("glp_mpl_postsolve: wrong problem object\n"),!Pm(e))return 0;for(o=1;o<=l;o++)r==_c?(u=Ys(i,o),_=Js(i,o),d=$s(i,o)):r==dc?(u=0,_=glp_ipt_row_prim(i,o),d=glp_ipt_row_dual(i,o)):r==fc?(u=0,_=lu(i,o),d=0):t(r!=r),Math.abs(_)<1e-9&&(_=0),Math.abs(d)<1e-9&&(d=0),jm(e,o,u,_,d);for(a=1;a<=s;a++)r==_c?(u=Zs(i,a),_=Qs(i,a),d=eu(i,a)):r==dc?(u=0,_=glp_ipt_col_prim(i,a),d=glp_ipt_col_dual(i,a)):r==fc?(u=0,_=su(i,a),d=0):t(r!=r),Math.abs(_)<1e-9&&(_=0),Math.abs(d)<1e-9&&(d=0),Om(e,a,u,_,d);return c=Cm(e),3==c?c=0:4==c&&(c=1),c},1),Eu=2,Pu=3,ju=4,Ou=5,Cu="!\"#$%&()/,.;?@_`'{}|~",Su=e.glp_read_lp=function(e,n,i){function a(e,t){throw new Error(e.count+": "+t)}function l(e,t){Jl(e.count+": warning: "+t)}function s(e){var n;t(e.c!=Yl),"\n"==e.c&&e.count++,n=e.callback(),n<0?"\n"==e.c?(e.count--,n=Yl):(l(e,"missing final end of line"),n="\n"):"\n"==n||(_(n)?n=" ":d(n)&&a(e,"invalid control character "+n.charCodeAt(0))),e.c=n}function u(e){e.image+=e.c,s(e)}function c(e,t){return e.toLowerCase()==t.toLowerCase()?1:0}function g(e){function t(){for(e.token=N;b(e.c)||m(Cu,e.c)>=0;)u(e);n&&(c(e.image,"minimize")?e.token=A:c(e.image,"minimum")?e.token=A:c(e.image,"min")?e.token=A:c(e.image,"maximize")?e.token=E:c(e.image,"maximum")?e.token=E:c(e.image,"max")?e.token=E:c(e.image,"subject")?" "==e.c&&(s(e),"t"==h(e.c)&&(e.token=P,e.image+=" ",u(e),"o"!=h(e.c)&&a(e,"keyword `subject to' incomplete"),u(e),f(e.c)&&a(e,"keyword `"+e.image+e.c+"...' not recognized"))):c(e.image,"such")?" "==e.c&&(s(e),"t"==h(e.c)&&(e.token=P,e.image+=" ",u(e),"h"!=h(e.c)&&a(e,"keyword `such that' incomplete"),u(e),"a"!=h(e.c)&&a(e,"keyword `such that' incomplete"),u(e),"t"!=h(e.c)&&a(e,"keyword `such that' incomplete"),u(e),f(e.c)&&a(e,"keyword `"+e.image+e.c+"...' not recognized"))):c(e.image,"st")?e.token=P:c(e.image,"s.t.")?e.token=P:c(e.image,"st.")?e.token=P:c(e.image,"bounds")?e.token=j:c(e.image,"bound")?e.token=j:c(e.image,"general")?e.token=O:c(e.image,"generals")?e.token=O:c(e.image,"gen")?e.token=O:c(e.image,"integer")?e.token=C:c(e.image,"integers")?e.token=C:c(e.image,"int")?e.token=C:c(e.image,"binary")?e.token=S:c(e.image,"binaries")?e.token=S:c(e.image,"bin")?e.token=S:c(e.image,"end")&&(e.token=z))}var n;for(e.token=-1,e.image="",e.value=0;;){for(n=0;" "==e.c;)s(e);if(e.c==Yl)e.token=M;else if("\n"==e.c){if(s(e),!f(e.c))continue;n=1,t()}else{if("\\"==e.c){for(;"\n"!=e.c;)s(e);continue}if(f(e.c)||"."!=e.c&&m(Cu,e.c)>=0)t();else if(p(e.c)||"."==e.c){for(e.token=L;p(e.c);)u(e);if("."==e.c)for(u(e),1!=e.image.length||p(e.c)||a(e,"invalid use of decimal point");p(e.c);)u(e);if("e"==e.c||"E"==e.c)for(u(e),"+"!=e.c&&"-"!=e.c||u(e),p(e.c)||a(e,"numeric constant `"+e.image+"' incomplete");p(e.c);)u(e);e.value=Number(e.image),e.value==Number.NaN&&a(e,"numeric constant `"+e.image+"' out of range")}else"+"==e.c?(e.token=T,u(e)):"-"==e.c?(e.token=I,u(e)):":"==e.c?(e.token=D,u(e)):"<"==e.c?(e.token=F,u(e),"="==e.c&&u(e)):">"==e.c?(e.token=R,u(e),"="==e.c&&u(e)):"="==e.c?(e.token=B,u(e),"<"==e.c?(e.token=F,u(e)):">"==e.c&&(e.token=R,u(e))):a(e,"character `"+e.c+"' not recognized")}break}for(;" "==e.c;)s(e)}function v(e,t){var n=Ns(e.P,t);if(0==n){if(n=os(e.P,1),ls(e.P,n,t),e.n_max<n){var i=e.n_max,a=e.ind,l=e.val,s=e.flag,u=e.lb,c=e.ub;e.n_max+=e.n_max,e.ind=new Int32Array(1+e.n_max),r(e.ind,1,a,1,i),e.val=new Float64Array(1+e.n_max),r(e.val,1,l,1,i),e.flag=new Int8Array(1+e.n_max),o(e.flag,1,0,e.n_max),r(e.flag,1,s,1,i),e.lb=new Float64Array(1+e.n_max),r(e.lb,1,u,1,i),e.ub=new Float64Array(1+e.n_max),r(e.ub,1,c,1,i)}e.lb[n]=+Bl,e.ub[n]=-Bl}return n}function y(e){for(var t,n,i,r,o,l=0;;)if(e.token==T?(r=1,g(e)):e.token==I?(r=-1,g(e)):r=1,e.token==L?(o=e.value,g(e)):o=1,e.token!=N&&a(e,"missing variable name"),t=v(e,e.image),e.flag[t]&&a(e,"multiple use of variable `"+e.image+"' not allowed"),l++,e.ind[l]=t,e.val[l]=r*o,e.flag[t]=1,g(e),e.token!=T&&e.token!=I){for(n=1;n<=l;n++)e.flag[e.ind[n]]=0;for(i=0,n=1;n<=l;n++)0!=e.val[n]&&(i++,e.ind[i]=e.ind[n],e.val[i]=e.val[n]);break}return i}function x(e,t,n){e.lb[t]!=+Bl&&l(e,"lower bound of variable `"+ws(e.P,t)+"' redefined"),e.lb[t]=n}function w(e,t,n){e.ub[t]!=-Bl&&l(e,"upper bound of variable `"+ws(e.P,t)+"' redefined"),e.ub[t]=n}var k,M=0,A=1,E=2,P=3,j=4,O=5,C=6,S=7,z=8,N=9,L=10,T=11,I=12,D=13,F=14,R=15,B=16,q={};for(Jl("Reading problem data"),null==n&&(n={}),U("glp_read_lp",n),q.P=e,q.parm=n,q.callback=i,q.count=0,q.c="\n",q.token=M,q.image="",q.value=0,q.n_max=100,q.ind=new Int32Array(1+q.n_max),q.val=new Float64Array(1+q.n_max),q.flag=new Int8Array(1+q.n_max),o(q.flag,1,0,q.n_max),q.lb=new Float64Array(1+q.n_max),q.ub=new Float64Array(1+q.n_max),ms(e),Ss(e),g(q),q.token!=A&&q.token!=E&&a(q,"`minimize' or `maximize' keyword missing"),function(e){var n,i;for(e.token==A?is(e.P,Vu):e.token==E?is(e.P,Xu):t(e!=e),g(e),e.token==N&&":"==e.c?(ns(e.P,e.image),g(e),t(e.token==D),g(e)):ns(e.P,"obj"),i=y(e),n=1;n<=i;n++)cs(e.P,e.ind[n],e.val[n])}(q),q.token!=P&&a(q,"constraints section missing"),function(e){var n,i,r,o;for(t(e.token==P),g(e);n=rs(e.P,1),e.token==N&&":"==e.c?(0!=zs(e.P,e.image)&&a(e,"constraint `"+e.image+"' multiply defined"),as(e.P,n,e.image),g(e),t(e.token==D),g(e)):as(e.P,n,"r."+e.count),i=y(e),_s(e.P,n,i,e.ind,e.val),e.token==F?(r=Zu,g(e)):e.token==R?(r=$u,g(e)):e.token==B?(r=ec,g(e)):a(e,"missing constraint sense"),e.token==T?(o=1,g(e)):e.token==I?(o=-1,g(e)):o=1,e.token!=L&&a(e,"missing right-hand side"),ss(e.P,n,r,o*e.value,o*e.value),"\n"!=e.c&&e.c!=Yl&&a(e,"invalid symbol(s) beyond right-hand side"),g(e),e.token==T||e.token==I||e.token==L||e.token==N;);}(q),q.token==j&&function(e){var n,i,r,o;for(t(e.token==j),g(e);;){if(e.token!=T&&e.token!=I&&e.token!=L&&e.token!=N)return;e.token==T||e.token==I?(i=1,o=e.token==T?1:-1,g(e),e.token==L?(r=o*e.value,g(e)):c(e.image,"infinity")||c(e.image,"inf")?(o>0&&a(e,"invalid use of `+inf' as lower bound"),r=-Bl,g(e)):a(e,"missing lower bound")):e.token==L?(i=1,r=e.value,g(e)):i=0,i&&(e.token!=F&&a(e,"missing `<', `<=', or `=<' after lower bound"),g(e)),e.token!=N&&a(e,"missing variable name"),n=v(e,e.image),i&&x(e,n,r),g(e),e.token==F?(g(e),e.token==T||e.token==I?(o=e.token==T?1:-1,g(e),e.token==L?(w(e,n,o*e.value),g(e)):c(e.image,"infinity")||c(e.image,"inf")?(o<0&&a(e,"invalid use of `-inf' as upper bound"),w(e,n,+Bl),g(e)):a(e,"missing upper bound")):e.token==L?(w(e,n,e.value),g(e)):a(e,"missing upper bound")):e.token==R?(i&&a(e,"invalid bound definition"),g(e),e.token==T||e.token==I?(o=e.token==T?1:-1,g(e),e.token==L?(x(e,n,o*e.value),g(e)):c(e.image,"infinity")||0==c(e.image,"inf")?(o>0&&a(e,"invalid use of `+inf' as lower bound"),x(e,n,-Bl),g(e)):a(e,"missing lower bound")):e.token==L?(x(e,n,e.value),g(e)):a(e,"missing lower bound")):e.token==B?(i&&a(e,"invalid bound definition"),g(e),e.token==T||e.token==I?(o=e.token==T?1:-1,g(e),e.token==L?(x(e,n,o*e.value),w(e,n,o*e.value),g(e)):a(e,"missing fixed value")):e.token==L?(x(e,n,e.value),w(e,n,e.value),g(e)):a(e,"missing fixed value")):c(e.image,"free")?(i&&a(e,"invalid bound definition"),x(e,n,-Bl),w(e,n,+Bl),g(e)):i||a(e,"invalid bound definition")}}(q);q.token==O||q.token==C||q.token==S;)!function(e){var n,i;for(e.token==O?(i=0,g(e)):e.token==C?(i=0,g(e)):e.token==S?(i=1,g(e)):t(e!=e);e.token==N;)n=v(e,e.image),tu(e.P,n,Wu),i&&(x(e,n,0),w(e,n,1)),g(e)}(q);q.token==z?g(q):q.token==M?l(q,"keyword `end' missing"):a(q,"symbol "+q.image+" in wrong position"),q.token!=M&&a(q,"extra symbol(s) detected beyond `end'");var H,G,V,X;for(H=1;H<=e.n;H++)V=q.lb[H],X=q.ub[H],V==+Bl&&(V=0),X==-Bl&&(X=+Bl),G=V==-Bl&&X==+Bl?Ju:X==+Bl?$u:V==-Bl?Zu:V!=X?Qu:ec,us(q.P,H,G,V,X);if(Jl(e.m+" row"+(1==e.m?"":"s")+", "+e.n+" column"+(1==e.n?"":"s")+", "+e.nnz+" non-zero"+(1==e.nnz?"":"s")),iu(e)>0){var K=iu(e),W=ru(e);if(1==K)Jl(0==W?"One variable is integer":"One variable is binary");else{var Y=K+" integer variables, ";Y+=0==W?"none":1==W?"one":W==K?"all":W,Jl(Y+" of which "+(1==W?"is":"are")+" binary")}}return Jl(q.count+" lines were read"),Ls(e),fs(e),k=0,function(){return 0!=k&&ms(e),k}()},zu=(e.glp_write_lp=function(e,n,i){function r(e){if("."==e[0])return 1;if(p(e[0]))return 1;for(var t=0;t<e.length;t++)if(!b(e[t])&&m(Cu,e[t])<0)return 1;return 0}function o(e){for(var t=0;t<e.length;t++)" "==e[t]?e[t]="_":"-"==e[t]?e[t]="~":"["==e[t]?e[t]="(":"]"==e[t]&&(e[t]=")")}function a(e,t){function n(){return 0==t?"obj":"r_"+t}var i;return null==(i=0==t?hs(e.P):xs(e.P,t))?n():(o(i),r(i)?n():i)}function l(e,t){function n(){return"x_"+t}var i=ws(e.P,t);return null==i?n():(o(i),r(i)?n():i)}function s(){return i("End"),v++,Jl(v+" lines were written"),0}var u,c,_,d,f,h,g,v,y,x,w,k={};if(Jl("Writing problem data"),null==n&&(n={}),U("glp_write_lp",n),k.P=e,k.parm=n,v=0,i("\\* Problem: "+(null==e.name?"Unknown":e.name)+" *\\"),v++,i(""),v++,!(e.m>0&&e.n>0))return Jl("Warning: problem has no rows/columns"),i("\\* WARNING: PROBLEM HAS NO ROWS/COLUMNS *\\"),v++,i(""),v++,s();for(e.dir==Vu?(i("Minimize"),v++):e.dir==Xu?(i("Maximize"),v++):t(e!=e),w=a(k,0),y=" "+w+":",h=0,f=1;f<=e.n;f++)c=e.col[f],0==c.coef&&null!=c.ptr||(h++,w=l(k,f),x=0==c.coef?" + 0 "+w:1==c.coef?" + "+w:-1==c.coef?" - "+w:c.coef>0?" + "+c.coef+" "+w:" - "+-c.coef+" "+w,y.length+x.length>72&&(i(y),y="",v++),y+=x);for(0==h&&(x=" 0 "+l(k,1),y+=x),i(y),v++,0!=e.c0&&(i("\\* constant term = "+e.c0+" *\\"),v++),i(""),v++,i("Subject To"),v++,d=1;d<=e.m;d++)if(u=e.row[d],u.type!=Ju){for(w=a(k,d),y=" "+w+":",_=u.ptr;null!=_;_=_.r_next)w=l(k,_.col.j),x=1==_.val?" + "+w:-1==_.val?" - "+w:_.val>0?" + "+_.val+" "+w:" - "+-_.val+" "+w,y.length+x.length>72&&(i(y),y="",v++),y+=x;u.type==Qu?(x=" - ~r_"+d,y.length+x.length>72&&(i(y),y="",v++),y+=x):null==u.ptr&&(x=" 0 "+l(k,1),y+=x),u.type==$u?x=" >= "+u.lb:u.type==Zu?x=" <= "+u.ub:u.type==Qu||u.type==ec?x=" = "+u.lb:t(u!=u),y.length+x.length>72&&(i(y),y="",v++),y+=x,i(y),v++}for(i(""),v++,g=0,d=1;d<=e.m;d++)u=e.row[d],u.type==Qu&&(g||(i("Bounds"),g=1,v++),i(" 0 <= ~r_"+d+" <= "+(u.ub-u.lb)),v++);for(f=1;f<=e.n;f++)c=e.col[f],c.type==$u&&0==c.lb||(g||(i("Bounds"),g=1,v++),w=l(k,f),c.type==Ju?(i(" "+w+" free"),v++):c.type==$u?(i(" "+w+" >= "+c.lb),v++):c.type==Zu?(i(" -Inf <= "+w+" <= "+c.ub),v++):c.type==Qu?(i(" "+c.lb+" <= "+w+" <= "+c.ub),v++):c.type==ec?(i(" "+w+" = "+c.lb),v++):t(c!=c));for(g&&i(""),v++,g=0,f=1;f<=e.n;f++)c=e.col[f],c.kind!=Ku&&(t(c.kind==Wu),g||(i("Generals"),g=1,v++),i(" "+l(k,f)),v++);return g&&(i(""),v++),s()},e.glp_read_lp_from_string=function(e,t,n){var i=0;return Su(e,t,function(){return i<n.length?n[i++]:-1})},1),Nu=2,Lu=3,Tu=4,Iu=5,Du=e.glp_ios_relative_gap=function(e){var t,n,i,r,o=e.mip;return o.mip_stat==pc?(n=o.mip_obj,t=oe(e),0==t?r=0:(i=e.slot[t].node.bound,r=Math.abs(n-i)/(Math.abs(n)+Vl))):r=Bl,r},Fu=0,Ru=5,Uu=0,Bu=1,qu=2,Hu=e.GLP_MAJOR_VERSION=4,Gu=e.GLP_MINOR_VERSION=49,Vu=e.GLP_MIN=1,Xu=e.GLP_MAX=2,Ku=e.GLP_CV=1,Wu=e.GLP_IV=2,Yu=e.GLP_BV=3,Ju=e.GLP_FR=1,$u=e.GLP_LO=2,Zu=e.GLP_UP=3,Qu=e.GLP_DB=4,ec=e.GLP_FX=5,tc=e.GLP_BS=1,nc=e.GLP_NL=2,ic=e.GLP_NU=3,rc=e.GLP_NF=4,oc=e.GLP_NS=5,ac=e.GLP_SF_GM=1,lc=e.GLP_SF_EQ=16,sc=e.GLP_SF_2N=32,uc=e.GLP_SF_SKIP=64,cc=e.GLP_SF_AUTO=128,_c=e.GLP_SOL=1,dc=e.GLP_IPT=2,fc=e.GLP_MIP=3,bc=e.GLP_UNDEF=1,pc=e.GLP_FEAS=2,mc=e.GLP_INFEAS=3,hc=e.GLP_NOFEAS=4,gc=e.GLP_OPT=5,vc=e.GLP_UNBND=6,yc=e.GLP_BF_FT=1,xc=e.GLP_BF_BG=2,wc=e.GLP_BF_GR=3,kc=e.GLP_MSG_OFF=0,Mc=e.GLP_MSG_ERR=1,Ac=e.GLP_MSG_ON=2,Ec=e.GLP_MSG_ALL=3,Pc=e.GLP_MSG_DBG=4,jc=e.GLP_PRIMAL=1,Oc=e.GLP_DUALP=2,Cc=e.GLP_DUAL=3,Sc=e.GLP_PT_STD=17,zc=e.GLP_PT_PSE=34,Nc=e.GLP_RT_STD=17,Lc=e.GLP_RT_HAR=34,Tc=(e.GLP_ORD_NONE=0,e.GLP_ORD_QMD=1,e.GLP_ORD_AMD=2,e.GLP_ORD_SYMAMD=3,e.GLP_BR_FFV=1),Ic=e.GLP_BR_LFV=2,Dc=e.GLP_BR_MFV=3,Fc=e.GLP_BR_DTH=4,Rc=e.GLP_BR_PCH=5,Uc=e.GLP_BT_DFS=1,Bc=e.GLP_BT_BFS=2,qc=e.GLP_BT_BLB=3,Hc=e.GLP_BT_BPH=4,Gc=e.GLP_PP_NONE=0,Vc=e.GLP_PP_ROOT=1,Xc=e.GLP_PP_ALL=2,Kc=(e.GLP_RF_REG=0,e.GLP_RF_LAZY=1),Wc=e.GLP_RF_CUT=2,Yc=e.GLP_RF_GMI=1,Jc=e.GLP_RF_MIR=2,$c=e.GLP_RF_COV=3,Zc=e.GLP_RF_CLQ=4,Qc=e.GLP_ON=1,e_=e.GLP_OFF=0,t_=e.GLP_IROWGEN=1,n_=e.GLP_IBINGO=2,i_=e.GLP_IHEUR=3,r_=e.GLP_ICUTGEN=4,o_=e.GLP_IBRANCH=5,a_=e.GLP_ISELECT=6,l_=e.GLP_IPREPRO=7,s_=e.GLP_NO_BRNCH=0,u_=e.GLP_DN_BRNCH=1,c_=e.GLP_UP_BRNCH=2,__=e.GLP_EBADB=1,d_=e.GLP_ESING=2,f_=e.GLP_ECOND=3,b_=e.GLP_EBOUND=4,p_=e.GLP_EFAIL=5,m_=e.GLP_EOBJLL=6,h_=e.GLP_EOBJUL=7,g_=e.GLP_EITLIM=8,v_=e.GLP_ETMLIM=9,y_=e.GLP_ENOPFS=10,x_=e.GLP_ENODFS=11,w_=e.GLP_EROOT=12,k_=e.GLP_ESTOP=13,M_=e.GLP_EMIPGAP=14,A_=(e.GLP_ENOFEAS=15,e.GLP_ENOCVG=16,e.GLP_EINSTAB=17,e.GLP_EDATA=18,e.GLP_ERANGE=19,e.GLP_KKT_PE=1,e.GLP_KKT_PB=2,e.GLP_KKT_DE=3,e.GLP_KKT_DB=4,e.GLP_KKT_CS=5,e.GLP_MPS_DECK=1,e.GLP_MPS_FILE=2,e.GLP_ASN_MIN=1,e.GLP_ASN_MAX=2,e.GLP_ASN_MMP=3,1);LPF_ECOND=2,LPF_ELIMIT=3;var E_=0,P_=(e.LPX_LP=100,e.LPX_MIP=101,e.LPX_FR=110),j_=e.LPX_LO=111,O_=e.LPX_UP=112,C_=e.LPX_DB=113,S_=e.LPX_FX=114,z_=(e.LPX_MIN=120,e.LPX_MAX=121,e.LPX_P_UNDEF=132,e.LPX_P_FEAS=133,e.LPX_P_INFEAS=134,e.LPX_P_NOFEAS=135,e.LPX_D_UNDEF=136,e.LPX_D_FEAS=137,e.LPX_D_INFEAS=138,e.LPX_D_NOFEAS=139,e.LPX_BS=140),N_=e.LPX_NL=141,L_=e.LPX_NU=142,T_=e.LPX_NF=143,I_=e.LPX_NS=144,D_=(e.LPX_T_UNDEF=150,e.LPX_T_OPT=151,e.LPX_CV=160),F_=e.LPX_IV=161,R_=(e.LPX_I_UNDEF=170,e.LPX_I_OPT=171,e.LPX_I_FEAS=172,e.LPX_I_NOFEAS=173,e.LPX_OPT=180),U_=e.LPX_FEAS=181,B_=e.LPX_INFEAS=182,q_=e.LPX_NOFEAS=183,H_=e.LPX_UNBND=184,G_=e.LPX_UNDEF=185,V_=e.LPX_E_OK=200,X_=(e.LPX_E_EMPTY=201,e.LPX_E_BADB=202,e.LPX_E_INFEAS=203,e.LPX_E_FAULT=204),K_=(e.LPX_E_OBJLL=205,e.LPX_E_OBJUL=206,e.LPX_E_ITLIM=207,e.LPX_E_TMLIM=208),W_=(e.LPX_E_NOFEAS=209,e.LPX_E_INSTAB=210,e.LPX_E_SING=211),Y_=(e.LPX_E_NOCONV=212,e.LPX_E_NOPFS=213),J_=e.LPX_E_NODFS=214,$_=e.LPX_E_MIPGAP=215,Z_=e.LPX_K_MSGLEV=300,Q_=e.LPX_K_SCALE=301,ed=e.LPX_K_DUAL=302,td=e.LPX_K_PRICE=303,nd=e.LPX_K_RELAX=304,id=e.LPX_K_TOLBND=305,rd=e.LPX_K_TOLDJ=306,od=e.LPX_K_TOLPIV=307,ad=e.LPX_K_ROUND=308,ld=e.LPX_K_OBJLL=309,sd=e.LPX_K_OBJUL=310,ud=e.LPX_K_ITLIM=311,cd=e.LPX_K_ITCNT=312,_d=e.LPX_K_TMLIM=313,dd=e.LPX_K_OUTFRQ=314,fd=e.LPX_K_OUTDLY=315,bd=e.LPX_K_BRANCH=316,pd=e.LPX_K_BTRACK=317,md=e.LPX_K_TOLINT=318,hd=e.LPX_K_TOLOBJ=319,gd=e.LPX_K_MPSINFO=320,vd=e.LPX_K_MPSOBJ=321,yd=e.LPX_K_MPSORIG=322,xd=e.LPX_K_MPSWIDE=323,wd=e.LPX_K_MPSFREE=324,kd=e.LPX_K_MPSSKIP=325,Md=e.LPX_K_LPTORIG=326,Ad=e.LPX_K_PRESOL=327,Ed=e.LPX_K_BINARIZE=328,Pd=e.LPX_K_USECUTS=329,jd=e.LPX_K_BFTYPE=330,Od=e.LPX_K_MIPGAP=331,Cd=e.LPX_C_COVER=1,Sd=e.LPX_C_CLIQUE=2,zd=e.LPX_C_GOMORY=4,Nd=e.LPX_C_MIR=8,Ld=(e.LPX_C_ALL=255,1),Td=2,Id=-1,Dd=101,Fd=102,Rd=103,Ud=104,Bd=105,qd=106,Hd=107,Gd=108,Vd=109,Xd=110,Kd=111,Wd=112,Yd=113,Jd=114,$d=115,Zd=116,Qd=117,ef=118,tf=119,nf=120,rf=121,of=122,af=123,lf=124,sf=125,uf=126,cf=127,_f=60,df=1024,ff=201,bf=202,pf=203,mf=204,hf=205,gf=206,vf=207,yf=208,xf=209,wf=210,kf=211,Mf=212,Af=213,Ef=214,Pf=215,jf=216,Of=217,Cf=218,Sf=219,zf=220,Nf=221,Lf=222,Tf=223,If=224,Df=225,Ff=226,Rf=227,Uf=228,Bf=229,qf=230,Hf=231,Gf=232,Vf=233,Xf=234,Kf=235,Wf=236,Yf=237,Jf=238,$f=239,Zf=240,Qf=241,eb=242,tb=243,nb=244,ib=245,rb=246,ob=247,ab=248,lb=249,sb=250,ub=251,cb=252,_b=0,db=1,fb=2,bb=3,pb=4,mb=5,hb=301,gb=302,vb=303,yb=304,xb=305,wb=306,kb=307,Mb=308,Ab=309,Eb=310,Pb=311,jb=312,Ob=313,Cb=314,Sb=315,zb=316,Nb=317,Lb=318,Tb=319,Ib=320,Db=321,Fb=322,Rb=323,Ub=324,Bb=325,qb=326,Hb=327,Gb=328,Vb=329,Xb=330,Kb=331,Wb=332,Yb=333,Jb=334,$b=335,Zb=336,Qb=337,ep=338,tp=339,np=340,ip=341,rp=342,op=343,ap=344,lp=345,sp=346,up=347,cp=348,_p=349,dp=350,fp=351,bp=352,pp=353,mp=354,hp=355,gp=356,vp=357,yp=358,xp=359,wp=360,kp=361,Mp=362,Ap=363,Ep=364,Pp=365,jp=366,Op=367,Cp=368,Sp=369,zp=370,Np=371,Lp=372,Tp=373,Ip=374,Dp=375,Fp=376,Rp=377,Up=378,Bp=379,qp=380,Hp=381,Gp=382,Vp=383,Xp=384,Kp=401,Wp=402,Yp=403,Jp=404,$p=405,Zp=412,Qp=413,em=421,tm=422,nm=423,im=e.mpl_tab_num_args=function(e){return e.na},rm=e.mpl_tab_get_arg=function(e,n){return t(1<=n&&n<=e.na),e.arg[n]},om=(e.mpl_tab_get_args=function(e,t){return e.arg},e.mpl_tab_num_flds=function(e){return e.nf}),am=e.mpl_tab_get_name=function(e,n){return t(1<=n&&n<=e.nf),e.name[n]},lm=e.mpl_tab_get_type=function(e,n){return t(1<=n&&n<=e.nf),e.type[n]},sm=e.mpl_tab_get_num=function(e,n){return t(1<=n&&n<=e.nf),t("N"==e.type[n]),e.num[n]},um=e.mpl_tab_get_str=function(e,n){return t(1<=n&&n<=e.nf),t("S"==e.type[n]),t(null!=e.str[n]),e.str[n]},cm=e.mpl_tab_set_num=function(e,n,i){t(1<=n&&n<=e.nf),t("?"==e.type[n]),e.type[n]="N",e.num[n]=i},_m=e.mpl_tab_set_str=function(e,n,i){t(1<=n&&n<=e.nf),t("?"==e.type[n]),t(null!=e.str[n]),e.type[n]="S",e.str[n]=i},dm=e.mpl_initialize=function(){var e={};return e.line=0,e.column=0,e.c=0,e.token=0,e.imlen=0,e.image="",e.value=0,e.b_token=0,e.b_imlen=0,e.b_image="",e.b_value=0,e.f_dots=0,e.f_scan=0,e.f_token=0,e.f_imlen=0,e.f_image="",e.f_value=0,e.context=new Array(_f),o(e.context,0," ",_f),e.c_ptr=0,e.flag_d=0,e.tree={},e.model=null,e.flag_x=0,e.as_within=0,e.as_in=0,e.as_binary=0,e.flag_s=0,e.a_list=null,e.sym_buf="",e.tup_buf="",e.rand=vl(),e.flag_p=0,e.stmt=null,e.dca=null,e.m=0,e.n=0,e.row=null,e.col=null,e.in_fp=null,e.in_file=null,e.out_fp=null,e.out_file=null,e.prt_fp=null,e.prt_file=null,e.phase=0,e.mod_file=null,e.mpl_buf="",e},fm=e.mpl_read_model=function(e,t,i,r){function o(){return Jl(e.line+" line"+(1==e.line?"":"s")+" were read"),Jo(e),e.phase}if(0!=e.phase&&n("mpl_read_model: invalid call sequence"),null==i&&n("mpl_read_model: no input specified"),e.phase=1,Jl("Reading model section from "+t+" ..."),Wo(e,t,i),ni(e),null==e.model&&ta(e,"empty model section not allowed"),e.mod_file=e.in_file,Go(e),$t(e,"data")){if(r)return na(e,"data section ignored"),o();e.flag_d=1,Yt(e),e.token!=Qf&&ta(e,"semicolon missing where expected"),Yt(e),e.phase=2,Jl("Reading data section from "+t+" ..."),Ai(e)}return ei(e),o()},bm=e.mpl_read_data=function(e,t,i){return 1!=e.phase&&2!=e.phase&&n("mpl_read_data: invalid call sequence"),null==i&&n("mpl_read_data: no input specified"),e.phase=2,Jl("Reading data section from "+t+" ..."),e.flag_d=1,Wo(e,t,i),ci(e,"data")&&(Yt(e),e.token!=Qf&&ta(e,"semicolon missing where expected"),Yt(e)),Ai(e),ei(e),Jl(e.line+" line"+(1==e.line?"":"s")+" were read"),Jo(e),e.phase},pm=e.mpl_generate=function(e,t,i,r){return 1!=e.phase&&2!=e.phase&&n("mpl_generate: invalid call sequence"),e.phase=3,e.tablecb=r,$o(e,t,i),Vo(e),ea(e),Xo(e),Jl("Model has been successfully generated"),e.phase},mm=e.mpl_get_prob_name=function(e){return e.mod_file},hm=e.mpl_get_num_rows=function(e){return 3!=e.phase&&n("mpl_get_num_rows: invalid call sequence"),e.m},gm=e.mpl_get_num_cols=function(e){return 3!=e.phase&&n("mpl_get_num_cols: invalid call sequence"),e.n},vm=e.mpl_get_row_name=function(e,i){3!=e.phase&&n("mpl_get_row_name: invalid call sequence"),1<=i&&i<=e.m||n("mpl_get_row_name: i = "+i+"; row number out of range");var r=e.row[i].con.name;return t(r.length<=255),r+=lr(e,"[",e.row[i].memb.tuple).slice(0,255),255==r.length&&(r=r.slice(0,252)+"..."),t(r.length<=255),r},ym=e.mpl_get_row_kind=function(e,i){var r;switch(3!=e.phase&&n("mpl_get_row_kind: invalid call sequence"),1<=i&&i<=e.m||n("mpl_get_row_kind: i = "+i+"; row number out of range"),e.row[i].con.type){case Rd:r=411;break;case Zd:r=Zp;break;case $d:r=Qp;break;default:t(e!=e)}return r},xm=e.mpl_get_row_bnds=function(e,t,i){var r,o,a,l;return 3!=e.phase&&n("mpl_get_row_bnds: invalid call sequence"),1<=t&&t<=e.m||n("mpl_get_row_bnds: i = "+t+"; row number out of range"),r=e.row[t],a=null==r.con.lbnd?-Bl:r.lbnd,l=null==r.con.ubnd?+Bl:r.ubnd,a==-Bl&&l==+Bl?(o=Kp,a=l=0):l==+Bl?(o=Wp,l=0):a==-Bl?(o=Yp,a=0):o=r.con.lbnd!=r.con.ubnd?Jp:$p,i(a,l),o},wm=e.mpl_get_mat_row=function(e,i,r,o){var a,l=0;for(3!=e.phase&&n("mpl_get_mat_row: invalid call sequence"),1<=i&&i<=e.m||n("mpl_get_mat_row: i = "+i+"; row number out of range"),a=e.row[i].form;null!=a;a=a.next)t(null!=a.var_),l++,t(l<=e.n),null!=r&&(r[l]=a.var_.j),null!=o&&(o[l]=a.coef);return l},km=e.mpl_get_row_c0=function(e,t){var i;return 3!=e.phase&&n("mpl_get_row_c0: invalid call sequence"),1<=t&&t<=e.m||n("mpl_get_row_c0: i = "+t+"; row number out of range"),i=e.row[t],null==i.con.lbnd&&null==i.con.ubnd?-i.lbnd:0},Mm=e.mpl_get_col_name=function(e,i){3!=e.phase&&n("mpl_get_col_name: invalid call sequence"),1<=i&&i<=e.n||n("mpl_get_col_name: j = "+i+"; column number out of range");var r=e.col[i].var_.name;return t(r.length<=255),r+=lr(e,"[",e.col[i].memb.tuple),255==r.length&&(r=r.slice(0,252)+"..."),t(r.length<=255),r},Am=e.mpl_get_col_kind=function(e,i){var r;switch(3!=e.phase&&n("mpl_get_col_kind: invalid call sequence"),1<=i&&i<=e.n||n("mpl_get_col_kind: j = "+i+"; column number out of range"),e.col[i].var_.type){case ef:r=em;break;case Yd:r=tm;break;case Dd:r=nm;break;default:t(e!=e)}return r},Em=e.mpl_get_col_bnds=function(e,t,i){var r,o,a,l;return 3!=e.phase&&n("mpl_get_col_bnds: invalid call sequence"),1<=t&&t<=e.n||n("mpl_get_col_bnds: j = "+t+"; column number out of range"),r=e.col[t],a=null==r.var_.lbnd?-Bl:r.lbnd,l=null==r.var_.ubnd?+Bl:r.ubnd,a==-Bl&&l==+Bl?(o=Kp,a=l=0):l==+Bl?(o=Wp,l=0):a==-Bl?(o=Yp,a=0):o=r.var_.lbnd!=r.var_.ubnd?Jp:$p,i(a,l),o},Pm=e.mpl_has_solve_stmt=function(e){return 3!=e.phase&&n("mpl_has_solve_stmt: invalid call sequence"),e.flag_s},jm=e.mpl_put_row_soln=function(e,n,i,r,o){t(3==e.phase),t(1<=n&&n<=e.m),e.row[n].stat=i,e.row[n].prim=r,e.row[n].dual=o},Om=e.mpl_put_col_soln=function(e,n,i,r,o){t(3==e.phase),t(1<=n&&n<=e.n),e.col[n].stat=i,e.col[n].prim=r,e.col[n].dual=o},Cm=e.mpl_postsolve=function(e){return(3!=e.phase||e.flag_p)&&n("mpl_postsolve: invalid call sequence"),Ko(e),ea(e),Jl("Model has been successfully processed"),e.phase},Sm=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zm=["January","February","March","April","May","June","July","August","September","October","November","December"],Nm={},Lm=e.mpl_tab_drv_register=function(e,t){Nm[e.toLowerCase()]=t};pa.prototype.readField=function(){if(this.c==Yl)return this.what=this.CSV_EOF,void(this.field="EOF");if("\n"!=this.c)if(","==this.c&&this.readChar(),"'"==this.c||'"'==this.c){var e=this.c;for(this.field="",this.what=this.CSV_STR,this.readChar();;){if(this.c==e)if(this.readChar(),this.c==e);else{if(","==this.c||"\n"==this.c)break;n(this.fname+":"+this.count+": invalid field")}this.field+=this.c,this.readChar()}0==this.field.length&&n(this.fname+":"+this.count+": empty field not allowed")}else{this.field="";var t;for(this.what=this.CSV_NUM;","!=this.c&&"\n"!=this.c;)"'"!=this.c&&'"'!=this.c||n(this.fname+":"+this.count+": invalid use of single or double quote within field"),this.field+=this.c,this.readChar();0==this.field.length&&n(this.fname+":"+this.count+": empty field not allowed"),Xe(this.field,function(e){t=e})&&(this.what=this.CSV_STR)}else if(this.what=this.CSV_EOR,this.field="EOR",this.readChar(),","==this.c&&n(this.fname+":"+this.count+": empty field not allowed\n"),"\n"==this.c&&n(this.fname+":"+this.count+": empty record not allowed\n"),"#"==this.c&&1==this.count)for(;"#"==this.c;){for(;"\n"!=this.c;)this.readChar();this.readChar(),this.nskip++}},pa.prototype.readChar=function(){var e;for(t(this.c!=Yl),"\n"==this.c&&this.count++;;)if("\r"!=(e=this.cursor<this.data.length?this.data[this.cursor++]:Yl)){"\n"==e||d(e)&&n(this.fname+":"+this.count+": invalid control character "+e);break}this.c=e},pa.prototype.readRecord=function(e){var i;for(t("R"==this.mode),this.ref[0]>0&&cm(e,this.ref[0],this.count-this.nskip-1),i=1;i<=this.nf;i++){if(this.readField(),this.what==this.CSV_EOF)return t(1==i),Yl;if(this.what==this.CSV_EOR){var r=this.nf-i+1;n(1==r?this.fname+":"+this.count+": one field missing":this.fname+":"+this.count+": "+r+" fields missing")}else if(this.what==this.CSV_NUM){if(this.ref[i]>0){var o=0;t(0==Xe(this.field,function(e){o=e})),cm(e,this.ref[i],o)}}else this.what==this.CSV_STR?this.ref[i]>0&&_m(e,this.ref[i],this.field):t(this!=this)}return this.readField(),t(this.what!=this.CSV_EOF),this.what!=this.CSV_EOR&&n(this.fname+":"+this.count+": too many fields"),0},pa.prototype.writeRecord=function(e){var n,i,r,o;for(t("W"==this.mode),i=om(e),n=1;n<=i;n++){switch(lm(e,n)){case"N":this.data+=sm(e,n);break;case"S":for(this.data+='"',r=um(e,n),o=0;r.length>o;o++)'"'==r[o]?this.data+='""':this.data+=r[o];this.data+='"';break;default:t(e!=e)}this.data+=n<i?",":"\n"}return this.count++,0},pa.prototype.flush=function(e){this.tablecb(e.arg,this.mode,this.data)},Lm("CSV",pa),ma.prototype.writeRecord=function(e){var n;t("W"==this.mode);var i=om(e),r=[];for(n=1;n<=i;n++)switch(lm(e,n)){case"N":r.push(sm(e,n));break;case"S":r.push(um(e,n));break;default:t(e!=e)}return this.data.push(r),0},ma.prototype.readRecord=function(e){t("R"==this.mode);var i=this.data[this.cursor++];if(null==i)return Yl;for(var r=1;r<=om(e);r++){var o=this.ref[am(e,r)];if(null!=o){var a=i[o];switch(typeof a){case"number":cm(e,r,a);break;case"boolean":cm(e,r,Number(a));break;case"string":_m(e,r,a);break;default:n("Unexpected data type "+a+" in "+this.fname)}}}return 0},ma.prototype.flush=function(e){this.tablecb(e.arg,this.mode,this.data)},Lm("JSON",ma);var Tm=1,Im=2,Dm=1,Fm=2,Rm=0,Um=1e-10,Bm=e.glp_scale_prob=function(e,i){function r(e,n,i){var r,o,a;for(t(1<=n&&n<=e.m),o=1,r=e.row[n].ptr;null!=r;r=r.r_next)a=Math.abs(r.val),i&&(a*=r.row.rii*r.col.sjj),(null==r.r_prev||o>a)&&(o=a);return o}function o(e,n,i){var r,o,a;for(t(1<=n&&n<=e.m),o=1,r=e.row[n].ptr;null!=r;r=r.r_next)a=Math.abs(r.val),i&&(a*=r.row.rii*r.col.sjj),(null==r.r_prev||o<a)&&(o=a);return o}function a(e,n,i){var r,o,a;for(t(1<=n&&n<=e.n),o=1,r=e.col[n].ptr;null!=r;r=r.c_next)a=Math.abs(r.val),i&&(a*=r.row.rii*r.col.sjj),(null==r.c_prev||o>a)&&(o=a);return o}function l(e,n,i){var r,o,a;for(t(1<=n&&n<=e.n),o=1,r=e.col[n].ptr;null!=r;r=r.c_next)a=Math.abs(r.val),i&&(a*=r.row.rii*r.col.sjj),(null==r.c_prev||o<a)&&(o=a);return o}function s(e,t){var n,i,o;for(i=1,n=1;n<=e.m;n++)o=r(e,n,t),(1==n||i>o)&&(i=o);return i}function u(e,t){var n,i,r;for(i=1,n=1;n<=e.m;n++)r=o(e,n,t),(1==n||i<r)&&(i=r);return i}function c(e,n){var i,r,a,s;for(t(0==n||1==n),a=0;a<=1;a++)if(a==n)for(i=1;i<=e.m;i++)s=o(e,i,1),Ts(e,i,Ds(e,i)/s);else for(r=1;r<=e.n;r++)s=l(e,r,1),Is(e,r,Fs(e,r)/s)}function _(e,n){var i,s,u,c;for(t(0==n||1==n),u=0;u<=1;u++)if(u==n)for(i=1;i<=e.m;i++)c=r(e,i,1)*o(e,i,1),Ts(e,i,Ds(e,i)/Math.sqrt(c));else for(s=1;s<=e.n;s++)c=a(e,s,1)*l(e,s,1),Is(e,s,Fs(e,s)/Math.sqrt(c))}function d(e){var t,n,i;for(n=1,t=1;t<=e.m;t++)i=o(e,t,1)/r(e,t,1),(1==t||n<i)&&(n=i);return n}function f(e){var t,n,i;for(n=1,t=1;t<=e.n;t++)i=l(e,t,1)/a(e,t,1),(1==t||n<i)&&(n=i);return n}function b(e,t,n){var i,r,o,a=0;for(r=d(e)>f(e),i=1;i<=t&&(o=a,a=u(e,1)/s(e,1),!(i>1&&a>n*o));i++)_(e,r)}i&~(ac|lc|sc|uc|cc)&&n("glp_scale_prob: flags = "+i+"; invalid scaling options"),i&cc&&(i=ac|lc|uc),function(e,t){function n(e,t,n,i){return e+": min|aij| = "+t+"  max|aij| = "+n+"  ratio = "+i}var i,r,o;if(Jl("Scaling..."),Rs(e),i=s(e,1),r=u(e,1),o=r/i,Jl(n(" A",i,r,o)),!(i>=.1&&r<=10&&(Jl("Problem data seem to be well scaled"),t&uc))&&(t&ac&&(b(e,15,.9),i=s(e,1),r=u(e,1),o=r/i,Jl(n("GM",i,r,o))),t&lc&&(c(e,d(e)>f(e)),i=s(e,1),r=u(e,1),o=r/i,Jl(n("EQ",i,r,o))),t&sc)){var a,l;for(a=1;a<=e.m;a++)Ts(e,a,Ve(Ds(e,a)));for(l=1;l<=e.n;l++)Is(e,l,Ve(Fs(e,l)));i=s(e,1),r=u(e,1),o=r/i,Jl(n("2N",i,r,o))}}(e,i)}}("object"===typeof t&&t||this)},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,s=i(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)o.call(n,c)&&(s[c]=n[c]);if(r){l=r(n);for(var _=0;_<l.length;_++)a.call(n,l[_])&&(s[l[_]]=n[l[_]])}}return s}},function(e,t,n){"use strict";function i(e){var t=new r(r._61);return t._81=1,t._65=e,t}var r=n(59);e.exports=r;var o=i(!0),a=i(!1),l=i(null),s=i(void 0),u=i(0),c=i("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return l;if(void 0===e)return s;if(!0===e)return o;if(!1===e)return a;if(0===e)return u;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(e){return new r(function(t,n){n(e)})}return i(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function i(a,l){if(l&&("object"===typeof l||"function"===typeof l)){if(l instanceof r&&l.then===r.prototype.then){for(;3===l._81;)l=l._65;return 1===l._81?i(a,l._65):(2===l._81&&n(l._65),void l.then(function(e){i(a,e)},n))}var s=l.then;if("function"===typeof s){return void new r(s.bind(l)).then(function(e){i(a,e)},n)}}t[a]=l,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)i(a,t[a])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function i(){u=!1,l._10=null,l._97=null}function r(e){function t(t){(e.allRejections||a(_[t].error,e.whitelist||s))&&(_[t].displayId=c++,e.onUnhandled?(_[t].logged=!0,e.onUnhandled(_[t].displayId,_[t].error)):(_[t].logged=!0,o(_[t].displayId,_[t].error)))}function n(t){_[t].logged&&(e.onHandled?e.onHandled(_[t].displayId,_[t].error):_[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+_[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+_[t].displayId+".")))}e=e||{},u&&i(),u=!0;var r=0,c=0,_={};l._10=function(e){2===e._81&&_[e._72]&&(_[e._72].logged?n(e._72):clearTimeout(_[e._72].timeout),delete _[e._72])},l._97=function(e,n){0===e._45&&(e._72=r++,_[e._72]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._72),a(n,s)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var l=n(59),s=[ReferenceError,TypeError,RangeError],u=!1;t.disable=i,t.enable=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function l(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function s(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(h.arrayBuffer&&h.blob&&v(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!y(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function p(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var h={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(h.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},y=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},h.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},_.call(f.prototype),_.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];m.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,i){var r=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:p(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&h.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){e.exports=function(){return new Worker(n.p+"63277e3f81178526c235.worker.js")}},function(e,t){e.exports=[{map_name:"E coli core.Core metabolism",map_id:"2938hoq32a1",map_description:"E. coli core metabolic network\nLast Modified Fri Dec 05 2014 16:39:44 GMT-0800 (PST)",homepage:"https://escher.github.io",schema:"https://escher.github.io/escher/jsonschema/1-0-0#"},{reactions:{1576693:{name:"phosphoglycerate kinase",bigg_id:"PGK",reversibility:!0,label_x:1065,label_y:2715,gene_reaction_rule:"b2926",genes:[{bigg_id:"b2926",name:"b2926"}],metabolites:[{coefficient:-1,bigg_id:"3pg_c"},{coefficient:1,bigg_id:"adp_c"},{coefficient:1,bigg_id:"13dpg_c"},{coefficient:-1,bigg_id:"atp_c"}],segments:{291:{from_node_id:"1576835",to_node_id:"1576836",b1:null,b2:null},292:{from_node_id:"1576836",to_node_id:"1576834",b1:null,b2:null},293:{from_node_id:"1576485",to_node_id:"1576835",b1:{y:2822.4341649025255,x:1055},b2:{y:2789.230249470758,x:1055}},294:{from_node_id:"1576486",to_node_id:"1576835",b1:{y:2825,x:1055},b2:{y:2790,x:1055}},295:{from_node_id:"1576834",to_node_id:"1576487",b1:{y:2650,x:1055},b2:{y:2615,x:1055}},296:{from_node_id:"1576834",to_node_id:"1576488",b1:{y:2650.769750529242,x:1055},b2:{y:2617.5658350974745,x:1055}}}},1576694:{name:"phosphogluconate dehydrogenase",bigg_id:"GND",reversibility:!1,label_x:1930.5045166015625,label_y:1313.710205078125,gene_reaction_rule:"b2029",genes:[{bigg_id:"b2029",name:"b2029"}],metabolites:[{coefficient:-1,bigg_id:"nadp_c"},{coefficient:1,bigg_id:"ru5p__D_c"},{coefficient:1,bigg_id:"nadph_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:-1,bigg_id:"6pgc_c"}],segments:{297:{from_node_id:"1576838",to_node_id:"1576837",b1:null,b2:null},298:{from_node_id:"1576837",to_node_id:"1576839",b1:null,b2:null},299:{from_node_id:"1576489",to_node_id:"1576838",b1:{y:1265,x:1884.7984674554473},b2:{y:1265,x:1921.339540236634}},300:{from_node_id:"1576490",to_node_id:"1576838",b1:{y:1265,x:1882},b2:{y:1265,x:1920.5}},301:{from_node_id:"1576839",to_node_id:"1576491",b1:{y:1265,x:1992.660459763366},b2:{y:1265,x:2029.2015325445527}},302:{from_node_id:"1576839",to_node_id:"1576492",b1:{y:1265,x:1996.2093727122985},b2:{y:1265,x:2041.0312423743285}},303:{from_node_id:"1576839",to_node_id:"1576493",b1:{y:1265,x:2003.7},b2:{y:1265,x:2066}}}},1576695:{name:"o2 transport via diffusion",bigg_id:"O2t",reversibility:!0,label_x:4557.1943359375,label_y:1635.4964599609375,gene_reaction_rule:"s0001",genes:[{bigg_id:"s0001",name:"s0001"}],metabolites:[{coefficient:1,bigg_id:"o2_c"},{coefficient:-1,bigg_id:"o2_e"}],segments:{304:{from_node_id:"1576494",to_node_id:"1576840",b1:{y:1660,x:4821.5},b2:{y:1660,x:4755}},305:{from_node_id:"1576840",to_node_id:"1576495",b1:{y:1660,x:4610.5},b2:{y:1660,x:4495}}}},1576696:{name:"NAD(P) transhydrogenase",bigg_id:"THD2",reversibility:!1,label_x:3532.891845703125,label_y:872.8489990234375,gene_reaction_rule:"( b1602  and  b1603 )",genes:[{bigg_id:"b1602",name:"b1602"},{bigg_id:"b1603",name:"b1603"}],metabolites:[{coefficient:-1,bigg_id:"nadp_c"},{coefficient:-2,bigg_id:"h_e"},{coefficient:-1,bigg_id:"nadh_c"},{coefficient:2,bigg_id:"h_c"},{coefficient:1,bigg_id:"nad_c"},{coefficient:1,bigg_id:"nadph_c"}],segments:{306:{from_node_id:"1576842",to_node_id:"1576841",b1:null,b2:null},307:{from_node_id:"1576841",to_node_id:"1576843",b1:null,b2:null},308:{from_node_id:"1576496",to_node_id:"1576842",b1:{x:3331.1220703125,y:580.5856339661426},b2:{y:724.5066228070302,x:3510}},309:{from_node_id:"1576497",to_node_id:"1576842",b1:{x:3418.143798828125,y:654.7419446101471},b2:{y:750.137689584216,x:3510}},310:{from_node_id:"1576498",to_node_id:"1576842",b1:{y:725,x:3510},b2:{y:777.5,x:3510}},311:{from_node_id:"1576843",to_node_id:"1576499",b1:{x:3510,y:921.2841796875},b2:{x:3510,y:995.287841796875}},312:{from_node_id:"1576843",to_node_id:"1576500",b1:{x:3508.388671875,y:1061.6865465211372},b2:{x:3740.4462890625,y:1078.144282674624}},313:{from_node_id:"1576843",to_node_id:"1576501",b1:{x:3506.777099609375,y:1038.7769502394156},b2:{x:3624.41748046875,y:1081.817596989458}}}},1576697:{name:"fumarase",bigg_id:"FUM",reversibility:!0,label_x:2759.057373046875,label_y:3066,gene_reaction_rule:"( b1612  or  b4122  or  b1611 )",genes:[{bigg_id:"b1612",name:"b1612"},{bigg_id:"b4122",name:"b4122"},{bigg_id:"b1611",name:"b1611"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"fum_c"},{coefficient:1,bigg_id:"mal__L_c"}],segments:{314:{from_node_id:"1576844",to_node_id:"1576845",b1:null,b2:null},315:{from_node_id:"1576845",to_node_id:"1576504",b1:{y:3093.4,x:2674.55},b2:{y:3134,x:2652.5}},316:{from_node_id:"1576502",to_node_id:"1576844",b1:{y:2982.216997307231,x:2758.679057699798},b2:{y:3010.0650991921693,x:2736.5037173099395}},317:{from_node_id:"1576503",to_node_id:"1576844",b1:{y:2961.5818349379524,x:2775.110761067927},b2:{y:3003.8745504813855,x:2741.433228320378}}}},1576698:{name:"isocitrate dehydrogenase (NADP)",bigg_id:"ICDHyr",reversibility:!0,label_x:3616,label_y:3836,gene_reaction_rule:"b1136",genes:[{bigg_id:"b1136",name:"b1136"}],metabolites:[{coefficient:-1,bigg_id:"nadp_c"},{coefficient:1,bigg_id:"akg_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:-1,bigg_id:"icit_c"},{coefficient:1,bigg_id:"nadph_c"}],segments:{318:{from_node_id:"1576847",to_node_id:"1576846",b1:null,b2:null},319:{from_node_id:"1576846",to_node_id:"1576848",b1:null,b2:null},320:{from_node_id:"1576505",to_node_id:"1576847",b1:{y:3958.5796398057905,x:3468.565115042282},b2:{y:3933.673891941737,x:3498.9695345126847}},321:{from_node_id:"1576506",to_node_id:"1576847",b1:{y:3968.312968378653,x:3456.6828697715146},b2:{y:3936.593890513596,x:3495.4048609314546}},322:{from_node_id:"1576848",to_node_id:"1576507",b1:{y:3767.3462919329904,x:3674.9732516895315},b2:{y:3735.4876397766343,x:3702.9108389651055}},323:{from_node_id:"1576848",to_node_id:"1576508",b1:{y:3771.6386673078805,x:3671.209168668474},b2:{y:3749.7955576929353,x:3690.36389556158}},324:{from_node_id:"1576848",to_node_id:"1576509",b1:{y:3761.2701283117613,x:3680.3015797881476},b2:{y:3715.2337610392046,x:3720.671932627159}}}},1576699:{name:"pyruvate dehydrogenase",bigg_id:"PDH",reversibility:!1,label_x:1417.72802734375,label_y:3920.71923828125,gene_reaction_rule:"( b0114  and  b0115  and  b0116 )",genes:[{bigg_id:"b0114",name:"b0114"},{bigg_id:"b0115",name:"b0115"},{bigg_id:"b0116",name:"b0116"}],metabolites:[{coefficient:-1,bigg_id:"pyr_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:1,bigg_id:"nadh_c"},{coefficient:-1,bigg_id:"coa_c"},{coefficient:1,bigg_id:"accoa_c"},{coefficient:-1,bigg_id:"nad_c"}],segments:{325:{from_node_id:"1576849",to_node_id:"1576850",b1:null,b2:null},326:{from_node_id:"1576850",to_node_id:"1576851",b1:null,b2:null},327:{from_node_id:"1576510",to_node_id:"1576849",b1:{y:3945,x:1374.4909917220637},b2:{y:3945,x:1413.3472975166192}},328:{from_node_id:"1576511",to_node_id:"1576849",b1:{y:3945,x:1242.5},b2:{y:3945,x:1373.75}},329:{from_node_id:"1576512",to_node_id:"1576849",b1:{y:3945,x:1369.1210216905704},b2:{y:3945,x:1411.736306507171}},330:{from_node_id:"1576851",to_node_id:"1576513",b1:{y:3945,x:1570.4434452114806},b2:{y:3945,x:1606.478150704935}},331:{from_node_id:"1576851",to_node_id:"1576514",b1:{y:3945,x:1579},b2:{y:3945,x:1635}},332:{from_node_id:"1576851",to_node_id:"1576515",b1:{y:3945,x:1572.492855684536},b2:{y:3945,x:1613.309518948453}}}},1576700:{name:"phosphoenolpyruvate carboxylase",bigg_id:"PPC",reversibility:!1,label_x:1490.0008544921875,label_y:3479.666748046875,gene_reaction_rule:"b3956",genes:[{bigg_id:"b3956",name:"b3956"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"co2_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:-1,bigg_id:"pep_c"},{coefficient:1,bigg_id:"oaa_c"}],segments:{333:{from_node_id:"1576854",to_node_id:"1576852",b1:null,b2:null},334:{from_node_id:"1576852",to_node_id:"1576853",b1:null,b2:null},335:{from_node_id:"1576516",to_node_id:"1576854",b1:{y:3438.769633287661,x:1302.6712784637714},b2:{y:3452.2308899862983,x:1334.4013835391315}},336:{from_node_id:"1576517",to_node_id:"1576854",b1:{y:3398.5330945780183,x:1207.828008648186},b2:{y:3440.1599283734054,x:1305.9484025944557}},337:{from_node_id:"1576518",to_node_id:"1576854",b1:{y:3422.409571522363,x:1264.1082757312843},b2:{y:3447.322871456709,x:1322.8324827193853}},338:{from_node_id:"1576853",to_node_id:"1576519",b1:{y:3526.498358619846,x:1510.9506160899336},b2:{y:3543.994528732819,x:1552.8353869664456}},339:{from_node_id:"1576853",to_node_id:"1576520",b1:{y:3528.947159164474,x:1516.81289618162},b2:{y:3552.157197214914,x:1572.3763206054002}},340:{from_node_id:"1576853",to_node_id:"1576521",b1:{x:1966.279649431665,y:3708.0419942097856},b2:{x:2580.289220436279,y:3691.624192938869}}}},1576701:{name:"enolase",bigg_id:"ENO",reversibility:!0,label_x:1065,label_y:3215,gene_reaction_rule:"b2779",genes:[{bigg_id:"b2779",name:"b2779"}],metabolites:[{coefficient:1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"2pg_c"},{coefficient:1,bigg_id:"pep_c"}],segments:{341:{from_node_id:"1576522",to_node_id:"1576856",b1:{x:1055,y:3173.322021484375},b2:{y:3175,x:1055}},342:{from_node_id:"1576856",to_node_id:"1576855",b1:null,b2:null},343:{from_node_id:"1576855",to_node_id:"1576517",b1:{y:3281.5,x:1055},b2:{y:3320,x:1055}},344:{from_node_id:"1576855",to_node_id:"1576523",b1:{y:3281.224980739588,x:1055},b2:{y:3319.0832691319597,x:1055}}}},1576702:{name:"glucose-6-phosphate isomerase",bigg_id:"PGI",reversibility:!0,label_x:1065,label_y:1385,gene_reaction_rule:"b4025",genes:[{bigg_id:"b4025",name:"b4025"}],metabolites:[{coefficient:-1,bigg_id:"g6p_c"},{coefficient:1,bigg_id:"f6p_c"}],segments:{345:{from_node_id:"1576524",to_node_id:"1576857",b1:{y:1284.5,x:1055},b2:{y:1330,x:1055}},346:{from_node_id:"1576857",to_node_id:"1576525",b1:{y:1417.5,x:1055},b2:{y:1470,x:1055}}}},1576703:{name:"ammonia reversible transport",bigg_id:"NH4t",reversibility:!0,label_x:3999,label_y:4588,gene_reaction_rule:"(s0001 or b0451)",genes:[{bigg_id:"s0001",name:"s0001"},{bigg_id:"b0451",name:"b0451"}],metabolites:[{coefficient:-1,bigg_id:"nh4_e"},{coefficient:1,bigg_id:"nh4_c"}],segments:{347:{from_node_id:"1576526",to_node_id:"1576858",b1:{y:4733.15,x:3989},b2:{y:4677.5,x:3989}},348:{from_node_id:"1576858",to_node_id:"1576527",b1:{y:4574.45,x:3989},b2:{y:4519.5,x:3989}}}},1576704:{name:"fructose-bisphosphatase",bigg_id:"FBP",reversibility:!1,label_x:751.3809814453125,label_y:1733.561767578125,gene_reaction_rule:"(b3925 or b4232)",genes:[{bigg_id:"b3925",name:"b3925"},{bigg_id:"b4232",name:"b4232"}],metabolites:[{coefficient:-1,bigg_id:"fdp_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:1,bigg_id:"f6p_c"},{coefficient:-1,bigg_id:"h2o_c"}],segments:{349:{from_node_id:"1576861",to_node_id:"1576859",b1:null,b2:null},350:{from_node_id:"1576859",to_node_id:"1576860",b1:null,b2:null},351:{from_node_id:"1576528",to_node_id:"1576861",b1:{y:1822.0087712549569,x:835},b2:{y:1782.1026313764871,x:835}},352:{from_node_id:"1576529",to_node_id:"1576861",b1:{y:1901.0147050873545,x:835},b2:{y:1805.8044115262064,x:835}},353:{from_node_id:"1576860",to_node_id:"1576525",b1:{y:1627.410107741575,x:835},b2:{y:1539.7003591385833,x:835}},354:{from_node_id:"1576860",to_node_id:"1576530",b1:{y:1645.7906272877015,x:835},b2:{y:1600.9687576256715,x:835}}}},1576705:{name:"Succinate exchange",bigg_id:"EX_succ_e",reversibility:!1,label_x:4968.927734375,label_y:2845.8271484375,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"succ_e"}],segments:{355:{from_node_id:"1576531",to_node_id:"1576863",b1:{y:2880,x:4945.95},b2:{y:2880,x:4978.5}}}},1576706:{name:"Isocitrate lyase",bigg_id:"ICL",reversibility:!1,label_x:3427,label_y:3847,gene_reaction_rule:"b4015",genes:[{bigg_id:"b4015",name:"b4015"}],metabolites:[{coefficient:1,bigg_id:"glx_c"},{coefficient:-1,bigg_id:"icit_c"},{coefficient:1,bigg_id:"succ_c"}],segments:{357:{from_node_id:"1576505",to_node_id:"1576865",b1:{y:3958.15,x:3413.6},b2:{y:3916.5,x:3415}},358:{from_node_id:"1576865",to_node_id:"1576864",b1:null,b2:null},359:{from_node_id:"1576864",to_node_id:"1576532",b1:{y:3719.8679883378145,x:3417},b2:{y:3612.2266277927156,x:3417}},360:{from_node_id:"1576864",to_node_id:"1576533",b1:{y:3631.14924916783,x:3417},b2:{y:3316.4974972260998,x:3417}}}},1576707:{name:"adenylate kinase",bigg_id:"ADK1",reversibility:!0,label_x:3997.07177734375,label_y:1251.6114501953125,gene_reaction_rule:"b0474",genes:[{bigg_id:"b0474",name:"b0474"}],metabolites:[{coefficient:-1,bigg_id:"atp_c"},{coefficient:-1,bigg_id:"amp_c"},{coefficient:2,bigg_id:"adp_c"}],segments:{361:{from_node_id:"1576867",to_node_id:"1576866",b1:null,b2:null},362:{from_node_id:"1576866",to_node_id:"1576536",b1:{x:4145.83056640625,y:1352.2913818359375},b2:{x:4146.15869140625,y:1441.4029541015625}},363:{from_node_id:"1576534",to_node_id:"1576867",b1:{y:1112.6787540171351,x:4145},b2:{y:1173.8036262051405,x:4145}},364:{from_node_id:"1576535",to_node_id:"1576867",b1:{y:1123.6783123876312,x:4145},b2:{y:1177.1034937162894,x:4145}}}},1576708:{name:"L-Glutamine exchange",bigg_id:"EX_gln__L_e",reversibility:!1,label_x:4933.3095703125,label_y:4131.884765625,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"gln__L_e"}],segments:{365:{from_node_id:"1576537",to_node_id:"1576868",b1:{y:4158,x:4902.7},b2:{y:4158,x:4951}}}},1576710:{name:"CO2 exchange",bigg_id:"EX_co2_e",reversibility:!1,label_x:3631,label_y:4904,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"co2_e"}],segments:{367:{from_node_id:"1576544",to_node_id:"1576871",b1:{y:4778,x:3621},b2:{y:4834,x:3621}}}},1576711:{name:"transaldolase",bigg_id:"TALA",reversibility:!0,label_x:2197.5205078125,label_y:2008.8013916015625,gene_reaction_rule:"(b2464 or b0008)",genes:[{bigg_id:"b2464",name:"b2464"},{bigg_id:"b0008",name:"b0008"}],metabolites:[{coefficient:1,bigg_id:"e4p_c"},{coefficient:-1,bigg_id:"g3p_c"},{coefficient:-1,bigg_id:"s7p_c"},{coefficient:1,bigg_id:"f6p_c"}],segments:{369:{from_node_id:"1576873",to_node_id:"1576872",b1:null,b2:null},370:{from_node_id:"1576872",to_node_id:"1576874",b1:null,b2:null},371:{from_node_id:"1576545",to_node_id:"1576873",b1:{x:2283.184776999114,y:1892.1518443631908},b2:{x:2173.815906732547,y:1856.1727017464573}},372:{from_node_id:"1576546",to_node_id:"1576873",b1:{x:2064.2112662569266,y:1890.5651744413158},b2:{x:2175.402576654422,y:1856.1728238167698}},373:{from_node_id:"1576874",to_node_id:"1576547",b1:{y:2076.976957965055,x:2178},b2:{x:2178,y:2171.7496092324754}},374:{from_node_id:"1576874",to_node_id:"1576548",b1:{y:2077.4778177405574,x:2178},b2:{x:2178.000244140625,y:2170.2455578331073}}}},1576712:{name:"pyruvate kinase",bigg_id:"PYK",reversibility:!1,label_x:1065,label_y:3695,gene_reaction_rule:"(b1854 or b1676)",genes:[{bigg_id:"b1854",name:"b1854"},{bigg_id:"b1676",name:"b1676"}],metabolites:[{coefficient:1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"pyr_c"},{coefficient:-1,bigg_id:"pep_c"},{coefficient:-1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"adp_c"}],segments:{375:{from_node_id:"1576875",to_node_id:"1576876",b1:null,b2:null},376:{from_node_id:"1576876",to_node_id:"1576877",b1:null,b2:null},377:{from_node_id:"1576549",to_node_id:"1576875",b1:{y:3607.5658350974745,x:1055},b2:{y:3640.769750529242,x:1055}},378:{from_node_id:"1576550",to_node_id:"1576875",b1:{y:3587.7318797646312,x:1055},b2:{y:3634.8195639293895,x:1055}},379:{from_node_id:"1576517",to_node_id:"1576875",b1:{y:3515,x:1055},b2:{y:3613,x:1055}},380:{from_node_id:"1576877",to_node_id:"1576511",b1:{y:3775,x:1055},b2:{y:3845,x:1055}},381:{from_node_id:"1576877",to_node_id:"1576551",b1:{y:3762.102631376487,x:1055},b2:{y:3802.008771254957,x:1055}}}},1576713:{name:"L-glutamate transport via proton symport, reversible (periplasm)",bigg_id:"GLUt2r",reversibility:!0,label_x:4655,label_y:3625,gene_reaction_rule:"b4077",genes:[{bigg_id:"b4077",name:"b4077"}],metabolites:[{coefficient:-1,bigg_id:"glu__L_e"},{coefficient:-1,bigg_id:"h_e"},{coefficient:1,bigg_id:"glu__L_c"},{coefficient:1,bigg_id:"h_c"}],segments:{382:{from_node_id:"1576880",to_node_id:"1576878",b1:null,b2:null},383:{from_node_id:"1576878",to_node_id:"1576879",b1:null,b2:null},384:{from_node_id:"1576552",to_node_id:"1576880",b1:{y:3635,x:4831.002403790594},b2:{y:3635,x:4794.600721137178}},385:{from_node_id:"1576553",to_node_id:"1576880",b1:{y:3635,x:4820.0487515035475},b2:{y:3635,x:4791.314625451064}},386:{from_node_id:"1576879",to_node_id:"1576554",b1:{y:3635,x:4497.047696306109},b2:{y:3635,x:4394.492321020364}},387:{from_node_id:"1576879",to_node_id:"1576555",b1:{y:3635,x:4528.650708522348},b2:{y:3635,x:4499.835695074495}}}},1576714:{name:"D-Lactate exchange",bigg_id:"EX_lac__D_e",reversibility:!1,label_x:1065,label_y:4915,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"lac__D_e"}],segments:{388:{from_node_id:"1576556",to_node_id:"1576881",b1:{x:1055,y:4861.19384765625},b2:{y:4880,x:1055}}}},1576715:{name:"Pyruvate exchange",bigg_id:"EX_pyr_e",reversibility:!1,label_x:96.76921081542969,label_y:3904.851318359375,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"pyr_e"}],segments:{390:{from_node_id:"1576557",to_node_id:"1576884",b1:{y:3945,x:257},b2:{y:3945,x:215}}}},1576716:{name:"ribulose 5-phosphate 3-epimerase",bigg_id:"RPE",reversibility:!0,label_x:1937.57958984375,label_y:1422.4544677734375,gene_reaction_rule:"(b3386 or b4301)",genes:[{bigg_id:"b3386",name:"b3386"},{bigg_id:"b4301",name:"b4301"}],metabolites:[{coefficient:-1,bigg_id:"ru5p__D_c"},{coefficient:1,bigg_id:"xu5p__D_c"}],segments:{392:{from_node_id:"1576493",to_node_id:"1576885",b1:{y:1287.5,x:2138.5},b2:{y:1340,x:2100}},393:{from_node_id:"1576885",to_node_id:"1576558",b1:{y:1436,x:2030},b2:{y:1485,x:1995}}}},1576717:{name:"H+ exchange",bigg_id:"EX_h_e",reversibility:!0,label_x:4920.2587890625,label_y:2195.827392578125,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"h_e"}],segments:{394:{from_node_id:"1576559",to_node_id:"1576887",b1:{y:2229.15,x:4870.4},b2:{y:2229.5,x:4918}}}},1576720:{name:"succinyl-CoA synthetase (ADP-forming)",bigg_id:"SUCOAS",reversibility:!0,label_x:3641,label_y:3010,gene_reaction_rule:"( b0728  and  b0729 )",genes:[{bigg_id:"b0728",name:"b0728"},{bigg_id:"b0729",name:"b0729"}],metabolites:[{coefficient:-1,bigg_id:"atp_c"},{coefficient:-1,bigg_id:"succ_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:1,bigg_id:"adp_c"},{coefficient:1,bigg_id:"succoa_c"},{coefficient:-1,bigg_id:"coa_c"}],segments:{396:{from_node_id:"1576889",to_node_id:"1576888",b1:null,b2:null},397:{from_node_id:"1576888",to_node_id:"1576890",b1:null,b2:null},398:{from_node_id:"1576567",to_node_id:"1576889",b1:{y:2929.871811487667,x:3542.920179408402},b2:{y:2962.1615434463,x:3574.4760538225205}},399:{from_node_id:"1576568",to_node_id:"1576889",b1:{y:2939.079434763476,x:3551.9185385188516},b2:{y:2964.923830429043,x:3577.1755615556553}},400:{from_node_id:"1576533",to_node_id:"1576889",b1:{y:2904.387472959949,x:3518.015030392677},b2:{y:2954.5162418879845,x:3567.004509117803}},401:{from_node_id:"1576890",to_node_id:"1576569",b1:{y:3077.95608535897,x:3678.1735578503244},b2:{y:3112.853617863234,x:3706.5785261677484}},402:{from_node_id:"1576890",to_node_id:"1576570",b1:{y:3080.344738078292,x:3680.117810063726},b2:{y:3120.815793594307,x:3713.059366879087}},403:{from_node_id:"1576890",to_node_id:"1576571",b1:{y:3076.3723735708613,x:3676.8844901158172},b2:{y:3107.574578569538,x:3702.2816337193913}}}},1576721:{name:"phosphofructokinase",bigg_id:"PFK",reversibility:!1,label_x:1065,label_y:1725,gene_reaction_rule:"( b3916  or  b1723 )",genes:[{bigg_id:"b3916",name:"b3916"},{bigg_id:"b1723",name:"b1723"}],metabolites:[{coefficient:-1,bigg_id:"f6p_c"},{coefficient:-1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"fdp_c"},{coefficient:1,bigg_id:"adp_c"}],segments:{404:{from_node_id:"1576893",to_node_id:"1576891",b1:null,b2:null},405:{from_node_id:"1576891",to_node_id:"1576892",b1:null,b2:null},406:{from_node_id:"1576525",to_node_id:"1576893",b1:{y:1617.5,x:1055},b2:{y:1668.25,x:1055}},407:{from_node_id:"1576572",to_node_id:"1576893",b1:{y:1639.6884705062548,x:1055},b2:{y:1674.9065411518764,x:1055}},408:{from_node_id:"1576892",to_node_id:"1576573",b1:{y:1789.2302494707578,x:1055},b2:{y:1822.4341649025257,x:1055}},409:{from_node_id:"1576892",to_node_id:"1576529",b1:{y:1797.5,x:1055},b2:{y:1850,x:1055}},410:{from_node_id:"1576892",to_node_id:"1576574",b1:{y:1793.0623918681883,x:1055},b2:{y:1835.2079728939614,x:1055}}}},1576722:{name:"L-Glutamate exchange",bigg_id:"EX_glu__L_e",reversibility:!1,label_x:4936.36669921875,label_y:3680.79150390625,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"glu__L_e"}],segments:{411:{from_node_id:"1576552",to_node_id:"1576895",b1:{y:3634.3,x:4902.8},b2:{y:3635,x:4949}}}},1576723:{name:"transketolase",bigg_id:"TKT2",reversibility:!0,label_x:1520.71923828125,label_y:1702.785400390625,gene_reaction_rule:"( b2935  or  b2465 )",genes:[{bigg_id:"b2935",name:"b2935"},{bigg_id:"b2465",name:"b2465"}],metabolites:[{coefficient:-1,bigg_id:"e4p_c"},{coefficient:1,bigg_id:"g3p_c"},{coefficient:-1,bigg_id:"xu5p__D_c"},{coefficient:1,bigg_id:"f6p_c"}],segments:{413:{from_node_id:"1576897",to_node_id:"1576896",b1:null,b2:null},414:{from_node_id:"1576896",to_node_id:"1576898",b1:null,b2:null},415:{from_node_id:"1576547",to_node_id:"1576897",b1:{y:1735,x:1954.5789860524153},b2:{y:1735,x:1772.8736958157247}},416:{from_node_id:"1576558",to_node_id:"1576897",b1:{y:1735,x:1849.0292180074937},b2:{y:1735,x:1741.208765402248}},417:{from_node_id:"1576898",to_node_id:"1576525",b1:{x:1235.776382408843,y:1741.3470458984375},b2:{x:1280.4546812716637,y:1587.43115234375}},418:{from_node_id:"1576898",to_node_id:"1576575",b1:{y:1735,x:1318.2979239002893},b2:{x:1312.7516245895065,y:1735}}}},1576724:{name:"glutamine synthetase",bigg_id:"GLNS",reversibility:!1,label_x:4377.22314453125,label_y:3875.114990234375,gene_reaction_rule:"(b3870 or b1297)",genes:[{bigg_id:"b3870",name:"b3870"},{bigg_id:"b1297",name:"b1297"}],metabolites:[{coefficient:1,bigg_id:"gln__L_c"},{coefficient:-1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"adp_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:-1,bigg_id:"glu__L_c"},{coefficient:-1,bigg_id:"nh4_c"}],segments:{419:{from_node_id:"1576901",to_node_id:"1576900",b1:null,b2:null},420:{from_node_id:"1576900",to_node_id:"1576899",b1:null,b2:null},421:{from_node_id:"1576554",to_node_id:"1576901",b1:{y:3725.970531985219,x:4364},b2:{y:3812.091159595566,x:4364}},422:{from_node_id:"1576576",to_node_id:"1576901",b1:{y:3788.5599470549537,x:4364},b2:{y:3830.8679841164862,x:4364}},423:{from_node_id:"1576577",to_node_id:"1576901",b1:{y:3805.0910031997996,x:4364},b2:{y:3835.8273009599397,x:4364}},424:{from_node_id:"1576899",to_node_id:"1576578",b1:{y:3924.4803114416995,x:4364},b2:{y:4007.2677048056653,x:4364}},425:{from_node_id:"1576899",to_node_id:"1576579",b1:{y:3903.3287298809073,x:4364},b2:{y:3936.762432936357,x:4364}},426:{from_node_id:"1576899",to_node_id:"1576580",b1:{y:3909.1943680267545,x:4364},b2:{y:3956.314560089181,x:4364}},427:{from_node_id:"1576899",to_node_id:"1576581",b1:{y:3915.8851724934025,x:4364},b2:{y:3978.617241644675,x:4364}}}},1576726:{name:"NAD transhydrogenase",bigg_id:"NADTRHD",reversibility:!1,label_x:3478.431396484375,label_y:1319.6259765625,gene_reaction_rule:"(b3962 or (b1602 and b1603))",genes:[{bigg_id:"b3962",name:"b3962"},{bigg_id:"b1602",name:"b1602"},{bigg_id:"b1603",name:"b1603"}],metabolites:[{coefficient:1,bigg_id:"nadp_c"},{coefficient:-1,bigg_id:"nadph_c"},{coefficient:-1,bigg_id:"nad_c"},{coefficient:1,bigg_id:"nadh_c"}],segments:{434:{from_node_id:"1576906",to_node_id:"1576907",b1:null,b2:null},435:{from_node_id:"1576907",to_node_id:"1576905",b1:null,b2:null},436:{from_node_id:"1576501",to_node_id:"1576906",b1:{x:3627.146913797642,y:1270.0001220703125},b2:{y:1270,x:3592.9455878111676}},437:{from_node_id:"1576500",to_node_id:"1576906",b1:{y:1270,x:3655},b2:{y:1270,x:3595.5}},438:{from_node_id:"1576905",to_node_id:"1576496",b1:{y:1270,x:3449},b2:{y:1270,x:3400}},439:{from_node_id:"1576905",to_node_id:"1576497",b1:{y:1270,x:3446.2829175487373},b2:{x:3418.3388104489154,y:1270}}}},1576727:{name:"2-Oxoglutarate dehydrogenase",bigg_id:"AKGDH",reversibility:!1,label_x:3793,label_y:3392,gene_reaction_rule:"( b0116  and  b0726  and  b0727 )",genes:[{bigg_id:"b0116",name:"b0116"},{bigg_id:"b0726",name:"b0726"},{bigg_id:"b0727",name:"b0727"}],metabolites:[{coefficient:1,bigg_id:"succoa_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:1,bigg_id:"nadh_c"},{coefficient:-1,bigg_id:"coa_c"},{coefficient:-1,bigg_id:"nad_c"},{coefficient:-1,bigg_id:"akg_c"}],segments:{440:{from_node_id:"1576908",to_node_id:"1576909",b1:null,b2:null},441:{from_node_id:"1576909",to_node_id:"1576910",b1:null,b2:null},442:{from_node_id:"1576509",to_node_id:"1576908",b1:{y:3555.384636544082,x:3777.1005909021505},b2:{y:3502.6153909632244,x:3779.130177270645}},443:{from_node_id:"1576585",to_node_id:"1576908",b1:{y:3529.6925257925727,x:3778.088749007978},b2:{y:3494.907757737772,x:3779.4266247023934}},444:{from_node_id:"1576586",to_node_id:"1576908",b1:{y:3541.8008905587553,x:3777.623042670817},b2:{y:3498.5402671676266,x:3779.2869128012453}},445:{from_node_id:"1576910",to_node_id:"1576570",b1:{y:3308.813629813628,x:3773.940214009658},b2:{y:3259.378766045427,x:3769.134046698861}},446:{from_node_id:"1576910",to_node_id:"1576587",b1:{y:3314.1710953857196,x:3774.4610787180563},b2:{y:3277.236984619066,x:3770.8702623935205}},447:{from_node_id:"1576910",to_node_id:"1576588",b1:{y:3314.098040676123,x:3774.453976176845},b2:{y:3276.99346892041,x:3770.846587256151}}}},1576728:{name:"pyruvate formate lyase",bigg_id:"PFL",reversibility:!1,label_x:1310.09130859375,label_y:4046.8837890625,gene_reaction_rule:"(((b0902 and b0903) and b2579) or (b0902 and b0903) or (b0902 and b3114) or (b3951 and b3952))",genes:[{bigg_id:"b0902",name:"b0902"},{bigg_id:"b0903",name:"b0903"},{bigg_id:"b2579",name:"b2579"},{bigg_id:"b0902",name:"b0902"},{bigg_id:"b0903",name:"b0903"},{bigg_id:"b0902",name:"b0902"},{bigg_id:"b3114",name:"b3114"},{bigg_id:"b3951",name:"b3951"},{bigg_id:"b3952",name:"b3952"}],metabolites:[{coefficient:1,bigg_id:"for_c"},{coefficient:-1,bigg_id:"coa_c"},{coefficient:-1,bigg_id:"pyr_c"},{coefficient:1,bigg_id:"accoa_c"}],segments:{448:{from_node_id:"1576912",to_node_id:"1576911",b1:null,b2:null},449:{from_node_id:"1576911",to_node_id:"1576913",b1:null,b2:null},450:{from_node_id:"1576589",to_node_id:"1576912",b1:{y:3995,x:1203.521849295065},b2:{y:3995,x:1239.5565547885194}},451:{from_node_id:"1576511",to_node_id:"1576912",b1:{y:3995,x:1151.9223593595584},b2:{y:3995,x:1224.0767078078675}},452:{from_node_id:"1576913",to_node_id:"1576514",b1:{y:3995,x:1460.6207189772367},b2:{y:3995,x:1567.0690632574556}},453:{from_node_id:"1576913",to_node_id:"1576590",b1:{y:3995,x:1431.4487841495961},b2:{y:3995,x:1469.8292804986534}}}},1576729:{name:"O2 exchange",bigg_id:"EX_o2_e",reversibility:!0,label_x:4894.58984375,label_y:1633.8848876953125,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"o2_e"}],segments:{454:{from_node_id:"1576494",to_node_id:"1576914",b1:{y:1660,x:4868},b2:{y:1660,x:4910}}}},1576730:{name:"phosphoenolpyruvate carboxykinase",bigg_id:"PPCK",reversibility:!1,label_x:1377.3328857421875,label_y:3600.33447265625,gene_reaction_rule:"b3403",genes:[{bigg_id:"b3403",name:"b3403"}],metabolites:[{coefficient:-1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"adp_c"},{coefficient:-1,bigg_id:"oaa_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:1,bigg_id:"pep_c"}],segments:{456:{from_node_id:"1576917",to_node_id:"1576916",b1:null,b2:null},457:{from_node_id:"1576916",to_node_id:"1576918",b1:null,b2:null},458:{from_node_id:"1576591",to_node_id:"1576917",b1:{y:3566.049568601064,x:1519.8576805959353},b2:{y:3557.6148705803193,x:1495.4573041787805}},459:{from_node_id:"1576521",to_node_id:"1576917",b1:{x:2521.6033016696215,y:3758.886258987647},b2:{x:1757.8986662821364,y:3678.777694102544}},460:{from_node_id:"1576918",to_node_id:"1576592",b1:{y:3499.9025817202064,x:1325.707745160619},b2:{y:3492.675272400688,x:1304.0258172020633}},461:{from_node_id:"1576918",to_node_id:"1576593",b1:{y:3497.2795105104547,x:1317.8385315313635},b2:{y:3483.931701701515,x:1277.7951051045454}},462:{from_node_id:"1576918",to_node_id:"1576517",b1:{y:3488.3964387904866,x:1291.1893163714603},b2:{y:3454.321462634956,x:1188.9643879048676}}}},1576731:{name:"phosphate reversible transport via proton symport",bigg_id:"PIt2r",reversibility:!0,label_x:2916.97509765625,label_y:4649.33837890625,gene_reaction_rule:"(b2987 or b3493)",genes:[{bigg_id:"b2987",name:"b2987"},{bigg_id:"b3493",name:"b3493"}],metabolites:[{coefficient:-1,bigg_id:"pi_e"},{coefficient:-1,bigg_id:"h_e"},{coefficient:1,bigg_id:"pi_c"},{coefficient:1,bigg_id:"h_c"}],segments:{463:{from_node_id:"1576921",to_node_id:"1576920",b1:null,b2:null},464:{from_node_id:"1576920",to_node_id:"1576919",b1:null,b2:null},465:{from_node_id:"1576594",to_node_id:"1576921",b1:{y:4782,x:2880},b2:{y:4742.1,x:2880}},466:{from_node_id:"1576595",to_node_id:"1576921",b1:{y:4775.936234646861,x:2880},b2:{y:4740.280870394058,x:2880}},467:{from_node_id:"1576919",to_node_id:"1576596",b1:{y:4503.436712282883,x:2880},b2:{y:4464.789040942943,x:2880}},468:{from_node_id:"1576919",to_node_id:"1576597",b1:{y:4506.5,x:2880},b2:{y:4475,x:2880}}}},1576732:{name:"2-oxoglutarate reversible transport via symport",bigg_id:"AKGt2r",reversibility:!0,label_x:4594.6474609375,label_y:3197.05029296875,gene_reaction_rule:"b2587",genes:[{bigg_id:"b2587",name:"b2587"}],metabolites:[{coefficient:1,bigg_id:"akg_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"h_e"},{coefficient:-1,bigg_id:"akg_e"}],segments:{469:{from_node_id:"1576923",to_node_id:"1576924",b1:null,b2:null},470:{from_node_id:"1576924",to_node_id:"1576922",b1:null,b2:null},471:{from_node_id:"1576598",to_node_id:"1576923",b1:{y:3228,x:4857},b2:{y:3228,x:4811.5}},472:{from_node_id:"1576599",to_node_id:"1576923",b1:{y:3228,x:4843.0220540550845},b2:{y:3228,x:4807.306616216525}},473:{from_node_id:"1576922",to_node_id:"1576509",b1:{y:3228,x:4373.7752656466},b2:{y:3228,x:4074.584218822}},474:{from_node_id:"1576922",to_node_id:"1576600",b1:{y:3228,x:4486.339540236634},b2:{y:3228,x:4449.798467455447}}}},1576733:{name:"fructose-bisphosphate aldolase",bigg_id:"FBA",reversibility:!0,label_x:969.7942504882812,label_y:2031.01611328125,gene_reaction_rule:"(b2097 or b1773 or b2925)",genes:[{bigg_id:"b2097",name:"b2097"},{bigg_id:"b1773",name:"b1773"},{bigg_id:"b2925",name:"b2925"}],metabolites:[{coefficient:1,bigg_id:"dhap_c"},{coefficient:-1,bigg_id:"fdp_c"},{coefficient:1,bigg_id:"g3p_c"}],segments:{53:{from_node_id:"1576926",to_node_id:"1576925",b1:null,b2:null},54:{from_node_id:"1576925",to_node_id:"1576575",b1:{y:2067.5,x:1055},b2:{y:2120,x:1055}},55:{from_node_id:"1576925",to_node_id:"1576601",b1:{y:2082.5,x:1055},b2:{x:929.645751953125,y:2081.141357421875}},475:{from_node_id:"1576529",to_node_id:"1576926",b1:{x:1055,y:1970.4088134765625},b2:{x:1055,y:1974.28076171875}}}},1576734:{name:"triose-phosphate isomerase",bigg_id:"TPI",reversibility:!0,label_x:936.438232421875,label_y:2245.297119140625,gene_reaction_rule:"b3919",genes:[{bigg_id:"b3919",name:"b3919"}],metabolites:[{coefficient:-1,bigg_id:"dhap_c"},{coefficient:1,bigg_id:"g3p_c"}],segments:{56:{from_node_id:"1576601",to_node_id:"1576927",b1:{x:911.255859375,y:2195},b2:{x:911.3470458984375,y:2195}},57:{from_node_id:"1576927",to_node_id:"1576575",b1:{y:2195,x:970},b2:{y:2195,x:1005}}}},1576735:{name:"cytochrome oxidase bd (ubiquinol-8: 2 protons)",bigg_id:"CYTBD",reversibility:!1,label_x:4560.4169921875,label_y:1954.46044921875,gene_reaction_rule:"((b0978 and b0979) or (b0733 and b0734))",genes:[{bigg_id:"b0978",name:"b0978"},{bigg_id:"b0979",name:"b0979"},{bigg_id:"b0733",name:"b0733"},{bigg_id:"b0734",name:"b0734"}],metabolites:[{coefficient:1,bigg_id:"h2o_c"},{coefficient:2,bigg_id:"h_e"},{coefficient:-.5,bigg_id:"o2_c"},{coefficient:-1,bigg_id:"q8h2_c"},{coefficient:1,bigg_id:"q8_c"},{coefficient:-2,bigg_id:"h_c"}],segments:{58:{from_node_id:"1576930",to_node_id:"1576928",b1:null,b2:null},59:{from_node_id:"1576928",to_node_id:"1576929",b1:null,b2:null},60:{from_node_id:"1576602",to_node_id:"1576930",b1:{x:4416.69775390625,y:1895.1654052734375},b2:{y:1900,x:4595.5}},61:{from_node_id:"1576495",to_node_id:"1576930",b1:{y:1900,x:4437.906272877015},b2:{y:1900,x:4572.371881863104}},62:{from_node_id:"1576542",to_node_id:"1576930",b1:{x:4368.162902237436,y:1890.3310546875},b2:{y:1900,x:4581.906341374356}},63:{from_node_id:"1576929",to_node_id:"1576539",b1:{y:1900,x:4715.894014752448},b2:{x:4842.38515985191,y:1903.22314453125}},64:{from_node_id:"1576929",to_node_id:"1576603",b1:{y:1900,x:4715.5},b2:{y:1900,x:4775}},65:{from_node_id:"1576929",to_node_id:"1576604",b1:{x:4821.203885298877,y:1901.611572265625},b2:{x:4884.545828600423,y:1758.1868896484375}}}},1576736:{name:"ribose-5-phosphate isomerase",bigg_id:"RPI",reversibility:!0,label_x:2315,label_y:1415,gene_reaction_rule:"( b2914  or  b4090 )",genes:[{bigg_id:"b2914",name:"b2914"},{bigg_id:"b4090",name:"b4090"}],metabolites:[{coefficient:1,bigg_id:"ru5p__D_c"},{coefficient:-1,bigg_id:"r5p_c"}],segments:{66:{from_node_id:"1576605",to_node_id:"1576931",b1:{y:1535.5,x:2401.9},b2:{y:1490,x:2362}},67:{from_node_id:"1576931",to_node_id:"1576493",b1:{y:1401,x:2282.5},b2:{y:1345,x:2230}}}},1576737:{name:"malate synthase",bigg_id:"MALS",reversibility:!1,label_x:2921,label_y:3378,gene_reaction_rule:"( b4014  or  b2976 )",genes:[{bigg_id:"b4014",name:"b4014"},{bigg_id:"b2976",name:"b2976"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:1,bigg_id:"mal__L_c"},{coefficient:-1,bigg_id:"glx_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"accoa_c"},{coefficient:1,bigg_id:"coa_c"}],segments:{68:{from_node_id:"1576933",to_node_id:"1576934",b1:null,b2:null},69:{from_node_id:"1576934",to_node_id:"1576932",b1:null,b2:null},70:{from_node_id:"1576532",to_node_id:"1576933",b1:{y:3508.4324366824735,x:3086.3665306078124},b2:{y:3464.029731004742,x:3021.7099591823435}},71:{from_node_id:"1576606",to_node_id:"1576933",b1:{y:3478.694083026728,x:3043.063313881025},b2:{y:3455.108224908018,x:3008.7189941643073}},72:{from_node_id:"1576607",to_node_id:"1576933",b1:{y:3495.7929452157005,x:3067.961657068476},b2:{y:3460.23788356471,x:3016.1884971205427}},73:{from_node_id:"1576932",to_node_id:"1576608",b1:{y:3330.4075604798036,x:2827.674768353758},b2:{y:3305.691868266011,x:2791.915894512527}},74:{from_node_id:"1576932",to_node_id:"1576609",b1:{y:3325.297440622825,x:2820.2814034543},b2:{y:3288.6581354094164,x:2767.2713448476666}},75:{from_node_id:"1576932",to_node_id:"1576504",b1:{y:3318.197058799434,x:2810.0085106034367},b2:{y:3264.9901959981144,x:2733.0283686781227}}}},1576739:{name:"phosphotransacetylase",bigg_id:"PTAr",reversibility:!0,label_x:1725,label_y:4075,gene_reaction_rule:"(b2297 or b2458)",genes:[{bigg_id:"b2297",name:"b2297"},{bigg_id:"b2458",name:"b2458"}],metabolites:[{coefficient:1,bigg_id:"actp_c"},{coefficient:1,bigg_id:"coa_c"},{coefficient:-1,bigg_id:"accoa_c"},{coefficient:-1,bigg_id:"pi_c"}],segments:{76:{from_node_id:"1576935",to_node_id:"1576937",b1:null,b2:null},77:{from_node_id:"1576937",to_node_id:"1576936",b1:null,b2:null},78:{from_node_id:"1576514",to_node_id:"1576935",b1:{y:4005,x:1715},b2:{y:4047,x:1715}},79:{from_node_id:"1576612",to_node_id:"1576935",b1:{y:4012.7984674554473,x:1715},b2:{y:4049.339540236634,x:1715}},80:{from_node_id:"1576936",to_node_id:"1576613",b1:{y:4115.5,x:1715},b2:{y:4140,x:1715}},81:{from_node_id:"1576936",to_node_id:"1576614",b1:{y:4120.660459763366,x:1715},b2:{y:4157.201532544553,x:1715}}}},1576741:{name:"L-glutamine transport via ABC system",bigg_id:"GLNabc",reversibility:!1,label_x:4535.24462890625,label_y:4133.49658203125,gene_reaction_rule:"(b0811 and b0810 and b0809)",genes:[{bigg_id:"b0811",name:"b0811"},{bigg_id:"b0810",name:"b0810"},{bigg_id:"b0809",name:"b0809"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:-1,bigg_id:"gln__L_e"},{coefficient:1,bigg_id:"adp_c"},{coefficient:1,bigg_id:"gln__L_c"}],segments:{82:{from_node_id:"1576940",to_node_id:"1576939",b1:null,b2:null},83:{from_node_id:"1576939",to_node_id:"1576938",b1:null,b2:null},84:{from_node_id:"1576537",to_node_id:"1576940",b1:{y:4158,x:4668.5},b2:{y:4158,x:4519.05}},85:{from_node_id:"1576615",to_node_id:"1576940",b1:{y:4158,x:4519.031242374329},b2:{y:4158,x:4474.209372712298}},86:{from_node_id:"1576616",to_node_id:"1576940",b1:{y:4158,x:4507.201532544553},b2:{y:4158,x:4470.660459763366}},87:{from_node_id:"1576938",to_node_id:"1576578",b1:{y:4158,x:4387.893128177527},b2:{y:4158,x:4324.643760591755}},88:{from_node_id:"1576938",to_node_id:"1576617",b1:{y:4158,x:4390.398170799715},b2:{y:4158,x:4332.993902665717}},89:{from_node_id:"1576938",to_node_id:"1576618",b1:{y:4158,x:4399.339540236634},b2:{y:4158,x:4362.798467455447}},90:{from_node_id:"1576938",to_node_id:"1576619",b1:{y:4158,x:4395.790627287702},b2:{y:4158,x:4350.968757625671}}}},1576742:{name:"malic enzyme (NAD)",bigg_id:"ME1",reversibility:!1,label_x:2188.595703125,label_y:3321.438232421875,gene_reaction_rule:"b1479",genes:[{bigg_id:"b1479",name:"b1479"}],metabolites:[{coefficient:1,bigg_id:"nadh_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:-1,bigg_id:"nad_c"},{coefficient:-1,bigg_id:"mal__L_c"},{coefficient:1,bigg_id:"pyr_c"}],segments:{91:{from_node_id:"1576941",to_node_id:"1576942",b1:null,b2:null},92:{from_node_id:"1576942",to_node_id:"1576943",b1:null,b2:null},93:{from_node_id:"1576504",to_node_id:"1576941",b1:{y:3253.9194505803225,x:2462.161098839355},b2:{y:3307.175835174097,x:2355.6483296518063}},94:{from_node_id:"1576620",to_node_id:"1576941",b1:{y:3302.9814878277875,x:2364.0370243444254},b2:{y:3321.8944463483363,x:2326.2111073033275}},95:{from_node_id:"1576943",to_node_id:"1576511",b1:{y:3474.7533185191,x:2020.4933629618001},b2:{x:1117.2138384533964,y:3870.856276574083}},96:{from_node_id:"1576943",to_node_id:"1576621",b1:{y:3398.949860334106,x:2172.1002793317884},b2:{y:3419.8328677803524,x:2130.3342644392947}},97:{from_node_id:"1576943",to_node_id:"1576622",b1:{y:3397.5,x:2175},b2:{y:3415,x:2140}}}},1576743:{name:"glucose 6-phosphate dehydrogenase",bigg_id:"G6PDH2r",reversibility:!0,label_x:1261.46337890625,label_y:1320.0572509765625,gene_reaction_rule:"b1852",genes:[{bigg_id:"b1852",name:"b1852"}],metabolites:[{coefficient:-1,bigg_id:"nadp_c"},{coefficient:1,bigg_id:"nadph_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"6pgl_c"},{coefficient:-1,bigg_id:"g6p_c"}],segments:{98:{from_node_id:"1576946",to_node_id:"1576945",b1:null,b2:null},99:{from_node_id:"1576945",to_node_id:"1576944",b1:null,b2:null},100:{from_node_id:"1576623",to_node_id:"1576946",b1:{y:1265,x:1232.3991758303962},b2:{y:1265,x:1270.6197527491188}},101:{from_node_id:"1576524",to_node_id:"1576946",b1:{y:1265,x:1171},b2:{y:1265,x:1252.2}},102:{from_node_id:"1576944",to_node_id:"1576624",b1:{y:1265,x:1346.800568173666},b2:{y:1265,x:1393.0018939122203}},103:{from_node_id:"1576944",to_node_id:"1576625",b1:{y:1265,x:1343.3802472508812},b2:{y:1265,x:1381.6008241696038}},104:{from_node_id:"1576944",to_node_id:"1576626",b1:{y:1265,x:1354},b2:{y:1265,x:1417}}}},1576744:{name:"Acetate exchange",bigg_id:"EX_ac_e",reversibility:!1,label_x:1742.4544677734375,label_y:4917.06640625,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"ac_e"}],segments:{105:{from_node_id:"1576627",to_node_id:"1576947",b1:{x:1715,y:4888.64794921875},b2:{y:4890,x:1715}}}},1576745:{name:"glutaminase",bigg_id:"GLUN",reversibility:!1,label_x:4253.77685546875,label_y:3866.338134765625,gene_reaction_rule:"(b1812 or b0485 or b1524)",genes:[{bigg_id:"b1812",name:"b1812"},{bigg_id:"b0485",name:"b0485"},{bigg_id:"b1524",name:"b1524"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:1,bigg_id:"glu__L_c"},{coefficient:-1,bigg_id:"gln__L_c"},{coefficient:1,bigg_id:"nh4_c"}],segments:{107:{from_node_id:"1576950",to_node_id:"1576951",b1:null,b2:null},108:{from_node_id:"1576951",to_node_id:"1576949",b1:null,b2:null},109:{from_node_id:"1576628",to_node_id:"1576950",b1:{y:3916.003204996513,x:4247},b2:{y:3888.700961498954,x:4247}},110:{from_node_id:"1576578",to_node_id:"1576950",b1:{y:3985.501152067616,x:4247},b2:{y:3909.550345620285,x:4247}},111:{from_node_id:"1576949",to_node_id:"1576629",b1:{y:3803.650440537184,x:4247},b2:{y:3777.1681351239463,x:4247}},112:{from_node_id:"1576949",to_node_id:"1576554",b1:{y:3787.5495901669938,x:4247},b2:{y:3723.4986338899794,x:4247}}}},1576746:{name:"ATP maintenance requirement",bigg_id:"ATPM",reversibility:!1,label_x:4241.11474609375,label_y:1266.1151123046875,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:1,bigg_id:"adp_c"}],segments:{113:{from_node_id:"1576952",to_node_id:"1576953",b1:null,b2:null},114:{from_node_id:"1576953",to_node_id:"1576954",b1:null,b2:null},115:{from_node_id:"1576534",to_node_id:"1576952",b1:{y:1120,x:4215},b2:{y:1176,x:4215}},116:{from_node_id:"1576630",to_node_id:"1576952",b1:{y:1157.5735931288073,x:4215},b2:{y:1187.2720779386423,x:4215}},117:{from_node_id:"1576954",to_node_id:"1576631",b1:{y:1368.3098334236006,x:4215},b2:{y:1411.0327780786686,x:4215}},118:{from_node_id:"1576954",to_node_id:"1576632",b1:{y:1361.423659658796,x:4215},b2:{y:1388.0788655293195,x:4215}},119:{from_node_id:"1576954",to_node_id:"1576536",b1:{y:1374,x:4215},b2:{y:1430,x:4215}}}},1576747:{name:"D lactate dehydrogenase",bigg_id:"LDH_D",reversibility:!0,label_x:1065,label_y:4165,gene_reaction_rule:"(b2133 or b1380)",genes:[{bigg_id:"b2133",name:"b2133"},{bigg_id:"b1380",name:"b1380"}],metabolites:[{coefficient:-1,bigg_id:"nad_c"},{coefficient:1,bigg_id:"pyr_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"lac__D_c"},{coefficient:1,bigg_id:"nadh_c"}],segments:{120:{from_node_id:"1576956",to_node_id:"1576957",b1:null,b2:null},121:{from_node_id:"1576957",to_node_id:"1576955",b1:null,b2:null},122:{from_node_id:"1576633",to_node_id:"1576956",b1:{y:4277.201532544553,x:1055},b2:{y:4240.660459763366,x:1055}},123:{from_node_id:"1576584",to_node_id:"1576956",b1:{y:4285,x:1055},b2:{y:4243,x:1055}},124:{from_node_id:"1576955",to_node_id:"1576634",b1:{y:4105.790627287702,x:1055},b2:{y:4060.9687576256715,x:1055}},125:{from_node_id:"1576955",to_node_id:"1576511",b1:{y:4098,x:1055},b2:{y:4035,x:1055}},126:{from_node_id:"1576955",to_node_id:"1576635",b1:{y:4109.339540236634,x:1055},b2:{y:4072.7984674554473,x:1055}}}},1576748:{name:"malate dehydrogenase",bigg_id:"MDH",reversibility:!0,label_x:2587,label_y:3394,gene_reaction_rule:"b3236",genes:[{bigg_id:"b3236",name:"b3236"}],metabolites:[{coefficient:1,bigg_id:"nadh_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"nad_c"},{coefficient:-1,bigg_id:"mal__L_c"},{coefficient:1,bigg_id:"oaa_c"}],segments:{127:{from_node_id:"1576960",to_node_id:"1576959",b1:null,b2:null},128:{from_node_id:"1576959",to_node_id:"1576958",b1:null,b2:null},129:{from_node_id:"1576504",to_node_id:"1576960",b1:{y:3264.23165565782,x:2588.092725741443},b2:{y:3317.969496697346,x:2583.827817722433}},130:{from_node_id:"1576636",to_node_id:"1576960",b1:{y:3294.4959356130375,x:2585.69079876087},b2:{y:3327.0487806839114,x:2583.107239628261}},131:{from_node_id:"1576958",to_node_id:"1576637",b1:{y:3480.6634859983265,x:2578.47429780766},b2:{y:3538.2116199944217,x:2579.5809926922}},132:{from_node_id:"1576958",to_node_id:"1576638",b1:{y:3470.7248027204823,x:2578.2831692830864},b2:{y:3505.0826757349405,x:2578.9438976102874}},133:{from_node_id:"1576958",to_node_id:"1576521",b1:{y:3497.9882185746883,x:2578.807465741821},b2:{y:3595.960728582294,x:2580.6915524727365}}}},1576749:{name:"H2O transport via diffusion",bigg_id:"H2Ot",reversibility:!0,label_x:3267,label_y:4604,gene_reaction_rule:"(b0875 or s0001)",genes:[{bigg_id:"b0875",name:"b0875"},{bigg_id:"s0001",name:"s0001"}],metabolites:[{coefficient:1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"h2o_e"}],segments:{134:{from_node_id:"1576639",to_node_id:"1576961",b1:{y:4733,x:3257},b2:{y:4684,x:3257}},135:{from_node_id:"1576961",to_node_id:"1576640",b1:{y:4587,x:3257},b2:{y:4524,x:3257}}}},1576750:{name:"H2O exchange",bigg_id:"EX_h2o_e",reversibility:!0,label_x:3267,label_y:4914,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"h2o_e"}],segments:{136:{from_node_id:"1576639",to_node_id:"1576962",b1:{y:4779.5,x:3257},b2:{y:4839,x:3257}}}},1576751:{name:"transketolase",bigg_id:"TKT1",reversibility:!0,label_x:2185,label_y:1685,gene_reaction_rule:"( b2935  or  b2465 )",genes:[{bigg_id:"b2935",name:"b2935"},{bigg_id:"b2465",name:"b2465"}],metabolites:[{coefficient:-1,bigg_id:"xu5p__D_c"},{coefficient:-1,bigg_id:"r5p_c"},{coefficient:1,bigg_id:"g3p_c"},{coefficient:1,bigg_id:"s7p_c"}],segments:{138:{from_node_id:"1576964",to_node_id:"1576965",b1:null,b2:null},139:{from_node_id:"1576965",to_node_id:"1576966",b1:null,b2:null},140:{from_node_id:"1576605",to_node_id:"1576964",b1:{x:2171.826416015625,y:1557.80791851959},b2:{y:1605.9896167668144,x:2175}},141:{from_node_id:"1576558",to_node_id:"1576964",b1:{x:2171.82666015625,y:1558.0047151164654},b2:{y:1607.9527328943145,x:2175}},142:{from_node_id:"1576966",to_node_id:"1576546",b1:{x:2173.413330078125,y:1823.819109636181},b2:{x:2070.2734375,y:1816.322080948729}},143:{from_node_id:"1576966",to_node_id:"1576545",b1:{x:2175,y:1822.232439714306},b2:{x:2297.1806640625,y:1821.0824569252916}}}},1576752:{name:"CO2 transporter via diffusion",bigg_id:"CO2t",reversibility:!0,label_x:3631,label_y:4594,gene_reaction_rule:"s0001",genes:[{bigg_id:"s0001",name:"s0001"}],metabolites:[{coefficient:-1,bigg_id:"co2_e"},{coefficient:1,bigg_id:"co2_c"}],segments:{144:{from_node_id:"1576544",to_node_id:"1576967",b1:{y:4731.5,x:3621},b2:{y:4679,x:3621}},145:{from_node_id:"1576967",to_node_id:"1576641",b1:{y:4578.5,x:3621},b2:{y:4519,x:3621}}}},1576753:{name:"2-Oxoglutarate exchange",bigg_id:"EX_akg_e",reversibility:!1,label_x:5042,label_y:3218,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"akg_e"}],segments:{146:{from_node_id:"1576598",to_node_id:"1576969",b1:{y:3228,x:4938.5},b2:{y:3228,x:4977}}}},1576754:{name:"phosphoenolpyruvate synthase",bigg_id:"PPS",reversibility:!1,label_x:741.8604125976562,label_y:3669.90869140625,gene_reaction_rule:"b1702",genes:[{bigg_id:"b1702",name:"b1702"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:2,bigg_id:"h_c"},{coefficient:-1,bigg_id:"atp_c"},{coefficient:1,bigg_id:"pi_c"},{coefficient:1,bigg_id:"pep_c"},{coefficient:1,bigg_id:"amp_c"},{coefficient:-1,bigg_id:"pyr_c"}],segments:{148:{from_node_id:"1576970",to_node_id:"1576972",b1:null,b2:null},149:{from_node_id:"1576972",to_node_id:"1576971",b1:null,b2:null},150:{from_node_id:"1576642",to_node_id:"1576970",b1:{y:3860.9016994374947,x:835},b2:{y:3821.7705098312485,x:835}},151:{from_node_id:"1576511",to_node_id:"1576970",b1:{y:3935.384048104053,x:835},b2:{y:3844.115214431216,x:835}},152:{from_node_id:"1576643",to_node_id:"1576970",b1:{y:3855,x:835},b2:{y:3820,x:835}},153:{from_node_id:"1576971",to_node_id:"1576517",b1:{y:3485.059419132917,x:835},b2:{y:3391.8647304430565,x:835}},154:{from_node_id:"1576971",to_node_id:"1576644",b1:{y:3508.2294901687515,x:835},b2:{y:3469.0983005625053,x:835}},155:{from_node_id:"1576971",to_node_id:"1576645",b1:{y:3510,x:835},b2:{y:3475,x:835}},156:{from_node_id:"1576971",to_node_id:"1576646",b1:{y:3503.7867965644036,x:835},b2:{y:3454.289321881345,x:835}}}},1576755:{name:"D-Glucose exchange",bigg_id:"EX_glc_e",reversibility:!1,label_x:1082.5206298828125,label_y:598.4705200195312,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"glc__D_e"}],segments:{157:{from_node_id:"1576647",to_node_id:"1576974",b1:{x:1055.066162109375,y:625.4632568359375},b2:{x:1056.6529541015625,y:623.4132690429688}}}},1576756:{name:"ethanol reversible transport via proton symport",bigg_id:"ETOHt2r",reversibility:!0,label_x:2530.6279296875,label_y:4611.404296875,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:1,bigg_id:"etoh_c"},{coefficient:-1,bigg_id:"h_e"},{coefficient:-1,bigg_id:"etoh_e"},{coefficient:1,bigg_id:"h_c"}],segments:{159:{from_node_id:"1576977",to_node_id:"1576976",b1:null,b2:null},160:{from_node_id:"1576976",to_node_id:"1576975",b1:null,b2:null},161:{from_node_id:"1576648",to_node_id:"1576977",b1:{y:4782.201532544553,x:2500},b2:{y:4745.660459763366,x:2500}},162:{from_node_id:"1576649",to_node_id:"1576977",b1:{y:4780,x:2500},b2:{y:4745,x:2500}},163:{from_node_id:"1576975",to_node_id:"1576650",b1:{y:4414.339540236634,x:2500},b2:{y:4377.798467455447,x:2500}},164:{from_node_id:"1576975",to_node_id:"1576829",b1:{y:4399.699628715146,x:2500},b2:{y:4328.998762383821,x:2500}}}},1576757:{name:"phosphoglycerate mutase",bigg_id:"PGM",reversibility:!0,label_x:1065,label_y:2985,gene_reaction_rule:"(b3612 or b4395 or b0755)",genes:[{bigg_id:"b3612",name:"b3612"},{bigg_id:"b4395",name:"b4395"},{bigg_id:"b0755",name:"b0755"}],metabolites:[{coefficient:1,bigg_id:"3pg_c"},{coefficient:-1,bigg_id:"2pg_c"}],segments:{165:{from_node_id:"1576522",to_node_id:"1576978",b1:{y:3105.5,x:1055},b2:{y:3060,x:1055}},166:{from_node_id:"1576978",to_node_id:"1576486",b1:{y:2977,x:1055},b2:{y:2935,x:1055}}}},1576758:{name:"Ethanol exchange",bigg_id:"EX_etoh_e",reversibility:!1,label_x:2519.520751953125,label_y:4934.28076171875,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"etoh_e"}],segments:{167:{from_node_id:"1576649",to_node_id:"1576980",b1:{x:2500,y:4875.1484375},b2:{x:2500,y:4887.93359375}}}},1576759:{name:"acetate kinase",bigg_id:"ACKr",reversibility:!0,label_x:1737.694091796875,label_y:4293.5615234375,gene_reaction_rule:"(b3115 or b2296 or b1849)",genes:[{bigg_id:"b3115",name:"b3115"},{bigg_id:"b2296",name:"b2296"},{bigg_id:"b1849",name:"b1849"}],metabolites:[{coefficient:1,bigg_id:"adp_c"},{coefficient:-1,bigg_id:"atp_c"},{coefficient:-1,bigg_id:"ac_c"},{coefficient:1,bigg_id:"actp_c"}],segments:{169:{from_node_id:"1576981",to_node_id:"1576982",b1:null,b2:null},170:{from_node_id:"1576982",to_node_id:"1576983",b1:null,b2:null},171:{from_node_id:"1576651",to_node_id:"1576981",b1:{y:4357.201532544553,x:1715},b2:{y:4320.660459763366,x:1715}},172:{from_node_id:"1576652",to_node_id:"1576981",b1:{y:4345,x:1715},b2:{y:4317,x:1715}},173:{from_node_id:"1576983",to_node_id:"1576653",b1:{y:4239.339540236634,x:1715},b2:{y:4202.798467455447,x:1715}},174:{from_node_id:"1576983",to_node_id:"1576613",b1:{y:4243,x:1715},b2:{y:4215,x:1715}}}},1576760:{name:"Ammonium exchange",bigg_id:"EX_nh4_e",reversibility:!0,label_x:4001,label_y:4908,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"nh4_e"}],segments:{175:{from_node_id:"1576526",to_node_id:"1576985",b1:{y:4781.15,x:3989.3},b2:{y:4837.5,x:3990}}}},1576761:{name:"glutamate synthase (NADPH)",bigg_id:"GLUSy",reversibility:!1,label_x:3984.18701171875,label_y:3851.553955078125,gene_reaction_rule:"(b3212 and b3213)",genes:[{bigg_id:"b3212",name:"b3212"},{bigg_id:"b3213",name:"b3213"}],metabolites:[{coefficient:1,bigg_id:"nadp_c"},{coefficient:-1,bigg_id:"gln__L_c"},{coefficient:-1,bigg_id:"nadph_c"},{coefficient:-1,bigg_id:"h_c"},{coefficient:2,bigg_id:"glu__L_c"},{coefficient:-1,bigg_id:"akg_c"}],segments:{177:{from_node_id:"1576986",to_node_id:"1576988",b1:null,b2:null},178:{from_node_id:"1576988",to_node_id:"1576987",b1:null,b2:null},179:{from_node_id:"1576509",to_node_id:"1576986",b1:{x:3943.568359375,y:4145.014875810485},b2:{x:4119.22314453125,y:4155.746259618145}},180:{from_node_id:"1576654",to_node_id:"1576986",b1:{y:3936.7467947664254,x:4116},b2:{y:3902.6240384299276,x:4116}},181:{from_node_id:"1576578",to_node_id:"1576986",b1:{y:4009.7949095816407,x:4116},b2:{y:3924.538472874492,x:4116}},182:{from_node_id:"1576655",to_node_id:"1576986",b1:{y:3952.041002490592,x:4116},b2:{y:3907.2123007471773,x:4116}},183:{from_node_id:"1576987",to_node_id:"1576656",b1:{y:3830.733703350168,x:4116},b2:{y:3790.445677833893,x:4116}},184:{from_node_id:"1576987",to_node_id:"1576554",b1:{y:3810.0289584024877,x:4116},b2:{y:3721.4298613416263,x:4116}}}},1576762:{name:"Phosphate exchange",bigg_id:"EX_pi_e",reversibility:!0,label_x:2902.694091796875,label_y:4926.21484375,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"pi_e"}],segments:{185:{from_node_id:"1576594",to_node_id:"1576989",b1:{x:2879.999755859375,y:4896.2666015625},b2:{x:2880,y:4909.82177734375}}}},1576763:{name:"Fumarate transport via proton symport (2 H)",bigg_id:"FUMt2_2",reversibility:!1,label_x:2851.586669921875,label_y:845.8676147460938,gene_reaction_rule:"b3528",genes:[{bigg_id:"b3528",name:"b3528"}],metabolites:[{coefficient:-1,bigg_id:"fum_e"},{coefficient:-2,bigg_id:"h_e"},{coefficient:1,bigg_id:"fum_c"},{coefficient:2,bigg_id:"h_c"}],segments:{187:{from_node_id:"1576991",to_node_id:"1576993",b1:null,b2:null},188:{from_node_id:"1576993",to_node_id:"1576992",b1:null,b2:null},189:{from_node_id:"1576657",to_node_id:"1576991",b1:{y:690,x:2840},b2:{y:718,x:2840}},190:{from_node_id:"1576658",to_node_id:"1576991",b1:{y:677.7984674554473,x:2840},b2:{y:714.3395402366342,x:2840}},191:{from_node_id:"1576992",to_node_id:"1576659",b1:{y:995.6604597633658,x:2840},b2:{y:1032.2015325445527,x:2840}},192:{from_node_id:"1576992",to_node_id:"1576503",b1:{y:1271.0003479379363,x:2840},b2:{y:1950.0011597931211,x:2840}}}},1576764:{name:"acetate reversible transport via proton symport",bigg_id:"ACt2r",reversibility:!0,label_x:1740.8675537109375,label_y:4638.470703125,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:1,bigg_id:"ac_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"ac_e"},{coefficient:-1,bigg_id:"h_e"}],segments:{193:{from_node_id:"1576994",to_node_id:"1576995",b1:null,b2:null},194:{from_node_id:"1576995",to_node_id:"1576996",b1:null,b2:null},195:{from_node_id:"1576627",to_node_id:"1576994",b1:{x:1716.5867919921875,y:4779.13232421875},b2:{y:4760,x:1715}},196:{from_node_id:"1576660",to_node_id:"1576994",b1:{x:1715,y:4787.680536450803},b2:{y:4760.660459763366,x:1715}},197:{from_node_id:"1576996",to_node_id:"1576652",b1:{x:1715,y:4489.49560546875},b2:{x:1715,y:4450.38818359375}},198:{from_node_id:"1576996",to_node_id:"1576661",b1:{x:1715,y:4485.835145705384},b2:{x:1719.76025390625,y:4430.253057299197}}}},1576765:{name:"D-glucose transport via PEP:Pyr PTS",bigg_id:"GLCpts",reversibility:!1,label_x:1074.520263671875,label_y:929.0499877929688,gene_reaction_rule:"((b2417 and b1101 and b2415 and b2416) or (b1817 and b1818 and b1819 and b2415 and b2416) or (b2417 and b1621 and b2415 and b2416))",genes:[{bigg_id:"b2417",name:"b2417"},{bigg_id:"b1101",name:"b1101"},{bigg_id:"b2415",name:"b2415"},{bigg_id:"b2416",name:"b2416"},{bigg_id:"b1817",name:"b1817"},{bigg_id:"b1818",name:"b1818"},{bigg_id:"b1819",name:"b1819"},{bigg_id:"b2415",name:"b2415"},{bigg_id:"b2416",name:"b2416"},{bigg_id:"b2417",name:"b2417"},{bigg_id:"b1621",name:"b1621"},{bigg_id:"b2415",name:"b2415"},{bigg_id:"b2416",name:"b2416"}],metabolites:[{coefficient:1,bigg_id:"g6p_c"},{coefficient:1,bigg_id:"pyr_c"},{coefficient:-1,bigg_id:"pep_c"},{coefficient:-1,bigg_id:"glc__D_e"}],segments:{199:{from_node_id:"1576998",to_node_id:"1576997",b1:null,b2:null},200:{from_node_id:"1576997",to_node_id:"1576999",b1:null,b2:null},201:{from_node_id:"1576662",to_node_id:"1576998",b1:{x:962.100078544998,y:817.6128620109578},b2:{x:1056.2982974892807,y:830.8607140720374}},202:{from_node_id:"1576647",to_node_id:"1576998",b1:{x:1054.4691636917553,y:841.218336226978},b2:{x:1054.6540059434642,y:852.0646158583277}},203:{from_node_id:"1576999",to_node_id:"1576663",b1:{x:1056.5867919921875,y:1155.6497636747395},b2:{x:1162.89990234375,y:1091.99109457335}},204:{from_node_id:"1576999",to_node_id:"1576524",b1:{x:1056.5867919921875,y:1156.4998046875},b2:{x:1055,y:1159.3526000976562}}}},1576766:{name:"succinate transport out via proton antiport",bigg_id:"SUCCt3",reversibility:!1,label_x:4451.38818359375,label_y:2819.884765625,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"h_e"},{coefficient:1,bigg_id:"succ_e"},{coefficient:-1,bigg_id:"succ_c"},{coefficient:1,bigg_id:"h_c"}],segments:{205:{from_node_id:"1577002",to_node_id:"1577000",b1:null,b2:null},206:{from_node_id:"1577000",to_node_id:"1577001",b1:null,b2:null},207:{from_node_id:"1576664",to_node_id:"1577002",b1:{x:4395.992900114855,y:2928.186767578125},b2:{x:4392.512762612581,y:2844.388427734375}},208:{from_node_id:"1576533",to_node_id:"1577002",b1:{y:2846,x:3989.9032976766134},b2:{y:2846,x:4388.970989302984}},209:{from_node_id:"1577001",to_node_id:"1576531",b1:{x:4830.28303131712,y:2844.388427734375},b2:{y:2846,x:4852.764726786234}},210:{from_node_id:"1577001",to_node_id:"1576665",b1:{x:4895.4172094976175,y:2844.388427734375},b2:{x:4896.373608481642,y:2757.366943359375}}}},1576768:{name:"6-phosphogluconolactonase",bigg_id:"PGL",reversibility:!1,label_x:1599.3970947265625,label_y:1312.1234130859375,gene_reaction_rule:"b0767",genes:[{bigg_id:"b0767",name:"b0767"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:-1,bigg_id:"6pgl_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"6pgc_c"}],segments:{211:{from_node_id:"1577005",to_node_id:"1577003",b1:null,b2:null},212:{from_node_id:"1577003",to_node_id:"1577004",b1:null,b2:null},213:{from_node_id:"1576626",to_node_id:"1577005",b1:{y:1265,x:1562},b2:{y:1265,x:1600.5}},214:{from_node_id:"1576667",to_node_id:"1577005",b1:{y:1265,x:1562.3991758303962},b2:{y:1265,x:1600.6197527491188}},215:{from_node_id:"1577004",to_node_id:"1576668",b1:{y:1265,x:1673.3802472508812},b2:{y:1265,x:1711.6008241696038}},216:{from_node_id:"1577004",to_node_id:"1576490",b1:{y:1265,x:1682.5},b2:{y:1265,x:1742}}}},1576769:{name:"glyceraldehyde-3-phosphate dehydrogenase",bigg_id:"GAPD",reversibility:!0,label_x:1065,label_y:2385,gene_reaction_rule:"b1779",genes:[{bigg_id:"b1779",name:"b1779"}],metabolites:[{coefficient:1,bigg_id:"nadh_c"},{coefficient:1,bigg_id:"13dpg_c"},{coefficient:-1,bigg_id:"pi_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"nad_c"},{coefficient:-1,bigg_id:"g3p_c"}],segments:{217:{from_node_id:"1577006",to_node_id:"1577008",b1:null,b2:null},218:{from_node_id:"1577008",to_node_id:"1577007",b1:null,b2:null},219:{from_node_id:"1576575",to_node_id:"1577006",b1:{y:2270,x:1055},b2:{y:2322.5,x:1055}},220:{from_node_id:"1576669",to_node_id:"1577006",b1:{y:2284.7920271060384,x:1055},b2:{y:2326.9376081318114,x:1055}},221:{from_node_id:"1576670",to_node_id:"1577006",b1:{y:2297.5658350974745,x:1055},b2:{y:2330.769750529242,x:1055}},222:{from_node_id:"1577007",to_node_id:"1576487",b1:{y:2454.5,x:1055},b2:{y:2500,x:1055}},223:{from_node_id:"1577007",to_node_id:"1576671",b1:{y:2453.0623918681886,x:1055},b2:{y:2495.2079728939616,x:1055}},224:{from_node_id:"1577007",to_node_id:"1576672",b1:{y:2449.230249470758,x:1055},b2:{y:2482.4341649025255,x:1055}}}},1576770:{name:"Fumarate exchange",bigg_id:"EX_fum_e",reversibility:!1,label_x:2915.057373046875,label_y:529.8175659179688,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"fum_e"}],segments:{225:{from_node_id:"1576657",to_node_id:"1577009",b1:{y:623,x:2840},b2:{y:560,x:2840}}}},1576771:{name:"succinate transport via proton symport (2 H)",bigg_id:"SUCCt2_2",reversibility:!1,label_x:4501.95703125,label_y:2997.661865234375,gene_reaction_rule:"b3528",genes:[{bigg_id:"b3528",name:"b3528"}],metabolites:[{coefficient:-2,bigg_id:"h_e"},{coefficient:-1,bigg_id:"succ_e"},{coefficient:1,bigg_id:"succ_c"},{coefficient:2,bigg_id:"h_c"}],segments:{227:{from_node_id:"1577013",to_node_id:"1577011",b1:null,b2:null},228:{from_node_id:"1577011",to_node_id:"1577012",b1:null,b2:null},229:{from_node_id:"1576673",to_node_id:"1577013",b1:{y:3027,x:4832.0555127546395},b2:{y:3027,x:4806.816653826392}},230:{from_node_id:"1576531",to_node_id:"1577013",b1:{y:3027,x:4896.1311639800515},b2:{y:3027,x:4826.039349194016}},231:{from_node_id:"1577012",to_node_id:"1576533",b1:{y:3027,x:4366.8883209237165},b2:{y:3027,x:3972.294403079054}},232:{from_node_id:"1577012",to_node_id:"1576674",b1:{y:3027,x:4521},b2:{y:3027,x:4486}}}},1576772:{name:"glutamate dehydrogenase (NADP)",bigg_id:"GLUDy",reversibility:!0,label_x:4025.81298828125,label_y:3671.95703125,gene_reaction_rule:"b1761",genes:[{bigg_id:"b1761",name:"b1761"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:1,bigg_id:"nadph_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"nadp_c"},{coefficient:-1,bigg_id:"glu__L_c"},{coefficient:1,bigg_id:"nh4_c"},{coefficient:1,bigg_id:"akg_c"}],segments:{233:{from_node_id:"1577016",to_node_id:"1577015",b1:null,b2:null},234:{from_node_id:"1577015",to_node_id:"1577014",b1:null,b2:null},235:{from_node_id:"1576675",to_node_id:"1577016",b1:{y:3632,x:4170.325901807804},b2:{y:3632,x:4133.6977705423415}},236:{from_node_id:"1576554",to_node_id:"1577016",b1:{y:3632,x:4183},b2:{y:3632,x:4137.5}},237:{from_node_id:"1576676",to_node_id:"1577016",b1:{y:3632,x:4156.897300677553},b2:{y:3632,x:4129.669190203266}},238:{from_node_id:"1577014",to_node_id:"1576677",b1:{y:3632,x:4060.9817744755806},b2:{y:3632,x:4021.2725815852687}},239:{from_node_id:"1577014",to_node_id:"1576678",b1:{y:3632,x:4054.775659320446},b2:{y:3632,x:4000.5855310681522}},240:{from_node_id:"1577014",to_node_id:"1576509",b1:{y:3632,x:4028.194352729836},b2:{y:3632,x:3911.98117576612}},241:{from_node_id:"1577014",to_node_id:"1576679",b1:{y:3632,x:4065.6561756331353},b2:{y:3632,x:4036.853918777118}}}},1576773:{name:"ATP synthase (four protons for one ATP)",bigg_id:"ATPS4r",reversibility:!0,label_x:4558.97119140625,label_y:1122.273193359375,gene_reaction_rule:"(((b3736 and b3737 and b3738) and (b3731 and b3732 and b3733 and b3734 and b3735)) or ((b3736 and b3737 and b3738) and (b3731 and b3732 and b3733 and b3734 and b3735) and b3739))",genes:[{bigg_id:"b3736",name:"b3736"},{bigg_id:"b3737",name:"b3737"},{bigg_id:"b3738",name:"b3738"},{bigg_id:"b3731",name:"b3731"},{bigg_id:"b3732",name:"b3732"},{bigg_id:"b3733",name:"b3733"},{bigg_id:"b3734",name:"b3734"},{bigg_id:"b3735",name:"b3735"},{bigg_id:"b3736",name:"b3736"},{bigg_id:"b3737",name:"b3737"},{bigg_id:"b3738",name:"b3738"},{bigg_id:"b3731",name:"b3731"},{bigg_id:"b3732",name:"b3732"},{bigg_id:"b3733",name:"b3733"},{bigg_id:"b3734",name:"b3734"},{bigg_id:"b3735",name:"b3735"},{bigg_id:"b3739",name:"b3739"}],metabolites:[{coefficient:1,bigg_id:"h2o_c"},{coefficient:1,bigg_id:"atp_c"},{coefficient:-4,bigg_id:"h_e"},{coefficient:-1,bigg_id:"pi_c"},{coefficient:-1,bigg_id:"adp_c"},{coefficient:3,bigg_id:"h_c"}],segments:{242:{from_node_id:"1577017",to_node_id:"1577019",b1:null,b2:null},243:{from_node_id:"1577019",to_node_id:"1577018",b1:null,b2:null},244:{from_node_id:"1576680",to_node_id:"1577017",b1:{y:1150,x:4785},b2:{y:1150,x:4729}},245:{from_node_id:"1576681",to_node_id:"1577017",b1:{x:4877.134963734394,y:1332.100830078125},b2:{y:1150,x:4746.487950057818}},246:{from_node_id:"1576536",to_node_id:"1577017",b1:{x:4965.504060083706,y:1523.8707275390625},b2:{y:1150,x:4796.204440681362}},247:{from_node_id:"1577018",to_node_id:"1576682",b1:{x:4558.046875,y:1148.3885498046875},b2:{y:1150,x:4520}},248:{from_node_id:"1577018",to_node_id:"1576683",b1:{x:4575.66162109375,y:1148.388427734375},b2:{x:4542.7265625,y:1150}},249:{from_node_id:"1577018",to_node_id:"1576534",b1:{x:4366.332368388376,y:1148.3885498046875},b2:{x:4324.116846450839,y:1043.64013671875}}}},1576774:{name:"citrate synthase",bigg_id:"CS",reversibility:!1,label_x:2808,label_y:3876,gene_reaction_rule:"b0720",genes:[{bigg_id:"b0720",name:"b0720"}],metabolites:[{coefficient:-1,bigg_id:"h2o_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"cit_c"},{coefficient:1,bigg_id:"coa_c"},{coefficient:-1,bigg_id:"accoa_c"},{coefficient:-1,bigg_id:"oaa_c"}],segments:{250:{from_node_id:"1577020",to_node_id:"1577022",b1:null,b2:null},251:{from_node_id:"1577022",to_node_id:"1577021",b1:null,b2:null},252:{from_node_id:"1576514",to_node_id:"1577020",b1:{x:1727.7705707040077,y:3679.773731927161},b2:{x:2627.479742988546,y:3745.4027250468985}},253:{from_node_id:"1576684",to_node_id:"1577020",b1:{y:3791.3182764091857,x:2693.656876042776},b2:{y:3823.2954829227556,x:2728.8970628128327}},254:{from_node_id:"1576521",to_node_id:"1577020",b1:{y:3789.4902660855073,x:2691.642334053416},b2:{y:3822.7470798256522,x:2728.292700216025}},255:{from_node_id:"1577021",to_node_id:"1576685",b1:{y:3931.4175627427994,x:2857.610551099924},b2:{y:3962.7252091426644,x:2898.7018369997472}},256:{from_node_id:"1577021",to_node_id:"1576686",b1:{y:3934.0276661811313,x:2861.0363118627347},b2:{y:3971.425553937104,x:2910.1210395424487}},257:{from_node_id:"1577021",to_node_id:"1576687",b1:{y:3936.817861413506,x:2864.698443105226},b2:{y:3980.7262047116856,x:2922.328143684087}}}},1576775:{name:"pyruvate reversible transport via proton symport",bigg_id:"PYRt2r",reversibility:!0,label_x:462.6368408203125,label_y:3908.02490234375,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"pyr_e"},{coefficient:1,bigg_id:"h_c"},{coefficient:-1,bigg_id:"h_e"},{coefficient:1,bigg_id:"pyr_c"}],segments:{258:{from_node_id:"1577023",to_node_id:"1577025",b1:null,b2:null},259:{from_node_id:"1577025",to_node_id:"1577024",b1:null,b2:null},260:{from_node_id:"1576688",to_node_id:"1577023",b1:{y:3945,x:322.7984674554473},b2:{y:3945,x:359.3395402366342}},261:{from_node_id:"1576557",to_node_id:"1577023",b1:{y:3945,x:325},b2:{y:3945,x:360}},262:{from_node_id:"1577024",to_node_id:"1576511",b1:{y:3945,x:706.5},b2:{y:3945,x:850}},263:{from_node_id:"1577024",to_node_id:"1576689",b1:{y:3945,x:660.6604597633658},b2:{y:3945,x:697.2015325445527}}}},1576776:{name:"malic enzyme (NADP)",bigg_id:"ME2",reversibility:!1,label_x:2281.107177734375,label_y:3432.36328125,gene_reaction_rule:"b2463",genes:[{bigg_id:"b2463",name:"b2463"}],metabolites:[{coefficient:-1,bigg_id:"nadp_c"},{coefficient:1,bigg_id:"co2_c"},{coefficient:-1,bigg_id:"mal__L_c"},{coefficient:1,bigg_id:"pyr_c"},{coefficient:1,bigg_id:"nadph_c"}],segments:{264:{from_node_id:"1577028",to_node_id:"1577026",b1:null,b2:null},265:{from_node_id:"1577026",to_node_id:"1577027",b1:null,b2:null},266:{from_node_id:"1576690",to_node_id:"1577028",b1:{y:3329.0232535031614,x:2361.6279108280646},b2:{y:3350.7069760509485,x:2325.4883732484195}},267:{from_node_id:"1576504",to_node_id:"1577028",b1:{y:3269.069152001936,x:2461.551413330107},b2:{y:3332.720745600581,x:2355.4654239990323}},268:{from_node_id:"1577027",to_node_id:"1576691",b1:{y:3417.2249567472754,x:2205.550086505449},b2:{y:3434.0831891575845,x:2171.8336216848306}},269:{from_node_id:"1577027",to_node_id:"1576511",b1:{y:3495.997238327751,x:2048.005523344498},b2:{x:1164.309223322806,y:3895.002675936253}},270:{from_node_id:"1577027",to_node_id:"1576692",b1:{y:3418.8232647019117,x:2202.3534705961765},b2:{y:3439.4108823397055,x:2161.178235320589}}}},1576777:{name:"Formate exchange",bigg_id:"EX_for_e",reversibility:!1,label_x:1476.3470458984375,label_y:4913.4130859375,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"for_e"}],segments:{271:{from_node_id:"1576666",to_node_id:"1577030",b1:{x:1461.5867919921875,y:4885.96044921875},b2:{x:1460,y:4884.95458984375}}}},1577490:{name:"acetaldehyde dehydrogenase (acetylating)",bigg_id:"ACALD",reversibility:!0,label_x:1939.0750732421875,label_y:3998.470458984375,gene_reaction_rule:"(b0351 or b1241)",genes:[{bigg_id:"b0351",name:"b0351"},{bigg_id:"b1241",name:"b1241"}],metabolites:[{coefficient:-1,bigg_id:"acald_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"nadh_c"},{coefficient:-1,bigg_id:"coa_c"},{coefficient:1,bigg_id:"accoa_c"},{coefficient:-1,bigg_id:"nad_c"}],segments:{273:{from_node_id:"1577031",to_node_id:"1577032",b1:null,b2:null},274:{from_node_id:"1577032",to_node_id:"1577033",b1:null,b2:null},275:{from_node_id:"1576817",to_node_id:"1577031",b1:{y:3945,x:2125},b2:{y:3945,x:2065.5}},276:{from_node_id:"1576825",to_node_id:"1577031",b1:{y:3945,x:2101.8970920157},b2:{y:3945,x:2058.56912760471}},277:{from_node_id:"1576828",to_node_id:"1577031",b1:{y:3945,x:2085.0693909433},b2:{y:3945,x:2053.52081728299}},278:{from_node_id:"1577033",to_node_id:"1576514",b1:{y:3945,x:1940.25},b2:{y:3945,x:1847.5}},279:{from_node_id:"1577033",to_node_id:"1576832",b1:{y:3945,x:1966.47918271701},b2:{y:3945,x:1934.9306090567002}},280:{from_node_id:"1577033",to_node_id:"1576812",b1:{y:3945,x:1961.4308723952902},b2:{y:3945,x:1918.1029079843004}}}},1577497:{name:"acetaldehyde reversible transport",bigg_id:"ACALDt",reversibility:!0,label_x:2248.561767578125,label_y:4579.041015625,gene_reaction_rule:"s0001",genes:[{bigg_id:"s0001",name:"s0001"}],metabolites:[{coefficient:-1,bigg_id:"acald_e"},{coefficient:1,bigg_id:"acald_c"}],segments:{281:{from_node_id:"1576815",to_node_id:"1577034",b1:{x:2210,y:4796.55283203125},b2:{y:4707,x:2210}},282:{from_node_id:"1577034",to_node_id:"1576817",b1:{y:4476.25,x:2210},b2:{y:4257.5,x:2210}}}},1577498:{name:"Acetaldehyde exchange",bigg_id:"EX_acald_e",reversibility:!1,label_x:2227.346923828125,label_y:4922.892578125,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"acald_e"}],segments:{283:{from_node_id:"1576815",to_node_id:"1577035",b1:{x:2210.15,y:4889.1484375},b2:{y:4894,x:2210.5}}}},1577507:{name:"alcohol dehydrogenase (ethanol)",bigg_id:"ALCD2x",reversibility:!0,label_x:2356.4794921875,label_y:4047.4384765625,gene_reaction_rule:"(b0356 or b1478 or b1241)",genes:[{bigg_id:"b0356",name:"b0356"},{bigg_id:"b1478",name:"b1478"},{bigg_id:"b1241",name:"b1241"}],metabolites:[{coefficient:-1,bigg_id:"etoh_c"},{coefficient:1,bigg_id:"h_c"},{coefficient:1,bigg_id:"acald_c"},{coefficient:1,bigg_id:"nadh_c"},{coefficient:-1,bigg_id:"nad_c"}],segments:{2:{from_node_id:"1577041",to_node_id:"1577042",b1:null,b2:null},3:{from_node_id:"1577042",to_node_id:"1577043",b1:null,b2:null},4:{from_node_id:"1576829",to_node_id:"1577041",b1:{y:4162.240740184523,x:2437.6865073405606},b2:{y:4118.6722220553565,x:2391.0059522021684}},5:{from_node_id:"1576822",to_node_id:"1577041",b1:{y:4139.7065841719395,x:2413.5427687556494},b2:{y:4111.911975251582,x:2383.7628306266947}},6:{from_node_id:"1577043",to_node_id:"1576817",b1:{y:4050.989239830398,x:2323.3232905083714},b2:{y:4004.2974661013272,x:2279.744301694572}},7:{from_node_id:"1577043",to_node_id:"1576813",b1:{y:4059.6140048832744,x:2331.3730712243896},b2:{y:4033.046682944248,x:2306.576904081298}},8:{from_node_id:"1577043",to_node_id:"1576824",b1:{y:4056.0538526083565,x:2328.0502624344663},b2:{y:4021.1795086945217,x:2295.5008747815536}}}},1577514:{name:"formate transport via proton symport (uptake only)",bigg_id:"FORt2",reversibility:!1,label_x:1255.7530517578125,label_y:4574.13232421875,gene_reaction_rule:"(b0904 or b2492)",genes:[{bigg_id:"b0904",name:"b0904"},{bigg_id:"b2492",name:"b2492"}],metabolites:[{coefficient:1,bigg_id:"for_c"},{coefficient:-1,bigg_id:"for_e"},{coefficient:-1,bigg_id:"h_e"},{coefficient:1,bigg_id:"h_c"}],segments:{9:{from_node_id:"1577044",to_node_id:"1577045",b1:null,b2:null},10:{from_node_id:"1577045",to_node_id:"1577046",b1:null,b2:null},11:{from_node_id:"1576666",to_node_id:"1577044",b1:{x:1360,y:4827.353507999329},b2:{y:4749.209372712298,x:1360}},12:{from_node_id:"1576833",to_node_id:"1577044",b1:{y:4779.244289008981,x:1360},b2:{y:4744.773286702694,x:1360}},13:{from_node_id:"1577046",to_node_id:"1576590",b1:{y:4411.784344889025,x:1360},b2:{y:4275.94781629675,x:1360}},14:{from_node_id:"1577046",to_node_id:"1576811",b1:{y:4455.769750529243,x:1360},b2:{y:4422.5658350974745,x:1360}}}},1577518:{name:"formate transport via diffusion",bigg_id:"FORti",reversibility:!1,label_x:1479.5206298828125,label_y:4509.27197265625,gene_reaction_rule:"(b0904 or b2492)",genes:[{bigg_id:"b0904",name:"b0904"},{bigg_id:"b2492",name:"b2492"}],metabolites:[{coefficient:-1,bigg_id:"for_c"},{coefficient:1,bigg_id:"for_e"}],segments:{15:{from_node_id:"1576590",to_node_id:"1577047",b1:{y:4145.55,x:1460},b2:{y:4263.5,x:1460}},16:{from_node_id:"1577047",to_node_id:"1576666",b1:{y:4488.7,x:1460},b2:{x:1460,y:4654.322265625}}}},1577520:{name:"fumarate reductase",bigg_id:"FRD7",reversibility:!1,label_x:3078.744384765625,label_y:2572.54541015625,gene_reaction_rule:"(b4151 and b4152 and b4153 and b4154)",genes:[{bigg_id:"b4151",name:"b4151"},{bigg_id:"b4152",name:"b4152"},{bigg_id:"b4153",name:"b4153"},{bigg_id:"b4154",name:"b4154"}],metabolites:[{coefficient:1,bigg_id:"q8_c"},{coefficient:-1,bigg_id:"fum_c"},{coefficient:-1,bigg_id:"q8h2_c"},{coefficient:1,bigg_id:"succ_c"}],segments:{17:{from_node_id:"1577048",to_node_id:"1577049",b1:null,b2:null},18:{from_node_id:"1577049",to_node_id:"1577050",b1:null,b2:null},19:{from_node_id:"1576503",to_node_id:"1577048",b1:{y:2600,x:2880.896383759611},b2:{y:2600,x:3020.2689151278832}},20:{from_node_id:"1576830",to_node_id:"1577048",b1:{y:2600,x:3003.842268941361},b2:{y:2600,x:3057.152680682408}},21:{from_node_id:"1577050",to_node_id:"1576814",b1:{y:2600,x:3162.14723459035},b2:{y:2600,x:3213.824115301167}},22:{from_node_id:"1577050",to_node_id:"1576533",b1:{y:2600,x:3198.034494053106},b2:{y:2600,x:3333.4483135103533}}}},1577524:{name:"Fructose transport via PEP:Pyr PTS (f6p generating)",bigg_id:"FRUpts2",reversibility:!1,label_x:456.41497802734375,label_y:1327.7852783203125,gene_reaction_rule:"(b1817 and b1818 and b1819 and b2415 and b2416)",genes:[{bigg_id:"b1817",name:"b1817"},{bigg_id:"b1818",name:"b1818"},{bigg_id:"b1819",name:"b1819"},{bigg_id:"b2415",name:"b2415"},{bigg_id:"b2416",name:"b2416"}],metabolites:[{coefficient:-1,bigg_id:"pep_c"},{coefficient:1,bigg_id:"pyr_c"},{coefficient:1,bigg_id:"f6p_c"},{coefficient:-1,bigg_id:"fru_e"}],segments:{23:{from_node_id:"1577051",to_node_id:"1577052",b1:null,b2:null},24:{from_node_id:"1577052",to_node_id:"1577053",b1:null,b2:null},25:{from_node_id:"1576826",to_node_id:"1577051",b1:{y:1360,x:465},b2:{x:526.550048828125,y:1361.5867919921875}},26:{from_node_id:"1576819",to_node_id:"1577051",b1:{x:400.008457770101,y:1452.0322265625},b2:{x:396.1378949970459,y:1360}},27:{from_node_id:"1577053",to_node_id:"1576525",b1:{x:860.370260215258,y:1363.1734619140625},b2:{x:917.1118252292455,y:1361.586669921875}},28:{from_node_id:"1577053",to_node_id:"1576821",b1:{x:861.4990623462952,y:1364.76025390625},b2:{x:861.106575008484,y:1240.992919921875}}}},1577529:{name:"D-Fructose exchange",bigg_id:"EX_fru_e",reversibility:!1,label_x:125.35597229003906,label_y:1321.438232421875,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"fru_e"}],segments:{29:{from_node_id:"1576826",to_node_id:"1577054",b1:{y:1360,x:282.3},b2:{y:1360,x:241}}}},1577532:{name:"Malate transport via proton symport (2 H)",bigg_id:"MALt2_2",reversibility:!1,label_x:2623.173583984375,label_y:844.3793334960938,gene_reaction_rule:"b3528",genes:[{bigg_id:"b3528",name:"b3528"}],metabolites:[{coefficient:-2,bigg_id:"h_e"},{coefficient:2,bigg_id:"h_c"},{coefficient:-1,bigg_id:"mal__L_e"},{coefficient:1,bigg_id:"mal__L_c"}],segments:{31:{from_node_id:"1577056",to_node_id:"1577057",b1:null,b2:null},32:{from_node_id:"1577057",to_node_id:"1577058",b1:null,b2:null},33:{from_node_id:"1576831",to_node_id:"1577056",b1:{y:682.8586789776543,x:2610},b2:{y:720.0576036932963,x:2610}},34:{from_node_id:"1576816",to_node_id:"1577056",b1:{y:693,x:2610},b2:{y:723.1,x:2610}},35:{from_node_id:"1577058",to_node_id:"1576810",b1:{y:995.6604597633658,x:2610},b2:{y:1032.2015325445527,x:2610}},36:{from_node_id:"1577058",to_node_id:"1576504",b1:{y:1311.8041025966977,x:2610},b2:{y:2086.013675322326,x:2610}}}},1577537:{name:"L-Malate exchange",bigg_id:"EX_mal__L_e",reversibility:!1,label_x:2356.597412109375,label_y:513.949951171875,gene_reaction_rule:"",genes:[],metabolites:[{coefficient:-1,bigg_id:"mal__L_e"}],segments:{37:{from_node_id:"1576816",to_node_id:"1577059",b1:{y:623,x:2610},b2:{y:560,x:2610}}}},1577540:{name:"NADH dehydrogenase (ubiquinone-8 & 3 protons)",bigg_id:"NADH16",reversibility:!1,label_x:4589.75537109375,label_y:2624.46044921875,gene_reaction_rule:"(b2276 and b2277 and b2278 and b2279 and b2280 and b2281 and b2282 and b2283 and b2284 and b2285 and b2286 and b2287 and b2288)",genes:[{bigg_id:"b2276",name:"b2276"},{bigg_id:"b2277",name:"b2277"},{bigg_id:"b2278",name:"b2278"},{bigg_id:"b2279",name:"b2279"},{bigg_id:"b2280",name:"b2280"},{bigg_id:"b2281",name:"b2281"},{bigg_id:"b2282",name:"b2282"},{bigg_id:"b2283",name:"b2283"},{bigg_id:"b2284",name:"b2284"},{bigg_id:"b2285",name:"b2285"},{bigg_id:"b2286",name:"b2286"},{bigg_id:"b2287",name:"b2287"},{bigg_id:"b2288",name:"b2288"}],metabolites:[{coefficient:-1,bigg_id:"q8_c"},{coefficient:3,bigg_id:"h_e"},{coefficient:-1,bigg_id:"nadh_c"},{coefficient:1,bigg_id:"q8h2_c"},{coefficient:1,bigg_id:"nad_c"},{coefficient:-4,bigg_id:"h_c"}],segments:{39:{from_node_id:"1577061",to_node_id:"1577062",b1:null,b2:null},40:{from_node_id:"1577062",to_node_id:"1577063",b1:null,b2:null},41:{from_node_id:"1576820",to_node_id:"1577061",b1:{y:2570,x:4470},b2:{y:2570,x:4582}},42:{from_node_id:"1576827",to_node_id:"1577061",b1:{x:4458.799047943291,y:2567.302001953125},b2:{y:2570,x:4595.729021023612}},43:{from_node_id:"1576539",to_node_id:"1577061",b1:{x:4706.342147363639,y:2375.007080078125},b2:{x:4542.513923505967,y:2570}},44:{from_node_id:"1577063",to_node_id:"1576808",b1:{x:4766.45361328125,y:2568.388427734375},b2:{y:2570,x:4780}},45:{from_node_id:"1577063",to_node_id:"1576809",b1:{x:4798.6355690569735,y:2570.000244140625},b2:{x:4928.099683314913,y:2655.409912109375}},46:{from_node_id:"1577063",to_node_id:"1576542",b1:{x:4800.053949169604,y:2571.611572265625},b2:{x:4630.938294107013,y:2507.151123046875}}}},1577545:{name:"succinate dehydrogenase (irreversible)",bigg_id:"SUCDi",reversibility:!1,label_x:3108.851318359375,label_y:2862.949951171875,gene_reaction_rule:"(b0721 and b0722 and b0723 and b0724)",genes:[{bigg_id:"b0721",name:"b0721"},{bigg_id:"b0722",name:"b0722"},{bigg_id:"b0723",name:"b0723"},{bigg_id:"b0724",name:"b0724"}],metabolites:[{coefficient:1,bigg_id:"fum_c"},{coefficient:1,bigg_id:"q8h2_c"},{coefficient:-1,bigg_id:"succ_c"},{coefficient:-1,bigg_id:"q8_c"}],segments:{47:{from_node_id:"1577064",to_node_id:"1577065",b1:null,b2:null},48:{from_node_id:"1577065",to_node_id:"1577066",b1:null,b2:null},49:{from_node_id:"1576814",to_node_id:"1577064",b1:{y:2815.1969315980286,x:3225.9782442502737},b2:{y:2816.4590794794085,x:3193.7934732750823}},50:{from_node_id:"1576533",to_node_id:"1577064",b1:{y:2812.1967701205886,x:3302.482361924995},b2:{y:2815.5590310361767,x:3216.7447085774984}},51:{from_node_id:"1577066",to_node_id:"1576503",b1:{y:2831.162537495866,x:3040.3872268158307},b2:{y:2843.2084583195547,x:2952.624089386102}},52:{from_node_id:"1577066",to_node_id:"1576830",b1:{y:2828.1157896960085,x:3062.5849607862237},b2:{y:2833.0526323200284,x:3026.6165359540787}}}},1577546:{name:"D-lactate transport via proton symport",bigg_id:"D_LACt2",reversibility:!0,label_x:1078.65283203125,label_y:4609.72607421875,gene_reaction_rule:"( b2975  or  b3603 )",genes:[{name:"b2975",bigg_id:"b2975"},{name:"b3603",bigg_id:"b3603"}],metabolites:[{bigg_id:"lac__D_e",coefficient:-1},{bigg_id:"h_e",coefficient:-1},{bigg_id:"lac__D_c",coefficient:1},{bigg_id:"h_c",coefficient:1}],segments:{476:{from_node_id:"1577067",to_node_id:"1577068",b1:null,b2:null},477:{from_node_id:"1577069",to_node_id:"1577068",b1:null,b2:null},478:{from_node_id:"1577067",to_node_id:"1576556",b1:{x:1055,y:4692.98193359375},b2:{x:1054.9998779296875,y:4736.89501953125}},479:{from_node_id:"1577067",to_node_id:"1577071",b1:{x:1055,y:4696.98193359375},b2:{x:1076,y:4715.98193359375}},480:{from_node_id:"1577069",to_node_id:"1576584",b1:{x:1053.4132080078125,y:4474.7353515625},b2:{x:1055,y:4413.36767578125}},481:{from_node_id:"1577069",to_node_id:"1577072",b1:{x:1053.4132080078125,y:4470.7353515625},b2:{x:1074.4132080078125,y:4451.7353515625}}}},1577547:{name:"Biomass Objective Function with GAM",bigg_id:"Biomass_Ecoli_core_w_GAM",reversibility:!1,label_x:5392.94580078125,label_y:4746.6962890625,gene_reaction_rule:"",genes:[],metabolites:[{bigg_id:"h2o_c",coefficient:-59.81},{bigg_id:"adp_c",coefficient:59.81},{bigg_id:"glu__L_c",coefficient:-4.9414},{bigg_id:"g3p_c",coefficient:-.129},{bigg_id:"e4p_c",coefficient:-.361},{bigg_id:"h_c",coefficient:59.81},{bigg_id:"r5p_c",coefficient:-.8977},{bigg_id:"atp_c",coefficient:-59.81},{bigg_id:"f6p_c",coefficient:-.0709},{bigg_id:"pyr_c",coefficient:-2.8328},{bigg_id:"nad_c",coefficient:-3.547},{bigg_id:"coa_c",coefficient:3.7478},{bigg_id:"oaa_c",coefficient:-1.7867},{bigg_id:"g6p_c",coefficient:-.205},{bigg_id:"nadh_c",coefficient:3.547},{bigg_id:"akg_c",coefficient:4.1182},{bigg_id:"accoa_c",coefficient:-3.7478},{bigg_id:"3pg_c",coefficient:-1.496},{bigg_id:"pep_c",coefficient:-.5191},{bigg_id:"gln__L_c",coefficient:-.2557},{bigg_id:"nadp_c",coefficient:13.0279},{bigg_id:"nadph_c",coefficient:-13.0279},{bigg_id:"pi_c",coefficient:59.81}],segments:{482:{from_node_id:"1577074",to_node_id:"1577075",b1:null,b2:null},483:{from_node_id:"1577076",to_node_id:"1577075",b1:null,b2:null},484:{from_node_id:"1577074",to_node_id:"1577073",b1:{x:5334.0517578125,y:4685.48193359375},b2:{x:5455.328125,y:4573.30322265625}},485:{from_node_id:"1577076",to_node_id:"1577077",b1:{x:5334.0517578125,y:4793.48193359375},b2:{x:5391.197265625,y:4926.6220703125}},486:{from_node_id:"1577074",to_node_id:"1577078",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5427.28515625,y:4630.19921875}},487:{from_node_id:"1577074",to_node_id:"1577079",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5423.4208984375,y:4516.16943359375}},488:{from_node_id:"1577074",to_node_id:"1577080",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5350.98828125,y:4453.01611328125}},489:{from_node_id:"1577076",to_node_id:"1577081",b1:{x:5334.0517578125,y:4793.48193359375},b2:{x:5337.27587890625,y:5001.37158203125}},490:{from_node_id:"1577074",to_node_id:"1577082",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5307.541015625,y:4413.09912109375}},491:{from_node_id:"1577074",to_node_id:"1577083",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5316.9716796875,y:4523.05615234375}},492:{from_node_id:"1577074",to_node_id:"1577084",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5258.0712890625,y:4533.61865234375}},493:{from_node_id:"1577074",to_node_id:"1577085",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5197.05859375,y:4544.18115234375}},494:{from_node_id:"1577074",to_node_id:"1577086",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5140.27099609375,y:4564.25048828125}},495:{from_node_id:"1577076",to_node_id:"1577087",b1:{x:5334.0517578125,y:4793.48193359375},b2:{x:5273.55517578125,y:4938.26416015625}},496:{from_node_id:"1577074",to_node_id:"1577088",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5068.69580078125,y:4579.03759765625}},497:{from_node_id:"1577074",to_node_id:"1577089",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:5023.52734375,y:4594.88134765625}},498:{from_node_id:"1577076",to_node_id:"1577090",b1:{x:5334.0517578125,y:4793.48193359375},b2:{x:5215.0458984375,y:4899.2412109375}},499:{from_node_id:"1577076",to_node_id:"1577091",b1:{x:5334.0517578125,y:4789.48193359375},b2:{x:5353.5947265625,y:4977.43115234375}},500:{from_node_id:"1577074",to_node_id:"1577092",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:4962.51416015625,y:4611.78173828125}},501:{from_node_id:"1577074",to_node_id:"1577093",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:4907.83935546875,y:4637.1318359375}},502:{from_node_id:"1577074",to_node_id:"1577094",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:4851.0517578125,y:4664.59423828125}},503:{from_node_id:"1577074",to_node_id:"1577095",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:4807.9951171875,y:4685.7197265625}},504:{from_node_id:"1577076",to_node_id:"1577096",b1:{x:5334.0517578125,y:4793.48193359375},b2:{x:5114.79541015625,y:4868.333984375}},505:{from_node_id:"1577074",to_node_id:"1577097",b1:{x:5334.0517578125,y:4681.48193359375},b2:{x:4780.78271484375,y:4717.4072265625}},506:{from_node_id:"1577076",to_node_id:"1577098",b1:{x:5334.0517578125,y:4793.48193359375},b2:{x:5099.533203125,y:4820.185546875}}}},1577548:{name:"aconitase (half-reaction A, Citrate hydro-lyase)",bigg_id:"ACONTa",reversibility:!0,label_x:2982.991259697708,label_y:4088.6436288689247,gene_reaction_rule:"(b0118 or b1276)",genes:[{name:"b0118",bigg_id:"b0118"},{name:"b1276",bigg_id:"b1276"}],metabolites:[{bigg_id:"h2o_c",coefficient:1},{bigg_id:"acon_C_c",coefficient:1},{bigg_id:"cit_c",coefficient:-1}],segments:{507:{from_node_id:"1577099",to_node_id:"1577100",b1:null,b2:null},508:{from_node_id:"1577101",to_node_id:"1577100",b1:null,b2:null},509:{from_node_id:"1577101",to_node_id:"1577102",b1:{x:3125.4142208172407,y:4044.558477078102},b2:{x:3112.4765239553985,y:3993.9154608910203}},510:{from_node_id:"1577101",to_node_id:"1577103",b1:{x:3108.646756937047,y:4044.2013827305695},b2:{x:3126.6630443215304,y:4045.94073519232}},511:{from_node_id:"1577099",to_node_id:"1576685",b1:{x:3025.7810749583687,y:4012.0956406322803},b2:{x:3025.1432055426353,y:4010.3555557486548}}}},1577549:{name:"aconitase (half-reaction B, Isocitrate hydro-lyase)",bigg_id:"ACONTb",reversibility:!0,label_x:3291.833217745038,label_y:4081.35343547726,gene_reaction_rule:"(b0118 or b1276)",genes:[{name:"b0118",bigg_id:"b0118"},{name:"b1276",bigg_id:"b1276"}],metabolites:[{bigg_id:"h2o_c",coefficient:-1},{bigg_id:"icit_c",coefficient:1},{bigg_id:"acon_C_c",coefficient:-1}],segments:{512:{from_node_id:"1577104",to_node_id:"1577105",b1:null,b2:null},513:{from_node_id:"1577106",to_node_id:"1577105",b1:null,b2:null},514:{from_node_id:"1577104",to_node_id:"1577102",b1:{x:3261.354277099013,y:4044.360816430351},b2:{x:3266.0226278968735,y:3991.5491179659602}},515:{from_node_id:"1577106",to_node_id:"1576505",b1:{x:3344.105236291347,y:4014.8024620364417},b2:{x:3345.4226198631072,y:4013.1918298584474}},516:{from_node_id:"1577104",to_node_id:"1577103",b1:{x:3262.862957011229,y:4046.056264386829},b2:{x:3260.813883986344,y:4046.222560627323}}}}},nodes:{1576485:{node_type:"metabolite",x:1145,y:2805,bigg_id:"atp_c",name:"ATP",label_x:1165,label_y:2805,node_is_primary:!1},1576486:{node_type:"metabolite",x:1055,y:2875,bigg_id:"3pg_c",name:"3-Phospho-D-glycerate",label_x:1085,label_y:2875,node_is_primary:!0},1576487:{node_type:"metabolite",x:1055,y:2565,bigg_id:"13dpg_c",name:"3-Phospho-D-glyceroyl-phosphate",label_x:1085,label_y:2565,node_is_primary:!0},1576488:{node_type:"metabolite",x:1145,y:2635,bigg_id:"adp_c",name:"ADP",label_x:1165,label_y:2635,node_is_primary:!1},1576489:{node_type:"metabolite",x:1907,y:1165,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:1907,label_y:1145,node_is_primary:!1},1576490:{node_type:"metabolite",x:1827,y:1265,bigg_id:"6pgc_c",name:"6-Phospho-D-gluconate",label_x:1800.0250244140625,label_y:1235,node_is_primary:!0},1576491:{node_type:"metabolite",x:2007,y:1165,bigg_id:"co2_c",name:"CO2",label_x:2007,label_y:1145,node_is_primary:!1},1576492:{node_type:"metabolite",x:2057,y:1165,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:2080,label_y:1140,node_is_primary:!1},1576493:{node_type:"metabolite",x:2155,y:1265,bigg_id:"ru5p__D_c",name:"D-Ribulose-5-phosphate",label_x:2155,label_y:1235,node_is_primary:!0},1576494:{node_type:"metabolite",x:4850,y:1660,bigg_id:"o2_e",name:"O2",label_x:4840.3310546875,label_y:1702.89208984375,node_is_primary:!0},1576495:{node_type:"metabolite",x:4330,y:1660,bigg_id:"o2_c",name:"O2",label_x:4259.09326171875,label_y:1677.4388427734375,node_is_primary:!0},1576496:{node_type:"metabolite",x:3330,y:1270,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:3330,label_y:1310,node_is_primary:!0},1576497:{node_type:"metabolite",x:3420,y:1120,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:3450,label_y:1150,node_is_primary:!0},1576498:{node_type:"metabolite",x:3510,y:650,bigg_id:"h_e",name:"H",label_x:3529.338134765625,label_y:639.6690673828125,node_is_primary:!1},1576499:{node_type:"metabolite",x:3510,y:1080.287841796875,bigg_id:"h_c",name:"H",label_x:3522.892333984375,label_y:1099.0072021484375,node_is_primary:!1},1576500:{node_type:"metabolite",x:3740,y:1270,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:3740,label_y:1310,node_is_primary:!0},1576501:{node_type:"metabolite",x:3625.7841796875,y:1147.3958740234375,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:3556.820068359375,label_y:1187.06494140625,node_is_primary:!0},1576502:{node_type:"metabolite",x:2715,y:2921,bigg_id:"h2o_c",name:"H2O",label_x:2693.4130859375,label_y:2896.71923828125,node_is_primary:!1},1576503:{node_type:"metabolite",x:2843,y:2920,bigg_id:"fum_c",name:"Fumarate",label_x:2867.189453125,label_y:2939.602783203125,node_is_primary:!0},1576504:{node_type:"metabolite",x:2621,y:3192,bigg_id:"mal__L_c",name:"L-Malate",label_x:2506.83544921875,label_y:3174.826416015625,node_is_primary:!0},1576505:{node_type:"metabolite",x:3413,y:3976,bigg_id:"icit_c",name:"Isocitrate",label_x:3344.32373046875,label_y:3949.222900390625,node_is_primary:!0},1576506:{node_type:"metabolite",x:3495,y:4065,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:3495,label_y:4098,node_is_primary:!1},1576507:{node_type:"metabolite",x:3659,y:3660,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:3557.6474609375,label_y:3655.388427734375,node_is_primary:!1},1576508:{node_type:"metabolite",x:3620,y:3710,bigg_id:"co2_c",name:"CO2",label_x:3539.820068359375,label_y:3711.611572265625,node_is_primary:!1},1576509:{node_type:"metabolite",x:3746,y:3627,bigg_id:"akg_c",name:"2-Oxoglutarate",label_x:3669.712158203125,label_y:3611.942626953125,node_is_primary:!0},1576510:{node_type:"metabolite",x:1365,y:3855,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:1394.189697265625,label_y:3851.826416015625,node_is_primary:!1},1576511:{node_type:"metabolite",x:1055,y:3945,bigg_id:"pyr_c",name:"Pyruvate",label_x:1025,label_y:3965,node_is_primary:!0},1576512:{node_type:"metabolite",x:1315,y:3905,bigg_id:"coa_c",name:"Coenzyme-A",label_x:1287.066162109375,label_y:3887.545654296875,node_is_primary:!1},1576513:{node_type:"metabolite",x:1605,y:3855,bigg_id:"co2_c",name:"CO2",label_x:1595,label_y:3835,node_is_primary:!1},1576514:{node_type:"metabolite",x:1715,y:3945,bigg_id:"accoa_c",name:"Acetyl-CoA",label_x:1695,label_y:3965,node_is_primary:!0},1576515:{node_type:"metabolite",x:1655,y:3885,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:1647.545654296875,label_y:3855.4794921875,node_is_primary:!1},1576516:{node_type:"metabolite",x:1295,y:3375,bigg_id:"h2o_c",name:"H2O",label_x:1315,label_y:3375,node_is_primary:!1},1576517:{node_type:"metabolite",x:1055,y:3375,bigg_id:"pep_c",name:"Phosphoenolpyruvate",label_x:1085,label_y:3355,node_is_primary:!0},1576518:{node_type:"metabolite",x:1205,y:3345,bigg_id:"co2_c",name:"CO2",label_x:1215,label_y:3325,node_is_primary:!1},1576519:{node_type:"metabolite",x:1615,y:3475,bigg_id:"h_c",name:"H",label_x:1635,label_y:3475,node_is_primary:!1},1576520:{node_type:"metabolite",x:1665,y:3515,bigg_id:"pi_c",name:"Phosphate",label_x:1685,label_y:3515,node_is_primary:!1},1576521:{node_type:"metabolite",x:2659,y:3724,bigg_id:"oaa_c",name:"Oxaloacetate",label_x:2692,label_y:3724,node_is_primary:!0},1576522:{node_type:"metabolite",x:1055,y:3125,bigg_id:"2pg_c",name:"D-Glycerate-2-phosphate",label_x:1093,label_y:3125,node_is_primary:!0},1576523:{node_type:"metabolite",x:965,y:3325,bigg_id:"h2o_c",name:"H2O",label_x:886.289794921875,label_y:3307.958740234375,node_is_primary:!1},1576524:{node_type:"metabolite",x:1055,y:1265,bigg_id:"g6p_c",name:"D-Glucose-6-phosphate",label_x:1075,label_y:1245,node_is_primary:!0},1576525:{node_type:"metabolite",x:1055,y:1545,bigg_id:"f6p_c",name:"D-Fructose-6-phosphate",label_x:1075,label_y:1525,node_is_primary:!0},1576526:{node_type:"metabolite",x:3989,y:4757,bigg_id:"nh4_e",name:"Ammonium",label_x:4019,label_y:4757,node_is_primary:!0},1576527:{node_type:"metabolite",x:3989,y:4441,bigg_id:"nh4_c",name:"Ammonium",label_x:4019,label_y:4441,node_is_primary:!0},1576528:{node_type:"metabolite",x:765,y:1855,bigg_id:"h2o_c",name:"H2O",label_x:672.9427490234375,label_y:1861.3470458984375,node_is_primary:!1},1576529:{node_type:"metabolite",x:1055,y:1925,bigg_id:"fdp_c",name:"D-Fructose-1-6-bisphosphate",label_x:1096.404296875,label_y:1928.173583984375,node_is_primary:!0},1576530:{node_type:"metabolite",x:755,y:1565,bigg_id:"pi_c",name:"Phosphate",label_x:686.744140625,label_y:1563.4132080078125,node_is_primary:!1},1576531:{node_type:"metabolite",x:4932,y:2880,bigg_id:"succ_e",name:"Succinate",label_x:4950.4462890625,label_y:2915.280517578125,node_is_primary:!0},1576532:{node_type:"metabolite",x:3180,y:3570,bigg_id:"glx_c",name:"Glyoxylate",label_x:3211.3271484375,label_y:3543.267578125,node_is_primary:!0},1576533:{node_type:"metabolite",x:3420,y:2867,bigg_id:"succ_c",name:"Succinate",label_x:3439.01611328125,label_y:2838.810302734375,node_is_primary:!0},1576534:{node_type:"metabolite",x:4215,y:1040,bigg_id:"atp_c",name:"ATP",label_x:4215,label_y:1010,node_is_primary:!0},1576535:{node_type:"metabolite",x:4065,y:1070,bigg_id:"amp_c",name:"AMP",label_x:4033.388427734375,label_y:1030.661865234375,node_is_primary:!0},1576536:{node_type:"metabolite",x:4215,y:1510,bigg_id:"adp_c",name:"ADP",label_x:4196.611328125,label_y:1556.1151123046875,node_is_primary:!0},1576537:{node_type:"metabolite",x:4882,y:4158,bigg_id:"gln__L_e",name:"L-Glutamine",label_x:4851.38134765625,label_y:4199.2802734375,node_is_primary:!0},1576539:{node_type:"metabolite",x:4758.67626953125,y:2215.0361328125,bigg_id:"q8_c",name:"Ubiquinone-8",label_x:4686.61181640625,label_y:2192.47509765625,node_is_primary:!0},1576542:{node_type:"metabolite",x:4508.47509765625,y:2210.3310546875,bigg_id:"q8h2_c",name:"Ubiquinol-8",label_x:4411.00048828125,label_y:2217.395751953125,node_is_primary:!0},1576544:{node_type:"metabolite",x:3621,y:4754,bigg_id:"co2_e",name:"CO2",label_x:3651,label_y:4754,node_is_primary:!0},1576545:{node_type:"metabolite",x:2358.984130859375,y:1865,bigg_id:"g3p_c",name:"Glyceraldehyde-3-phosphate",label_x:2375.091552734375,label_y:1898.4132080078125,node_is_primary:!0},1576546:{node_type:"metabolite",x:1983.082275390625,y:1865,bigg_id:"s7p_c",name:"Sedoheptulose-7-phosphate",label_x:1955.8675537109375,label_y:1814.314697265625,node_is_primary:!0},1576547:{node_type:"metabolite",x:1945,y:2190,bigg_id:"e4p_c",name:"D-Erythrose-4-phosphate",label_x:1922.7852783203125,label_y:2242.214599609375,node_is_primary:!0},1576548:{node_type:"metabolite",x:2362.636962890625,y:2186.826416015625,bigg_id:"f6p_c",name:"D-Fructose-6-phosphate",label_x:2367.636962890625,label_y:2216.826416015625,node_is_primary:!0},1576549:{node_type:"metabolite",x:965,y:3625,bigg_id:"h_c",name:"H",label_x:911.677978515625,label_y:3612.305908203125,node_is_primary:!1},1576550:{node_type:"metabolite",x:965,y:3555,bigg_id:"adp_c",name:"ADP",label_x:903.744140625,label_y:3528.02490234375,node_is_primary:!1},1576551:{node_type:"metabolite",x:965,y:3815,bigg_id:"atp_c",name:"ATP",label_x:929.1323852539062,label_y:3794.372314453125,node_is_primary:!1},1576552:{node_type:"metabolite",x:4883,y:3634,bigg_id:"glu__L_e",name:"L-Glutamate",label_x:4883,label_y:3604,node_is_primary:!0},1576553:{node_type:"metabolite",x:4825,y:3703,bigg_id:"h_e",name:"H",label_x:4857.23046875,label_y:3723,node_is_primary:!1},1576554:{node_type:"metabolite",x:4248,y:3632,bigg_id:"glu__L_c",name:"L-Glutamate",label_x:4221.2158203125,label_y:3601,node_is_primary:!0},1576555:{node_type:"metabolite",x:4478,y:3688,bigg_id:"h_c",name:"H",label_x:4503.1796875,label_y:3696.834716796875,node_is_primary:!1},1576556:{node_type:"metabolite",x:1055,y:4835,bigg_id:"lac__D_e",name:"D-Lactate",label_x:1088.470458984375,label_y:4857.21484375,node_is_primary:!0},1576557:{node_type:"metabolite",x:275,y:3945,bigg_id:"pyr_e",name:"Pyruvate",label_x:249.61181640625,label_y:3994.041015625,node_is_primary:!0},1576558:{node_type:"metabolite",x:1945,y:1555,bigg_id:"xu5p__D_c",name:"D-Xylulose-5-phosphate",label_x:1944.76025390625,label_y:1599.5205078125,node_is_primary:!0},1576559:{node_type:"metabolite",x:4850,y:2229,bigg_id:"h_e",name:"H",label_x:4867.7265625,label_y:2273.503662109375,node_is_primary:!0},1576567:{node_type:"metabolite",x:3460,y:2960,bigg_id:"coa_c",name:"Coenzyme-A",label_x:3448.892578125,label_y:2991.107421875,node_is_primary:!1},1576568:{node_type:"metabolite",x:3500,y:3030,bigg_id:"atp_c",name:"ATP",label_x:3496.826416015625,label_y:3062.694091796875,node_is_primary:!1},1576569:{node_type:"metabolite",x:3794,y:3051,bigg_id:"pi_c",name:"Phosphate",label_x:3814,label_y:3051,node_is_primary:!1},1576570:{node_type:"metabolite",x:3739,y:3193,bigg_id:"succoa_c",name:"Succinyl-CoA",label_x:3772.230712890625,label_y:3193.479248046875,node_is_primary:!0},1576571:{node_type:"metabolite",x:3768,y:3116,bigg_id:"adp_c",name:"ADP",label_x:3788,label_y:3126,node_is_primary:!1},1576572:{node_type:"metabolite",x:1145,y:1645,bigg_id:"atp_c",name:"ATP",label_x:1165,label_y:1645,node_is_primary:!1},1576573:{node_type:"metabolite",x:1145,y:1805,bigg_id:"adp_c",name:"ADP",label_x:1165,label_y:1805,node_is_primary:!1},1576574:{node_type:"metabolite",x:1145,y:1855,bigg_id:"h_c",name:"H",label_x:1165,label_y:1855,node_is_primary:!1},1576575:{node_type:"metabolite",x:1055,y:2195,bigg_id:"g3p_c",name:"Glyceraldehyde-3-phosphate",label_x:1085,label_y:2195,node_is_primary:!0},1576576:{node_type:"metabolite",x:4440,y:3755,bigg_id:"atp_c",name:"ATP",label_x:4474,label_y:3753,node_is_primary:!1},1576577:{node_type:"metabolite",x:4440,y:3805,bigg_id:"nh4_c",name:"Ammonium",label_x:4477,label_y:3811,node_is_primary:!1},1576578:{node_type:"metabolite",x:4246,y:4094,bigg_id:"gln__L_c",name:"L-Glutamine",label_x:4245,label_y:4130,node_is_primary:!0},1576579:{node_type:"metabolite",x:4434,y:3954,bigg_id:"adp_c",name:"ADP",label_x:4454,label_y:3954,node_is_primary:!1},1576580:{node_type:"metabolite",x:4434,y:4004,bigg_id:"h_c",name:"H",label_x:4454,label_y:4004,node_is_primary:!1},1576581:{node_type:"metabolite",x:4434,y:4054,bigg_id:"pi_c",name:"Phosphate",label_x:4454,label_y:4054,node_is_primary:!1},1576584:{node_type:"metabolite",x:1055,y:4345,bigg_id:"lac__D_c",name:"D-Lactate",label_x:1089,label_y:4349,node_is_primary:!0},1576585:{node_type:"metabolite",x:3684,y:3506,bigg_id:"coa_c",name:"Coenzyme-A",label_x:3628.99267578125,label_y:3483.05029296875,node_is_primary:!1},1576586:{node_type:"metabolite",x:3684,y:3558,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:3606.208740234375,label_y:3539.885009765625,node_is_primary:!1},1576587:{node_type:"metabolite",x:3872,y:3285,bigg_id:"co2_c",name:"CO2",label_x:3898,label_y:3285,node_is_primary:!1},1576588:{node_type:"metabolite",x:3820,y:3233,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:3846,label_y:3233,node_is_primary:!1},1576589:{node_type:"metabolite",x:1165,y:4045,bigg_id:"coa_c",name:"Coenzyme-A",label_x:1165,label_y:4065,node_is_primary:!1},1576590:{node_type:"metabolite",x:1460,y:4095,bigg_id:"for_c",name:"Formate",label_x:1495.230712890625,label_y:4083.958984375,node_is_primary:!0},1576591:{node_type:"metabolite",x:1505,y:3625,bigg_id:"atp_c",name:"ATP",label_x:1525,label_y:3625,node_is_primary:!1},1576592:{node_type:"metabolite",x:1285,y:3545,bigg_id:"adp_c",name:"ADP",label_x:1285,label_y:3575,node_is_primary:!1},1576593:{node_type:"metabolite",x:1215,y:3515,bigg_id:"co2_c",name:"CO2",label_x:1215,label_y:3535,node_is_primary:!1},1576594:{node_type:"metabolite",x:2880,y:4839,bigg_id:"pi_e",name:"Phosphate",label_x:2910,label_y:4839,node_is_primary:!0},1576595:{node_type:"metabolite",x:2793,y:4778,bigg_id:"h_e",name:"H",label_x:2733.83544921875,label_y:4763.8515625,node_is_primary:!1},1576596:{node_type:"metabolite",x:2793,y:4452,bigg_id:"h_c",name:"H",label_x:2754.13232421875,label_y:4426.61181640625,node_is_primary:!1},1576597:{node_type:"metabolite",x:2880,y:4430,bigg_id:"pi_c",name:"Phosphate",label_x:2921,label_y:4428,node_is_primary:!0},1576598:{node_type:"metabolite",x:4922,y:3228,bigg_id:"akg_e",name:"2-Oxoglutarate",label_x:4922,label_y:3268,node_is_primary:!0},1576599:{node_type:"metabolite",x:4834,y:3321,bigg_id:"h_e",name:"H",label_x:4861.39599609375,label_y:3334.553955078125,node_is_primary:!1},1576600:{node_type:"metabolite",x:4472,y:3328,bigg_id:"h_c",name:"H",label_x:4490.337890625,label_y:3342.330810546875,node_is_primary:!1},1576601:{node_type:"metabolite",x:855,y:2195,bigg_id:"dhap_c",name:"Dihydroxyacetone-phosphate",label_x:739.3148193359375,label_y:2179.132568359375,node_is_primary:!0},1576602:{node_type:"metabolite",x:4301.69775390625,y:1895.1654052734375,bigg_id:"h_c",name:"H",label_x:4234.01416015625,label_y:1903.8848876953125,node_is_primary:!1},1576603:{node_type:"metabolite",x:4860,y:1900,bigg_id:"h_e",name:"H",label_x:4858.38818359375,label_y:1950.6187744140625,node_is_primary:!1},1576604:{node_type:"metabolite",x:4439.09375,y:1760.9495849609375,bigg_id:"h2o_c",name:"H2O",label_x:4452.77001953125,label_y:1736.77685546875,node_is_primary:!1},1576605:{node_type:"metabolite",x:2419,y:1555,bigg_id:"r5p_c",name:"alpha-D-Ribose-5-phosphate",label_x:2418.413330078125,label_y:1601.1072998046875,node_is_primary:!0},1576606:{node_type:"metabolite",x:3105,y:3402,bigg_id:"accoa_c",name:"Acetyl-CoA",label_x:3125,label_y:3402,node_is_primary:!1},1576607:{node_type:"metabolite",x:3170,y:3480,bigg_id:"h2o_c",name:"H2O",label_x:3190,label_y:3480,node_is_primary:!1},1576608:{node_type:"metabolite",x:2871,y:3220,bigg_id:"h_c",name:"H",label_x:2891,label_y:3220,node_is_primary:!1},1576609:{node_type:"metabolite",x:2780,y:3168,bigg_id:"coa_c",name:"Coenzyme-A",label_x:2800,label_y:3168,node_is_primary:!1},1576612:{node_type:"metabolite",x:1815,y:4035,bigg_id:"pi_c",name:"Phosphate",label_x:1835,label_y:4035,node_is_primary:!1},1576613:{node_type:"metabolite",x:1715,y:4175,bigg_id:"actp_c",name:"Acetyl-phosphate",label_x:1745,label_y:4175,node_is_primary:!0},1576614:{node_type:"metabolite",x:1815,y:4135,bigg_id:"coa_c",name:"Coenzyme-A",label_x:1835,label_y:4135,node_is_primary:!1},1576615:{node_type:"metabolite",x:4535,y:4258,bigg_id:"atp_c",name:"ATP",label_x:4552.7265625,label_y:4269.94287109375,node_is_primary:!1},1576616:{node_type:"metabolite",x:4485,y:4258,bigg_id:"h2o_c",name:"H2O",label_x:4481.77685546875,label_y:4287.6689453125,node_is_primary:!1},1576617:{node_type:"metabolite",x:4285,y:4258,bigg_id:"pi_c",name:"Phosphate",label_x:4268.884765625,label_y:4287.6689453125,node_is_primary:!1},1576618:{node_type:"metabolite",x:4385,y:4258,bigg_id:"adp_c",name:"ADP",label_x:4381.77685546875,label_y:4290.89208984375,node_is_primary:!1},1576619:{node_type:"metabolite",x:4335,y:4258,bigg_id:"h_c",name:"H",label_x:4331.77734375,label_y:4286.0576171875,node_is_primary:!1},1576620:{node_type:"metabolite",x:2360,y:3220,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:2380,label_y:3220,node_is_primary:!1},1576621:{node_type:"metabolite",x:2060,y:3420,bigg_id:"co2_c",name:"CO2",label_x:1979.703125,label_y:3415.23974609375,node_is_primary:!1},1576622:{node_type:"metabolite",x:2080,y:3370,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:1994.9427490234375,label_y:3350.958740234375,node_is_primary:!1},1576623:{node_type:"metabolite",x:1257,y:1160,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:1257,label_y:1140,node_is_primary:!1},1576624:{node_type:"metabolite",x:1407,y:1160,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:1430,label_y:1140,node_is_primary:!1},1576625:{node_type:"metabolite",x:1357,y:1160,bigg_id:"h_c",name:"H",label_x:1357,label_y:1140,node_is_primary:!1},1576626:{node_type:"metabolite",x:1507,y:1265,bigg_id:"6pgl_c",name:"6-phospho-D-glucono-1-5-lactone",label_x:1507,label_y:1235,node_is_primary:!0},1576627:{node_type:"metabolite",x:1715,y:4845,bigg_id:"ac_e",name:"Acetate",label_x:1759.0985107421875,label_y:4848.173828125,node_is_primary:!0},1576628:{node_type:"metabolite",x:4201,y:3940,bigg_id:"h2o_c",name:"H2O",label_x:4175.82763671875,label_y:3972.89208984375,node_is_primary:!1},1576629:{node_type:"metabolite",x:4193,y:3762,bigg_id:"nh4_c",name:"Ammonium",label_x:4160.99267578125,label_y:3793.22314453125,node_is_primary:!1},1576630:{node_type:"metabolite",x:4275,y:1140,bigg_id:"h2o_c",name:"H2O",label_x:4295,label_y:1140,node_is_primary:!1},1576631:{node_type:"metabolite",x:4285,y:1450,bigg_id:"pi_c",name:"Phosphate",label_x:4305,label_y:1450,node_is_primary:!1},1576632:{node_type:"metabolite",x:4285,y:1380,bigg_id:"h_c",name:"H",label_x:4305,label_y:1380,node_is_primary:!1},1576633:{node_type:"metabolite",x:955,y:4255,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:935,label_y:4255,node_is_primary:!1},1576634:{node_type:"metabolite",x:955,y:4045,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:935,label_y:4045,node_is_primary:!1},1576635:{node_type:"metabolite",x:955,y:4095,bigg_id:"h_c",name:"H",label_x:935,label_y:4095,node_is_primary:!1},1576636:{node_type:"metabolite",x:2670,y:3310,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:2690,label_y:3320,node_is_primary:!1},1576637:{node_type:"metabolite",x:2680,y:3585,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:2710,label_y:3590,node_is_primary:!1},1576638:{node_type:"metabolite",x:2660,y:3510,bigg_id:"h_c",name:"H",label_x:2692,label_y:3510,node_is_primary:!1},1576639:{node_type:"metabolite",x:3257,y:4754,bigg_id:"h2o_e",name:"H2O",label_x:3287,label_y:4754,node_is_primary:!0},1576640:{node_type:"metabolite",x:3257,y:4434,bigg_id:"h2o_c",name:"H2O",label_x:3287,label_y:4434,node_is_primary:!0},1576641:{node_type:"metabolite",x:3621,y:4434,bigg_id:"co2_c",name:"CO2",label_x:3651,label_y:4434,node_is_primary:!0},1576642:{node_type:"metabolite",x:735,y:3855,bigg_id:"atp_c",name:"ATP",label_x:670.5706176757812,label_y:3840.71923828125,node_is_primary:!1},1576643:{node_type:"metabolite",x:735,y:3805,bigg_id:"h2o_c",name:"H2O",label_x:681.677978515625,label_y:3787.545654296875,node_is_primary:!1},1576644:{node_type:"metabolite",x:735,y:3475,bigg_id:"h_c",name:"H",label_x:672.1574096679688,label_y:3478.173583984375,node_is_primary:!1},1576645:{node_type:"metabolite",x:735,y:3525,bigg_id:"amp_c",name:"AMP",label_x:640.4221801757812,label_y:3545.6279296875,node_is_primary:!1},1576646:{node_type:"metabolite",x:735,y:3425,bigg_id:"pi_c",name:"Phosphate",label_x:684.8515014648438,label_y:3409.13232421875,node_is_primary:!1},1576647:{node_type:"metabolite",x:1055.066162109375,y:705,bigg_id:"glc__D_e",name:"D-Glucose",label_x:1085.066162109375,label_y:705,node_is_primary:!0},1576648:{node_type:"metabolite",x:2600,y:4760,bigg_id:"h_e",name:"H",label_x:2620,label_y:4760,node_is_primary:!1},1576649:{node_type:"metabolite",x:2500,y:4830,bigg_id:"etoh_e",name:"Ethanol",label_x:2530,label_y:4830,node_is_primary:!0},1576650:{node_type:"metabolite",x:2600,y:4400,bigg_id:"h_c",name:"H",label_x:2620,label_y:4400,node_is_primary:!1},1576651:{node_type:"metabolite",x:1815,y:4335,bigg_id:"atp_c",name:"ATP",label_x:1835,label_y:4335,node_is_primary:!1},1576652:{node_type:"metabolite",x:1715,y:4385,bigg_id:"ac_c",name:"Acetate",label_x:1745,label_y:4385,node_is_primary:!0},1576653:{node_type:"metabolite",x:1815,y:4225,bigg_id:"adp_c",name:"ADP",label_x:1835,label_y:4225,node_is_primary:!1},1576654:{node_type:"metabolite",x:4029,y:3932,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:3993.9423828125,label_y:3909.05029296875,node_is_primary:!1},1576655:{node_type:"metabolite",x:4029,y:3982,bigg_id:"h_c",name:"H",label_x:4002,label_y:3986,node_is_primary:!1},1576656:{node_type:"metabolite",x:4043,y:3759,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:3957.985595703125,label_y:3736.215576171875,node_is_primary:!1},1576657:{node_type:"metabolite",x:2840,y:650,bigg_id:"fum_e",name:"Fumarate",label_x:2879.817626953125,label_y:635.0911865234375,node_is_primary:!0},1576658:{node_type:"metabolite",x:2940,y:700,bigg_id:"h_e",name:"H",label_x:2962.214599609375,label_y:718.4132080078125,node_is_primary:!1},1576659:{node_type:"metabolite",x:2940,y:1010,bigg_id:"h_c",name:"H",label_x:2954.28076171875,label_y:1038.4132080078125,node_is_primary:!1},1576660:{node_type:"metabolite",x:1815,y:4775,bigg_id:"h_e",name:"H",label_x:1835,label_y:4775,node_is_primary:!1},1576661:{node_type:"metabolite",x:1819.76025390625,y:4452.45458984375,bigg_id:"h_c",name:"H",label_x:1839.76025390625,label_y:4452.45458984375,node_is_primary:!1},1576662:{node_type:"metabolite",x:957.694091796875,y:974.4060668945312,bigg_id:"pep_c",name:"Phosphoenolpyruvate",label_x:877.8765258789062,label_y:976.9517211914062,node_is_primary:!1},1576663:{node_type:"metabolite",x:1161.3470458984375,y:972.8192138671875,bigg_id:"pyr_c",name:"Pyruvate",label_x:1193.082275390625,label_y:986.47216796875,node_is_primary:!1},1576664:{node_type:"metabolite",x:4791.7197265625,y:2921.942138671875,bigg_id:"h_e",name:"H",label_x:4818.7197265625,label_y:2921.942138671875,node_is_primary:!1},1576665:{node_type:"metabolite",x:4461.380859375,y:2763.553955078125,bigg_id:"h_c",name:"H",label_x:4389.423828125,label_y:2763.9423828125,node_is_primary:!1},1576666:{node_type:"metabolite",x:1460,y:4843.322265625,bigg_id:"for_e",name:"Formate",label_x:1500,label_y:4843.322265625,node_is_primary:!0},1576667:{node_type:"metabolite",x:1587,y:1160,bigg_id:"h2o_c",name:"H2O",label_x:1587,label_y:1140,node_is_primary:!1},1576668:{node_type:"metabolite",x:1687,y:1160,bigg_id:"h_c",name:"H",label_x:1687,label_y:1140,node_is_primary:!1},1576669:{node_type:"metabolite",x:1145,y:2265,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:1165,label_y:2265,node_is_primary:!1},1576670:{node_type:"metabolite",x:1145,y:2315,bigg_id:"pi_c",name:"Phosphate",label_x:1165,label_y:2315,node_is_primary:!1},1576671:{node_type:"metabolite",x:1145,y:2515,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:1165,label_y:2515,node_is_primary:!1},1576672:{node_type:"metabolite",x:1145,y:2465,bigg_id:"h_c",name:"H",label_x:1169,label_y:2465,node_is_primary:!1},1576673:{node_type:"metabolite",x:4836,y:3087,bigg_id:"h_e",name:"H",label_x:4836,label_y:3115,node_is_primary:!1},1576674:{node_type:"metabolite",x:4456,y:3087,bigg_id:"h_c",name:"H",label_x:4456,label_y:3109,node_is_primary:!1},1576675:{node_type:"metabolite",x:4192,y:3558,bigg_id:"h2o_c",name:"H2O",label_x:4210,label_y:3530,node_is_primary:!1},1576676:{node_type:"metabolite",x:4142,y:3558,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:4142,label_y:3528,node_is_primary:!1},1576677:{node_type:"metabolite",x:3992,y:3558,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:3935.431640625,label_y:3532.22314453125,node_is_primary:!1},1576678:{node_type:"metabolite",x:3942,y:3558,bigg_id:"nh4_c",name:"Ammonium",label_x:3856.820068359375,label_y:3573.222900390625,node_is_primary:!1},1576679:{node_type:"metabolite",x:4042,y:3558,bigg_id:"h_c",name:"H",label_x:4050,label_y:3530,node_is_primary:!1},1576680:{node_type:"metabolite",x:4865,y:1150,bigg_id:"h_e",name:"H",label_x:4865,label_y:1180,node_is_primary:!1},1576681:{node_type:"metabolite",x:4495,y:1330,bigg_id:"pi_c",name:"Phosphate",label_x:4459.546875,label_y:1293.5970458984375,node_is_primary:!1},1576682:{node_type:"metabolite",x:4415,y:1150,bigg_id:"h_c",name:"H",label_x:4398.884765625,label_y:1187.7266845703125,node_is_primary:!1},1576683:{node_type:"metabolite",x:4482.7265625,y:1030,bigg_id:"h2o_c",name:"H2O",label_x:4482.7265625,label_y:1010,node_is_primary:!1},1576684:{node_type:"metabolite",x:2610,y:3860,bigg_id:"h2o_c",name:"H2O",label_x:2599.520751953125,label_y:3890.1484375,node_is_primary:!1},1576685:{node_type:"metabolite",x:2971,y:3986,bigg_id:"cit_c",name:"Citrate",label_x:2972.653076171875,label_y:3943.1826171875,node_is_primary:!0},1576686:{node_type:"metabolite",x:2806,y:4091,bigg_id:"coa_c",name:"Coenzyme-A",label_x:2786.826416015625,label_y:4132.21484375,node_is_primary:!1},1576687:{node_type:"metabolite",x:2897,y:4117,bigg_id:"h_c",name:"H",label_x:2899.041015625,label_y:4155.8671875,node_is_primary:!1},1576688:{node_type:"metabolite",x:345,y:4045,bigg_id:"h_e",name:"H",label_x:351.3470764160156,label_y:4072.933837890625,node_is_primary:!1},1576689:{node_type:"metabolite",x:675,y:4045,bigg_id:"h_c",name:"H",label_x:675,label_y:4077.694091796875,node_is_primary:!1},1576690:{node_type:"metabolite",x:2430,y:3370,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:2450,label_y:3370,node_is_primary:!1},1576691:{node_type:"metabolite",x:2260,y:3510,bigg_id:"co2_c",name:"CO2",label_x:2280,label_y:3510,node_is_primary:!1},1576692:{node_type:"metabolite",x:2200,y:3540,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:2220,label_y:3550,node_is_primary:!1},1576808:{node_type:"metabolite",x:4850,y:2570,bigg_id:"h_e",name:"H",label_x:4874.1728515625,label_y:2601.280517578125,node_is_primary:!1},1576809:{node_type:"metabolite",x:4449.00732421875,y:2646.77685546875,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:4356.72412109375,label_y:2646.95849609375,node_is_primary:!0},1576810:{node_type:"metabolite",x:2510,y:1010,bigg_id:"h_c",name:"H",label_x:2473.50439453125,label_y:1043.1734619140625,node_is_primary:!1},1576811:{node_type:"metabolite",x:1270,y:4440,bigg_id:"h_c",name:"H",label_x:1245.23974609375,label_y:4424.13232421875,node_is_primary:!1},1576812:{node_type:"metabolite",x:1890,y:3860,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:1868.892578125,label_y:3840.810302734375,node_is_primary:!1},1576813:{node_type:"metabolite",x:2392,y:3980,bigg_id:"h_c",name:"H",label_x:2406,label_y:3965,node_is_primary:!1},1576814:{node_type:"metabolite",x:3210,y:2730,bigg_id:"q8_c",name:"Ubiquinone-8",label_x:3228.082275390625,label_y:2736.34716796875,node_is_primary:!1},1576815:{node_type:"metabolite",x:2210,y:4837.65283203125,bigg_id:"acald_e",name:"Acetaldehyde",label_x:2240,label_y:4837.65283203125,node_is_primary:!0},1576816:{node_type:"metabolite",x:2610,y:650,bigg_id:"mal__L_e",name:"L-Malate",label_x:2640,label_y:630,node_is_primary:!0},1576817:{node_type:"metabolite",x:2210,y:3945,bigg_id:"acald_c",name:"Acetaldehyde",label_x:2210,label_y:3905,node_is_primary:!0},1576819:{node_type:"metabolite",x:565.6046142578125,y:1448.4132080078125,bigg_id:"pep_c",name:"Phosphoenolpyruvate",label_x:554.497314453125,label_y:1479.5206298828125,node_is_primary:!1},1576820:{node_type:"metabolite",x:4310,y:2570,bigg_id:"h_c",name:"H",label_x:4273.546875,label_y:2604.6689453125,node_is_primary:!1},1576821:{node_type:"metabolite",x:714.76025390625,y:1237.785400390625,bigg_id:"pyr_c",name:"Pyruvate",label_x:692.5455932617188,label_y:1207.785400390625,node_is_primary:!1},1576822:{node_type:"metabolite",x:2482,y:4065,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:2496,label_y:4051,node_is_primary:!1},1576824:{node_type:"metabolite",x:2333,y:3935,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:2347,label_y:3921,node_is_primary:!1},1576825:{node_type:"metabolite",x:2130,y:3860,bigg_id:"coa_c",name:"Coenzyme-A",label_x:2140,label_y:3840,node_is_primary:!1},1576826:{node_type:"metabolite",x:300,y:1360,bigg_id:"fru_e",name:"D-Fructose",label_x:284.1323547363281,label_y:1405.8675537109375,node_is_primary:!0},1576827:{node_type:"metabolite",x:4417.8271484375,y:2478.91357421875,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:4322.0859375,label_y:2462.79833984375,node_is_primary:!0},1576828:{node_type:"metabolite",x:2070,y:3860,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:2070,label_y:3840,node_is_primary:!1},1576829:{node_type:"metabolite",x:2501,y:4228,bigg_id:"etoh_c",name:"Ethanol",label_x:2522,label_y:4206,node_is_primary:!0},1576830:{node_type:"metabolite",x:3020,y:2740,bigg_id:"q8h2_c",name:"Ubiquinol-8",label_x:3041.5869140625,label_y:2740,node_is_primary:!1},1576831:{node_type:"metabolite",x:2510,y:700,bigg_id:"h_e",name:"H",label_x:2460.1826171875,label_y:722.5455932617188,node_is_primary:!1},1576832:{node_type:"metabolite",x:1950,y:3860,bigg_id:"h_c",name:"H",label_x:1950,label_y:3840,node_is_primary:!1},1576833:{node_type:"metabolite",x:1270,y:4770,bigg_id:"h_e",name:"H",label_x:1228.8927001953125,label_y:4750.95849609375,node_is_primary:!1},1576834:{node_type:"multimarker",x:1055,y:2665},1576835:{node_type:"multimarker",x:1055,y:2775},1576836:{node_type:"midmarker",x:1055,y:2725},1576837:{node_type:"midmarker",x:1957,y:1265},1576838:{node_type:"multimarker",x:1937,y:1265},1576839:{node_type:"multimarker",x:1977,y:1265},1576840:{node_type:"midmarker",x:4660,y:1660},1576841:{node_type:"midmarker",x:3510,y:820},1576842:{node_type:"multimarker",x:3510,y:800},1576843:{node_type:"multimarker",x:3510,y:870},1576844:{node_type:"multimarker",x:2727,y:3022},1576845:{node_type:"midmarker",x:2684,y:3076},1576846:{node_type:"midmarker",x:3606,y:3846},1576847:{node_type:"multimarker",x:3512,y:3923},1576848:{node_type:"multimarker",x:3663,y:3781},1576849:{node_type:"multimarker",x:1430,y:3945},1576850:{node_type:"midmarker",x:1495,y:3945},1576851:{node_type:"multimarker",x:1555,y:3945},1576852:{node_type:"midmarker",x:1414,y:3486},1576853:{node_type:"multimarker",x:1493,y:3519},1576854:{node_type:"multimarker",x:1348,y:3458},1576855:{node_type:"multimarker",x:1055,y:3265},1576856:{node_type:"midmarker",x:1055,y:3225},1576857:{node_type:"midmarker",x:1055,y:1395},1576858:{node_type:"midmarker",x:3989,y:4598},1576859:{node_type:"midmarker",x:835,y:1715},1576860:{node_type:"multimarker",x:835,y:1665},1576861:{node_type:"multimarker",x:835,y:1765},1576863:{node_type:"midmarker",x:5025,y:2880},1576864:{node_type:"multimarker",x:3417,y:3766},1576865:{node_type:"midmarker",x:3417,y:3857},1576866:{node_type:"midmarker",x:4145,y:1260},1576867:{node_type:"multimarker",x:4145,y:1200},1576868:{node_type:"midmarker",x:5020,y:4158},1576871:{node_type:"midmarker",x:3621,y:4914},1576872:{node_type:"midmarker",x:2178,y:1995},1576873:{node_type:"multimarker",x:2175,y:1955},1576874:{node_type:"multimarker",x:2178,y:2035},1576875:{node_type:"multimarker",x:1055,y:3655},1576876:{node_type:"midmarker",x:1055,y:3705},1576877:{node_type:"multimarker",x:1055,y:3745},1576878:{node_type:"midmarker",x:4645,y:3635},1576879:{node_type:"multimarker",x:4541,y:3635},1576880:{node_type:"multimarker",x:4779,y:3635},1576881:{node_type:"midmarker",x:1055,y:4925},1576884:{node_type:"midmarker",x:155,y:3945},1576885:{node_type:"midmarker",x:2045,y:1415},1576887:{node_type:"midmarker",x:4986,y:2230},1576888:{node_type:"midmarker",x:3631,y:3020},1576889:{node_type:"multimarker",x:3588,y:2976},1576890:{node_type:"multimarker",x:3666,y:3063},1576891:{node_type:"midmarker",x:1055,y:1735},1576892:{node_type:"multimarker",x:1055,y:1775},1576893:{node_type:"multimarker",x:1055,y:1690},1576895:{node_type:"midmarker",x:5015,y:3636},1576896:{node_type:"midmarker",x:1525,y:1735},1576897:{node_type:"multimarker",x:1695,y:1735},1576898:{node_type:"multimarker",x:1405,y:1735},1576899:{node_type:"multimarker",x:4364,y:3889},1576900:{node_type:"midmarker",x:4364,y:3869},1576901:{node_type:"multimarker",x:4364,y:3849},1576905:{node_type:"multimarker",x:3470,y:1270},1576906:{node_type:"multimarker",x:3570,y:1270},1576907:{node_type:"midmarker",x:3520,y:1270},1576908:{node_type:"multimarker",x:3780,y:3480},1576909:{node_type:"midmarker",x:3783,y:3402},1576910:{node_type:"multimarker",x:3776,y:3330},1576911:{node_type:"midmarker",x:1335,y:3995},1576912:{node_type:"multimarker",x:1255,y:3995},1576913:{node_type:"multimarker",x:1415,y:3995},1576914:{node_type:"midmarker",x:4970,y:1660},1576916:{node_type:"midmarker",x:1404,y:3526},1576917:{node_type:"multimarker",x:1485,y:3554},1576918:{node_type:"multimarker",x:1335,y:3503},1576919:{node_type:"multimarker",x:2880,y:4520},1576920:{node_type:"midmarker",x:2880,y:4580},1576921:{node_type:"multimarker",x:2880,y:4725},1576922:{node_type:"multimarker",x:4502,y:3228},1576923:{node_type:"multimarker",x:4792,y:3228},1576924:{node_type:"midmarker",x:4662,y:3228},1576925:{node_type:"multimarker",x:1055,y:2045},1576926:{node_type:"midmarker",x:1055,y:1995},1576927:{node_type:"midmarker",x:955,y:2195},1576928:{node_type:"midmarker",x:4660,y:1900},1576929:{node_type:"multimarker",x:4690,y:1900},1576930:{node_type:"multimarker",x:4630,y:1900},1576931:{node_type:"midmarker",x:2305,y:1425},1576932:{node_type:"multimarker",x:2843,y:3341},1576933:{node_type:"multimarker",x:2994,y:3445},1576934:{node_type:"midmarker",x:2911,y:3388},1576935:{node_type:"multimarker",x:1715,y:4065},1576936:{node_type:"multimarker",x:1715,y:4105},1576937:{node_type:"midmarker",x:1715,y:4085},1576938:{node_type:"multimarker",x:4415,y:4158},1576939:{node_type:"midmarker",x:4435,y:4158},1576940:{node_type:"multimarker",x:4455,y:4158},1576941:{node_type:"multimarker",x:2310,y:3330},1576942:{node_type:"midmarker",x:2250,y:3360},1576943:{node_type:"multimarker",x:2190,y:3390},1576944:{node_type:"multimarker",x:1327,y:1265},1576945:{node_type:"midmarker",x:1307,y:1265},1576946:{node_type:"multimarker",x:1287,y:1265},1576947:{node_type:"midmarker",x:1715,y:4935},1576949:{node_type:"multimarker",x:4247,y:3815},1576950:{node_type:"multimarker",x:4247,y:3877},1576951:{node_type:"midmarker",x:4247,y:3857},1576952:{node_type:"multimarker",x:4215,y:1200},1576953:{node_type:"midmarker",x:4215,y:1260},1576954:{node_type:"multimarker",x:4215,y:1350},1576955:{node_type:"multimarker",x:1055,y:4125},1576956:{node_type:"multimarker",x:1055,y:4225},1576957:{node_type:"midmarker",x:1055,y:4175},1576958:{node_type:"multimarker",x:2578,y:3456},1576959:{node_type:"midmarker",x:2577,y:3404},1576960:{node_type:"multimarker",x:2582,y:3341},1576961:{node_type:"midmarker",x:3257,y:4614},1576962:{node_type:"midmarker",x:3257,y:4924},1576964:{node_type:"multimarker",x:2175,y:1645},1576965:{node_type:"midmarker",x:2175,y:1695},1576966:{node_type:"multimarker",x:2175,y:1735},1576967:{node_type:"midmarker",x:3621,y:4604},1576969:{node_type:"midmarker",x:5032,y:3228},1576970:{node_type:"multimarker",x:835,y:3805},1576971:{node_type:"multimarker",x:835,y:3525},1576972:{node_type:"midmarker",x:835,y:3645},1576974:{node_type:"midmarker",x:1056.6529541015625,y:543.4132690429688},1576975:{node_type:"multimarker",x:2500,y:4430},1576976:{node_type:"midmarker",x:2500,y:4550},1576977:{node_type:"multimarker",x:2500,y:4730},1576978:{node_type:"midmarker",x:1055,y:2995},1576980:{node_type:"midmarker",x:2500,y:4937.93359375},1576981:{node_type:"multimarker",x:1715,y:4305},1576982:{node_type:"midmarker",x:1715,y:4275},1576983:{node_type:"multimarker",x:1715,y:4255},1576985:{node_type:"midmarker",x:3991,y:4918},1576986:{node_type:"multimarker",x:4116,y:3888},1576987:{node_type:"multimarker",x:4116,y:3848},1576988:{node_type:"midmarker",x:4116,y:3868},1576989:{node_type:"midmarker",x:2880,y:4925.107421875},1576991:{node_type:"multimarker",x:2840,y:730},1576992:{node_type:"multimarker",x:2840,y:980},1576993:{node_type:"midmarker",x:2840,y:840},1576994:{node_type:"multimarker",x:1715,y:4745},1576995:{node_type:"midmarker",x:1715,y:4585},1576996:{node_type:"multimarker",x:1715,y:4501.49560546875},1576997:{node_type:"midmarker",x:1056.5865478515625,y:1008.8675537109375},1576998:{node_type:"multimarker",x:1057,y:976.1735229492188},1576999:{node_type:"multimarker",x:1056.5867919921875,y:1041.710205078125},1577000:{node_type:"midmarker",x:4667,y:2846},1577001:{node_type:"multimarker",x:4770,y:2846},1577002:{node_type:"multimarker",x:4560,y:2846},1577003:{node_type:"midmarker",x:1637,y:1265},1577004:{node_type:"multimarker",x:1657,y:1265},1577005:{node_type:"multimarker",x:1617,y:1265},1577006:{node_type:"multimarker",x:1055,y:2345},1577007:{node_type:"multimarker",x:1055,y:2435},1577008:{node_type:"midmarker",x:1055,y:2395},1577009:{node_type:"midmarker",x:2840,y:470},1577011:{node_type:"midmarker",x:4666,y:3027},1577012:{node_type:"multimarker",x:4536,y:3027},1577013:{node_type:"multimarker",x:4796,y:3027},1577014:{node_type:"multimarker",x:4078,y:3632},1577015:{node_type:"midmarker",x:4098,y:3632},1577016:{node_type:"multimarker",x:4118,y:3632},1577017:{node_type:"multimarker",x:4705,y:1150},1577018:{node_type:"multimarker",x:4625,y:1150},1577019:{node_type:"midmarker",x:4665,y:1150},1577020:{node_type:"multimarker",x:2744,y:3837},1577021:{node_type:"multimarker",x:2840,y:3918},1577022:{node_type:"midmarker",x:2798,y:3886},1577023:{node_type:"multimarker",x:375,y:3945},1577024:{node_type:"multimarker",x:645,y:3945},1577025:{node_type:"midmarker",x:505,y:3945},1577026:{node_type:"midmarker",x:2260,y:3390},1577027:{node_type:"multimarker",x:2220,y:3410},1577028:{node_type:"multimarker",x:2310,y:3360},1577030:{node_type:"midmarker",x:1460,y:4925},1577031:{node_type:"multimarker",x:2040,y:3945},1577032:{node_type:"midmarker",x:2010,y:3945},1577033:{node_type:"multimarker",x:1980,y:3945},1577034:{node_type:"midmarker",x:2210,y:4570},1577035:{node_type:"midmarker",x:2211,y:4944},1577041:{node_type:"multimarker",x:2371,y:4100},1577042:{node_type:"midmarker",x:2356,y:4086},1577043:{node_type:"multimarker",x:2342,y:4071},1577044:{node_type:"multimarker",x:1360,y:4730},1577045:{node_type:"midmarker",x:1360,y:4600},1577046:{node_type:"multimarker",x:1360,y:4470},1577047:{node_type:"midmarker",x:1460,y:4432},1577048:{node_type:"multimarker",x:3080,y:2600},1577049:{node_type:"midmarker",x:3110,y:2600},1577050:{node_type:"multimarker",x:3140,y:2600},1577051:{node_type:"multimarker",x:576.050048828125,y:1361.5867919921875},1577052:{node_type:"midmarker",x:640,y:1361.586669921875},1577053:{node_type:"multimarker",x:704.5778198242188,y:1361.586669921875},1577054:{node_type:"midmarker",x:182,y:1360},1577056:{node_type:"multimarker",x:2610,y:736},1577057:{node_type:"midmarker",x:2610,y:756},1577058:{node_type:"multimarker",x:2610,y:980},1577059:{node_type:"midmarker",x:2610,y:470},1577061:{node_type:"multimarker",x:4630,y:2570},1577062:{node_type:"midmarker",x:4670,y:2570},1577063:{node_type:"multimarker",x:4710,y:2570},1577064:{node_type:"multimarker",x:3180,y:2817},1577065:{node_type:"midmarker",x:3129,y:2819},1577066:{node_type:"multimarker",x:3078,y:2826},1577067:{node_type:"multimarker",x:1055,y:4660.98193359375},1577068:{node_type:"midmarker",x:1055,y:4583.8583984375},1577069:{node_type:"multimarker",x:1053.4132080078125,y:4506.7353515625},1577071:{node_type:"metabolite",x:1095,y:4750.98193359375,bigg_id:"h_e",name:"H",label_x:1125,label_y:4760.98193359375,node_is_primary:!1},1577072:{node_type:"metabolite",x:1093.4132080078125,y:4416.7353515625,bigg_id:"h_c",name:"H",label_x:1123.4132080078125,label_y:4426.7353515625,node_is_primary:!1},1577073:{node_type:"metabolite",x:5527.4580078125,y:4574.02490234375,bigg_id:"h2o_c",name:"H2O",label_x:5539.50146484375,label_y:4562.89990234375,node_is_primary:!1},1577074:{node_type:"multimarker",x:5334.0517578125,y:4717.48193359375},1577075:{node_type:"midmarker",x:5334.0517578125,y:4737.48193359375},1577076:{node_type:"multimarker",x:5334.0517578125,y:4757.48193359375},1577077:{node_type:"metabolite",x:5503.33544921875,y:4924.5068359375,bigg_id:"adp_c",name:"ADP",label_x:5529.1103515625,label_y:4931.337890625,node_is_primary:!1},1577078:{node_type:"metabolite",x:5534.521484375,y:4651.92236328125,bigg_id:"glu__L_c",name:"L-Glutamate",label_x:5555.015625,label_y:4645.02197265625,node_is_primary:!1},1577079:{node_type:"metabolite",x:5512.26513671875,y:4517.58447265625,bigg_id:"g3p_c",name:"Glyceraldehyde-3-phosphate",label_x:5534.87109375,label_y:4508.57177734375,node_is_primary:!1},1577080:{node_type:"metabolite",x:5437.546875,y:4466.33544921875,bigg_id:"e4p_c",name:"D-Erythrose-4-phosphate",label_x:5442.19677734375,label_y:4450.9853515625,node_is_primary:!1},1577081:{node_type:"metabolite",x:5262.95361328125,y:4994.3544921875,bigg_id:"h_c",name:"H",label_x:5204.56640625,label_y:5025.4677734375,node_is_primary:!1},1577082:{node_type:"metabolite",x:5403.0185546875,y:4418.7158203125,bigg_id:"r5p_c",name:"alpha-D-Ribose-5-phosphate",label_x:5390.7685546875,label_y:4391.7470703125,node_is_primary:!1},1577083:{node_type:"metabolite",x:5183.9716796875,y:4488.05615234375,bigg_id:"atp_c",name:"ATP",label_x:5152.708984375,label_y:4461.08740234375,node_is_primary:!1},1577084:{node_type:"metabolite",x:5087.0712890625,y:4498.61865234375,bigg_id:"f6p_c",name:"D-Fructose-6-phosphate",label_x:5052.6396484375,label_y:4477.9873046875,node_is_primary:!1},1577085:{node_type:"metabolite",x:4988.05859375,y:4509.18115234375,bigg_id:"pyr_c",name:"Pyruvate",label_x:4962.07666015625,label_y:4488.5498046875,node_is_primary:!1},1577086:{node_type:"metabolite",x:4893.27099609375,y:4529.25048828125,bigg_id:"nad_c",name:"Nicotinamide-adenine-dinucleotide",label_x:4860.95166015625,label_y:4501.22509765625,node_is_primary:!1},1577087:{node_type:"metabolite",x:5208.85205078125,y:4931.947265625,bigg_id:"coa_c",name:"Coenzyme-A",label_x:5175.48828125,label_y:4975.3330078125,node_is_primary:!1},1577088:{node_type:"metabolite",x:4783.69580078125,y:4544.03759765625,bigg_id:"oaa_c",name:"Oxaloacetate",label_x:4770.38916015625,label_y:4522.349609375,node_is_primary:!1},1577089:{node_type:"metabolite",x:4700.52734375,y:4559.88134765625,bigg_id:"g6p_c",name:"D-Glucose-6-phosphate",label_x:4679.8271484375,label_y:4537.1376953125,node_is_primary:!1},1577090:{node_type:"metabolite",x:5134.0517578125,y:4897.1259765625,bigg_id:"nadh_c",name:"Nicotinamide-adenine-dinucleotide-reduced",label_x:5078.88623046875,label_y:4936.322265625,node_is_primary:!1},1577091:{node_type:"metabolite",x:5481.046875,y:4979.51025390625,bigg_id:"akg_c",name:"2-Oxoglutarate",label_x:5497.31591796875,label_y:5004.2978515625,node_is_primary:!1},1577092:{node_type:"metabolite",x:4601.51416015625,y:4576.78173828125,bigg_id:"accoa_c",name:"Acetyl-CoA",label_x:4556.52001953125,label_y:4549.81298828125,node_is_primary:!1},1577093:{node_type:"metabolite",x:4508.83935546875,y:4602.1318359375,bigg_id:"3pg_c",name:"3-Phospho-D-glycerate",label_x:4459.6201171875,label_y:4576.21923828125,node_is_primary:!1},1577094:{node_type:"metabolite",x:4414.0517578125,y:4629.59423828125,bigg_id:"pep_c",name:"Phosphoenolpyruvate",label_x:4379.6201171875,label_y:4607.90673828125,node_is_primary:!1},1577095:{node_type:"metabolite",x:4332.9951171875,y:4650.7197265625,bigg_id:"gln__L_c",name:"L-Glutamine",label_x:4253.14453125,label_y:4627.97607421875,node_is_primary:!1},1577096:{node_type:"metabolite",x:5028.71435546875,y:4864.818359375,bigg_id:"nadp_c",name:"Nicotinamide-adenine-dinucleotide-phosphate",label_x:4968.08447265625,label_y:4902.36181640625,node_is_primary:!1},1577097:{node_type:"metabolite",x:4267.78271484375,y:4682.4072265625,bigg_id:"nadph_c",name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",label_x:4203.775390625,label_y:4664.94482421875,node_is_primary:!1},1577098:{node_type:"metabolite",x:4933.43505859375,y:4831.37548828125,bigg_id:"pi_c",name:"Phosphate",label_x:4884.8583984375,label_y:4859.1142578125,node_is_primary:!1},1577099:{node_type:"multimarker",x:3055.6239109998846,y:4023.6457547875243},1577100:{node_type:"midmarker",x:3074.275683525833,y:4030.8645761345497},1577101:{node_type:"multimarker",x:3092.9274560517806,y:4038.0833974815746},1577102:{node_type:"metabolite",x:3188.1170476587818,y:3976.144484067998,bigg_id:"h2o_c",name:"H2O",label_x:3189.1795476587818,label_y:3930.712355161748,node_is_primary:!1},1577103:{node_type:"metabolite",x:3197.4642088485407,y:4053.2845721909744,bigg_id:"acon_C_c",name:"cis-Aconitate",label_x:3156.1556150985407,label_y:4098.026271409724,node_is_primary:!0},1577104:{node_type:"multimarker",x:3294.488060371458,y:4035.7165277261324},1577105:{node_type:"midmarker",x:3312.895717745038,y:4027.896160086635},1577106:{node_type:"multimarker",x:3331.3033751186185,y:4020.0757924471372}},text_labels:{},canvas:{x:7.857062530517567,y:314.36893920898433,width:5894.515691375733,height:4860.457037353515}}]},function(e,t){e.exports={reactions:[{subsystem:"Pyruvate Metabolism",name:"acetaldehyde dehydrogenase (acetylating)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{accoa_c:1,acald_c:-1,coa_c:-1,h_c:1,nad_c:-1,nadh_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ACALD",gene_reaction_rule:"(b0351 or b1241)"},{subsystem:"Transport, Extracellular",name:"acetaldehyde reversible transport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{acald_c:1,acald_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"ACALDt",gene_reaction_rule:"s0001"},{subsystem:"Pyruvate Metabolism",name:"acetate kinase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{ac_c:-1,actp_c:1,adp_c:1,atp_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"ACKr",gene_reaction_rule:"(b3115 or b2296 or b1849)"},{subsystem:"Citric Acid Cycle",name:"aconitase (half-reaction A, Citrate hydro-lyase)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h2o_c:1,acon_C_c:1,cit_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"ACONTa",gene_reaction_rule:"(b0118 or b1276)"},{subsystem:"Citric Acid Cycle",name:"aconitase (half-reaction B, Isocitrate hydro-lyase)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h2o_c:-1,icit_c:1,acon_C_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"ACONTb",gene_reaction_rule:"(b0118 or b1276)"},{subsystem:"Transport, Extracellular",name:"acetate reversible transport via proton symport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{ac_c:1,h_e:-1,ac_e:-1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ACt2r",gene_reaction_rule:""},{subsystem:"Oxidative Phosphorylation",name:"adenylate kinase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{amp_c:-1,atp_c:-1,adp_c:2},objective_coefficient:0,variable_kind:"continuous",id:"ADK1",gene_reaction_rule:"b0474"},{subsystem:"Citric Acid Cycle",name:"2-Oxoglutarate dehydrogenase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{akg_c:-1,nadh_c:1,succoa_c:1,coa_c:-1,nad_c:-1,co2_c:1},objective_coefficient:0,variable_kind:"continuous",id:"AKGDH",gene_reaction_rule:"( b0116  and  b0726  and  b0727 )"},{subsystem:"Transport, Extracellular",name:"2-oxoglutarate reversible transport via symport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{akg_c:1,h_e:-1,h_c:1,akg_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"AKGt2r",gene_reaction_rule:"b2587"},{subsystem:"Pyruvate Metabolism",name:"alcohol dehydrogenase (ethanol)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{acald_c:1,nadh_c:1,nad_c:-1,etoh_c:-1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ALCD2x",gene_reaction_rule:"(b0356 or b1478 or b1241)"},{subsystem:"Oxidative Phosphorylation",name:"ATP maintenance requirement",upper_bound:1e3,lower_bound:8.39,notes:{},metabolites:{h2o_c:-1,pi_c:1,atp_c:-1,adp_c:1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ATPM",gene_reaction_rule:""},{subsystem:"Oxidative Phosphorylation",name:"ATP synthase (four protons for one ATP)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h2o_c:1,atp_c:1,h_e:-4,h_c:3,adp_c:-1,pi_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"ATPS4r",gene_reaction_rule:"(((b3736 and b3737 and b3738) and (b3731 and b3732 and b3733 and b3734 and b3735)) or ((b3736 and b3737 and b3738) and (b3731 and b3732 and b3733 and b3734 and b3735) and b3739))"},{subsystem:"",name:"Biomass Objective Function with GAM",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-59.81,adp_c:59.81,glu__L_c:-4.9414,g3p_c:-.129,e4p_c:-.361,h_c:59.81,r5p_c:-.8977,atp_c:-59.81,f6p_c:-.0709,pyr_c:-2.8328,nad_c:-3.547,coa_c:3.7478,oaa_c:-1.7867,g6p_c:-.205,nadh_c:3.547,akg_c:4.1182,accoa_c:-3.7478,"3pg_c":-1.496,pep_c:-.5191,gln__L_c:-.2557,nadp_c:13.0279,nadph_c:-13.0279,pi_c:59.81},objective_coefficient:1,variable_kind:"continuous",id:"Biomass_Ecoli_core_w_GAM",gene_reaction_rule:""},{subsystem:"Transport, Extracellular",name:"CO2 transporter via diffusion",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{co2_c:1,co2_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"CO2t",gene_reaction_rule:"s0001"},{subsystem:"Citric Acid Cycle",name:"citrate synthase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,accoa_c:-1,cit_c:1,coa_c:1,h_c:1,oaa_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"CS",gene_reaction_rule:"b0720"},{subsystem:"Oxidative Phosphorylation",name:"cytochrome oxidase bd (ubiquinol-8: 2 protons)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{o2_c:-.5,h2o_c:1,q8h2_c:-1,h_e:2,h_c:-2,q8_c:1},objective_coefficient:0,variable_kind:"continuous",id:"CYTBD",gene_reaction_rule:"((b0978 and b0979) or (b0733 and b0734))"},{subsystem:"Transport, Extracellular",name:"D-lactate transport via proton symport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{lac__D_e:-1,h_e:-1,lac__D_c:1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"D_LACt2",gene_reaction_rule:"( b2975  or  b3603 )"},{subsystem:"Glycolysis/Gluconeogenesis",name:"enolase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{pep_c:1,h2o_c:1,"2pg_c":-1},objective_coefficient:0,variable_kind:"continuous",id:"ENO",gene_reaction_rule:"b2779"},{subsystem:"Transport, Extracellular",name:"ethanol reversible transport via proton symport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{etoh_e:-1,h_e:-1,h_c:1,etoh_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ETOHt2r",gene_reaction_rule:""},{subsystem:"Exchange",name:"Acetate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{ac_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_ac_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Acetaldehyde exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{acald_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_acald_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"2-Oxoglutarate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{akg_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_akg_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"CO2 exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{co2_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_co2_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Ethanol exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{etoh_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_etoh_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Formate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{for_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_for_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"D-Fructose exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{fru_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_fru_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Fumarate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{fum_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_fum_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"D-Glucose exchange",upper_bound:1e3,lower_bound:-10,notes:{},metabolites:{glc__D_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_glc_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"L-Glutamine exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{gln__L_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_gln__L_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"L-Glutamate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{glu__L_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_glu__L_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"H+ exchange",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_h_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"H2O exchange",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h2o_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_h2o_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"D-Lactate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{lac__D_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_lac__D_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"L-Malate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{mal__L_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_mal__L_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Ammonium exchange",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{nh4_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_nh4_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"O2 exchange",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{o2_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_o2_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Phosphate exchange",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{pi_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_pi_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Pyruvate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pyr_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_pyr_e",gene_reaction_rule:""},{subsystem:"Exchange",name:"Succinate exchange",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{succ_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"EX_succ_e",gene_reaction_rule:""},{subsystem:"Glycolysis/Gluconeogenesis",name:"fructose-bisphosphate aldolase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{dhap_c:1,fdp_c:-1,g3p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"FBA",gene_reaction_rule:"(b2097 or b1773 or b2925)"},{subsystem:"Glycolysis/Gluconeogenesis",name:"fructose-bisphosphatase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,pi_c:1,fdp_c:-1,f6p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"FBP",gene_reaction_rule:"(b3925 or b4232)"},{subsystem:"Transport, Extracellular",name:"formate transport via proton symport (uptake only)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{for_e:-1,h_e:-1,h_c:1,for_c:1},objective_coefficient:0,variable_kind:"continuous",id:"FORt2",gene_reaction_rule:"(b0904 or b2492)"},{subsystem:"Transport, Extracellular",name:"formate transport via diffusion",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{for_e:1,for_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"FORti",gene_reaction_rule:"(b0904 or b2492)"},{subsystem:"Oxidative Phosphorylation",name:"fumarate reductase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{q8h2_c:-1,succ_c:1,fum_c:-1,q8_c:1},objective_coefficient:0,variable_kind:"continuous",id:"FRD7",gene_reaction_rule:"(b4151 and b4152 and b4153 and b4154)"},{subsystem:"Transport, Extracellular",name:"Fructose transport via PEP:Pyr PTS (f6p generating)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pep_c:-1,fru_e:-1,pyr_c:1,f6p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"FRUpts2",gene_reaction_rule:"(b1817 and b1818 and b1819 and b2415 and b2416)"},{subsystem:"Citric Acid Cycle",name:"fumarase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h2o_c:-1,fum_c:-1,mal__L_c:1},objective_coefficient:0,variable_kind:"continuous",id:"FUM",gene_reaction_rule:"( b1612  or  b4122  or  b1611 )"},{subsystem:"Transport, Extracellular",name:"Fumarate transport via proton symport (2 H)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{fum_c:1,h_e:-2,fum_e:-1,h_c:2},objective_coefficient:0,variable_kind:"continuous",id:"FUMt2_2",gene_reaction_rule:"b3528"},{subsystem:"Pentose Phosphate Pathway",name:"glucose 6-phosphate dehydrogenase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{"6pgl_c":1,g6p_c:-1,nadp_c:-1,nadph_c:1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"G6PDH2r",gene_reaction_rule:"b1852"},{subsystem:"Glycolysis/Gluconeogenesis",name:"glyceraldehyde-3-phosphate dehydrogenase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{nadh_c:1,nad_c:-1,g3p_c:-1,h_c:1,"13dpg_c":1,pi_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"GAPD",gene_reaction_rule:"b1779"},{subsystem:"Transport, Extracellular",name:"D-glucose transport via PEP:Pyr PTS",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pep_c:-1,pyr_c:1,g6p_c:1,glc__D_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"GLCpts",gene_reaction_rule:"((b2417 and b1101 and b2415 and b2416) or (b1817 and b1818 and b1819 and b2415 and b2416) or (b2417 and b1621 and b2415 and b2416))"},{subsystem:"Glutamate Metabolism",name:"glutamine synthetase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{atp_c:-1,glu__L_c:-1,h_c:1,adp_c:1,pi_c:1,nh4_c:-1,gln__L_c:1},objective_coefficient:0,variable_kind:"continuous",id:"GLNS",gene_reaction_rule:"(b3870 or b1297)"},{subsystem:"Transport, Extracellular",name:"L-glutamine transport via ABC system",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,atp_c:-1,h_c:1,adp_c:1,gln__L_e:-1,pi_c:1,gln__L_c:1},objective_coefficient:0,variable_kind:"continuous",id:"GLNabc",gene_reaction_rule:"(b0811 and b0810 and b0809)"},{subsystem:"Glutamate Metabolism",name:"glutamate dehydrogenase (NADP)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{akg_c:1,h2o_c:-1,nadp_c:-1,nadph_c:1,glu__L_c:-1,h_c:1,nh4_c:1},objective_coefficient:0,variable_kind:"continuous",id:"GLUDy",gene_reaction_rule:"b1761"},{subsystem:"Glutamate Metabolism",name:"glutaminase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,glu__L_c:1,nh4_c:1,gln__L_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"GLUN",gene_reaction_rule:"(b1812 or b0485 or b1524)"},{subsystem:"Glutamate Metabolism",name:"glutamate synthase (NADPH)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{akg_c:-1,nadp_c:1,nadph_c:-1,glu__L_c:2,h_c:-1,gln__L_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"GLUSy",gene_reaction_rule:"(b3212 and b3213)"},{subsystem:"Transport, Extracellular",name:"L-glutamate transport via proton symport, reversible (periplasm)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{glu__L_c:1,h_e:-1,glu__L_e:-1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"GLUt2r",gene_reaction_rule:"b4077"},{subsystem:"Pentose Phosphate Pathway",name:"phosphogluconate dehydrogenase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{"6pgc_c":-1,co2_c:1,nadph_c:1,nadp_c:-1,ru5p__D_c:1},objective_coefficient:0,variable_kind:"continuous",id:"GND",gene_reaction_rule:"b2029"},{subsystem:"Transport, Extracellular",name:"H2O transport via diffusion",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{h2o_c:1,h2o_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"H2Ot",gene_reaction_rule:"(b0875 or s0001)"},{subsystem:"Citric Acid Cycle",name:"isocitrate dehydrogenase (NADP)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{akg_c:1,icit_c:-1,co2_c:1,nadp_c:-1,nadph_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ICDHyr",gene_reaction_rule:"b1136"},{subsystem:"Anaplerotic reactions",name:"Isocitrate lyase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{succ_c:1,icit_c:-1,glx_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ICL",gene_reaction_rule:"b4015"},{subsystem:"Pyruvate Metabolism",name:"D lactate dehydrogenase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{pyr_c:1,nadh_c:1,lac__D_c:-1,h_c:1,nad_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"LDH_D",gene_reaction_rule:"(b2133 or b1380)"},{subsystem:"Anaplerotic reactions",name:"malate synthase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,mal__L_c:1,glx_c:-1,h_c:1,accoa_c:-1,coa_c:1},objective_coefficient:0,variable_kind:"continuous",id:"MALS",gene_reaction_rule:"( b4014  or  b2976 )"},{subsystem:"Transport, Extracellular",name:"Malate transport via proton symport (2 H)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{mal__L_c:1,h_e:-2,mal__L_e:-1,h_c:2},objective_coefficient:0,variable_kind:"continuous",id:"MALt2_2",gene_reaction_rule:"b3528"},{subsystem:"Citric Acid Cycle",name:"malate dehydrogenase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{mal__L_c:-1,nadh_c:1,nad_c:-1,oaa_c:1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"MDH",gene_reaction_rule:"b3236"},{subsystem:"Anaplerotic reactions",name:"malic enzyme (NAD)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{nad_c:-1,mal__L_c:-1,co2_c:1,pyr_c:1,nadh_c:1},objective_coefficient:0,variable_kind:"continuous",id:"ME1",gene_reaction_rule:"b1479"},{subsystem:"Anaplerotic reactions",name:"malic enzyme (NADP)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pyr_c:1,mal__L_c:-1,co2_c:1,nadph_c:1,nadp_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"ME2",gene_reaction_rule:"b2463"},{subsystem:"Oxidative Phosphorylation",name:"NADH dehydrogenase (ubiquinone-8 & 3 protons)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{q8h2_c:1,h_e:3,h_c:-4,nad_c:1,nadh_c:-1,q8_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"NADH16",gene_reaction_rule:"(b2276 and b2277 and b2278 and b2279 and b2280 and b2281 and b2282 and b2283 and b2284 and b2285 and b2286 and b2287 and b2288)"},{subsystem:"Oxidative Phosphorylation",name:"NAD transhydrogenase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{nadh_c:1,nadph_c:-1,nadp_c:1,nad_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"NADTRHD",gene_reaction_rule:"(b3962 or (b1602 and b1603))"},{subsystem:"Inorganic Ion Transport and Metabolism",name:"ammonia reversible transport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{nh4_e:-1,nh4_c:1},objective_coefficient:0,variable_kind:"continuous",id:"NH4t",gene_reaction_rule:"(s0001 or b0451)"},{subsystem:"Transport, Extracellular",name:"o2 transport via diffusion",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{o2_c:1,o2_e:-1},objective_coefficient:0,variable_kind:"continuous",id:"O2t",gene_reaction_rule:"s0001"},{subsystem:"Glycolysis/Gluconeogenesis",name:"pyruvate dehydrogenase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{nadh_c:1,accoa_c:1,pyr_c:-1,coa_c:-1,nad_c:-1,co2_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PDH",gene_reaction_rule:"( b0114  and  b0115  and  b0116 )"},{subsystem:"Glycolysis/Gluconeogenesis",name:"phosphofructokinase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h_c:1,atp_c:-1,fdp_c:1,adp_c:1,f6p_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"PFK",gene_reaction_rule:"( b3916  or  b1723 )"},{subsystem:"Pyruvate Metabolism",name:"pyruvate formate lyase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pyr_c:-1,coa_c:-1,accoa_c:1,for_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PFL",gene_reaction_rule:"(((b0902 and b0903) and b2579) or (b0902 and b0903) or (b0902 and b3114) or (b3951 and b3952))"},{subsystem:"Glycolysis/Gluconeogenesis",name:"glucose-6-phosphate isomerase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{g6p_c:-1,f6p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PGI",gene_reaction_rule:"b4025"},{subsystem:"Glycolysis/Gluconeogenesis",name:"phosphoglycerate kinase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{atp_c:-1,"13dpg_c":1,adp_c:1,"3pg_c":-1},objective_coefficient:0,variable_kind:"continuous",id:"PGK",gene_reaction_rule:"b2926"},{subsystem:"Pentose Phosphate Pathway",name:"6-phosphogluconolactonase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{"6pgc_c":1,h2o_c:-1,"6pgl_c":-1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PGL",gene_reaction_rule:"b0767"},{subsystem:"Glycolysis/Gluconeogenesis",name:"phosphoglycerate mutase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{"2pg_c":-1,"3pg_c":1},objective_coefficient:0,variable_kind:"continuous",id:"PGM",gene_reaction_rule:"(b3612 or b4395 or b0755)"},{subsystem:"Inorganic Ion Transport and Metabolism",name:"phosphate reversible transport via proton symport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{pi_e:-1,h_e:-1,pi_c:1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PIt2r",gene_reaction_rule:"(b2987 or b3493)"},{subsystem:"Anaplerotic reactions",name:"phosphoenolpyruvate carboxylase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,co2_c:-1,pep_c:-1,h_c:1,oaa_c:1,pi_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PPC",gene_reaction_rule:"b3956"},{subsystem:"Anaplerotic reactions",name:"phosphoenolpyruvate carboxykinase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pep_c:1,co2_c:1,adp_c:1,oaa_c:-1,atp_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"PPCK",gene_reaction_rule:"b3403"},{subsystem:"Glycolysis/Gluconeogenesis",name:"phosphoenolpyruvate synthase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{h2o_c:-1,atp_c:-1,pyr_c:-1,pep_c:1,amp_c:1,pi_c:1,h_c:2},objective_coefficient:0,variable_kind:"continuous",id:"PPS",gene_reaction_rule:"b1702"},{subsystem:"Pyruvate Metabolism",name:"phosphotransacetylase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{actp_c:1,pi_c:-1,coa_c:1,accoa_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"PTAr",gene_reaction_rule:"(b2297 or b2458)"},{subsystem:"Glycolysis/Gluconeogenesis",name:"pyruvate kinase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{pep_c:-1,pyr_c:1,h_c:-1,adp_c:-1,atp_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PYK",gene_reaction_rule:"(b1854 or b1676)"},{subsystem:"Transport, Extracellular",name:"pyruvate reversible transport via proton symport",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{pyr_c:1,h_e:-1,pyr_e:-1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"PYRt2r",gene_reaction_rule:""},{subsystem:"Pentose Phosphate Pathway",name:"ribulose 5-phosphate 3-epimerase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{xu5p__D_c:1,ru5p__D_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"RPE",gene_reaction_rule:"(b3386 or b4301)"},{subsystem:"Pentose Phosphate Pathway",name:"ribose-5-phosphate isomerase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{r5p_c:-1,ru5p__D_c:1},objective_coefficient:0,variable_kind:"continuous",id:"RPI",gene_reaction_rule:"( b2914  or  b4090 )"},{subsystem:"Transport, Extracellular",name:"succinate transport via proton symport (2 H)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{succ_c:1,h_e:-2,succ_e:-1,h_c:2},objective_coefficient:0,variable_kind:"continuous",id:"SUCCt2_2",gene_reaction_rule:"b3528"},{subsystem:"Transport, Extracellular",name:"succinate transport out via proton antiport",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{succ_c:-1,h_e:-1,succ_e:1,h_c:1},objective_coefficient:0,variable_kind:"continuous",id:"SUCCt3",gene_reaction_rule:""},{subsystem:"Oxidative Phosphorylation",name:"succinate dehydrogenase (irreversible)",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{q8h2_c:1,succ_c:-1,fum_c:1,q8_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"SUCDi",gene_reaction_rule:"(b0721 and b0722 and b0723 and b0724)"},{subsystem:"Citric Acid Cycle",name:"succinyl-CoA synthetase (ADP-forming)",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{atp_c:-1,succoa_c:1,succ_c:-1,coa_c:-1,adp_c:1,pi_c:1},objective_coefficient:0,variable_kind:"continuous",id:"SUCOAS",gene_reaction_rule:"( b0728  and  b0729 )"},{subsystem:"Pentose Phosphate Pathway",name:"transaldolase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{e4p_c:1,g3p_c:-1,s7p_c:-1,f6p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"TALA",gene_reaction_rule:"(b2464 or b0008)"},{subsystem:"Oxidative Phosphorylation",name:"NAD(P) transhydrogenase",upper_bound:1e3,lower_bound:0,notes:{},metabolites:{nadp_c:-1,nadph_c:1,h_e:-2,h_c:2,nad_c:1,nadh_c:-1},objective_coefficient:0,variable_kind:"continuous",id:"THD2",gene_reaction_rule:"( b1602  and  b1603 )"},{subsystem:"Pentose Phosphate Pathway",name:"transketolase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{r5p_c:-1,xu5p__D_c:-1,g3p_c:1,s7p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"TKT1",gene_reaction_rule:"( b2935  or  b2465 )"},{subsystem:"Pentose Phosphate Pathway",name:"transketolase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{e4p_c:-1,xu5p__D_c:-1,g3p_c:1,f6p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"TKT2",gene_reaction_rule:"( b2935  or  b2465 )"},{subsystem:"Glycolysis/Gluconeogenesis",name:"triose-phosphate isomerase",upper_bound:1e3,lower_bound:-1e3,notes:{},metabolites:{dhap_c:-1,g3p_c:1},objective_coefficient:0,variable_kind:"continuous",id:"TPI",gene_reaction_rule:"b3919"}],description:"Ecoli_core_model",notes:{},genes:[{name:"b1241",id:"b1241"},{name:"b0351",id:"b0351"},{name:"s0001",id:"s0001"},{name:"b3115",id:"b3115"},{name:"b2296",id:"b2296"},{name:"b1849",id:"b1849"},{name:"b1276",id:"b1276"},{name:"b0118",id:"b0118"},{name:"b0474",id:"b0474"},{name:"b0726",id:"b0726"},{name:"b0116",id:"b0116"},{name:"b0727",id:"b0727"},{name:"b2587",id:"b2587"},{name:"b0356",id:"b0356"},{name:"b1478",id:"b1478"},{name:"b3739",id:"b3739"},{name:"b3731",id:"b3731"},{name:"b3736",id:"b3736"},{name:"b3737",id:"b3737"},{name:"b3738",id:"b3738"},{name:"b3735",id:"b3735"},{name:"b3732",id:"b3732"},{name:"b3733",id:"b3733"},{name:"b3734",id:"b3734"},{name:"b0720",id:"b0720"},{name:"b0733",id:"b0733"},{name:"b0978",id:"b0978"},{name:"b0734",id:"b0734"},{name:"b0979",id:"b0979"},{name:"b2975",id:"b2975"},{name:"b3603",id:"b3603"},{name:"b2779",id:"b2779"},{name:"b2925",id:"b2925"},{name:"b2097",id:"b2097"},{name:"b1773",id:"b1773"},{name:"b4232",id:"b4232"},{name:"b3925",id:"b3925"},{name:"b2492",id:"b2492"},{name:"b0904",id:"b0904"},{name:"b4151",id:"b4151"},{name:"b4152",id:"b4152"},{name:"b4154",id:"b4154"},{name:"b4153",id:"b4153"},{name:"b2416",id:"b2416"},{name:"b1819",id:"b1819"},{name:"b1817",id:"b1817"},{name:"b1818",id:"b1818"},{name:"b2415",id:"b2415"},{name:"b4122",id:"b4122"},{name:"b1611",id:"b1611"},{name:"b1612",id:"b1612"},{name:"b3528",id:"b3528"},{name:"b1852",id:"b1852"},{name:"b1779",id:"b1779"},{name:"b1621",id:"b1621"},{name:"b1101",id:"b1101"},{name:"b2417",id:"b2417"},{name:"b1297",id:"b1297"},{name:"b3870",id:"b3870"},{name:"b0811",id:"b0811"},{name:"b0810",id:"b0810"},{name:"b0809",id:"b0809"},{name:"b1761",id:"b1761"},{name:"b0485",id:"b0485"},{name:"b1812",id:"b1812"},{name:"b1524",id:"b1524"},{name:"b3213",id:"b3213"},{name:"b3212",id:"b3212"},{name:"b4077",id:"b4077"},{name:"b2029",id:"b2029"},{name:"b0875",id:"b0875"},{name:"b1136",id:"b1136"},{name:"b4015",id:"b4015"},{name:"b2133",id:"b2133"},{name:"b1380",id:"b1380"},{name:"b4014",id:"b4014"},{name:"b2976",id:"b2976"},{name:"b3236",id:"b3236"},{name:"b1479",id:"b1479"},{name:"b2463",id:"b2463"},{name:"b2280",id:"b2280"},{name:"b2288",id:"b2288"},{name:"b2282",id:"b2282"},{name:"b2276",id:"b2276"},{name:"b2278",id:"b2278"},{name:"b2286",id:"b2286"},{name:"b2277",id:"b2277"},{name:"b2279",id:"b2279"},{name:"b2285",id:"b2285"},{name:"b2281",id:"b2281"},{name:"b2284",id:"b2284"},{name:"b2283",id:"b2283"},{name:"b2287",id:"b2287"},{name:"b3962",id:"b3962"},{name:"b1603",id:"b1603"},{name:"b1602",id:"b1602"},{name:"b0451",id:"b0451"},{name:"b0114",id:"b0114"},{name:"b0115",id:"b0115"},{name:"b3916",id:"b3916"},{name:"b1723",id:"b1723"},{name:"b3951",id:"b3951"},{name:"b2579",id:"b2579"},{name:"b3952",id:"b3952"},{name:"b0903",id:"b0903"},{name:"b0902",id:"b0902"},{name:"b3114",id:"b3114"},{name:"b4025",id:"b4025"},{name:"b2926",id:"b2926"},{name:"b0767",id:"b0767"},{name:"b4395",id:"b4395"},{name:"b3612",id:"b3612"},{name:"b0755",id:"b0755"},{name:"b3493",id:"b3493"},{name:"b2987",id:"b2987"},{name:"b3956",id:"b3956"},{name:"b3403",id:"b3403"},{name:"b1702",id:"b1702"},{name:"b2458",id:"b2458"},{name:"b2297",id:"b2297"},{name:"b1676",id:"b1676"},{name:"b1854",id:"b1854"},{name:"b4301",id:"b4301"},{name:"b3386",id:"b3386"},{name:"b2914",id:"b2914"},{name:"b4090",id:"b4090"},{name:"b0722",id:"b0722"},{name:"b0721",id:"b0721"},{name:"b0724",id:"b0724"},{name:"b0723",id:"b0723"},{name:"b0728",id:"b0728"},{name:"b0729",id:"b0729"},{name:"b2464",id:"b2464"},{name:"b0008",id:"b0008"},{name:"b2935",id:"b2935"},{name:"b2465",id:"b2465"},{name:"b3919",id:"b3919"}],metabolites:[{name:"H",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"H",compartment:"c",id:"h_c"},{name:"Nicotinamide-adenine-dinucleotide",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C21H26N7O14P2",compartment:"c",id:"nad_c"},{name:"Coenzyme-A",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C21H32N7O16P3S",compartment:"c",id:"coa_c"},{name:"Acetaldehyde",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H4O",compartment:"c",id:"acald_c"},{name:"Nicotinamide-adenine-dinucleotide-reduced",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C21H27N7O14P2",compartment:"c",id:"nadh_c"},{name:"Acetyl-CoA",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C23H34N7O17P3S",compartment:"c",id:"accoa_c"},{name:"Acetaldehyde",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H4O",compartment:"e",id:"acald_e"},{name:"Acetyl-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H3O5P",compartment:"c",id:"actp_c"},{name:"ADP",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C10H12N5O10P2",compartment:"c",id:"adp_c"},{name:"Acetate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H3O2",compartment:"c",id:"ac_c"},{name:"ATP",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C10H12N5O13P3",compartment:"c",id:"atp_c"},{name:"Citrate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H5O7",compartment:"c",id:"cit_c"},{name:"cis-Aconitate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H3O6",compartment:"c",id:"acon_C_c"},{name:"H2O",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"H2O",compartment:"c",id:"h2o_c"},{name:"Isocitrate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H5O7",compartment:"c",id:"icit_c"},{name:"H",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"H",compartment:"e",id:"h_e"},{name:"Acetate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H3O2",compartment:"e",id:"ac_e"},{name:"AMP",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C10H12N5O7P",compartment:"c",id:"amp_c"},{name:"2-Oxoglutarate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H4O5",compartment:"c",id:"akg_c"},{name:"CO2",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"CO2",compartment:"c",id:"co2_c"},{name:"Succinyl-CoA",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C25H35N7O19P3S",compartment:"c",id:"succoa_c"},{name:"2-Oxoglutarate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H4O5",compartment:"e",id:"akg_e"},{name:"Ethanol",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H6O",compartment:"c",id:"etoh_c"},{name:"Phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"HO4P",compartment:"c",id:"pi_c"},{name:"D-Fructose-6-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H11O9P",compartment:"c",id:"f6p_c"},{name:"Nicotinamide-adenine-dinucleotide-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C21H25N7O17P3",compartment:"c",id:"nadp_c"},{name:"3-Phospho-D-glycerate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H4O7P",compartment:"c",id:"3pg_c"},{name:"Glyceraldehyde-3-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H5O6P",compartment:"c",id:"g3p_c"},{name:"D-Glucose-6-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H11O9P",compartment:"c",id:"g6p_c"},{name:"Phosphoenolpyruvate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H2O6P",compartment:"c",id:"pep_c"},{name:"L-Glutamine",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H10N2O3",compartment:"c",id:"gln__L_c"},{name:"L-Glutamate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H8NO4",compartment:"c",id:"glu__L_c"},{name:"alpha-D-Ribose-5-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H9O8P",compartment:"c",id:"r5p_c"},{name:"D-Erythrose-4-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H7O7P",compartment:"c",id:"e4p_c"},{name:"Nicotinamide-adenine-dinucleotide-phosphate-reduced",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C21H26N7O17P3",compartment:"c",id:"nadph_c"},{name:"Oxaloacetate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H2O5",compartment:"c",id:"oaa_c"},{name:"Pyruvate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H3O3",compartment:"c",id:"pyr_c"},{name:"CO2",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"CO2",compartment:"e",id:"co2_e"},{name:"Ubiquinone-8",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C49H74O4",compartment:"c",id:"q8_c"},{name:"Ubiquinol-8",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C49H76O4",compartment:"c",id:"q8h2_c"},{name:"O2",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"O2",compartment:"c",id:"o2_c"},{name:"D-Lactate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H5O3",compartment:"c",id:"lac__D_c"},{name:"D-Lactate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H5O3",compartment:"e",id:"lac__D_e"},{name:"D-Glycerate-2-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H4O7P",compartment:"c",id:"2pg_c"},{name:"Ethanol",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H6O",compartment:"e",id:"etoh_e"},{name:"Formate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"CH1O2",compartment:"e",id:"for_e"},{name:"D-Fructose",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H12O6",compartment:"e",id:"fru_e"},{name:"Fumarate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H2O4",compartment:"e",id:"fum_e"},{name:"D-Glucose",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H12O6",compartment:"e",id:"glc__D_e"},{name:"L-Glutamine",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H10N2O3",compartment:"e",id:"gln__L_e"},{name:"L-Glutamate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H8NO4",compartment:"e",id:"glu__L_e"},{name:"H2O",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"H2O",compartment:"e",id:"h2o_e"},{name:"L-Malate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H4O5",compartment:"e",id:"mal__L_e"},{name:"Ammonium",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"H4N",compartment:"e",id:"nh4_e"},{name:"O2",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"O2",compartment:"e",id:"o2_e"},{name:"Phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"HO4P",compartment:"e",id:"pi_e"},{name:"Pyruvate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H3O3",compartment:"e",id:"pyr_e"},{name:"Succinate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H4O4",compartment:"e",id:"succ_e"},{name:"Dihydroxyacetone-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H5O6P",compartment:"c",id:"dhap_c"},{name:"D-Fructose-1-6-bisphosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H10O12P2",compartment:"c",id:"fdp_c"},{name:"Formate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"CH1O2",compartment:"c",id:"for_c"},{name:"Fumarate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H2O4",compartment:"c",id:"fum_c"},{name:"Succinate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H4O4",compartment:"c",id:"succ_c"},{name:"L-Malate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C4H4O5",compartment:"c",id:"mal__L_c"},{name:"6-phospho-D-glucono-1-5-lactone",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H9O9P",compartment:"c",id:"6pgl_c"},{name:"3-Phospho-D-glyceroyl-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C3H4O10P2",compartment:"c",id:"13dpg_c"},{name:"Ammonium",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"H4N",compartment:"c",id:"nh4_c"},{name:"6-Phospho-D-gluconate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C6H10O10P",compartment:"c",id:"6pgc_c"},{name:"D-Ribulose-5-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H9O8P",compartment:"c",id:"ru5p__D_c"},{name:"Glyoxylate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C2H1O3",compartment:"c",id:"glx_c"},{name:"D-Xylulose-5-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C5H9O8P",compartment:"c",id:"xu5p__D_c"},{name:"Sedoheptulose-7-phosphate",notes:"{}",annotation:"{}",_constraint_sense:"E",charge:"0",_bound:"0.0",formula:"C7H13O10P",compartment:"c",id:"s7p_c"}],id:"Ecoli_core_model"}},function(e,t,n){"use strict";function i(e,t,n,i){this.brush_sel=e.append("g").attr("id","brush-container");var r=this.brush_sel.node(),o=e.select(i).node().nextSibling;r!==o&&r.parentNode.insertBefore(r,o),this.enabled=t,this.map=n}function r(e){void 0===e&&(e=!this.enabled),e?this.setup_selection_brush():this.brush_sel.selectAll("*").remove()}function o(e){e.selectAll("rect").attr("cursor",null)}function a(){var e=this.map,t=this.brush_sel,n=e.sel.selectAll("#nodes,#text-labels"),i=e.canvas.size_and_location(),r=i.width,a=i.height,l=i.x,_=i.y;t.selectAll("*").remove();var d=!1,f=s().extent([[l,_],[l+r,_+a]]).on("start",function(){o(t),e.settings.get_option("hide_secondary_metabolites")&&(e.settings.set_conditional("hide_secondary_metabolites",!1),e.draw_everything(),e.set_status("Showing secondary metabolites. You can hide them again in Settings.",2e3))}).on("brush",function(){var e=c.event.sourceEvent.shiftKey,t=u(this);if(null!==t){(e?n.selectAll(".node:not(.selected),.text-label:not(.selected)"):n.selectAll(".node,.text-label")).classed("selected",function(e){var n=e.x,i=e.y;return t[0][0]<=n&&n<t[1][0]&&t[0][1]<=i&&i<t[1][1]})}}).on("end",function(){o(t),null===u(this)?d?d=!1:e.select_none():(d=!0,t.call(f.move,null))});t.call(f),o(t)}var l=n(1),s=n(85).brush,u=n(85).brushSelection,c=(n(43).scaleIdentity,n(0)),_=(n(0).select,l.make_class());_.prototype={init:i,toggle:r,setup_selection_brush:a},e.exports=_},function(e,t,n){"use strict";function i(e,t,n,i){var r=e.append("div").attr("id","rxn-input");this.placed_div=g(r,t,{x:240,y:0}),this.placed_div.hide();var o=v(r.node(),{backgroundColor:"#eee"});k(o.input),this.completely=o,r.append("button").attr("class","button input-close-button").text("×").on("mousedown",function(){this.hide_dropdown()}.bind(this)),this.map=t;this.direction_arrow=new y(t.sel),this.direction_arrow.set_rotation(90),this.setup_map_callbacks(t),this.zoom_container=n,this.setup_zoom_callbacks(n),this.settings=i,this.toggle(!1),this.target_coords=null}function r(e){e.callback_manager.set("select_metabolite_with_id.input",function(e,t){this.is_active&&(this.reload(e,t,!1),this.show_dropdown(t)),this.hide_target()}.bind(this)),e.callback_manager.set("select_selectable.input",function(e,t,n){this.hide_target(),1==e&&this.is_active&&n?(this.reload(t,n,!1),this.show_dropdown(n)):this.toggle(!1)}.bind(this)),e.callback_manager.set("deselect_nodes",function(){this.direction_arrow.hide(),this.hide_dropdown()}.bind(this)),e.callback_manager.set("before_svg_export",function(){this.direction_arrow.hide(),this.hide_target()}.bind(this))}function o(e){e.callback_manager.set("zoom.input",function(){this.is_active&&this.place_at_selected()}.bind(this))}function a(){return this.placed_div.is_visible()}function l(e){this.is_active=void 0===e?!this.is_active:e,this.is_active?(this.toggle_start_reaction_listener(!0),w.isNull(this.target_coords)?this.reload_at_selected():this.placed_div.place(this.target_coords),this.show_dropdown(),this.map.set_status("Click on the canvas or an existing metabolite"),this.direction_arrow.show()):(this.toggle_start_reaction_listener(!1),this.hide_dropdown(),this.map.set_status(null),this.direction_arrow.hide())}function s(e){this.clear_escape=this.map.key_manager.add_escape_listener(function(){this.hide_dropdown()}.bind(this),!0),this.completely.input.blur(),this.completely.repaint(),this.completely.setText(""),this.completely.input.focus()}function u(){this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.placed_div.hide(),this.completely.input.blur(),this.completely.hideDropDown()}function c(){this.map.deselect_text_labels();var e=this.map.select_single_node();if(null!=e){var t={x:e.x,y:e.y};this.place(t)}}function _(e){this.placed_div.place(e),this.direction_arrow.set_location(e),this.direction_arrow.show()}function d(){this.map.deselect_text_labels();var e=this.map.select_single_node();if(null==e)return!1;var t={x:e.x,y:e.y};return this.reload(e,t,!1),!0}function f(e,t,n){if(!n&&!e)return void console.error("No selected node, and not starting from scratch");if(this.place(t),null===this.map.cobra_model)return void this.completely.setText("Cannot add: No model.");var i="name"===this.settings.get_option("identifiers_on_map"),r=this.settings.get_option("allow_building_duplicate_reactions"),o=[],a=this.map.cobra_model.reactions,l=this.map.cobra_model.metabolites,s=this.map.reactions,u=this.map.has_data_on_reactions,c=(this.map.reaction_data,this.map.reaction_data_styles,e?i?e.name:e.bigg_id:""),_={};for(var d in a){var f=a[d],b=f.name,p=i?b:d;if(r||!function(e,t){for(var n in t)if(t[n].bigg_id===e)return!0;return!1}(d,s))for(var m in f.metabolites)if(n||m==e.bigg_id){if(d in _)continue;l[m].name;if(u)o.push({reaction_data:f.data,html:"<b>"+p+"</b>: "+f.data_string,matches:[p],id:d}),_[d]=!0;else{var g,v={},y=[];if(i)for(g in f.metabolites){var k=l[g].name;v[k]=f.metabolites[g],y.push(k)}else{v=h.clone(f.metabolites);for(g in f.metabolites)y.push(g)}var M=w.flatten(f.genes.map(function(e){return[e.name,e.bigg_id]})),A=x.build_reaction_string(v,f.reversibility,f.lower_bound,f.upper_bound);o.push({html:"<b>"+p+"</b>\t"+function(e,t){return e.replace(new RegExp("(^| )("+t.join("|")+")($| )","g"),"$1<b>$2</b>$3")}(A,[c]),matches:[p].concat(y).concat(M),id:d}),_[d]=!0}}}var E;E=u?function(e,t){return Math.abs(t.reaction_data)-Math.abs(e.reaction_data)}:function(e,t){return e.html.toLowerCase()<t.html.toLowerCase()?-1:1},o=o.sort(E);var P=this.completely;P.options=o,P.setText("");var j=this.direction_arrow,O=function(i){if(null!==i)if(n)this.map.new_reaction_from_scratch(i,t,j.get_rotation());else{if(!(e.node_id in this.map.nodes))return console.error("Selected node no longer exists"),void this.hide_dropdown();this.map.new_reaction_for_metabolite(i,e.node_id,j.get_rotation())}}.bind(this);P.onEnter=function(e){this.setText(""),this.onChange(""),O(e)}}function b(e){if(void 0===e)this.start_reaction_listener=!this.start_reaction_listener;else{if(this.start_reaction_listener===e)return;this.start_reaction_listener=e}this.start_reaction_listener?(this.map.sel.on("click.start_reaction",function(e){if(!this.direction_arrow.dragging){var t={x:M(e)[0],y:M(e)[1]};this.map.deselect_nodes(),this.map.deselect_text_labels(),this.reload(null,t,!0),this.show_target(this.map,t),this.show_dropdown(t)}}.bind(this,this.map.sel.node())),this.map.sel.classed("start-reaction-cursor",!0)):(this.map.sel.on("click.start_reaction",null),this.map.sel.classed("start-reaction-cursor",!1),this.hide_target())}function p(){this.target_coords&&this.map.sel.selectAll(".start-reaction-target").remove(),this.target_coords=null}function m(e,t){var n=e.sel.selectAll(".start-reaction-target").data([12,5]);n.enter().append("circle").classed("start-reaction-target",!0).attr("r",function(e){return e}).style("stroke-width",4).merge(n).style("visibility","visible").attr("transform","translate("+t.x+","+t.y+")"),this.target_coords=t}var h=n(1),g=n(33),v=n(165),y=n(152),x=n(32),w=n(2),k=n(0).select,M=n(0).mouse,A=h.make_class();A.prototype={init:i,setup_map_callbacks:r,setup_zoom_callbacks:o,is_visible:a,toggle:l,show_dropdown:s,hide_dropdown:u,place_at_selected:c,place:_,reload_at_selected:d,reload:f,toggle_start_reaction_listener:b,hide_target:p,show_target:m},e.exports=A},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){if(i?i instanceof ne||(i=te("node"in i?i.node():i)):i=te("body").append("div"),r||(r={}),n||(n=J),this.map_data=e,this.model_data=t,this.embedded_css=n,this.selection=i,this.menu_div=null,this.selection.datum(this),this.selection.__builder__=this,this.has_custom_reaction_styles=Boolean(r.reaction_styles),this.options=I.set_options(r,{menu:"all",scroll_behavior:"pan",use_3d_transform:!I.check_browser("safari"),enable_editing:!0,enable_keys:!0,enable_search:!0,fill_screen:!1,zoom_to_element:null,full_screen_button:!1,ignore_bootstrap:!1,disabled_buttons:null,starting_reaction:null,never_ask_before_quit:!1,unique_map_id:null,primary_metabolite_radius:20,secondary_metabolite_radius:10,marker_radius:5,gene_font_size:18,hide_secondary_metabolites:!1,show_gene_reaction_rules:!1,hide_all_labels:!1,canvas_size_and_loc:null,reaction_data:null,reaction_styles:["color","size","text"],reaction_compare_style:"log2_fold",reaction_scale:[{type:"min",color:"#c8c8c8",size:12},{type:"median",color:"#9696ff",size:20},{type:"max",color:"#ff0000",size:25}],reaction_no_data_color:"#dcdcdc",reaction_no_data_size:8,gene_data:null,and_method_in_gene_reaction_rule:"mean",metabolite_data:null,metabolite_styles:["color","size","text"],metabolite_compare_style:"log2_fold",metabolite_scale:[{type:"min",color:"#fffaf0",size:20},{type:"median",color:"#f1c470",size:30},{type:"max",color:"#800000",size:40}],metabolite_no_data_color:"#ffffff",metabolite_no_data_size:10,identifiers_on_map:"bigg_id",highlight_missing:!1,allow_building_duplicate_reactions:!1,cofactors:["atp","adp","nad","nadh","nadp","nadph","gtp","gdp","h","coa","ump","h20","ppi"],tooltip_component:Q,enable_tooltips:!0,first_load_callback:null},{primary_metabolite_radius:!0,secondary_metabolite_radius:!0,marker_radius:!0,gene_font_size:!0,reaction_no_data_size:!0,metabolite_no_data_size:!0}),I.check_for_parent_tag(this.selection,"svg"))throw new Error("Builder cannot be placed within an svg node because UI elements are html-based.");var o=function(e,t){this.options[e]=t}.bind(this),a=function(e){return this.options[e]}.bind(this),l=["hide_secondary_metabolites","show_gene_reaction_rules","hide_all_labels","scroll_behavior","reaction_styles","reaction_compare_style","reaction_scale","reaction_no_data_color","reaction_no_data_size","and_method_in_gene_reaction_rule","metabolite_styles","metabolite_compare_style","metabolite_scale","metabolite_no_data_color","metabolite_no_data_size","identifiers_on_map","highlight_missing","allow_building_duplicate_reactions","enable_tooltips"];this.settings=new V(o,a,l),["reaction_scale","metabolite_scale"].forEach(function(e){this.settings.streams[e].onValue(function(t){["min","max"].forEach(function(n){t.reduce(function(e,t){return e||t.type===n},!1)||(t.push({type:n,color:"#ffffff",size:10}),this.settings.set_conditional(e,t))}.bind(this))}.bind(this))}.bind(this)),this.callback_manager=q(),null!==this.options.first_load_callback&&this.callback_manager.set("first_load",this.options.first_load_callback),this.zoom_container=new F(this.selection,this.options.scroll_behavior,this.options.use_3d_transform,this.options.fill_screen),this.zoom_container.callback_manager.set("svg_start",function(){this.map&&this.map.set_status("Drawing ...")}.bind(this)),this.zoom_container.callback_manager.set("svg_finish",function(){this.map&&this.map.set_status("")}.bind(this)),this.tooltip_container=new Z(this.selection,this.options.tooltip_component,this.zoom_container),this._create_status(this.selection),this.load_model(this.model_data,!1),this.load_map(this.map_data,!1);var s=this._reaction_check_add_abs();this._update_data(!0,!0),this.settings.status_bus.onValue(function(e){if("accepted"===e){if(this._update_data(!0,!0,["reaction","metabolite"],!1),null!==this.zoom_container){var t=this.settings.get_option("scroll_behavior");this.zoom_container.set_scroll_behavior(t)}null!==this.map&&(this.map.draw_all_nodes(!1),this.map.draw_all_reactions(!0,!1),this.map.select_none())}}.bind(this)),this._setup_quick_jump(this.selection),this.callback_manager.run("first_load",this),null!==s&&setTimeout(s,500)}function o(e,t){ee.isUndefined(t)&&(t=!0),ee.isNull(e)?this.cobra_model=null:this.cobra_model=U.from_cobra_json(e),this.map&&(this.map.cobra_model=this.cobra_model,t&&this._update_data(!0,!1),this.settings.get_option("highlight_missing")&&this.map.draw_all_reactions(!1,!1)),this.callback_manager.run("load_model",null,e,t)}function a(e,t){ee.isUndefined(t)&&(t=!0);I.remove_child_nodes(this.zoom_container.zoomed_sel);var n=this.zoom_container.zoomed_sel,i=this.zoom_container.svg;this.map&&this.map.key_manager.toggle(!1),this.map=null!==e?R.from_data(e,i,this.embedded_css,n,this.zoom_container,this.settings,this.cobra_model,this.options.enable_search):new R(i,this.embedded_css,n,this.zoom_container,this.settings,this.cobra_model,this.options.canvas_size_and_loc,this.options.enable_search),this._setup_status(this.map),t&&this._update_data(!1,!0),this.build_input=new D(this.selection,this.map,this.zoom_container,this.settings),this.text_edit_input=new K(this.selection,this.map,this.zoom_container),this.tooltip_container.setup_map_callbacks(this.map),this.brush=new B(n,!1,this.map,".canvas-group"),this.map.canvas.callback_manager.set("resize",function(){this.brush.toggle(!0)}.bind(this)),this._setup_modes(this.map,this.brush,this.zoom_container);var r=this.selection.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline");this.menu_div=r.append("div");var o=r.append("div"),a=this.selection.append("div");this.search_bar=new G(o,this.map.search_index,this.map),this.search_bar.callback_manager.set("show",function(){this.settings_bar.toggle(!1)}.bind(this));var l=this.selection.append("div"),s=function(e,t){var n=this.options[e+"_styles"];if(t&&-1===n.indexOf("abs"))n.push("abs");else if(!t){var i=n.indexOf("abs");-1!==i&&(this.options[e+"_styles"]=n.slice(0,i).concat(n.slice(i+1)))}this._update_data(!1,!0,e)}.bind(this);this.settings_bar=new X(l,this.settings,this.map,s),this.settings_bar.callback_manager.set("show",function(){this.search_bar.toggle(!1)}.bind(this));var u=this._get_keys(this.map,this.zoom_container,this.search_bar,this.settings_bar,this.options.enable_editing,this.options.full_screen_button);if(this.map.key_manager.assigned_keys=u,this.map.key_manager.input_list=[this.build_input,this.search_bar,this.settings_bar,this.text_edit_input,this.tooltip_container],this.map.key_manager.update(),this.map.key_manager.toggle(this.options.enable_keys),"all"===this.options.menu&&(this.options.ignore_bootstrap?console.error("Cannot create the dropdown menus if ignore_bootstrap = true"):(null===this.options.reaction_data&&this.options.disabled_buttons.push("Clear reaction data"),null===this.options.gene_data&&this.options.disabled_buttons.push("Clear gene data"),null===this.options.metabolite_data&&this.options.disabled_buttons.push("Clear metabolite data"))),this._set_up_button_panel(a,u,this.options.enable_editing,this.options.enable_keys,this.options.full_screen_button,this.options.menu,this.options.ignore_bootstrap),this.options.zoom_to_element){var c=this.options.zoom_to_element.type,_=this.options.zoom_to_element.id;if(ee.isUndefined(c)||-1===["reaction","node"].indexOf(c))throw new Error('zoom_to_element type must be "reaction" or "node"');if(ee.isUndefined(_))throw new Error("zoom_to_element must include id");"reaction"===c?this.map.zoom_to_reaction(_):"node"===c&&this.map.zoom_to_node(_)}else if(null!==e)this.map.zoom_extent_canvas();else if(null!==this.options.starting_reaction&&null!==this.cobra_model){var d=this.zoom_container.get_size(),f={x:d.width/2,y:d.height/4};this.map.new_reaction_from_scratch(this.options.starting_reaction,f,90),this.map.zoom_extent_nodes()}else this.map.zoom_extent_canvas();this.options.enable_editing?this.zoom_mode():this.view_mode(),this.options.enable_editing&&this._setup_confirm_before_exit(),this.map.draw_everything()}function l(e){var t=this,n=this.menu_div.node();S.default.render((0,C.h)("ul",{className:"menuBar",style:{display:"inline-block",margin:"5px auto 0",border:"1px solid #ddd",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"0",height:"100%",width:"100%"}},(0,C.h)(N.default,{name:"Map"},(0,C.h)(T.default,{name:"Save map JSON"+(this.options.enable_keys?" (Ctrl+S)":""),onClick:this.map.save.bind(this.map),disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Load map JSON"+(this.options.enable_keys?" (Ctrl+O)":""),onClick:function(e){return t.load_map(e)},type:"load",disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Export as SVG"+(this.options.enable_keys?" (Ctrl+Shift+S)":""),onClick:function(){return t.map.save_svg()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Export as PNG"+(this.options.enable_keys?" (Ctrl+Shift+P)":""),onClick:function(){return t.map.save_png()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Clear map",onClick:function(){return t.map.clear_map()},disabledButtons:this.options.disabled_buttons})),(0,C.h)(N.default,{name:"Model"},(0,C.h)(T.default,{name:"Load COBRA model JSON"+(this.options.enable_keys?" (Ctrl+M)":""),onClick:function(e){return t.callback_manager.run("load_model",null,e,!0)},type:"load",disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Update names and gene reaction rules using model",onClick:this.map.convert_map.bind(this.map),disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Clear model",onClick:this.load_model.bind(this,null,!0),disabledButtons:this.options.disabled_buttons})),(0,C.h)(N.default,{name:"Data"},(0,C.h)(T.default,{name:"Load reaction data",onClick:function(e){return t.set_reaction_data(e)},type:"load",disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Clear reaction data",onClick:function(){return t.set_reaction_data(null)},disabledButtons:this.options.disabled_buttons}),(0,C.h)("li",{name:"divider"}),(0,C.h)(T.default,{name:"Load gene data",onClick:function(e){return t.set_gene_data(e)},type:"load",disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Clear gene data",onClick:function(){return t.set_gene_data(null)},disabledButtons:this.options.disabled_buttons}),(0,C.h)("li",{name:"divider"}),(0,C.h)(T.default,{name:"Load metabolite data",onClick:function(e){return t.set_metabolite_data(e)},type:"load",disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Clear metabolite data",onClick:function(){return t.set_metabolite_data(null)},disabledButtons:this.options.disabled_buttons})),(0,C.h)(N.default,{name:"Edit",rightMenu:"true"},(0,C.h)(T.default,{name:"Pan mode"+(this.options.enable_keys?" (Z)":""),modeName:"zoom",mode:e,onClick:function(){return t.zoom_mode()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Select mode"+(this.options.enable_keys?" (V)":""),modeName:"brush",mode:e,onClick:function(){return t.brush_mode()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Add reaction mode"+(this.options.enable_keys?" (N)":""),modeName:"build",mode:e,onClick:function(){return t.build_mode()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Rotate mode"+(this.options.enable_keys?" (R)":""),modeName:"rotate",mode:e,onClick:function(){return t.rotate_mode()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Text mode"+(this.options.enable_keys?" (T)":""),modeName:"text",mode:e,onClick:function(){return t.text_mode()},disabledButtons:this.options.disabled_buttons}),(0,C.h)("li",{name:"divider"}),(0,C.h)(T.default,{name:"Delete"+(this.options.enable_keys?" (Del)":""),onClick:function(){return t.map.delete_selected()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Undo"+(this.options.enable_keys?" (Ctrl+Z)":""),onClick:function(){return t.map.undo_stack.undo()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Redo"+(this.options.enable_keys?" (Ctrl+Shift+Z)":""),onClick:function(){return t.map.undo_stack.redo()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Toggle primary/secondary"+(this.options.enable_keys?" (P)":""),onClick:function(){return t.map.toggle_selected_node_primary()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Rotate reactant locations"+(this.options.enable_keys?" (C)":""),onClick:function(){return t.map.cycle_primary_node()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Select all"+(this.options.enable_keys?" (Ctrl+A)":""),onClick:function(){return t.map.select_all()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Select none"+(this.options.enable_keys?" (Ctrl+Shift+A)":""),onClick:function(){return t.map.select_none()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Invert selection",onClick:function(){return t.map.invert_selection()},disabledButtons:this.options.disabled_buttons})),(0,C.h)(N.default,{name:"View",rightMenu:"true"},(0,C.h)(T.default,{name:"Zoom in"+(this.options.enable_keys?" (+)":""),onClick:function(){return t.zoom_container.zoom_in()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Zoom out"+(this.options.enable_keys?" (-)":""),onClick:function(){return t.zoom_container.zoom_out()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Zoom to nodes"+(this.options.enable_keys?" (0)":""),onClick:function(){return t.map.zoom_extent_nodes()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Zoom to canvas"+(this.options.enable_keys?" (1)":""),onClick:function(){return t.map.zoom_extent_canvas()},disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Find"+(this.options.enable_keys?" (F)":""),onClick:this.search_bar.toggle.bind(this.search_bar,!0),disabledButtons:this.options.disabled_buttons}),(0,C.h)(T.default,{name:"Show control points"+(this.options.enable_keys?" (B)":""),onClick:this.map.toggle_beziers.bind(this.map),disabledButtons:this.options.disabled_buttons}),(0,C.h)("li",{name:"divider"}),(0,C.h)(T.default,{name:"Settings"+(this.options.enable_keys?" (,)":""),onClick:this.settings_bar.toggle.bind(this.settings_bar),disabledButtons:this.options.disabled_buttons})),(0,C.h)("a",{className:"dropdown",target:"#",href:"https://escher.readthedocs.org"},"?")),n,n.children.length>0?n.firstChild:void 0)}function s(e){this.renderMenu(e),this.search_bar.toggle(!1),this.build_input.toggle("build"==e),this.build_input.direction_arrow.toggle("build"==e),"all"==this.options.menu&&this.options.enable_editing&&this._toggle_direction_buttons("build"==e),this.brush.toggle("brush"==e),this.zoom_container.toggle_pan_drag("zoom"==e||"view"==e),this.map.canvas.toggle_resize("zoom"==e||"brush"==e),"rotate"==e?(this.map.behavior.toggle_selectable_drag(!1),this.map.behavior.toggle_rotation_mode(!0)):(this.map.behavior.toggle_rotation_mode("rotate"==e),this.map.behavior.toggle_selectable_drag("brush"==e)),this.map.behavior.toggle_selectable_click("build"==e||"brush"==e),this.map.behavior.toggle_label_drag("brush"==e),this.map.behavior.toggle_label_mouseover(!0),this.map.behavior.toggle_label_touch(!0),this.map.behavior.toggle_text_label_edit("text"==e),this.map.behavior.toggle_bezier_drag("brush"==e),"view"!=e&&"text"!=e||this.map.select_none(),"rotate"==e&&this.map.deselect_text_labels(),this.map.draw_everything()}function u(){this.callback_manager.run("view_mode"),this._set_mode("view")}function c(){this.callback_manager.run("build_mode"),this._set_mode("build")}function _(){this.callback_manager.run("brush_mode"),this._set_mode("brush")}function d(){this.callback_manager.run("zoom_mode"),this._set_mode("zoom")}function f(){this.callback_manager.run("rotate_mode"),this._set_mode("rotate")}function b(){this.callback_manager.run("text_mode"),this._set_mode("text")}function p(){var e=this.options.reaction_styles;return null===this.options.reaction_data||this.has_custom_reaction_styles||ee.contains(e,"abs")?null:(this.settings.set_conditional("reaction_styles",e.concat("abs")),function(){this.map.set_status("Visualizing absolute value of reaction data. Change this option in Settings.",5e3)}.bind(this))}function m(e){this.tooltip_container.callback_manager.run("setState",null,e)}function h(e){this.options.reaction_data=e;var t=this._reaction_check_add_abs();this._update_data(!0,!0,"reaction"),t?t():this.map.set_status("");var n=this.options.disabled_buttons.indexOf("Clear reaction data");n>-1?this.options.disabled_buttons.splice(n,1):-1===n&&null===e&&this.options.disabled_buttons.push("Clear reaction data")}function g(e,t){t&&this.settings.set_conditional("show_gene_reaction_rules",!1),this.options.gene_data=e,this._update_data(!0,!0,"reaction"),this.map.set_status("");var n=this.options.disabled_buttons.indexOf("Clear gene data");n>-1?this.options.disabled_buttons.splice(n,1):-1===n&&null===e&&this.options.disabled_buttons.push("Clear gene data")}function v(e){this.options.metabolite_data=e,this._update_data(!0,!0,"metabolite"),this.map.set_status("");var t=this.options.disabled_buttons.indexOf("Clear metabolite data");t>-1?this.options.disabled_buttons.splice(t,1):-1===t&&null===e&&this.options.disabled_buttons.push("Clear metabolite data")}function y(e,t,n,i){function r(e,t,n){var i={};return null!==t&&I.extend(i,t.reactions),null!==n&&I.extend(i,n.reactions,!0),Y.import_and_check(e,"gene_data",i)}void 0===n&&(n=["reaction","metabolite"]),void 0===i&&(i=!0);var o,a,l,s=-1!==n.indexOf("metabolite"),u=-1!==n.indexOf("reaction");s&&t&&null!==this.map&&(o=Y.import_and_check(this.options.metabolite_data,"metabolite_data"),this.map.apply_metabolite_data_to_map(o),i&&this.map.draw_all_nodes(!1)),u&&(null!==this.options.reaction_data&&t&&null!==this.map?(a=Y.import_and_check(this.options.reaction_data,"reaction_data"),this.map.apply_reaction_data_to_map(a),i&&this.map.draw_all_reactions(!1,!1)):null!==this.options.gene_data&&t&&null!==this.map?(l=r(this.options.gene_data,this.cobra_model,this.map),this.map.apply_gene_data_to_map(l),i&&this.map.draw_all_reactions(!1,!1)):t&&null!==this.map&&(this.map.apply_reaction_data_to_map(null),i&&this.map.draw_all_reactions(!1,!1))),this.update_model_timer&&clearTimeout(this.update_model_timer);this.update_model_timer=setTimeout(function(){s&&e&&null!==this.cobra_model&&(o||(o=Y.import_and_check(this.options.metabolite_data,"metabolite_data")),this.cobra_model.apply_metabolite_data(o,this.options.metabolite_styles,this.options.metabolite_compare_style)),u&&(null!==this.options.reaction_data&&e&&null!==this.cobra_model?(a||(a=Y.import_and_check(this.options.reaction_data,"reaction_data")),this.cobra_model.apply_reaction_data(a,this.options.reaction_styles,this.options.reaction_compare_style)):null!==this.options.gene_data&&e&&null!==this.cobra_model?(l||(l=r(this.options.gene_data,this.cobra_model,this.map)),this.cobra_model.apply_gene_data(l,this.options.reaction_styles,this.options.identifiers_on_map,this.options.reaction_compare_style,this.options.and_method_in_gene_reaction_rule)):e&&null!==this.cobra_model&&this.cobra_model.apply_reaction_data(null,this.options.reaction_styles,this.options.reaction_compare_style)),this.callback_manager.run("update_data",null,e,t,n,i)}.bind(this),5)}function x(e,t,n,i,r,o,a,l){function s(e,t){if(e)return console.warn(e),void this.map.set_status("Error loading map: "+e,2e3);try{!function(e){if(!("map_id"in e[0]&&"reactions"in e[1]&&"nodes"in e[1]&&"canvas"in e[1]))throw new Error("Bad map data.")}(t),this.load_map(t),this.map.set_status("Loaded map "+t[0].map_name,3e3)}catch(e){console.warn(e),this.map.set_status("Error loading map: "+e,2e3)}}function u(e,t){if(e)return console.warn(e),void this.map.set_status("Error loading model: "+e,2e3);try{this.load_model(t,!0),this.build_input.toggle(!1),"id"in t?this.map.set_status("Loaded model "+t.id,3e3):this.map.set_status("Loaded model (no model id)",3e3)}catch(e){console.warn(e),this.map.set_status("Error loading model: "+e,2e3)}}function c(e,t){if(e)return console.warn(e),void this.map.set_status("Could not parse file as JSON or CSV",2e3);null!==t&&this.set_gene_data(null),this.set_reaction_data(t)}function _(e,t){if(e)return console.warn(e),void this.map.set_status("Could not parse file as JSON or CSV",2e3);this.set_metabolite_data(t)}function d(e,t){if(e)return console.warn(e),void this.map.set_status("Could not parse file as JSON or CSV",2e3);null!==t&&this.set_reaction_data(null),this.settings.set_conditional("show_gene_reaction_rules",!0),this.set_gene_data(t)}var f=e.attr("id","menu").append("ul").attr("class","nav nav-pills");H.dropdown_menu(f,"Map").button({key:i.save,text:"Save map JSON",key_text:o?" (Ctrl+S)":null}).button({text:"Load map JSON",key_text:o?" (Ctrl+O)":null,input:{assign:n.assigned_keys.load,key:"fn",fn:s.bind(this),pre_fn:function(){t.set_status("Loading map ...")},failure_fn:function(){t.set_status("")}}}).button({key:i.save_svg,text:"Export as SVG",key_text:o?" (Ctrl+Shift+S)":null}).button({key:i.save_png,text:"Export as PNG",key_text:o?" (Ctrl+Shift+P)":null}).button({key:i.clear_map,text:"Clear map"});var b=H.dropdown_menu(f,"Model").button({text:"Load COBRA model JSON",key_text:o?" (Ctrl+M)":null,input:{assign:n.assigned_keys.load_model,key:"fn",fn:u.bind(this),pre_fn:function(){t.set_status("Loading model ...")},failure_fn:function(){t.set_status("")}}}).button({id:"convert_map",key:i.convert_map,text:"Update names and gene reaction rules using model"}).button({id:"clear_model",key:i.clear_model,text:"Clear model"}),p=function(){b.dropdown.selectAll("li").classed("escher-disabled",function(e){return("clear_model"==e.id||"convert_map"==e.id)&&null===this.cobra_model||null}.bind(this))}.bind(this);p(),this.callback_manager.set("load_model",p);var m=H.dropdown_menu(f,"Data").button({input:{assign:n.assigned_keys.load_reaction_data,key:"fn",fn:c.bind(this),accept_csv:!0,pre_fn:function(){t.set_status("Loading reaction data ...")},failure_fn:function(){t.set_status("")}},text:"Load reaction data"}).button({key:i.clear_reaction_data,text:"Clear reaction data"}).divider().button({input:{fn:d.bind(this),accept_csv:!0,pre_fn:function(){t.set_status("Loading gene data ...")},failure_fn:function(){t.set_status("")}},text:"Load gene data"}).button({key:i.clear_gene_data,text:"Clear gene data"}).divider().button({input:{fn:_.bind(this),accept_csv:!0,pre_fn:function(){t.set_status("Loading metabolite data ...")},failure_fn:function(){t.set_status("")}},text:"Load metabolite data"}).button({key:i.clear_metabolite_data,text:"Clear metabolite data"}),h=function(){m.dropdown.selectAll("li").classed("escher-disabled",function(e){return e?"Clear reaction data"==e.text&&null===this.options.reaction_data||("Clear gene data"==e.text&&null===this.options.gene_data||("Clear metabolite data"==e.text&&null===this.options.metabolite_data||(this.options.disabled_buttons?ee.contains(this.options.disabled_buttons,e.text):null))):null}.bind(this))}.bind(this);h(),this.callback_manager.set("update_data",h);var g=H.dropdown_menu(f,"Edit",!0);r?g.button({key:i.zoom_mode,id:"zoom-mode-menu-button",text:"Pan mode",key_text:o?" (Z)":null}).button({key:i.brush_mode,id:"brush-mode-menu-button",text:"Select mode",key_text:o?" (V)":null}).button({key:i.build_mode,id:"build-mode-menu-button",text:"Add reaction mode",key_text:o?" (N)":null}).button({key:i.rotate_mode,id:"rotate-mode-menu-button",text:"Rotate mode",key_text:o?" (R)":null}).button({key:i.text_mode,id:"text-mode-menu-button",text:"Text mode",key_text:o?" (T)":null}).divider().button({key:i.delete,text:"Delete",key_text:o?" (Del)":null}).button({key:i.undo,text:"Undo",key_text:o?" (Ctrl+Z)":null}).button({key:i.redo,text:"Redo",key_text:o?" (Ctrl+Shift+Z)":null}).button({key:i.toggle_primary,text:"Toggle primary/secondary",key_text:o?" (P)":null}).button({key:i.cycle_primary,text:"Rotate reactant locations",key_text:o?" (C)":null}).button({key:i.select_all,text:"Select all",key_text:o?" (Ctrl+A)":null}).button({key:i.select_none,text:"Select none",key_text:o?" (Ctrl+Shift+A)":null}).button({key:i.invert_selection,text:"Invert selection"}):g.button({key:i.view_mode,id:"view-mode-menu-button",text:"View mode"});var v=H.dropdown_menu(f,"View",!0).button({key:i.zoom_in,text:"Zoom in",key_text:o?" (+)":null}).button({key:i.zoom_out,text:"Zoom out",key_text:o?" (-)":null}).button({key:i.extent_nodes,text:"Zoom to nodes",key_text:o?" (0)":null}).button({key:i.extent_canvas,text:"Zoom to canvas",key_text:o?" (1)":null}).button({key:i.search,text:"Find",key_text:o?" (F)":null});a&&v.button({key:i.full_screen,text:"Full screen",key_text:o?" (2)":null}),r&&(v.button({key:i.toggle_beziers,id:"bezier-button",text:"Show control points",key_text:o?" (B)":null}),t.callback_manager.set("toggle_beziers.button",function(e){f.select("#bezier-button").select(".dropdown-button-text").text((e?"Hide":"Show")+" control points"+(o?" (B)":""))})),v.divider().button({key:i.show_settings,text:"Settings",key_text:o?" (,)":null}),f.append("a").attr("class","help-button").attr("target","#").attr("href","https://escher.readthedocs.org").text("?");var y=function(e){$(this.selection.node()).find("#"+e).button("toggle"),["zoom-mode-menu-button","brush-mode-menu-button","build-mode-menu-button","rotate-mode-menu-button","view-mode-menu-button","text-mode-menu-button"].forEach(function(t){var n=t.replace("-menu","");this.selection.select("#"+t).select("span").classed("glyphicon",n==e).classed("glyphicon-ok",n==e)}.bind(this))};this.callback_manager.set("zoom_mode",y.bind(this,"zoom-mode-button")),this.callback_manager.set("brush_mode",y.bind(this,"brush-mode-button")),this.callback_manager.set("build_mode",y.bind(this,"build-mode-button")),this.callback_manager.set("rotate_mode",y.bind(this,"rotate-mode-button")),this.callback_manager.set("view_mode",y.bind(this,"view-mode-button")),this.callback_manager.set("text_mode",y.bind(this,"text-mode-button"))}function w(e,t,n,i,r,o,a){var l=e.append("ul").attr("class","nav nav-pills nav-stacked").attr("id","button-panel");if(H.individual_button(l.append("li"),{key:t.zoom_in,text:"+",icon:"glyphicon glyphicon-plus-sign",tooltip:"Zoom in",key_text:i?" (+)":null,ignore_bootstrap:a}),H.individual_button(l.append("li"),{key:t.zoom_out,text:"–",icon:"glyphicon glyphicon-minus-sign",tooltip:"Zoom out",key_text:i?" (-)":null,ignore_bootstrap:a}),H.individual_button(l.append("li"),{key:t.extent_canvas,text:"↔",icon:"glyphicon glyphicon-resize-full",tooltip:"Zoom to canvas",key_text:i?" (1)":null,ignore_bootstrap:a}),r&&H.individual_button(l.append("li"),{key:t.full_screen,text:"▣",icon:"glyphicon glyphicon-fullscreen",tooltip:"Full screen",key_text:i?" (2)":null,ignore_bootstrap:a}),n&&"all"===o){H.radio_button_group(l.append("li")).button({key:t.zoom_mode,id:"zoom-mode-button",text:"Z",icon:"glyphicon glyphicon-move",tooltip:"Pan mode",key_text:i?" (Z)":null,ignore_bootstrap:a}).button({key:t.brush_mode,text:"V",id:"brush-mode-button",icon:"glyphicon glyphicon-hand-up",tooltip:"Select mode",key_text:i?" (V)":null,ignore_bootstrap:a}).button({key:t.build_mode,text:"N",id:"build-mode-button",icon:"glyphicon glyphicon-plus",tooltip:"Add reaction mode",key_text:i?" (N)":null,ignore_bootstrap:a}).button({key:t.rotate_mode,text:"R",id:"rotate-mode-button",icon:"glyphicon glyphicon-repeat",tooltip:"Rotate mode",key_text:i?" (R)":null,ignore_bootstrap:a}).button({key:t.text_mode,text:"T",id:"text-mode-button",icon:"glyphicon glyphicon-font",tooltip:"Text mode",key_text:i?" (T)":null,ignore_bootstrap:a}),this.direction_buttons=l.append("li");H.button_group(this.direction_buttons).button({key:t.direction_arrow_left,text:"←",icon:"glyphicon glyphicon-arrow-left",tooltip:"Direction arrow (←)",ignore_bootstrap:a}).button({key:t.direction_arrow_right,text:"→",icon:"glyphicon glyphicon-arrow-right",tooltip:"Direction arrow (→)",ignore_bootstrap:a}).button({key:t.direction_arrow_up,text:"↑",icon:"glyphicon glyphicon-arrow-up",tooltip:"Direction arrow (↑)",ignore_bootstrap:a}).button({key:t.direction_arrow_down,text:"↓",icon:"glyphicon glyphicon-arrow-down",tooltip:"Direction arrow (↓)",ignore_bootstrap:a})}}function k(e){ee.isUndefined(e)&&(e="block"===!this.direction_buttons.style("display")),this.direction_buttons.style("display",e?"block":"none")}function M(e){this.status_bar=e.append("div").attr("id","status")}function A(e){var t=this;e.callback_manager.set("set_status",function(e){return t.status_bar.html(e)})}function E(e){var t=function(e,t,n){if(this.options.enable_editing&&!this.options.never_ask_before_quit&&!confirm("You will lose any unsaved changes.\n\nAre you sure you want to switch maps?"))return void(n&&n(!1));this.map.set_status("Loading map "+e+" ...");var i=I.name_to_url(e,t);ie(i,function(e,t){if(e)return console.warn("Could not load data: "+e),this.map.set_status("Could not load map",2e3),void(n&&n(!1));n&&n(!0),this.load_map(t),this.map.set_status("")}.bind(this))}.bind(this);this.quick_jump=W(e,t)}function P(e,t,n){var i={};e.callback_manager.set("start_rotation",function(){i.brush=t.enabled,t.toggle(!1),i.zoom=n.zoom_on,n.toggle_pan_drag(!1),i.selectable_mousedown=null!==e.behavior.selectable_mousedown,e.behavior.toggle_selectable_click(!1),i.label_mouseover=null!==e.behavior.label_mouseover,i.label_touch=null!==e.behavior.label_touch,e.behavior.toggle_label_mouseover(!1),e.behavior.toggle_label_touch(!1)}),e.callback_manager.set("end_rotation",function(){t.toggle(i.brush),n.toggle_pan_drag(i.zoom),e.behavior.toggle_selectable_click(i.selectable_mousedown),e.behavior.toggle_label_mouseover(i.label_mouseover),e.behavior.toggle_label_touch(i.label_touch),i={}})}function j(e,t,n,i,r,o){var a={save:{key:"ctrl+s",target:e,fn:e.save},save_svg:{key:"ctrl+shift+s",target:e,fn:e.save_svg},save_png:{key:"ctrl+shift+p",target:e,fn:e.save_png},load:{key:"ctrl+o",fn:null},convert_map:{target:e,fn:e.convert_map},clear_map:{target:e,fn:e.clear_map},load_model:{key:"ctrl+m",fn:null},clear_model:{fn:this.load_model.bind(this,null,!0)},load_reaction_data:{fn:null},clear_reaction_data:{target:this,fn:function(){this.set_reaction_data(null)}},load_metabolite_data:{fn:null},clear_metabolite_data:{target:this,fn:function(){this.set_metabolite_data(null)}},load_gene_data:{fn:null},clear_gene_data:{target:this,fn:function(){this.set_gene_data(null,!0)}},zoom_in_ctrl:{key:"ctrl+=",target:t,fn:t.zoom_in},zoom_in:{key:"=",target:t,fn:t.zoom_in,ignore_with_input:!0},zoom_out_ctrl:{key:"ctrl+-",target:t,fn:t.zoom_out},zoom_out:{key:"-",target:t,fn:t.zoom_out,ignore_with_input:!0},extent_nodes_ctrl:{key:"ctrl+0",target:e,fn:e.zoom_extent_nodes},extent_nodes:{key:"0",target:e,fn:e.zoom_extent_nodes,ignore_with_input:!0},extent_canvas_ctrl:{key:"ctrl+1",target:e,fn:e.zoom_extent_canvas},extent_canvas:{key:"1",target:e,fn:e.zoom_extent_canvas,ignore_with_input:!0},search_ctrl:{key:"ctrl+f",fn:n.toggle.bind(n,!0)},search:{key:"f",fn:n.toggle.bind(n,!0),ignore_with_input:!0},view_mode:{target:this,fn:this.view_mode,ignore_with_input:!0},show_settings_ctrl:{key:"ctrl+,",target:i,fn:i.toggle},show_settings:{key:",",target:i,fn:i.toggle,ignore_with_input:!0}};return o&&I.extend(a,{full_screen_ctrl:{key:"ctrl+2",target:e,fn:e.full_screen},full_screen:{key:"2",target:e,fn:e.full_screen,ignore_with_input:!0}}),r&&I.extend(a,{build_mode:{key:"n",target:this,fn:this.build_mode,ignore_with_input:!0},zoom_mode:{key:"z",target:this,fn:this.zoom_mode,ignore_with_input:!0},brush_mode:{key:"v",target:this,fn:this.brush_mode,ignore_with_input:!0},rotate_mode:{key:"r",target:this,fn:this.rotate_mode,ignore_with_input:!0},text_mode:{key:"t",target:this,fn:this.text_mode,ignore_with_input:!0},toggle_beziers:{key:"b",target:e,fn:e.toggle_beziers,ignore_with_input:!0},delete_ctrl:{key:"ctrl+backspace",target:e,fn:e.delete_selected,ignore_with_input:!0},delete:{key:"backspace",target:e,fn:e.delete_selected,ignore_with_input:!0},delete_del:{key:"del",target:e,fn:e.delete_selected,ignore_with_input:!0},toggle_primary:{key:"p",target:e,fn:e.toggle_selected_node_primary,ignore_with_input:!0},cycle_primary:{key:"c",target:e,fn:e.cycle_primary_node,ignore_with_input:!0},direction_arrow_right:{key:"right",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.right,ignore_with_input:!0},direction_arrow_down:{key:"down",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.down,ignore_with_input:!0},direction_arrow_left:{key:"left",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.left,ignore_with_input:!0},direction_arrow_up:{key:"up",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.up,ignore_with_input:!0},undo:{key:"ctrl+z",target:e.undo_stack,fn:e.undo_stack.undo},redo:{key:"ctrl+shift+z",target:e.undo_stack,fn:e.undo_stack.redo},select_all:{key:"ctrl+a",target:e,fn:e.select_all},select_none:{key:"ctrl+shift+a",target:e,fn:e.select_none},invert_selection:{target:e,fn:e.invert_selection}}),a}function O(){window.onbeforeunload=function(e){return e=e||window.event,this.options.never_ask_before_quit?null:"You will lose any unsaved changes."}.bind(this)}var C=n(19),S=i(C),z=n(154),N=i(z),L=n(155),T=i(L),I=n(1),D=n(148),F=n(69),R=n(65),U=n(32),B=n(147),q=n(10),H=n(72),G=n(159),V=n(67),X=n(160),K=n(161),W=n(156),Y=n(14),J=n(70).builder_embed,Z=n(164),Q=n(162).default,ee=n(2),te=n(0).select,ne=n(0).selection,ie=n(18).json,re=I.make_class();re.prototype={init:r,load_map:a,load_model:o,_set_mode:s,view_mode:u,build_mode:c,brush_mode:_,zoom_mode:d,rotate_mode:f,text_mode:b,_reaction_check_add_abs:p,pass_tooltip_component_props:m,set_reaction_data:h,set_metabolite_data:v,set_gene_data:g,_update_data:y,_toggle_direction_buttons:k,_set_up_menu:x,_set_up_button_panel:w,_create_status:M,_setup_status:A,_setup_quick_jump:E,_setup_modes:P,_get_keys:j,_setup_confirm_before_exit:O,renderMenu:l},e.exports=re},function(e,t,n){"use strict";function i(e,t){this.selection=e,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.resize_enabled=!0,this.callback_manager=new s,this.setup()}function r(e){_.isUndefined(e)&&(e=!this.resize_enabled),e?this.selection.selectAll(".drag-rect").style("pointer-events","auto"):this.selection.selectAll(".drag-rect").style("pointer-events","none")}function o(){function e(){c.event.sourceEvent.stopPropagation()}function t(e,t,n){var i=l.d3_transform_catch(n),r=i.translate;return null!==e&&(r[0]=e),null!==t&&(r[1]=t),"translate("+r+")"}function n(e){var n=e.x;e.x=Math.min(e.x+a.width-s/2,c.event.x),a.x=e.x,a.width=a.width+(n-e.x),v.attr("transform",function(e){return t(e.x-s/2,null,v.attr("transform"))}),f.attr("transform",function(e){return t(e.x,null,f.attr("transform"))}).attr("width",a.width*_),b.attr("transform",function(e){return t(e.x,null,b.attr("transform"))}).attr("width",a.width),x.attr("transform",function(e){return t(e.x+s/2,null,x.attr("transform"))}).attr("width",a.width-s),w.attr("transform",function(e){return t(e.x+s/2,null,w.attr("transform"))}).attr("width",a.width-s),a.callback_manager.run("resize")}function i(e){c.event.sourceEvent.stopPropagation();var n=Math.max(e.x+s/2,e.x+a.width+c.event.dx);a.width=n-e.x,y.attr("transform",function(e){return t(n-s/2,null,y.attr("transform"))}),f.attr("width",a.width*_),b.attr("width",a.width),x.attr("width",a.width-s),w.attr("width",a.width-s),a.callback_manager.run("resize")}function r(e){c.event.sourceEvent.stopPropagation();var n=e.y;e.y=Math.min(e.y+a.height-s/2,c.event.y),a.y=e.y,a.height=a.height+(n-e.y),x.attr("transform",function(e){return t(null,e.y-s/2,x.attr("transform"))}),f.attr("transform",function(e){return t(null,e.y,f.attr("transform"))}).attr("width",a.height*_),b.attr("transform",function(e){return t(null,e.y,b.attr("transform"))}).attr("height",a.height),v.attr("transform",function(e){return t(null,e.y+s/2,v.attr("transform"))}).attr("height",a.height-s),y.attr("transform",function(e){return t(null,e.y+s/2,y.attr("transform"))}).attr("height",a.height-s),a.callback_manager.run("resize")}function o(e){c.event.sourceEvent.stopPropagation();var n=Math.max(e.y+s/2,e.y+a.height+c.event.dy);a.height=n-e.y,w.attr("transform",function(e){return t(null,n-s/2,w.attr("transform"))}),f.attr("height",a.height*_),b.attr("height",a.height),v.attr("height",a.height-s),y.attr("height",a.height-s),a.callback_manager.run("resize")}var a=this,s=(this.width,this.height,100),_=10,d=this.selection.append("g").classed("canvas-group",!0).data([{x:this.x,y:this.y}]),f=d.append("rect").attr("id","mouse-node").attr("width",this.width*_).attr("height",this.height*_).attr("transform","translate("+[a.x-this.width*_/2,a.y-this.height*_/2]+")").attr("pointer-events","all");this.mouse_node=f;var b=d.append("rect").attr("id","canvas").attr("width",this.width).attr("height",this.height).attr("transform","translate("+[a.x,a.y]+")"),p=u().on("start",e).on("drag",i),m=u().on("start",e).on("drag",n),h=u().on("start",e).on("drag",r),g=u().on("start",e).on("drag",o),v=d.append("rect").classed("drag-rect",!0).attr("transform",function(e){return"translate("+[e.x-s/2,e.y+s/2]+")"}).attr("height",this.height-s).attr("id","dragleft").attr("width",s).attr("cursor","ew-resize").classed("resize-rect",!0).call(m),y=d.append("rect").classed("drag-rect",!0).attr("transform",function(e){return"translate("+[e.x+a.width-s/2,e.y+s/2]+")"}).attr("id","dragright").attr("height",this.height-s).attr("width",s).attr("cursor","ew-resize").classed("resize-rect",!0).call(p),x=d.append("rect").classed("drag-rect",!0).attr("transform",function(e){return"translate("+[e.x+s/2,e.y-s/2]+")"}).attr("height",s).attr("id","dragtop").attr("width",this.width-s).attr("cursor","ns-resize").classed("resize-rect",!0).call(h),w=d.append("rect").classed("drag-rect",!0).attr("transform",function(e){return"translate("+[e.x+s/2,e.y+a.height-s/2]+")"}).attr("id","dragbottom").attr("height",s).attr("width",this.width-s).attr("cursor","ns-resize").classed("resize-rect",!0).call(g)}function a(){return{x:this.x,y:this.y,width:this.width,height:this.height}}var l=n(1),s=n(10),u=n(16).drag,c=n(0),_=n(2),d=l.make_class();d.prototype={init:i,toggle_resize:r,setup:o,size_and_location:a},e.exports=d},function(e,t,n){"use strict";var i=n(1),r=n(18).json;e.exports=function(e){function t(e,t,i,r,a){i.node().addEventListener("change",function(){n(e,this.value,a,r)},!1);var l=t[0];o(t,i),n(e,l,a,r)}function n(e,t,n,r){i.load_the_file(e,t,function(e,t){if(e)return console.warn(e);a.data=t,r&&r(t)})}function o(e,t){t.selectAll(".menu-option").data(e).enter().append("option").attr("value",function(e){return e}).text(function(e){return e}),t.node().focus()}var a=i.set_options(e,{selection:null,getdatafiles:null,datafiles:null,update_callback:null,target:null});if(null===a.selection)throw new Error("No selection provided for DataMenu");var l=a.selection.select(".data-menu");l.empty()&&(l=a.selection.append("div").attr("class","data-menu"));var s=l.append("form").append("select").attr("class","dropdown-menu");return a.getdatafiles?(a.datafiles&&console.warn("DataMenu: getdatafiles option overrides datafiles"),r(a.getdatafiles,function(e,n){return e?console.warn(e):(t(a.target,n.data,s,a.update_callback,a.selection),null)})):a.datafiles?t(a.target,a.datafiles,s,a.update_callback,a.selection):console.warn("DataMenu: No datafiles given"),{update:o}}},function(e,t,n){"use strict";function i(e){this.arrow_container=e.append("g").attr("id","direction-arrow-container").attr("transform","translate(0,0)rotate(0)"),this.arrow=this.arrow_container.append("path").classed("direction-arrow",!0).attr("d","M0 -5 L0 5 L20 5 L20 10 L30 0 L20 -10 L20 -5 Z").style("visibility","hidden").attr("transform","translate(30,0)scale(2.5)"),this.sel=e,this.center={x:0,y:0},this._setup_drag(),this.dragging=!1,this.is_visible=!1,this.show()}function r(e){this.center=e;var t=m.d3_transform_catch(this.arrow_container.attr("transform"));this.arrow_container.attr("transform","translate("+e.x+","+e.y+")rotate("+t.rotate+")")}function o(e){var t=m.d3_transform_catch(this.arrow_container.attr("transform"));this.arrow_container.attr("transform","translate("+t.translate+")rotate("+e+")")}function a(e){var t=m.d3_transform_catch(this.arrow_container.attr("transform"));this.arrow_container.attr("transform","translate("+t.translate+")rotate("+(t.rotate+e)+")")}function l(){return m.d3_transform_catch(this.arrow_container.attr("transform")).rotate}function s(e){this.is_visible=void 0===e?!this.is_visible:e,this.arrow.style("visibility",this.is_visible?"visible":"hidden")}function u(){this.toggle(!0)}function c(){this.toggle(!1)}function _(){this.set_rotation(0)}function d(){this.set_rotation(90)}function f(){this.set_rotation(180)}function b(){this.set_rotation(270)}function p(){var e=h().on("start",function(e){v.event.sourceEvent.stopPropagation(),this.dragging=!0}.bind(this)).on("drag.direction_arrow",function(e){var t={x:v.event.dx,y:v.event.dy},n={x:g(this.sel.node())[0],y:g(this.sel.node())[1]},i=m.angle_for_event(t,n,this.center);this.displace_rotation(m.to_degrees(i))}.bind(this)).on("end",function(e){setTimeout(function(){this.dragging=!1}.bind(this),200)}.bind(this));this.arrow_container.call(e)}var m=n(1),h=n(16).drag,g=n(0).mouse,v=n(0),y=m.make_class();y.prototype={init:i,set_location:r,set_rotation:o,displace_rotation:a,get_rotation:l,toggle:s,show:u,hide:c,right:_,left:f,up:b,down:d,_setup_drag:p},e.exports=y},function(e,t,n){"use strict";function i(e,t,n){this.behavior=e,this.settings=t,this.map=n,this.callback_manager=new x}function r(e){var t=e.append("rect").attr("class","membrane");return this.callback_manager.run("create_membrane",this,e),t}function o(e){e.attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("stroke-width",function(e){return 10}).attr("rx",function(e){return 20}).attr("ry",function(e){return 20}),this.callback_manager.run("update_membrane",this,e)}function a(e){var t=e.append("g").attr("id",function(e){return"r"+e.reaction_id}).attr("class","reaction");return this.create_reaction_label(t),this.callback_manager.run("create_reaction",this,e),t}function l(e,t,n,i,r,o){e.select(".reaction-label-group").call(function(e){return this.update_reaction_label(e,o)}.bind(this)),v.draw_a_nested_object(e,".segment-group","segments","segment_id",this.create_segment.bind(this),function(e){return this.update_segment(e,t,n,i,r,o)}.bind(this),function(e){e.remove()}),this.callback_manager.run("update_reaction",this,e)}function s(e,t){var n=e.append("g").attr("class","reaction-label-group");return n.append("text").attr("class","reaction-label label"),n.append("g").attr("class","all-genes-label-group"),this.callback_manager.run("create_reaction_label",this,e),n}function u(e,t){var n=this,i=(w(".4g"),this.settings.get_option("identifiers_on_map")),r=this.settings.get_option("reaction_styles"),o=this.settings.get_option("show_gene_reaction_rules"),a=this.settings.get_option("hide_all_labels"),l=this.settings.get_option("gene_font_size"),s=this.behavior.label_mousedown,u=this.behavior.label_mouseover,c=this.behavior.label_mouseout,_=this.behavior.label_touch;e.attr("transform",function(e){return"translate("+e.label_x+","+e.label_y+")"}).call(this.behavior.turn_off_drag).call(this.behavior.reaction_label_drag);var d=e.select(".reaction-label").attr("visibility",a?"hidden":"visible");a||d.text(function(e){var n=e[i];return t&&-1!==r.indexOf("text")&&(n+=" "+e.data_string),n}).on("mousedown",s).on("mouseover",function(e){u("reaction_label",e)}).on("mouseout",c).on("touchend",function(e){_("reaction_label",e)}).call(function(e){n.map.callback_manager.run("update_tooltip",null,"reaction_label",e)});var f=function(e,t){return e+1.5*l*(t+1)},b=e.select(".all-genes-label-group").selectAll(".gene-label-group").data(function(e){var t="gene_string"in e&&null!==e.gene_string&&o&&!a&&-1!==r.indexOf("text"),n="gene_reaction_rule"in e&&null!==e.gene_reaction_rule&&o&&!a;if(t)return console.warn("Showing gene_string. See TODO in source."),e.gene_string;if(n){var l=y.gene_string_for_data(e.gene_reaction_rule,null,e.genes,null,i,null);return l.forEach(function(t,n){t.label_x=e.label_x,t.label_y=f(e.label_y,n)}),l}return[]}),p=b.enter().append("g").attr("class","gene-label-group");p.append("text").attr("class","gene-label").style("font-size",l+"px").on("mousedown",s).on("mouseover",function(e){u("gene_label",e)}).on("mouseout",c);var m=p.merge(b);m.attr("transform",function(e,t){return"translate(0, "+f(0,t)+")"}),m.select("text").text(function(e){return e.text}),b.exit().remove(),this.callback_manager.run("update_reaction_label",this,e)}function c(e){var t=e.append("g").attr("class","segment-group").attr("id",function(e){return"s"+e.segment_id});return t.append("path").attr("class","segment"),t.append("g").attr("class","arrowheads"),t.append("g").attr("class","stoichiometry-labels"),this.callback_manager.run("create_segment",this,e),t}function _(e,t,n,i,r,o){var a=this.settings.get_option("reaction_styles"),l=o&&-1!==a.indexOf("size"),s=o&&-1!==a.indexOf("color"),u=this.settings.get_option("reaction_no_data_size"),c=this.settings.get_option("reaction_no_data_color"),_=this.settings.get_option("highlight_missing"),d=this.settings.get_option("hide_secondary_metabolites"),f=this.settings.get_option("primary_metabolite_radius"),b=this.settings.get_option("secondary_metabolite_radius"),p=function(e,n){var i=20,r=13;return n&&(r=null===e?u:t.reaction_size(e),isNaN(r)&&(r=u),i=2*r),{width:i,height:r}},m=function(e,t,n,i){var r=t||n>0?e.height:0;return(i?f:b)+r+10};e.selectAll(".segment").datum(function(){return this.parentNode.__data__}).style("visibility",function(e){var t=i[e.from_node_id],n=i[e.to_node_id];return d&&("metabolite"===n.node_type&&!n.node_is_primary||"metabolite"===t.node_type&&!t.node_is_primary)?"hidden":null}).attr("d",function(e){if(null===e.from_node_id||null===e.to_node_id)return null;var t=i[e.from_node_id],n=i[e.to_node_id],r=e.b1,o=e.b2;if("metabolite"===t.node_type){var a=p(e.data,l),s=m(a,e.reversibility,e.from_node_coefficient,t.node_is_primary),u=null===r?n:r;t=g(s,t,u,"start")}if("metabolite"==n.node_type){var a=p(e.data,l),s=m(a,e.reversibility,e.to_node_coefficient,n.node_is_primary),u=null===o?t:o;n=g(s,u,n,"end")}var c="M"+t.x+","+t.y+" ";return null!==r&&null!==o&&(c+="C"+r.x+","+r.y+" "+o.x+","+o.y+" "),c+=n.x+","+n.y}).style("stroke",function(e){var i=this.parentNode.parentNode.__data__.bigg_id;if(_&&null!==n&&!(i in n.reactions))return"red";if(s){var r=e.data;return null===r?c:t.reaction_color(r)}return null}).style("stroke-width",function(e){if(l){var n=e.data;return null===n?u:t.reaction_size(n)}return null});var h=e.select(".arrowheads").selectAll(".arrowhead").data(function(e){var t=[],n=i[e.from_node_id],r=e.b1,o=i[e.to_node_id],a=e.b2;if(d&&("metabolite"===o.node_type&&!o.node_is_primary||"metabolite"===n.node_type&&!n.node_is_primary))return t;if("metabolite"===n.node_type&&(e.reversibility||e.from_node_coefficient>0)){var s=p(e.data,l),u=m(s,e.reversibility,e.from_node_coefficient,n.node_is_primary),c=null===r?o:r,_=v.to_degrees(v.get_angle([n,c]))+90,f=g(u,n,c,"start");t.push({data:e.data,x:f.x,y:f.y,size:s,rotation:_,show_arrowhead_flux:e.from_node_coefficient<0===e.reverse_flux||0===e.data})}if("metabolite"===o.node_type&&(e.reversibility||e.to_node_coefficient>0)){var s=p(e.data,l),u=m(s,e.reversibility,e.to_node_coefficient,o.node_is_primary),c=null===a?n:a,_=v.to_degrees(v.get_angle([o,c]))+90,f=g(u,c,o,"end");t.push({data:e.data,x:f.x,y:f.y,size:s,rotation:_,show_arrowhead_flux:e.to_node_coefficient<0===e.reverse_flux||0===e.data})}if(e.unconnected_segment_with_arrow){var s=p(e.data,l),c=o,_=v.to_degrees(v.get_angle([n,c]))+90;t.push({data:e.data,x:n.x,y:n.y,size:s,rotation:_,show_arrowhead_flux:e.to_node_coefficient<0===e.reverse_flux||0===e.data})}return t});h.enter().append("path").classed("arrowhead",!0).merge(h).attr("d",function(e){return"M"+[-e.size.width/2,0]+" L"+[0,e.size.height]+" L"+[e.size.width/2,0]+" Z"}).attr("transform",function(e){return"translate("+e.x+","+e.y+")rotate("+e.rotation+")"}).style("fill",function(e){if(s){if(e.show_arrowhead_flux){var n=e.data;return null===n?c:t.reaction_color(n)}return"#FFFFFF"}return null}).style("stroke",function(e){if(s){var n=e.data;return null===n?c:t.reaction_color(n)}return null}),h.exit().remove();var y=e.select(".stoichiometry-labels").selectAll(".stoichiometry-label").data(function(e){var t=[],n=i[e.from_node_id],r=e.b1,o=i[e.to_node_id],a=e.b2;if(d&&("metabolite"==o.node_type&&!o.node_is_primary||"metabolite"==n.node_type&&!n.node_is_primary))return t;if("metabolite"===n.node_type&&1!=Math.abs(e.from_node_coefficient)){var s=p(e.data,l),u=1.5*m(s,!1,0,o.node_is_primary),c=null===r?o:r;c=v.c_plus_c(c,v.rotate_coords(c,.5,n));var _=g(u,n,c,"start");_=v.c_plus_c(_,{x:0,y:7}),t.push({coefficient:Math.abs(e.from_node_coefficient),x:_.x,y:_.y,data:e.data})}if("metabolite"===o.node_type&&1!==Math.abs(e.to_node_coefficient)){var s=p(e.data,l),u=1.5*m(s,!1,0,o.node_is_primary),c=null===a?n:a;c=v.c_plus_c(c,v.rotate_coords(c,.5,o));var _=g(u,c,o,"end");_=v.c_plus_c(_,{x:0,y:7}),t.push({coefficient:Math.abs(e.to_node_coefficient),x:_.x,y:_.y,data:e.data})}return t});y.enter().append("text").attr("class","stoichiometry-label").attr("text-anchor","middle").merge(y).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).text(function(e){return e.coefficient}).style("fill",function(e){if(s){var n=e.data;return null===n?c:t.reaction_color(n)}return null}),y.exit().remove(),this.callback_manager.run("update_segment",this,e)}function d(e){var t=e.append("g").attr("id",function(e){return e.bezier_id}).attr("class",function(e){return"bezier"});return t.append("path").attr("class","connect-line"),t.append("circle").attr("class",function(e){return"bezier-circle "+e.bezier}).style("stroke-width",String(1)+"px").attr("r",String(7)+"px"),this.callback_manager.run("create_bezier",this,e),t}function f(e,t,n,i,r,o,a){var l=this.settings.get_option("hide_secondary_metabolites");if(!t)return void e.attr("visibility","hidden");e.attr("visibility","visible"),e.style("visibility",function(e){var t=a[e.reaction_id].segments[e.segment_id],n=o[t.from_node_id],i=o[t.to_node_id];return l&&("metabolite"==i.node_type&&!i.node_is_primary||"metabolite"==n.node_type&&!n.node_is_primary)?"hidden":null}),e.select(".bezier-circle").call(this.behavior.turn_off_drag).call(n).on("mouseover",i).on("mouseout",r).attr("transform",function(e){return null==e.x||null==e.y?"":"translate("+e.x+","+e.y+")"}),e.select(".connect-line").attr("d",function(e){var t,n=a[e.reaction_id].segments[e.segment_id];return t="b1"==e.bezier?o[n.from_node_id]:o[n.to_node_id],null==e.x||null==e.y||null==t.x||null==t.y?"":"M"+e.x+", "+e.y+" "+t.x+","+t.y}),this.callback_manager.run("update_bezier",this,e)}function b(e,t,n){var i=e.append("g").attr("class","node").attr("id",function(e){return"n"+e.node_id});return i.append("circle").attr("class",function(e){var t="node-circle";return null!==e.node_type&&(t+=" "+e.node_type+"-circle"),t}),i.filter(function(e){return"metabolite"===e.node_type}).append("text").attr("class","node-label label"),this.callback_manager.run("create_node",this,e),i}function p(e,t,n,i,r,o,a,l,s){function u(e,t){return"metabolite"===e.node_type&&t&&!e.node_is_primary}var c=this.settings.get_option("hide_secondary_metabolites"),_=this.settings.get_option("primary_metabolite_radius"),d=this.settings.get_option("secondary_metabolite_radius"),f=this.settings.get_option("marker_radius"),b=this.settings.get_option("hide_all_labels"),p=this.settings.get_option("identifiers_on_map"),m=this.settings.get_option("metabolite_styles"),h={color:this.settings.get_option("metabolite_no_data_color"),size:this.settings.get_option("metabolite_no_data_size")},g=this.behavior.label_mousedown,v=this.behavior.label_mouseover,y=this.behavior.label_mouseout,x=(this.behavior.label_touch,e.select(".node-circle").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("visibility",function(e){return u(e,c)?"hidden":null}).attr("r",function(e){if("metabolite"===e.node_type){if(n&&-1!==m.indexOf("size")){var i=e.data;return null===i?h.size:t.metabolite_size(i)}return e.node_is_primary?_:d}return f}).style("fill",function(e){if("metabolite"===e.node_type){if(n&&-1!==m.indexOf("color")){var i=e.data;return null===i?h.color:t.metabolite_color(i)}return null}return null}).call(this.behavior.turn_off_drag).call(l).on("mousedown",i).on("click",r).on("mouseover",o).on("mouseout",a),e.select(".node-label").attr("visibility",b?"hidden":"visible"));b||x.style("visibility",function(e){return u(e,c)?"hidden":null}).attr("transform",function(e){return"translate("+e.label_x+","+e.label_y+")"}).text(function(e){var t=e[p];return n&&-1!==m.indexOf("text")&&(t+=" "+e.data_string),t}).call(this.behavior.turn_off_drag).call(s).on("mousedown",g).on("mouseover",function(e){v("node_label",e)}).on("mouseout",y),this.callback_manager.run("update_node",this,e)}function m(e){var t=e.append("g").attr("id",function(e){return"l"+e.text_label_id}).attr("class","text-label");return t.append("text").attr("class","label"),this.callback_manager.run("create_text_label",this,e),t}function h(e){var t=this.behavior.text_label_mousedown,n=this.behavior.text_label_click,i=this.behavior.selectable_drag,r=this.behavior.turn_off_drag;e.select(".label").text(function(e){return e.text}).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).on("mousedown",t).on("click",n).call(r).call(i),this.callback_manager.run("update_text_label",this,e)}function g(e,t,n,i){v.check_undefined(arguments,["reaction_arrow_displacement","start","end","displace"]);var r,o,a=e,l=v.distance(t,n);return a&&l||console.error("Bad value"),"start"===i?(r=t.x+a*(n.x-t.x)/l,o=t.y+a*(n.y-t.y)/l):"end"===i?(r=n.x-a*(n.x-t.x)/l,o=n.y-a*(n.y-t.y)/l):console.error("bad displace value: "+i),{x:r,y:o}}var v=n(1),y=n(14),x=n(10),w=n(17).format,k=(n(0).select,v.make_class());k.prototype={init:i,create_reaction:a,update_reaction:l,create_bezier:d,update_bezier:f,create_node:b,update_node:p,create_text_label:m,update_text_label:h,create_membrane:r,update_membrane:o,create_reaction_label:s,update_reaction_label:u,create_segment:c,update_segment:_},e.exports=k},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(19);n(58);var l=function(e){function t(n){i(this,t);var o=r(this,e.call(this,n));return o.setWrapperRef=o.setWrapperRef.bind(o),o.handleClickOutside=o.handleClickOutside.bind(o),o}return o(t,e),t.prototype.componentWillMount=function(){this.setState({visible:!1})},t.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.handleClickOutside)},t.prototype.setWrapperRef=function(e){this.wrapperRef=e},t.prototype.handleClickOutside=function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.setState({visible:!1})},t.prototype.handleKeyDown=function(e){13===e.keyCode||40===e.keyCode?this.onClick():27===e.keyCode&&this.setState({visible:!1})},t.prototype.onClick=function(){this.setState({visible:!this.state.visible})},t.prototype.render=function(){var e=this;return(0,a.h)("li",{className:"dropdown"},(0,a.h)("div",{className:"dropdownButton",tabindex:"0",ref:this.setWrapperRef,onClick:function(){return e.onClick()},onKeyDown:function(t){return e.handleKeyDown(t)}},this.props.name+" ",(0,a.h)("b",{class:"caret"})),(0,a.h)("ul",{className:"menu",style:this.state.visible?{display:"block"}:{display:"none"},id:"true"===this.props.rightMenu?"rightMenu":""},this.props.children.map(function(e){return"divider"===e.attributes.name?(0,a.h)("li",{style:{height:"1px",backgroundColor:"#e5e5e5",padding:"0",margin:"8px 0"}}):e})))},t}(a.Component);t.default=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(19);n(58),n(136);var l=n(2),s=function(e){function t(n){i(this,t);var o=r(this,e.call(this,n));return o.state={disabled:l.contains(n.disabledButtons,n.name)},o}return o(t,e),t.prototype.handleFileInput=function(e){var t=this,n=new window.FileReader;n.onload=function(e){t.props.onClick(JSON.parse(e.target.result))},void 0!==e&&n.readAsText(e)},t.prototype.render=function(){var e=this;return"load"===this.props.type?(0,a.h)("label",{className:"menuButton",tabindex:this.state.disabled?"-1":"0",id:this.state.disabled?"disabled":""},(0,a.h)("input",{type:"file",onChange:function(t){return e.handleFileInput(t.target.files[0])},disabled:this.state.disabled}),this.props.name):void 0!==this.props.modeName&&this.props.mode===this.props.modeName?(0,a.h)("li",{className:"menuButton",tabindex:this.state.disabled?"-1":"0",onClick:this.props.onClick,id:this.state.disabled?"disabled":""},(0,a.h)("i",{className:"fa fa-check","aria-hidden":"true"}," "),this.props.name):(0,a.h)("li",{className:"menuButton",tabindex:this.state.disabled?"-1":"0",onClick:this.state.disabled?null:this.props.onClick,id:this.state.disabled?"disabled":""},this.props.name)},t}(a.Component);t.default=s},function(e,t,n){"use strict";function i(e,t){var n=e.append("select").attr("id","quick-jump-menu").attr("class","form-control");this.selector=n;var i=a.parse_url_components(window),r="map_name"in i?i.map_name:null,o="quick_jump_path"in i?i.quick_jump_path:null,l="quick_jump"in i?i.quick_jump:[],s=["— Jump to map —"].concat(l);null!==r&&(s=s.filter(function(e){return e!=r}));var u=function(e){t(e,o,function(t){t?this.replace_state_for_map_name(e):this.reset_selection()}.bind(this))}.bind(this);if(s.length>1){var c=n.selectAll("option").data(s);c.enter().append("option").merge(c).text(function(e){return e.split(".").slice(-1)[0]}),n.on("change",function(){var e=this.options[this.selectedIndex].__data__;u(e)})}else n.style("display","none")}function r(){this.selector.node().selectedIndex=0}function o(e){var t=window.location.href.replace(/(map_name=)([^&]+)(&|$)/,"$1"+e+"$3");window.history.replaceState("Not implemented","",t)}var a=n(1),l=a.make_class();l.prototype={init:i,reset_selection:r,replace_state_for_map_name:o},e.exports=l},function(e,t,n){"use strict";function i(){this.x=a(),this.y=a(),this.x_size=a(),this.y_size=a(),this.size=a(),this.reaction_color=a().clamp(!0),this.reaction_size=a().clamp(!0),this.metabolite_color=a().clamp(!0),this.metabolite_size=a().clamp(!0),this.scale_path=function(e){var t=this.x,n=this.y,i=l(".2f"),e=e.replace(/(M|L)([0-9-.]+),?\s*([0-9-.]+)/g,function(e,r,o,a){return r+[i(t(parseFloat(o))),i(n(parseFloat(a)))].join(", ")}),r=/C([0-9-.]+),?\s*([0-9-.]+)\s*([0-9-.]+),?\s*([0-9-.]+)\s*([0-9-.]+),?\s*([0-9-.]+)/g;return e=e.replace(r,function(e,r,o,a,l,s,u){return"C"+i(t(parseFloat(r)))+","+i(n(parseFloat(o)))+" "+i(t(parseFloat(a)))+","+i(n(parseFloat(l)))+" "+[i(t(parseFloat(s)))+","+i(n(parseFloat(u)))]})}.bind(this),this.scale_decimals=function(e,t,n){var i=l("."+String(n)+"f");return e=e.replace(/([0-9.]+)/g,function(e,n){return i(t(parseFloat(n)))})}}function r(e,t,n){function i(e,t){var n=e.map(function(e){var n;if(e.type in t)n=t[e.type];else{if("value"!=e.type)throw new Error("Bad domain type "+e.type);n=e.value}return{v:n,color:e.color,size:e.size}}).sort(function(e,t){return e.v-t.v});return{domain:n.map(function(e){return e.v}),color_range:n.map(function(e){return e.color}),size_range:n.map(function(e){return e.size})}}var r=function(e){var t=i(e,n().reaction);this.reaction_color.domain(t.domain),this.reaction_size.domain(t.domain),this.reaction_color.range(t.color_range),this.reaction_size.range(t.size_range)}.bind(this),o=function(e){var t=i(e,n().metabolite);this.metabolite_color.domain(t.domain),this.metabolite_size.domain(t.domain),this.metabolite_color.range(t.color_range),this.metabolite_size.range(t.size_range)}.bind(this);e.streams.reaction_scale.onValue(r),e.streams.metabolite_scale.onValue(o),t.callback_manager.set("calc_data_stats__reaction",function(t){t&&r(e.get_option("reaction_scale"))}),t.callback_manager.set("calc_data_stats__metabolite",function(t){t&&o(e.get_option("metabolite_scale"))})}var o=n(1),a=n(43).scaleLinear,l=n(17).format,s=o.make_class();s.prototype={init:i,connect_to_settings:r},e.exports=s},function(e,t,n){"use strict";function i(e,t,n,i){var r="grad"+t+this.unique_string;this.w=400,this.h=30,this.x=20,this.input_width=90,this.input_height=24;var o=e.append("div").attr("class","scale-editor");this.data_not_loaded=o.append("div").attr("class","data-not-loaded").text(("reaction"===t?"Reaction and gene":"Metabolite")+" data not loaded"),this.input_label_group=o.append("div").attr("class","input-label-group");var a=o.append("div").style("top",3*this.input_height+56+10+"px").attr("class","no-data");a.append("span").text("Styles for "+t+"s with no data").attr("class","no-data-heading"),this.no_data_container=a.append("div");var l=o.append("div").attr("class","centered");this.add_group=l.append("div"),this.trash_group=l.append("div").attr("class","trash-container");var s=l.append("svg").attr("class","scale-svg");this.input_group=l.append("div").attr("class","input-container"),this.gradient=s.append("defs").append("linearGradient").attr("id",r),s.append("rect").attr("class","rect").attr("fill","url(#"+r+")").attr("width",this.w+"px").attr("height",this.h+"px").attr("x",this.x+"px"),this.pickers_group=s.append("g"),this.type=t,this.settings=n,this.get_data_statistics=i;var u=this.settings.get_option("unique_map_id");this.unique_string=null===u?"":"."+u,this.no_data={},["color","size"].forEach(function(e){this.no_data[e]=null,this.settings.streams[this.type+"_no_data_"+e].onValue(function(t){this.no_data[e]=t,this.update_no_data()}.bind(this))}.bind(this)),this.settings.streams[t+"_scale"].onValue(function(e){this.scale=e,this.update()}.bind(this))}function r(){var e=this.scale,t=this.get_data_statistics()[this.type],n=this.x,i=this._data_not_loaded();i&&(e=[{type:"min",color:null,size:null},{type:"max",color:null,size:null}],t={min:0,max:1});var r=s().domain([0,this.w]).range([t.min,t.max]),o=s().domain([0,this.w]).range([0,t.max-t.min]),a=function(e,t){this.input_group.selectAll(".input-set").each(function(t){_(this).classed("selected-set",e===t)})}.bind(this),l=function(e){return"value"===e.type?e.value:t[e.type]},f=function(e){this.settings.set_conditional(this.type+"_scale",e),this.scale=e,this.update()}.bind(this),b=e.map(function(e){return{frac:t.max===t.min?"min"===e.type?0:-1:(l(e)-t.min)/(t.max-t.min),color:e.color}}).filter(function(e){return e.frac>=0&&e.frac<=1}).sort(function(e,t){return e.frac-t.frac}),p=this.gradient.selectAll("stop").data(b);p.enter().append("stop").merge(p).attr("offset",function(e){return 100*e.frac+"%"}).style("stop-color",function(e){return null===e.color?"#F1ECFA":e.color}),p.exit().remove(),this.data_not_loaded.style("visibility",i?null:"hidden");var m=this.w,h=0,g=e.sort(function(e,t){return l(e)-l(t)}).map(function(e,i){var o,a=l(e);return o="value"===e.type&&a<=t.min?r.invert(t.min)-7+n-16:"value"===e.type&&a>=t.max?r.invert(t.max)-7+n+16:r.invert(a)-7+n,"min"!==e.type&&"max"!==e.type&&(o=Math.min(Math.max(o,h+16),m-2)),h=o,Object.assign({},e,{adjusted_x:o})}.bind(this)),v=this.pickers_group.selectAll(".picker").data(g),y=c().on("start",a).on("drag",function(n,i){-1===["value","min","max"].indexOf(e[i].type)&&(e[i].value=l(n),e[i].type="value");var r=e[i].value+o(d.event.dx),a=o(16);r>t.max-a&&(r=t.max-a),r<t.min+a&&(r=t.min+a),r=Math.floor(100*r)/100,e[i].value=r,this.settings.set_conditional(this.type+"_scale",e),this.scale=e,this.update()}.bind(this));v.enter().append("g").attr("class","picker").style("cursor","pointer").append("rect").merge(v).select("rect").attr("x",function(e,t){return e.adjusted_x}).attr("width","14px").attr("height","35px").call(y),v.exit().remove();var x=this.trash_group.selectAll("span").data(g);x.enter().append("span").merge(x).attr("class",function(e,t){return"min"===e.type||"max"===e.type?null:"trash glyphicon glyphicon-trash"}).style("left",function(e){return e.adjusted_x+"px"}).on("click",function(t,n){"min"!==t.type&&"max"!==t.type&&(e=e.slice(0,n).concat(e.slice(n+1)),this.settings.set_conditional(this.type+"_scale",e),this.scale=e,this.update())}.bind(this)),x.exit().remove();var w=this.add_group.selectAll(".add").data(["add"]);w.enter().append("span").attr("class","add glyphicon glyphicon-plus").merge(w).on("click",function(n){if(!i){for(var r=(t.max+t.min)/2,a=o(16),s=0,u=0,c=e.length;u<c;u++){var _=l(e[u]);Math.abs(_-r)<a&&(r+=a,r>t.max-a&&(r=t.max-a),r<t.min+a&&(r=t.min+a)),r>_&&(s=u)}e.push({type:"value",value:r,color:e[s].color,size:e[s].size}),f(e)}}.bind(this)),w.exit().remove();var k=this.input_label_group.selectAll(".row-label").data(["Value:","Color:","Size:"]);k.enter().append("div").attr("class","row-label").style("height",this.input_height+"px").style("line-height",this.input_height+"px").merge(k).style("top",function(e,t){return 56+t*this.input_height+"px"}.bind(this)).text(function(e){return e}),k.exit().remove();var M=this.input_group.selectAll(".input-set").data(g),A=M.enter().append("div").attr("class","input-set");A.append("input").attr("class","domain-input").style("width",this.input_width+"px"),A.append("select").attr("class","domain-type-picker"),A.append("input").attr("class","color-input").style("width",this.input_width+"px"),A.append("input").attr("type","color").style("visibility",function(){return"text"==this.type?"hidden":null}).attr("class","color-picker"),A.append("input").attr("class","size-input").style("width",this.input_width+"px");var E=A.merge(M);E.style("height",3*this.input_height+"px").style("width",this.input_width+"px").style("left",function(e){var t=e.adjusted_x;return t+this.input_width>this.w+this.x&&(t=t-this.input_width+7),t+"px"}.bind(this)).on("mousedown",a);var P=u(".4g");E.select(".domain-input").style("height",this.input_height+"px").each(function(e,t){"value"==e.type?(this.value=l(e),this.disabled=!1):(this.value=e.type+" ("+P(l(e))+")",this.disabled=!0)}).on("change",function(t,n){var i=(o(16),parseFloat(this.value));e[n].value=i,f(e)});var j=E.select(".domain-type-picker"),O=["value"].concat(Object.keys(t)).filter(function(e){return"min"!==e&&"max"!==e}),C=j.selectAll("option").data(O);C.enter().append("option").merge(C).attr("value",function(e){return e}).text(function(e){return e}),C.exit().remove(),j.style("visibility",function(e){return"min"==e.type||"max"==e.type?"hidden":null}).style("left",this.input_width-20+"px").style("width","20px").each(function(e,t){var n=0;_(this).selectAll("option").each(function(t,i){this.value==e.type&&(n=i)}),this.selectedIndex=n}).on("change",function(n,i){"value"==this.value&&(e[i].value=t[n.type]),e[i].type=this.value,f(e)}),E.select(".color-input").style("height",this.input_height+"px").style("top",this.input_height+"px").each(function(e,t){this.value=null===e.color?"":e.color,this.disabled=null===e.color}).on("change",function(t,n){e[n].color=this.value,f(e)}),E.select(".color-picker").style("left",this.input_width-this.input_height+"px").style("top",this.input_height+"px").style("width",this.input_height+"px").style("height",this.input_height+"px").each(function(e,t){this.value=null===e.color?"#dddddd":e.color,this.disabled=null===e.color}).on("change",function(t,n){e[n].color=this.value,f(e)}),E.select(".size-input").style("height",this.input_height+"px").style("top",2*this.input_height+"px").each(function(e,t){this.value=null===e.size?"":e.size,this.disabled=null===e.size}).on("change",function(t,n){e[n].size=parseFloat(this.value),f(e)}),M.exit().remove()}function o(){var e=this.no_data,t=this._data_not_loaded(),n=this.no_data_container.selectAll(".input-group").data([["color","Color:"],["size","Size:"]]),i=n.enter().append("div").attr("class","input-group");i.append("span"),i.append("input"),i.append("input").attr("type","color").style("visibility",function(e){return"text"===this.type||"color"!==e[0]?"hidden":null}).attr("class","color-picker");var r=i.merge(n);r.select("span").text(function(e){return e[1]}).style("height",this.input_height+"px").style("line-height",this.input_height+"px").style("left",function(e,t){return(40+this.input_width+10)*t+"px"}.bind(this));(function(e){return this.settings.get_option(this.type+"_no_data_"+e)}).bind(this);r.select("input").style("left",function(e,t){return 40+(40+this.input_width+10)*t+"px"}.bind(this)).style("height",this.input_height+"px").style("width",this.input_width+"px").each(function(n){this.value=t?"":e[n[0]],this.disabled=t}).on("change",function(e){var t=d.event.target.value;"size"===e[0]&&(t=parseFloat(t)),this.no_data[e[0]]=t,this.settings.set_conditional(this.type+"_no_data_"+e[0],t),this.update_no_data()}.bind(this)),r.select(".color-picker").style("left",function(e,t){return(40+this.input_width)*(t+1)-this.input_height+"px"}.bind(this)).style("width",this.input_height+"px").style("height",this.input_height+"px").each(function(n,i){this.value=t?"#dddddd":e[n[0]],this.disabled=t}).on("change",function(e,t){var n=d.event.target.value;this.no_data[e[0]]=n,this.settings.set_conditional(this.type+"_no_data_"+e[0],n),this.update_no_data()}.bind(this)),n.exit().remove()}function a(){var e=this.get_data_statistics()[this.type];return null===e.max||null===e.min}var l=n(1),s=(n(26),n(43).scaleLinear),u=n(17).format,c=n(16).drag,_=n(0).select,d=n(0),f=l.make_class();f.prototype={init:i,update:r,update_no_data:o,_data_not_loaded:a},e.exports=f},function(e,t,n){"use strict";function i(e,t,n){var i=e.attr("class","search-container").style("display","none");this.input=i.append("input").attr("class","search-bar");var o=i.append("div").attr("class","btn-group btn-group-sm");o.append("button").attr("class","btn btn-default").on("click",this.previous.bind(this)).append("span").attr("class","glyphicon glyphicon-chevron-left"),o.append("button").attr("class","btn btn-default").on("click",this.next.bind(this)).append("span").attr("class","glyphicon glyphicon-chevron-right"),this.counter=i.append("div").attr("class","search-counter"),i.append("button").attr("class","btn btn-sm btn-default close-button").on("click",function(){this.toggle(!1)}.bind(this)).append("span").attr("class","glyphicon glyphicon-remove"),this.callback_manager=new _,this.selection=i,this.map=n,this.search_index=t,this.current=1,this.results=null;var a=function(e){this.current=1,this.results=r(this.search_index.find(e.value)),this.update()}.bind(this,this.input.node());this.input.on("input",c.debounce(a,200))}function r(e){return d.uniq(e,function(e){var t=b[e.type];return t[0]+e[t[1]]})}function o(){return"none"!==this.selection.style("display")}function a(e){this.is_active=void 0===e?!this.is_active:e,this.is_active?(this.selection.style("display",null),this.counter.text(""),this.input.node().value="",this.input.node().focus(),this.clear_escape=this.map.key_manager.add_escape_listener(function(){this.toggle(!1)}.bind(this),!0),this.clear_next=this.map.key_manager.add_key_listener(["enter","ctrl+g"],function(){this.next()}.bind(this),!1),this.clear_previous=this.map.key_manager.add_key_listener(["shift+enter","shift+ctrl+g"],function(){this.previous()}.bind(this),!1),this.callback_manager.run("show")):(this.map.highlight(null),this.selection.style("display","none"),this.results=null,this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.clear_next&&this.clear_next(),this.clear_next=null,this.clear_previous&&this.clear_previous(),this.clear_previous=null,this.callback_manager.run("hide"))}function l(){if(null===this.results)this.counter.text(""),this.map.highlight(null);else if(0===this.results.length)this.counter.text("0 / 0"),this.map.highlight(null);else{this.counter.text(this.current+" / "+this.results.length);var e=this.results[this.current-1];if("reaction"==e.type)this.map.zoom_to_reaction(e.reaction_id),this.map.highlight_reaction(e.reaction_id);else if("metabolite"==e.type)this.map.zoom_to_node(e.node_id),this.map.highlight_node(e.node_id);else{if("text_label"!=e.type)throw new Error("Bad search index data type: "+e.type);this.map.zoom_to_text_label(e.text_label_id),this.map.highlight_text_label(e.text_label_id)}}}function s(){null!==this.results&&(this.current===this.results.length?this.current=1:this.current+=1,this.update())}function u(){null!==this.results&&(1===this.current?this.current=this.results.length:this.current-=1,this.update())}var c=n(1),_=n(10),d=n(2),f=c.make_class();f.prototype={init:i,is_visible:o,toggle:a,update:l,next:s,previous:u},e.exports=f;var b={metabolite:["m","node_id"],reaction:["r","reaction_id"],text_label:["t","text_label_id"]}},function(e,t,n){"use strict";function i(e,t,n,i){this.sel=e,this.settings=t,this.draw=!1;var r=this.settings.get_option("unique_map_id");this.unique_string=null===r?"":"."+r;var o=e.append("div").attr("class","settings-box-background").style("display","none"),a=o.append("div").attr("class","settings-box-container").style("display","none");a.append("button").attr("class","btn btn-sm btn-default settings-button").on("click",function(){this.accept_changes()}.bind(this)).append("span").attr("class","glyphicon glyphicon-ok"),a.append("button").attr("class","btn btn-sm btn-default settings-button settings-button-close").on("click",function(){this.abandon_changes()}.bind(this)).append("span").attr("class","glyphicon glyphicon-remove");var l=a.append("div").attr("class","settings-box");l.append("div").text("Tip: Hover over an option to see more details about it.").classed("settings-tip",!0),l.append("hr"),l.append("div").text("View and build options").attr("class","settings-section-heading-large"),this.view_gui(l.append("div")),l.append("hr"),l.append("div").text("Reactions").attr("class","settings-section-heading-large");var s=new f(l.append("div"),"reaction",this.settings,n.get_data_statistics.bind(n));n.callback_manager.set("calc_data_stats__reaction",function(e){e&&(s.update(),s.update_no_data())}),l.append("div").text("Reaction or Gene data").attr("class","settings-section-heading"),this.style_gui(l.append("div"),"reaction",function(e){i&&(i("reaction",e),s.update(),s.update_no_data())}),l.append("hr"),l.append("div").text("Metabolites").attr("class","settings-section-heading-large");var u=new f(l.append("div"),"metabolite",this.settings,n.get_data_statistics.bind(n));n.callback_manager.set("calc_data_stats__metabolite",function(e){e&&(u.update(),u.update_no_data())}),l.append("div").text("Metabolite data").attr("class","settings-section-heading"),this.style_gui(l.append("div"),"metabolite",function(e){i&&(i("metabolite",e),u.update(),u.update_no_data())}),this.callback_manager=new d,this.map=n,this.selection=a,this.background=o}function r(){return"none"!=this.selection.style("display")}function o(e){void 0===e&&(e=!this.is_visible()),e?(this.hold_changes(),this.selection.style("display","inline-block"),this.background.style("display","block"),this.selection.select("input").node().focus(),this.clear_escape=this.map.key_manager.add_escape_listener(function(){this.abandon_changes()}.bind(this),!0),this.clear_enter=this.map.key_manager.add_enter_listener(function(){this.accept_changes()}.bind(this),!0),this.callback_manager.run("show")):(this.draw&&this.map.draw_everything(),this.selection.style("display","none"),this.background.style("display","none"),this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.clear_enter&&this.clear_enter(),this.clear_enter=null,this.callback_manager.run("hide"))}function a(){this.settings.hold_changes()}function l(){this.draw=!1,this.settings.abandon_changes(),this.toggle(!1)}function s(){this.sel.selectAll("input").each(function(e){this.blur()}),this.draw=!0,this.settings.accept_changes(),this.toggle(!1)}function u(e,t,n){var i=e.append("table").attr("class","settings-table"),r=this.settings;i.append("tr").call(function(e){e.append("td").text("Options:").attr("class","options-label").attr("title","Options for "+t+" data.");var i=e.append("td"),o=[["Absolute value","abs","If checked, use the absolute value when calculating colors and sizes of "+t+"s on the map"],["Size","size","If checked, then size the "+("metabolite"==t?"radius of metabolite circles ":"thickness of reaction lines ")+"according to the value of the "+t+" data"],["Color","color","If checked, then color the "+("metabolite"==t?"metabolite circles ":"reaction lines ")+"according to the value of the "+t+" data"],["Text (Show data in label)","text","If checked, then show data values in the "+t+" labels"]],a=i.selectAll(".option-group").data(o),l=a.enter().append("label").attr("class","option-group"),s=function(){var e=[];return i.selectAll("input").each(function(t){this.checked&&e.push(t[1])}),e};l.append("input").attr("type","checkbox").on("change",function(e){r.set_conditional(t+"_styles",s()),"abs"==e[1]&&n(this.checked)}).each(function(e){r.streams[t+"_styles"].onValue(function(t){this.checked=-1!=t.indexOf(e[1])}.bind(this))}),l.append("span").text(function(e){return e[0]}).attr("title",function(e){return e[2]})}),i.append("tr").call(function(e){e.append("td").text("Comparison:").attr("class","options-label").attr("title","The function that will be used to compare datasets, when paired data is loaded");var n=e.append("td").attr("title","The function that will be used to compare datasets, when paired data is loaded"),i=[["Fold Change","fold"],["Log2(Fold Change)","log2_fold"],["Difference","diff"]],o=n.selectAll(".option-group").data(i),a=o.enter().append("label").attr("class","option-group");a.append("input").attr("type","radio").attr("name",t+"_compare_style"+this.unique_string).attr("value",function(e){return e[1]}).on("change",function(){this.checked&&r.set_conditional(t+"_compare_style",this.value)}).each(function(){r.streams[t+"_compare_style"].onValue(function(e){this.checked=this.value==e}.bind(this))}),a.append("span").text(function(e){return e[0]})}.bind(this)),"reaction"===t&&e.append("table").attr("class","settings-table").attr("title","The function that will be used to evaluate AND connections in gene reaction rules (AND connections generally connect components of an enzyme complex)").append("tr").call(function(e){e.append("td").text("Method for evaluating AND:").attr("class","options-label-wide");var t=e.append("td"),n=[["Mean","mean"],["Min","min"]],i=t.selectAll(".option-group").data(n),o=i.enter().append("label").attr("class","option-group"),a="and_method_in_gene_reaction_rule";o.append("input").attr("type","radio").attr("name",a+this.unique_string).attr("value",function(e){return e[1]}).on("change",function(){this.checked&&r.set_conditional(a,this.value)}).each(function(){r.streams[a].onValue(function(e){this.checked=this.value==e}.bind(this))}),o.append("span").text(function(e){return e[0]})}.bind(this))}function c(e,t,n,i){var r=this.settings;e.append("table").attr("class","settings-table").append("tr").call(function(e){e.attr("title","The identifiers that are show in the reaction, gene, and metabolite labels on the map."),e.append("td").text("Identifiers:").attr("class","options-label");var t=e.append("td"),n=[["ID's","bigg_id"],["Descriptive names","name"]],i=t.selectAll(".option-group").data(n),o=i.enter().append("label").attr("class","option-group"),a="identifiers_on_map";o.append("input").attr("type","radio").attr("name",a+this.unique_string).attr("value",function(e){return e[1]}).on("change",function(){this.checked&&r.set_conditional(a,this.value)}).each(function(){r.streams[a].onValue(function(e){this.checked=this.value==e}.bind(this))}),o.append("span").text(function(e){return e[0]})}.bind(this));var o=[["scroll_behavior","Scroll to zoom (instead of scroll to pan)","If checked, then the scroll wheel and trackpad will control zoom rather than pan.",{zoom:!0,pan:!1}],["hide_secondary_metabolites","Hide secondary metabolites","If checked, then only the primary metabolites will be displayed."],["show_gene_reaction_rules","Show gene reaction rules","If checked, then gene reaction rules will be displayed below each reaction label. (Gene reaction rules are always shown when gene data is loaded.)"],["hide_all_labels","Hide reaction, gene, and metabolite labels","If checked, hide all reaction, gene, and metabolite labels"],["allow_building_duplicate_reactions","Allow duplicate reactions","If checked, then allow duplicate reactions during model building."],["highlight_missing","Highlight reactions not in model","If checked, then highlight in red all the reactions on the map that are not present in the loaded model."],["enable_tooltips","Show tooltips","Show tooltips when hovering over reactions, metabolites, and genes"]],a=e.append("div").attr("class","settings-container").selectAll(".option-group").data(o),l=a.enter().append("label").attr("class","option-group full-line");l.append("input").attr("type","checkbox"),l.append("span");var s=l.merge(a);s.attr("title",function(e){return e[2]}),s.select("input").on("change",function(e){if(e.length>=4){for(var t in e[3])if(e[3][t]==this.checked){r.set_conditional(e[0],t);break}}else r.set_conditional(e[0],this.checked)}).each(function(e){r.streams[e[0]].onValue(function(t){e.length>=4?this.checked=e[3][t]:this.checked=t}.bind(this))}),s.select("span").text(function(e){return e[1]}),a.exit().remove(),e.append("div").style("margin-top","16px").classed("settings-tip",!0).text("Tip: To increase map performance, turn off text boxes (i.e. labels and gene reaction rules).")}var _=n(1),d=n(10),f=n(158),b=_.make_class();b.prototype={init:i,is_visible:r,toggle:o,hold_changes:a,abandon_changes:l,accept_changes:s,style_gui:u,view_gui:c},e.exports=b},function(e,t,n){"use strict";function i(e,t,n){var i=e.append("div").attr("id","text-edit-input");this.placed_div=d(i,t),this.placed_div.hide(),this.input=i.append("input"),this.map=t,this.setup_map_callbacks(t),this.zoom_container=n,this.setup_zoom_callbacks(n),this.is_new=!1}function r(e){e.callback_manager.set("edit_text_label.text_edit_input",function(e,t){this.show(e,t)}.bind(this)),e.callback_manager.set("new_text_label.text_edit_input",function(e){null!==this.active_target&&this._accept_changes(this.active_target.target),this.hide(),this._add_and_edit(e)}.bind(this)),e.callback_manager.set("hide_text_label_editor.text_edit_input",function(){this.hide()}.bind(this))}function o(e){e.callback_manager.set("zoom.text_edit_input",function(){this.active_target&&this._accept_changes(this.active_target.target),this.hide()}.bind(this)),e.callback_manager.set("go_to.text_edit_input",function(){this.active_target&&this._accept_changes(this.active_target.target),this.hide()}.bind(this))}function a(){return this.placed_div.is_visible()}function l(e,t){this.active_target&&this._accept_changes(this.active_target.target),this.active_target={target:e,coords:t},e.each(function(e){this.input.node().value=e.text}.bind(this)),this.placed_div.place(t),this.input.node().focus(),this.clear_escape=this.map.key_manager.add_escape_listener(function(){this._accept_changes(e),this.hide()}.bind(this),!0),this.clear_enter=this.map.key_manager.add_enter_listener(function(e){this._accept_changes(e),this.hide()}.bind(this,e),!0)}function s(){this.is_new=!1,this.placed_div.hide(),this.input.attr("value",""),this.active_target=null,this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.clear_enter&&this.clear_enter(),this.clear_enter=null}function u(e){if(""===this.input.node().value)e.each(function(e){var t={};t[e.text_label_id]=this.map.text_labels[e.text_label_id],this.map.delete_selectable({},t,!0)}.bind(this));else{var t=[];e.each(function(e){this.map.edit_text_label(e.text_label_id,this.input.node().value,!0,this.is_new),t.push(e.text_label_id)}.bind(this))}}function c(e){this.is_new=!0;var t=this.map.new_text_label(e,""),n=this.map.sel.select("#text-labels").selectAll(".text-label").filter(function(e){return e.text_label_id===t});n.select("text").classed("edit-text-cursor",!0),this.show(n,e)}var _=n(1),d=n(33),f=(n(34),_.make_class());f.prototype={init:i,setup_map_callbacks:r,setup_zoom_callbacks:o,is_visible:a,show:l,hide:s,_accept_changes:u,_add_and_edit:c},e.exports=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(19),l=n(1),s=(n(2),{"min-width":"270px","min-height":"100px","border-radius":"2px",border:"1px solid #b58787",padding:"7px","background-color":"#fff","text-align":"left","font-size":"16px","font-family":"sans-serif",color:"#111","box-shadow":"4px 6px 20px 0px rgba(0, 0, 0, 0.4)"}),u={"font-size":"18px","font-weight":"bold"},c={"border-radius":"3px","background-color":"#eee",border:"1px solid #ddd","margin-top":"4px"},_={position:"absolute",top:"4px",right:"4px",color:"#d27066","background-color":"#ffeded","border-radius":"2px","font-size":"14px","text-align":"right",padding:"0px 5px"},d=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.decompartmentalizeCheck=function(e,t){return"metabolite"===t?l.decompartmentalize(e)[0]:e},t.prototype.openBigg=function(){var e=this.props.type,t=this.props.biggId,n="http://bigg.ucsd.edu/",i="gene"===e?n+"search?query="+t:n+"universal/"+e+"s/"+this.decompartmentalizeCheck(t,e);window.open(i)},t.prototype.capitalizeFirstLetter=function(e){return null===e?e:e.charAt(0).toUpperCase()+e.slice(1)},t.prototype.render=function(){var e=this,t=this.decompartmentalizeCheck(this.props.biggId,this.props.type),n="Open "+t+" in BiGG Models.";return(0,a.h)("div",{className:"Tooltip",style:s},(0,a.h)("div",{id:"ID",style:u},this.props.biggId),(0,a.h)("div",{id:"data"},"data: ",this.props.data&&"(nd)"!==this.props.data?this.props.data:"no data"),(0,a.h)("button",{id:"biggIdButton",style:c,onClick:function(){return e.openBigg()}},n),(0,a.h)("div",{id:"typeLabel",style:_},this.capitalizeFirstLetter(this.props.type)))},t}(a.Component);t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n(19),s=function(e){function t(n){i(this,t);var o=r(this,e.call(this,n));return o.state={},o}return o(t,e),t.prototype.componentDidMount=function(){this.props.callbackManager.set("setState",this.setState.bind(this))},t.prototype.render=function(){return(0,l.h)(this.props.TooltipComponent,a({},this.state,{ref:this.props.tooltipRef}))},t}(l.Component);t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i=this;this.div=e.append("div").attr("id","tooltip-container"),this.TooltipComponent=t,this.tooltipRef=null,this.zoomContainer=n,this.setup_zoom_callbacks(n),this.callback_manager=(0,p.default)(),this.div.on("mouseover",this.cancelHideTooltip.bind(this)),this.div.on("mouseleave",this.hide.bind(this)),this.getTooltipSize=null,this.callback_manager.set("attachGetSize",function(e){i.getTooltipSize=e}),this.map=null,this.delay_hide_timeout=null,this.currentTooltip=null,f.default.render((0,d.h)(h.default,{callbackManager:this.callback_manager,TooltipComponent:this.TooltipComponent,tooltipRef:function(e){i.tooltipRef=e}}),this.div.node())}function o(e){this.map=e,this.placed_div=v(this.div,e,void 0,!1),e.callback_manager.set("show_tooltip.tooltip_container",function(t,n){e.settings.get_option("enable_tooltips")&&this.show(t,n)}.bind(this)),e.callback_manager.set("hide_tooltip.tooltip_container",this.hide.bind(this)),e.sel.selectAll("#canvas").on("touchend",this.hide.bind(this)),e.callback_manager.set("delay_hide_tooltip.tooltip_container",this.delay_hide.bind(this)),e.callback_manager.set("update_tooltip.tooltip_container",function(e,t){var n=this;if(null!==this.currentTooltip){var i=null;if(t.each(function(t){t[e.replace("_label","_id")]===n.currentTooltip.id&&(i=t)}),null===i)throw Error("Could not find tooltip data for "+this.currentTooltip);this.show(e,i)}}.bind(this))}function a(e){e.callback_manager.set("zoom.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this)),e.callback_manager.set("go_to.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this))}function l(){return this.placed_div.is_visible()}function s(e,t){if(this.cancelHideTooltip(),!y.contains(["reaction_label","node_label","gene_label"],e))throw new Error("Tooltip not supported for object type "+e);var n=null!==this.tooltipRef&&this.tooltipRef.getSize?this.tooltipRef.getSize():{width:270,height:100};this.currentTooltip={type:e,id:t[e.replace("_label","_id")]};var i=this.zoomContainer.window_translate,r=this.zoomContainer.window_scale,o=null!==this.map?this.map.get_size():{width:1e3,height:1e3};this.getTooltipSize;var a={x:0,y:0};o.width<500?(r*t.label_x+i.x+n.width>o.width&&(a.x=-(r*t.label_x+i.x+n.width-o.width)/r),r*t.label_y+i.y+n.height>o.height-74&&(a.y=-(r*t.label_y+i.y+n.height-o.height+77)/r)):(r*t.label_x+i.x+.5*n.width>o.width?a.x=-n.width/r:r*t.label_x+i.x+n.width>o.width&&(a.x=-(r*t.label_x+i.x+n.width-o.width)/r),r*t.label_y+i.y+.5*n.height>o.height-45?a.y=-n.height/r:r*t.label_y+i.y+n.height>o.height-45&&(a.y=-(r*t.label_y+i.y+n.height-o.height+47)/r));var l={x:t.label_x+a.x,y:t.label_y+10+a.y};this.placed_div.place(l);var s={biggId:t.bigg_id,name:t.name,loc:l,data:t.data_string,type:e.replace("_label","").replace("node","metabolite")};this.callback_manager.run("setState",null,s)}function u(){this.placed_div.hide(),this.currentTooltip=null}function c(){this.delay_hide_timeout=setTimeout(function(){this.hide()}.bind(this),100)}function _(){null!==this.delay_hide_timeout&&clearTimeout(this.delay_hide_timeout)}var d=n(19),f=i(d),b=n(10),p=i(b),m=n(163),h=i(m),g=n(1),v=n(33),y=n(2),x=g.make_class();x.prototype={init:r,setup_map_callbacks:o,setup_zoom_callbacks:a,is_visible:l,show:s,hide:u,delay_hide:c,cancelHideTooltip:_},e.exports=x},function(e,t,n){"use strict";var i=n(1);e.exports=function(e,t){function n(e){return void 0===f&&(f=r.createElement("span"),f.style.visibility="hidden",f.style.position="fixed",f.style.outline="0",f.style.margin="0",f.style.padding="0",f.style.border="0",f.style.left="0",f.style.whiteSpace="pre",f.style.fontSize=t.fontSize,f.style.fontFamily=t.fontFamily,f.style.fontWeight="normal",r.body.appendChild(f)),f.innerHTML=String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f.getBoundingClientRect().right}var r=i.get_document(e),o=i.get_window(e);t=t||{},t.fontSize=t.fontSize||"13px",t.fontFamily=t.fontFamily||"sans-serif",t.promptInnerHTML=t.promptInnerHTML||"",t.color=t.color||"#333",t.hintColor=t.hintColor||"#aaa",t.backgroundColor=t.backgroundColor||"#fff",t.dropDownBorderColor=t.dropDownBorderColor||"#aaa",t.dropDownZIndex=t.dropDownZIndex||"100",t.dropDownOnHoverBackgroundColor=t.dropDownOnHoverBackgroundColor||"#ddd";var a=r.createElement("input");a.type="text",a.spellcheck=!1,a.style.fontSize=t.fontSize,a.style.fontFamily=t.fontFamily,a.style.color=t.color,a.style.backgroundColor=t.backgroundColor,a.style.width="100%",a.style.outline="0",a.style.border="0",a.style.margin="0",a.style.padding="0";var l=a.cloneNode();l.disabled="",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.borderColor="transparent",l.style.boxShadow="none",l.style.color=t.hintColor,a.style.backgroundColor="transparent",a.style.verticalAlign="top",a.style.position="relative";var s=r.createElement("div");s.style.position="relative",s.style.outline="0",s.style.border="0",s.style.margin="0",s.style.padding="0";var u=r.createElement("div");if(u.style.position="absolute",u.style.outline="0",u.style.margin="0",u.style.padding="0",u.style.border="0",u.style.fontSize=t.fontSize,u.style.fontFamily=t.fontFamily,u.style.color=t.color,u.style.backgroundColor=t.backgroundColor,u.style.top="0",u.style.left="0",u.style.overflow="hidden",u.innerHTML=t.promptInnerHTML,u.style.background="transparent",void 0===r.body)throw"thisDocument.body is undefined. The library was wired up incorrectly.";r.body.appendChild(u);var c=u.getBoundingClientRect().right;s.appendChild(u),u.style.visibility="visible",u.style.left="-"+c+"px",s.style.marginLeft=c+"px",s.appendChild(l),s.appendChild(a);var _=r.createElement("div");_.style.position="absolute",_.style.visibility="hidden",_.style.outline="0",_.style.margin="0",_.style.padding="0",_.style.textAlign="left",_.style.fontSize=t.fontSize,_.style.fontFamily=t.fontFamily,_.style.backgroundColor=t.backgroundColor,_.style.zIndex=t.dropDownZIndex,_.style.cursor="default",_.style.borderStyle="solid",_.style.borderWidth="1px",_.style.borderColor=t.dropDownBorderColor,_.style.overflowX="hidden",_.style.whiteSpace="pre",_.style.overflowY="scroll";var d=function(e){var n=[],i=0,a=-1,l=null,s=function(){this.style.outline="1px solid #ddd"},u=function(){this.style.outline="0"},c=function(e){e.preventDefault(),_.onmouseselection(this.id)},_={hide:function(){e.style.visibility="hidden"},refresh:function(a,l){e.style.visibility="hidden",i=0,e.innerHTML="";var d=o.innerHeight||r.documentElement.clientHeight,f=e.parentNode.getBoundingClientRect(),b=f.top-6,p=d-f.bottom-6;n=[];for(var h=0;h<l.length;h++){var g=l[h].matches.filter(function(e){return 0==e.toLowerCase().indexOf(a.toLowerCase())});if(0!=g.length){var v=r.createElement("div");if(v.style.color=t.color,v.onmouseover=s,v.onmouseout=u,v.onmousedown=function(e){e.preventDefault()},v.ondblclick=c,v.__hint=g[0],v.id=l[h].id,v.innerHTML=l[h].html,n.push(v),e.appendChild(v),n.length>=m.display_limit){var y=r.createElement("div");y.innerHTML=" "+(l.length-n.length)+" more",n.push(y),e.appendChild(y);break}}}0!==n.length&&(_.highlight(0),b>3*p?(e.style.maxHeight=b+"px",e.style.top="",e.style.bottom="100%"):(e.style.top="100%",e.style.bottom="",e.style.maxHeight=p+"px"),e.style.visibility="visible")},highlight:function(e){-1!=a&&n[a]&&(n[a].style.backgroundColor=t.backgroundColor),n[e].style.backgroundColor=t.dropDownOnHoverBackgroundColor,a=e,l=n[e]},move:function(t){return"hidden"===e.style.visibility?"":i+t===-1||i+t===n.length?n[i].__hint:(i+=t,_.highlight(i),n[i].__hint)},onmouseselection:function(){},get_current_row:function(){return l}};return _}(_);d.onmouseselection=function(e){m.onEnter(e),m.input.focus()},s.appendChild(_),e.appendChild(s);var f,b,p,m={get_hint:function(e){return e},display_limit:1e3,onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){m.repaint()},startFrom:0,options:[],wrapper:s,input:a,hint:l,dropDown:_,prompt:u,setText:function(e){l.value=e,a.value=e},getText:function(){return a.value},hideDropDown:function(){d.hide()},repaint:function(){var e=a.value,t=m.startFrom,i=m.options,r=i.length,o=e.substring(t);b=e.substring(0,t),l.value="";for(var s=0;s<r;s++){var u=i[s].matches.filter(function(e){return 0==e.toLowerCase().indexOf(o.toLowerCase())});if(0!=u.length){l.value=m.get_hint(u[0]);break}}_.style.left=n(b)+"px",d.refresh(o,m.options)}};!function(e,t){p=e.value;var n=function(){var n=e.value;p!==n&&(p=n,t(n))};e.addEventListener("input",n,!1),e.addEventListener("keyup",n,!1),e.addEventListener("change",n,!1)}(a,function(e){m.onChange(e),m.repaint()});var h=function(e){e=e||o.event;var t=e.keyCode;if(33!=t&&34!=t)if(39!=t&&35!=t&&9!=t){if(13==t){var n=d.get_current_row().id;return void m.onEnter(n)}if(40==t){var i=d.move(1);return""==i&&m.onArrowDown(),void(l.value=m.get_hint(i))}if(38==t){var i=d.move(-1);return""==i&&m.onArrowUp(),l.value=m.get_hint(i),e.preventDefault(),void e.stopPropagation()}l.value=""}else if(9==t&&(e.preventDefault(),e.stopPropagation(),0==l.value.length&&m.onTab()),l.value.length>0){a.value=l.value;var r=p!=a.value;p=a.value,r&&m.onChange(a.value)}};return a.addEventListener("keydown",h,!1),m}},function(e,t,n){"use strict";function i(e,t,n,i,l){var s=o.parse_url_components(window,i),u=function(e){e(null)},c=function(e){e(null)};if(s.map_name){var _=r("map",s.map_name,n,e);_&&(u=function(e){a(_,function(t,n){t&&console.warn(t),e(n)})})}if(s.model_name){var d=r("model",s.model_name,n,t);d&&(c=function(e){a(d,function(t,n){t&&console.warn(t),e(n)})})}s.hasOwnProperty("enable_editing")&&(i.enable_editing="true"===s.enable_editing.toLowerCase()),u(function(e){c(function(t){l(e,t,i)})})}function r(e,t,n,i){var r=n[e+"s"].filter(function(n){return n[e+"_name"]==t});if(0==r.length)throw new Error("Bad "+e+" "+t);return i+encodeURIComponent(r[0].organism)+"/"+encodeURIComponent(r[0][e+"_name"])+".json"}var o=n(1),a=n(18).json;e.exports={load_map_model_from_url:i}},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";n(79)},function(e,t,n){"use strict"},function(e,t,n){"use strict";n(73),n(74),n(167),n(77),n(171),n(80),n(82),n(81)},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t,n){"use strict"},function(e,t,n){"use strict";n(20)},function(e,t,n){"use strict";n(15),n(20),n(35)},function(e,t,n){"use strict"},function(e,t,n){"use strict"},function(e,t,n){"use strict";n(15)},function(e,t,n){"use strict"},function(e,t,n){"use strict"},function(e,t,n){"use strict";n(73),n(15),n(20),n(35)},function(e,t,n){"use strict";n(76)},function(e,t,n){"use strict";n(83)},function(e,t,n){"use strict";function i(e){return{type:e}}function r(){return!p.event.button}function o(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function a(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function l(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function s(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function u(){return _(M)}function c(){return _(A)}function _(e){function t(t){var r=t.property("__brush",E).selectAll(".overlay").data([i("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",P.overlay).merge(r).each(function(){var e=a(this).extent;n.i(p.select)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([i("selection")]).enter().append("rect").attr("class","selection").attr("cursor",P.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var o=t.selectAll(".handle").data(e.handles,function(e){return e.type});o.exit().remove(),o.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return P[e.type]}),t.each(s).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",_)}function s(){var e=n.i(p.select)(this),t=a(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-I/2:t[0][0]-I/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-I/2:t[0][1]-I/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+I:I}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+I:I})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t){return e.__brush.emitter||new c(e,t)}function c(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function _(){function t(){var e=n.i(p.mouse)(B);!Q||R||U||(Math.abs(e[0]-te[0])>Math.abs(e[1]-te[1])?U=!0:R=!0),te=e,F=!0,n.i(v.a)(),i()}function i(){var e;switch(I=te[0]-ee[0],D=te[1]-ee[1],H){case x:case y:G&&(I=Math.max(Y-_,Math.min($-g,I)),d=_+I,E=g+I),V&&(D=Math.max(J-b,Math.min(Z-N,D)),h=b+D,T=N+D);break;case w:G<0?(I=Math.max(Y-_,Math.min($-_,I)),d=_+I,E=g):G>0&&(I=Math.max(Y-g,Math.min($-g,I)),d=_,E=g+I),V<0?(D=Math.max(J-b,Math.min(Z-b,D)),h=b+D,T=N):V>0&&(D=Math.max(J-N,Math.min(Z-N,D)),h=b,T=N+D);break;case k:G&&(d=Math.max(Y,Math.min($,_-I*G)),E=Math.max(Y,Math.min($,g+I*G))),V&&(h=Math.max(J,Math.min(Z,b-D*V)),T=Math.max(J,Math.min(Z,N+D*V)))}E<d&&(G*=-1,e=_,_=g,g=e,e=d,d=E,E=e,q in j&&re.attr("cursor",P[q=j[q]])),T<h&&(V*=-1,e=b,b=N,N=e,e=h,h=T,T=e,q in O&&re.attr("cursor",P[q=O[q]])),X.selection&&(W=X.selection),R&&(d=W[0][0],E=W[1][0]),U&&(h=W[0][1],T=W[1][1]),W[0][0]===d&&W[0][1]===h&&W[1][0]===E&&W[1][1]===T||(X.selection=[[d,h],[E,T]],s.call(B),ne.brush())}function r(){if(n.i(v.b)(),p.event.touches){if(p.event.touches.length)return;z&&clearTimeout(z),z=setTimeout(function(){z=null},500),ie.on("touchmove.brush touchend.brush touchcancel.brush",null)}else n.i(f.dragEnable)(p.event.view,F),oe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ie.attr("pointer-events","all"),re.attr("cursor",P.overlay),X.selection&&(W=X.selection),l(W)&&(X.selection=null,s.call(B)),ne.end()}function o(){switch(p.event.keyCode){case 16:Q=G&&V;break;case 18:H===w&&(G&&(g=E-I*G,_=d+I*G),V&&(N=T-D*V,b=h+D*V),H=k,i());break;case 32:H!==w&&H!==k||(G<0?g=E-I:G>0&&(_=d-I),V<0?N=T-D:V>0&&(b=h-D),H=x,re.attr("cursor",P.selection),i());break;default:return}n.i(v.a)()}function c(){switch(p.event.keyCode){case 16:Q&&(R=U=Q=!1,i());break;case 18:H===k&&(G<0?g=E:G>0&&(_=d),V<0?N=T:V>0&&(b=h),H=w,i());break;case 32:H===x&&(p.event.altKey?(G&&(g=E-I*G,_=d+I*G),V&&(N=T-D*V,b=h+D*V),H=k):(G<0?g=E:G>0&&(_=d),V<0?N=T:V>0&&(b=h),H=w),re.attr("cursor",P[q]),i());break;default:return}n.i(v.a)()}if(p.event.touches){if(p.event.changedTouches.length<p.event.touches.length)return n.i(v.a)()}else if(z)return;if(L.apply(this,arguments)){var _,d,b,h,g,E,N,T,I,D,F,R,U,B=this,q=p.event.target.__data__.type,H="selection"===(p.event.metaKey?q="overlay":q)?y:p.event.altKey?k:w,G=e===A?null:C[q],V=e===M?null:S[q],X=a(B),K=X.extent,W=X.selection,Y=K[0][0],J=K[0][1],$=K[1][0],Z=K[1][1],Q=!1,ee=n.i(p.mouse)(B),te=ee,ne=u(B,arguments).beforestart();"overlay"===q?X.selection=W=[[_=e===A?Y:ee[0],b=e===M?J:ee[1]],[g=e===A?$:_,N=e===M?Z:b]]:(_=W[0][0],b=W[0][1],g=W[1][0],N=W[1][1]),d=_,h=b,E=g,T=N;var ie=n.i(p.select)(B).attr("pointer-events","none"),re=ie.selectAll(".overlay").attr("cursor",P[q]);if(p.event.touches)ie.on("touchmove.brush",t,!0).on("touchend.brush touchcancel.brush",r,!0);else{var oe=n.i(p.select)(p.event.view).on("keydown.brush",o,!0).on("keyup.brush",c,!0).on("mousemove.brush",t,!0).on("mouseup.brush",r,!0);n.i(f.dragDisable)(p.event.view)}n.i(v.b)(),n.i(m.a)(B),s.call(B),ne.start()}}function E(){var t=this.__brush||{selection:null};return t.extent=N.apply(this,arguments),t.dim=e,t}var z,N=o,L=r,T=n.i(d.dispatch)(t,"start","brush","end"),I=6;return t.move=function(t,i){t.selection?t.on("start.brush",function(){u(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){u(this,arguments).end()}).tween("brush",function(){function t(e){o.selection=1===e&&l(_)?null:d(e),s.call(r),a.brush()}var r=this,o=r.__brush,a=u(r,arguments),c=o.selection,_=e.input("function"===typeof i?i.apply(this,arguments):i,o.extent),d=n.i(b.g)(c,_);return c&&_?t:t(1)}):t.each(function(){var t=this,r=arguments,o=t.__brush,a=e.input("function"===typeof i?i.apply(t,r):i,o.extent),c=u(t,r).beforestart();n.i(m.a)(t),o.selection=null==a||l(a)?null:a,s.call(t),c.start().brush().end()})},c.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(i){n.i(p.customEvent)(new g.a(t,i,e.output(this.state.selection)),T.apply,T,[i,this.that,this.args])}},t.extent=function(e){return arguments.length?(N="function"===typeof e?e:n.i(h.a)([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):N},t.filter=function(e){return arguments.length?(L="function"===typeof e?e:n.i(h.a)(!!e),t):L},t.handleSize=function(e){return arguments.length?(I=+e,t):I},t.on=function(){var e=T.on.apply(T,arguments);return e===T?t:e},t}t.d=s,t.b=u,t.c=c;var d=n(21),f=n(16),b=n(6),p=n(0),m=n(115),h=n(184),g=n(185),v=n(186),y={name:"drag"},x={name:"space"},w={name:"handle"},k={name:"center"},M={name:"x",handles:["e","w"].map(i),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},A={name:"y",handles:["n","s"].map(i),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},E={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(i),input:function(e){return e},output:function(e){return e}},P={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},j={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},O={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},C={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},S={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};t.a=function(){return _(E)}},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";t.a=function(e,t,n){this.target=e,this.type=t,this.selection=n}},function(e,t,n){"use strict";function i(){r.event.stopImmediatePropagation()}t.b=i;var r=n(0);t.a=function(){r.event.preventDefault(),r.event.stopImmediatePropagation()}},function(e,t,n){"use strict";t.a=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}},function(e,t,n){"use strict";t.a=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){"use strict";function i(){return{}}function r(e,t,n){e[t]=n}function o(){return n.i(l.a)()}function a(e,t,n){e.set(t,n)}var l=n(36);t.a=function(){function e(t,i,r,o){if(i>=_.length)return null!=s&&t.sort(s),null!=u?u(t):t;for(var a,c,d,f=-1,b=t.length,p=_[i++],m=n.i(l.a)(),h=r();++f<b;)(d=m.get(a=p(c=t[f])+""))?d.push(c):m.set(a,[c]);return m.each(function(t,n){o(h,n,e(t,i,r,o))}),h}function t(e,n){if(++n>_.length)return e;var i,r=d[n-1];return null!=u&&n>=_.length?i=e.entries():(i=[],e.each(function(e,r){i.push({key:r,values:t(e,n)})})),null!=r?i.sort(function(e,t){return r(e.key,t.key)}):i}var s,u,c,_=[],d=[];return c={object:function(t){return e(t,0,i,r)},map:function(t){return e(t,0,o,a)},entries:function(n){return t(e(n,0,o,a),0)},key:function(e){return _.push(e),c},sortKeys:function(e){return d[_.length-1]=e,c},sortValues:function(e){return s=e,c},rollup:function(e){return u=e,c}}}},function(e,t,n){"use strict";function i(){}function r(e,t){var n=new i;if(e instanceof i)e.each(function(e){n.add(e)});else if(e){var r=-1,o=e.length;if(null==t)for(;++r<o;)n.add(e[r]);else for(;++r<o;)n.add(t(e[r],r,e))}return n}var o=n(36),a=o.a.prototype;i.prototype=r.prototype={constructor:i,has:a.has,add:function(e){return e+="",this[o.b+e]=e,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each},t.a=r},function(e,t,n){"use strict";t.a=function(e){var t=[];for(var n in e)t.push(e[n]);return t}},function(e,t,n){"use strict";function i(e){if(e instanceof o)return new o(e.h,e.s,e.l,e.opacity);e instanceof l.b||(e=n.i(l.c)(e));var t=e.r/255,i=e.g/255,r=e.b/255,a=(m*r+b*t-p*i)/(m+b-p),u=r-a,c=(f*(i-a)-_*u)/d,h=Math.sqrt(c*c+u*u)/(f*a*(1-a)),g=h?Math.atan2(c,u)*s.a-120:NaN;return new o(g<0?g+360:g,h,a,e.opacity)}function r(e,t,n,r){return 1===arguments.length?i(e):new o(e,t,n,null==r?1:r)}function o(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}t.a=r;var a=n(38),l=n(37),s=n(87),u=-.14861,c=1.78277,_=-.29227,d=-.90649,f=1.97294,b=f*d,p=f*c,m=c*_-d*u;n.i(a.a)(o,r,n.i(a.b)(l.d,{brighter:function(e){return e=null==e?l.e:Math.pow(l.e,e),new o(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?l.f:Math.pow(l.f,e),new o(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*s.b,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new l.b(255*(t+n*(u*i+c*r)),255*(t+n*(_*i+d*r)),255*(t+n*(f*i)),this.opacity)}}))},function(e,t,n){"use strict";function i(e){if(e instanceof o)return new o(e.l,e.a,e.b,e.opacity);if(e instanceof d){var t=e.h*p.b;return new o(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof b.b||(e=n.i(b.c)(e));var i=u(e.r),r=u(e.g),l=u(e.b),s=a((.4124564*i+.3575761*r+.1804375*l)/m),c=a((.2126729*i+.7151522*r+.072175*l)/h);return new o(116*c-16,500*(s-c),200*(c-a((.0193339*i+.119192*r+.9503041*l)/g)),e.opacity)}function r(e,t,n,r){return 1===arguments.length?i(e):new o(e,t,n,null==r?1:r)}function o(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function a(e){return e>w?Math.pow(e,1/3):e/x+v}function l(e){return e>y?e*e*e:x*(e-v)}function s(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function u(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function c(e){if(e instanceof d)return new d(e.h,e.c,e.l,e.opacity);e instanceof o||(e=i(e));var t=Math.atan2(e.b,e.a)*p.a;return new d(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _(e,t,n,i){return 1===arguments.length?c(e):new d(e,t,n,null==i?1:i)}function d(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}t.b=r,t.a=_;var f=n(38),b=n(37),p=n(87),m=.95047,h=1,g=1.08883,v=4/29,y=6/29,x=3*y*y,w=y*y*y;n.i(f.a)(o,r,n.i(f.b)(b.d,{brighter:function(e){return new o(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new o(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=h*l(e),t=m*l(t),n=g*l(n),new b.b(s(3.2404542*t-1.5371385*e-.4985314*n),s(-.969266*t+1.8760108*e+.041556*n),s(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),n.i(f.a)(d,_,n.i(f.b)(b.d,{brighter:function(e){return new d(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new d(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return i(this).rgb()}}))},function(e,t,n){"use strict";function i(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new r(i)}function r(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function a(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}function l(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=s,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}var s={value:function(){}};r.prototype=i.prototype={constructor:r,on:function(e,t){var n,i=this._,r=o(e+"",i),s=-1,u=r.length;{if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++s<u;)if(n=(e=r[s]).type)i[n]=l(i[n],e.name,t);else if(null==t)for(n in i)i[n]=l(i[n],e.name,null);return this}for(;++s<u;)if((n=(e=r[s]).type)&&(n=a(i[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new r(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,n=i.length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}},t.a=i},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";function i(){return!s.event.button}function r(){return this.parentNode}function o(e){return null==e?{x:s.event.x,y:s.event.y}:e}function a(){return"ontouchstart"in this}var l=n(21),s=n(0),u=n(88),c=n(89),_=n(195),d=n(197);t.a=function(){function e(e){e.on("mousedown.drag",t).filter(a).on("touchstart.drag",p).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",h).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(){if(!w&&k.apply(this,arguments)){var e=g("mouse",M.apply(this,arguments),s.mouse,this,arguments);e&&(n.i(s.select)(s.event.view).on("mousemove.drag",f,!0).on("mouseup.drag",b,!0),n.i(u.a)(s.event.view),n.i(c.b)(),x=!1,v=s.event.clientX,y=s.event.clientY,e("start"))}}function f(){if(n.i(c.a)(),!x){var e=s.event.clientX-v,t=s.event.clientY-y;x=e*e+t*t>O}E.mouse("drag")}function b(){n.i(s.select)(s.event.view).on("mousemove.drag mouseup.drag",null),n.i(u.b)(s.event.view,x),n.i(c.a)(),E.mouse("end")}function p(){if(k.apply(this,arguments)){var e,t,i=s.event.changedTouches,r=M.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(t=g(i[e].identifier,r,s.touch,this,arguments))&&(n.i(c.b)(),t("start"))}}function m(){var e,t,i=s.event.changedTouches,r=i.length;for(e=0;e<r;++e)(t=E[i[e].identifier])&&(n.i(c.a)(),t("drag"))}function h(){var e,t,i=s.event.changedTouches,r=i.length;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),e=0;e<r;++e)(t=E[i[e].identifier])&&(n.i(c.b)(),t("end"))}function g(t,i,r,o,a){var l,u,c,_=r(i,t),f=P.copy();if(n.i(s.customEvent)(new d.a(e,"beforestart",l,t,j,_[0],_[1],0,0,f),function(){return null!=(s.event.subject=l=A.apply(o,a))&&(u=l.x-_[0]||0,c=l.y-_[1]||0,!0)}))return function b(p){var m,h=_;switch(p){case"start":E[t]=b,m=j++;break;case"end":delete E[t],--j;case"drag":_=r(i,t),m=j}n.i(s.customEvent)(new d.a(e,p,l,t,m,_[0]+u,_[1]+c,_[0]-h[0],_[1]-h[1],f),f.apply,f,[p,o,a])}}var v,y,x,w,k=i,M=r,A=o,E={},P=n.i(l.dispatch)("start","drag","end"),j=0,O=0;return e.filter=function(t){return arguments.length?(k="function"===typeof t?t:n.i(_.a)(!!t),e):k},e.container=function(t){return arguments.length?(M="function"===typeof t?t:n.i(_.a)(t),e):M},e.subject=function(t){return arguments.length?(A="function"===typeof t?t:n.i(_.a)(t),e):A},e.on=function(){var t=P.on.apply(P,arguments);return t===P?e:t},e.clickDistance=function(t){return arguments.length?(O=(t=+t)*t,e):Math.sqrt(O)},e}},function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,l,s,u){this.target=e,this.type=t,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=a,this.dx=l,this.dy=s,this._=u}t.a=i,i.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return s});var i=n(39),r=n.i(i.a)(","),o=r.parse,a=r.parseRows,l=r.format,s=r.formatRows},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return s});var i=n(39),r=n.i(i.a)("\t"),o=r.parse,a=r.parseRows,l=r.format,s=r.formatRows},function(e,t,n){"use strict";var i=(n(207),n(209),n(204));n.d(t,"a",function(){return i.a});n(208),n(210),n(206),n(203),n(202),n(201),n(205)},function(e,t,n){"use strict";(function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n})(1.70158),function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158)},function(e,t,n){"use strict"},function(e,t,n){"use strict"},function(e,t,n){"use strict";function i(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}t.a=i},function(e,t,n){"use strict";var i=2*Math.PI;(function e(t,n){function r(e){return t*Math.pow(2,10*--e)*Math.sin((o-e)/n)}var o=Math.asin(1/(t=Math.max(1,t)))*(n/=i);return r.amplitude=function(t){return e(t,n*i)},r.period=function(n){return e(t,n)},r})(1,.3),function e(t,n){function r(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+o)/n)}var o=Math.asin(1/(t=Math.max(1,t)))*(n/=i);return r.amplitude=function(t){return e(t,n*i)},r.period=function(n){return e(t,n)},r}(1,.3),function e(t,n){function r(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((o-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((o+e)/n))/2}var o=Math.asin(1/(t=Math.max(1,t)))*(n/=i);return r.amplitude=function(t){return e(t,n*i)},r.period=function(n){return e(t,n)},r}(1,.3)},function(e,t,n){"use strict"},function(e,t,n){"use strict"},function(e,t,n){"use strict";(function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n})(3),function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3)},function(e,t,n){"use strict"},function(e,t,n){"use strict";Math.PI},function(e,t,n){"use strict";function i(e){return r=n.i(l.a)(e),o=r.format,a=r.formatPrefix,r}n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),t.a=i;var r,o,a,l=n(94);i({decimal:".",thousands:",",grouping:[3],currency:["$",""]})},function(e,t,n){"use strict";t.a=function(e,t){e=e.toPrecision(t);e:for(var n,i=e.length,r=1,o=-1;r<i;++r)switch(e[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break e;default:o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(n+1):e}},function(e,t,n){"use strict";t.a=function(e,t){return function(n,i){for(var r=n.length,o=[],a=0,l=e[0],s=0;r>0&&l>0&&(s+l+1>i&&(l=Math.max(1,i-s)),o.push(n.substring(r-=l,r+l)),!((s+=l+1)>i));)l=e[a=(a+1)%e.length];return o.reverse().join(t)}}},function(e,t,n){"use strict";t.a=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}},function(e,t,n){"use strict";var i=n(40);t.a=function(e,t){var r=n.i(i.a)(e,t);if(!r)return e+"";var o=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+o:o.length>a+1?o.slice(0,a+1)+"."+o.slice(a+1):o+new Array(a-o.length+2).join("0")}},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t,n){"use strict";var i=n(27);t.a=function(e){return Math.max(0,-n.i(i.a)(Math.abs(e)))}},function(e,t,n){"use strict";var i=n(27);t.a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n.i(i.a)(t)/3)))-n.i(i.a)(Math.abs(e)))}},function(e,t,n){"use strict";var i=n(27);t.a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n.i(i.a)(t)-n.i(i.a)(e))+1}},function(e,t,n){"use strict";function i(e){return function t(i){function a(t,a){var l=e((t=n.i(r.b)(t)).h,(a=n.i(r.b)(a)).h),s=n.i(o.a)(t.s,a.s),u=n.i(o.a)(t.l,a.l),c=n.i(o.a)(t.opacity,a.opacity);return function(e){return t.h=l(e),t.s=s(e),t.l=u(Math.pow(e,i)),t.opacity=c(e),t+""}}return i=+i,a.gamma=t,a}(1)}n.d(t,"a",function(){return a});var r=n(8),o=n(22),a=(i(o.b),i(o.a))},function(e,t,n){"use strict";function i(e){return function(t,i){var a=e((t=n.i(r.c)(t)).h,(i=n.i(r.c)(i)).h),l=n.i(o.a)(t.c,i.c),s=n.i(o.a)(t.l,i.l),u=n.i(o.a)(t.opacity,i.opacity);return function(e){return t.h=a(e),t.c=l(e),t.l=s(e),t.opacity=u(e),t+""}}}var r=n(8),o=n(22);i(o.b),i(o.a)},function(e,t,n){"use strict";function i(e){return function(t,i){var a=e((t=n.i(r.e)(t)).h,(i=n.i(r.e)(i)).h),l=n.i(o.a)(t.s,i.s),s=n.i(o.a)(t.l,i.l),u=n.i(o.a)(t.opacity,i.opacity);return function(e){return t.h=a(e),t.s=l(e),t.l=s(e),t.opacity=u(e),t+""}}}var r=n(8),o=n(22);i(o.b),i(o.a)},function(e,t,n){"use strict";n(8),n(22)},function(e,t,n){"use strict"},function(e,t,n){"use strict";t.a=function(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=180/Math.PI,r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};t.b=function(e,t,n,r,o,a){var l,s,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*i,skewX:Math.atan(u)*i,scaleX:l,scaleY:s}}},function(e,t,n){"use strict";function i(e,t,i,o){function a(e){return e.length?e.pop()+" ":""}function l(e,o,a,l,s,u){if(e!==a||o!==l){var c=s.push("translate(",null,t,null,i);u.push({i:c-4,x:n.i(r.a)(e,a)},{i:c-2,x:n.i(r.a)(o,l)})}else(a||l)&&s.push("translate("+a+t+l+i)}function s(e,t,i,l){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),l.push({i:i.push(a(i)+"rotate(",null,o)-2,x:n.i(r.a)(e,t)})):t&&i.push(a(i)+"rotate("+t+o)}function u(e,t,i,l){e!==t?l.push({i:i.push(a(i)+"skewX(",null,o)-2,x:n.i(r.a)(e,t)}):t&&i.push(a(i)+"skewX("+t+o)}function c(e,t,i,o,l,s){if(e!==i||t!==o){var u=l.push(a(l)+"scale(",null,",",null,")");s.push({i:u-4,x:n.i(r.a)(e,i)},{i:u-2,x:n.i(r.a)(t,o)})}else 1===i&&1===o||l.push(a(l)+"scale("+i+","+o+")")}return function(t,n){var i=[],r=[];return t=e(t),n=e(n),l(t.translateX,t.translateY,n.translateX,n.translateY,i,r),s(t.rotate,n.rotate,i,r),u(t.skewX,n.skewX,i,r),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,i,r),t=n=null,function(e){for(var t,n=-1,o=r.length;++n<o;)i[(t=r[n]).i]=t.x(e);return i.join("")}}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});var r=n(28),o=n(228),a=i(o.a,"px, ","px)","deg)"),l=i(o.b,", ",")",")")},function(e,t,n){"use strict";function i(e){return"none"===e?u.a:(o||(o=document.createElement("DIV"),a=document.documentElement,l=document.defaultView),o.style.transform=e,e=l.getComputedStyle(a.appendChild(o),null).getPropertyValue("transform"),a.removeChild(o),e=e.slice(7,-1).split(","),n.i(u.b)(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function r(e){return null==e?u.a:(s||(s=document.createElementNS("http://www.w3.org/2000/svg","g")),s.setAttribute("transform",e),(e=s.transform.baseVal.consolidate())?(e=e.matrix,n.i(u.b)(e.a,e.b,e.c,e.d,e.e,e.f)):u.a)}t.a=i,t.b=r;var o,a,l,s,u=n(226)},function(e,t,n){"use strict";function i(e){return((e=Math.exp(e))+1/e)/2}function r(e){return((e=Math.exp(e))-1/e)/2}function o(e){return((e=Math.exp(2*e))-1)/(e+1)}var a=Math.SQRT2;t.a=function(e,t){var n,l,s=e[0],u=e[1],c=e[2],_=t[0],d=t[1],f=t[2],b=_-s,p=d-u,m=b*b+p*p;if(m<1e-12)l=Math.log(f/c)/a,n=function(e){return[s+e*b,u+e*p,c*Math.exp(a*e*l)]};else{var h=Math.sqrt(m),g=(f*f-c*c+4*m)/(2*c*2*h),v=(f*f-c*c-4*m)/(2*f*2*h),y=Math.log(Math.sqrt(g*g+1)-g),x=Math.log(Math.sqrt(v*v+1)-v);l=(x-y)/a,n=function(e){var t=e*l,n=i(y),_=c/(2*h)*(n*o(a*t+y)-r(y));return[s+_*b,u+_*p,c*n/i(a*t+y)]}}return n.duration=1e3*l,n}},function(e,t,n){"use strict";function i(){function e(){var e=s().length,i=c[1]<c[0],o=c[i-0],l=c[1-i];t=(l-o)/Math.max(1,e-d+2*f),_&&(t=Math.floor(t)),o+=(l-o-t*(e-d))*b,r=t*(1-d),_&&(o=Math.round(o),r=Math.round(r));var p=n.i(a.h)(e).map(function(e){return o+t*e});return u(i?p.reverse():p)}var t,r,o=n.i(l.a)().unknown(void 0),s=o.domain,u=o.range,c=[0,1],_=!1,d=0,f=0,b=.5;return delete o.unknown,o.domain=function(t){return arguments.length?(s(t),e()):s()},o.range=function(t){return arguments.length?(c=[+t[0],+t[1]],e()):c.slice()},o.rangeRound=function(t){return c=[+t[0],+t[1]],_=!0,e()},o.bandwidth=function(){return r},o.step=function(){return t},o.round=function(t){return arguments.length?(_=!!t,e()):_},o.padding=function(t){return arguments.length?(d=f=Math.max(0,Math.min(1,t)),e()):d},o.paddingInner=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},o.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},o.align=function(t){return arguments.length?(b=Math.max(0,Math.min(1,t)),e()):b},o.copy=function(){return i().domain(s()).range(c).round(_).paddingInner(d).paddingOuter(f).align(b)},e()}function r(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return r(t())},e}function o(){return r(i().paddingInner(1))}t.a=i,t.b=o;var a=n(7),l=n(104)},function(e,t,n){"use strict";var i=n(23);t.a=n.i(i.a)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},function(e,t,n){"use strict";var i=n(23);t.a=n.i(i.a)("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5")},function(e,t,n){"use strict";var i=n(23);t.a=n.i(i.a)("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6")},function(e,t,n){"use strict";var i=n(23);t.a=n.i(i.a)("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9")},function(e,t,n){"use strict";var i=n(8),r=n(6);t.a=n.i(r.i)(n.i(i.b)(300,.5,0),n.i(i.b)(-240,.5,1))},function(e,t,n){"use strict";function i(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=r.a.call(n,a.a),e):t.slice()},e.copy=function(){return i().domain(t)},n.i(o.b)(e)}t.a=i;var r=n(12),o=n(24),a=n(103)},function(e,t,n){"use strict";function i(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:n.i(d.a)(t)}function r(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function o(e){return isFinite(e)?+("1e"+e):e<0?0:e}function a(e){return 10===e?o:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function l(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function s(e){return function(t){return-e(-t)}}function u(){function e(){return p=l(d),m=a(d),o()[0]<0&&(p=s(p),m=s(m)),t}var t=n.i(b.a)(i,r).domain([1,10]),o=t.domain,d=10,p=l(10),m=a(10);return t.base=function(t){return arguments.length?(d=+t,e()):d},t.domain=function(t){return arguments.length?(o(t),e()):o()},t.ticks=function(e){var t,i=o(),r=i[0],a=i[i.length-1];(t=a<r)&&(_=r,r=a,a=_);var l,s,u,_=p(r),f=p(a),b=null==e?10:+e,h=[];if(!(d%1)&&f-_<b){if(_=Math.round(_)-1,f=Math.round(f)+1,r>0){for(;_<f;++_)for(s=1,l=m(_);s<d;++s)if(!((u=l*s)<r)){if(u>a)break;h.push(u)}}else for(;_<f;++_)for(s=d-1,l=m(_);s>=1;--s)if(!((u=l*s)<r)){if(u>a)break;h.push(u)}}else h=n.i(c.a)(_,f,Math.min(f-_,b)).map(m);return t?h.reverse():h},t.tickFormat=function(e,i){if(null==i&&(i=10===d?".0e":","),"function"!==typeof i&&(i=n.i(_.format)(i)),e===1/0)return i;null==e&&(e=10);var r=Math.max(1,d*e/t.ticks().length);return function(e){var t=e/m(Math.round(p(e)));return t*d<d-.5&&(t*=d),t<=r?i(e):""}},t.nice=function(){return o(n.i(f.a)(o(),{floor:function(e){return m(Math.floor(p(e)))},ceil:function(e){return m(Math.ceil(p(e)))}}))},t.copy=function(){return n.i(b.c)(t,u().base(d))},t}t.a=u;var c=n(7),_=n(17),d=n(44),f=n(102),b=n(29)},function(e,t,n){"use strict";function i(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function r(){function e(e,t){return(t=i(t,o)-(e=i(e,o)))?function(n){return(i(n,o)-e)/t}:n.i(a.a)(t)}function t(e,t){return t=i(t,o)-(e=i(e,o)),function(n){return i(e+t*n,1/o)}}var o=1,u=n.i(s.a)(e,t),c=u.domain;return u.exponent=function(e){return arguments.length?(o=+e,c(c())):o},u.copy=function(){return n.i(s.c)(u,r().exponent(o))},n.i(l.b)(u)}function o(){return r().exponent(.5)}t.a=r,t.b=o;var a=n(44),l=n(24),s=n(29)},function(e,t,n){"use strict";function i(){function e(){var e=0,i=Math.max(1,l.length);for(s=new Array(i-1);++e<i;)s[e-1]=n.i(r.f)(a,e/i);return t}function t(e){if(!isNaN(e=+e))return l[n.i(r.c)(s,e)]}var a=[],l=[],s=[];return t.invertExtent=function(e){var t=l.indexOf(e);return t<0?[NaN,NaN]:[t>0?s[t-1]:a[0],t<s.length?s[t]:a[a.length-1]]},t.domain=function(t){if(!arguments.length)return a.slice();a=[];for(var n,i=0,o=t.length;i<o;++i)null==(n=t[i])||isNaN(n=+n)||a.push(n);return a.sort(r.g),e()},t.range=function(t){return arguments.length?(l=o.b.call(t),e()):l.slice()},t.quantiles=function(){return s.slice()},t.copy=function(){return i().domain(a).range(l)},t}t.a=i;var r=n(7),o=n(12)},function(e,t,n){"use strict";function i(){function e(e){if(e<=e)return _[n.i(r.c)(c,e,0,u)]}function t(){var t=-1;for(c=new Array(u);++t<u;)c[t]=((t+1)*s-(t-u)*l)/(u+1);return e}var l=0,s=1,u=1,c=[.5],_=[0,1];return e.domain=function(e){return arguments.length?(l=+e[0],s=+e[1],t()):[l,s]},e.range=function(e){return arguments.length?(u=(_=o.b.call(e)).length-1,t()):_.slice()},e.invertExtent=function(e){var t=_.indexOf(e);return t<0?[NaN,NaN]:t<1?[l,c[0]]:t>=u?[c[u-1],s]:[c[t-1],c[t]]},e.copy=function(){return i().domain([l,s]).range(_)},n.i(a.b)(e)}t.a=i;var r=n(7),o=n(12),a=n(24)},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a});var i=n(8),r=n(6),o=n.i(r.i)(n.i(i.b)(-100,.75,.35),n.i(i.b)(80,1.5,.8)),a=n.i(r.i)(n.i(i.b)(260,.75,.35),n.i(i.b)(80,1.5,.8)),l=n.i(i.b)();t.a=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return l.h=360*e-100,l.s=1.5-1.5*t,l.l=.8-.9*t,l+""}},function(e,t,n){"use strict";function i(e){function t(t){var n=(t-o)/(a-o);return e(l?Math.max(0,Math.min(1,n)):n)}var o=0,a=1,l=!1;return t.domain=function(e){return arguments.length?(o=+e[0],a=+e[1],t):[o,a]},t.clamp=function(e){return arguments.length?(l=!!e,t):l},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return i(e).domain([o,a]).clamp(l)},n.i(r.b)(t)}t.a=i;var r=n(24)},function(e,t,n){"use strict";function i(){function e(e){if(e<=e)return a[n.i(r.c)(t,e,0,l)]}var t=[.5],a=[0,1],l=1;return e.domain=function(n){return arguments.length?(t=o.b.call(n),l=Math.min(t.length,a.length-1),e):t.slice()},e.range=function(n){return arguments.length?(a=o.b.call(n),l=Math.min(t.length,a.length-1),e):a.slice()},e.invertExtent=function(e){var n=a.indexOf(e);return[t[n-1],t[n]]},e.copy=function(){return i().domain(t).range(a)},e}t.a=i;var r=n(7),o=n(12)},function(e,t,n){"use strict";var i=n(7),r=n(17);t.a=function(e,t,o){var a,l=e[0],s=e[e.length-1],u=n.i(i.d)(l,s,null==t?10:t);switch(o=n.i(r.formatSpecifier)(null==o?",f":o),o.type){case"s":var c=Math.max(Math.abs(l),Math.abs(s));return null!=o.precision||isNaN(a=n.i(r.precisionPrefix)(u,c))||(o.precision=a),n.i(r.formatPrefix)(o,c);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(a=n.i(r.precisionRound)(u,Math.max(Math.abs(l),Math.abs(s))))||(o.precision=a-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(a=n.i(r.precisionFixed)(u))||(o.precision=a-2*("%"===o.type))}return n.i(r.format)(o)}},function(e,t,n){"use strict";var i=n(105),r=n(111),o=n(54);t.a=function(){return n.i(i.b)(o.a,o.b,o.c,o.d,o.e,o.f,o.g,o.h,r.a).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}},function(e,t,n){"use strict";function i(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return l});var r=n(23);t.a=i(n.i(r.a)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var o=i(n.i(r.a)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),a=i(n.i(r.a)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),l=i(n.i(r.a)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";function i(){return new r}function r(){this._="@"+(++o).toString(36)}t.a=i;var o=0;r.prototype=i.prototype={constructor:r,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},function(e,t,n){"use strict";var i=n(51),r=n(48);t.a=function(e){var t=n.i(i.a)();return t.changedTouches&&(t=t.changedTouches[0]),n.i(r.a)(e,t)}},function(e,t,n){"use strict";var i=n(4);t.a=function(e){return"string"===typeof e?new i.b([[document.querySelector(e)]],[document.documentElement]):new i.b([[e]],i.c)}},function(e,t,n){"use strict";var i=n(4);t.a=function(e){return"string"===typeof e?new i.b([document.querySelectorAll(e)],[document.documentElement]):new i.b([null==e?[]:e],i.c)}},function(e,t,n){"use strict";var i=n(45);t.a=function(e){var t="function"===typeof e?e:n.i(i.a)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},function(e,t,n){"use strict";function i(e){return function(){this.removeAttribute(e)}}function r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o(e,t){return function(){this.setAttribute(e,t)}}function a(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function l(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function s(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var u=n(46);t.a=function(e,t){var c=n.i(u.a)(e);if(arguments.length<2){var _=this.node();return c.local?_.getAttributeNS(c.space,c.local):_.getAttribute(c)}return this.each((null==t?c.local?r:i:"function"===typeof t?c.local?s:l:c.local?a:o)(c,t))}},function(e,t,n){"use strict";t.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},function(e,t,n){"use strict";function i(e){return e.trim().split(/^|\s+/)}function r(e){return e.classList||new o(e)}function o(e){this._node=e,this._names=i(e.getAttribute("class")||"")}function a(e,t){for(var n=r(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function l(e,t){for(var n=r(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function s(e){return function(){a(this,e)}}function u(e){return function(){l(this,e)}}function c(e,t){return function(){(t.apply(this,arguments)?a:l)(this,e)}}o.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},t.a=function(e,t){var n=i(e+"");if(arguments.length<2){for(var o=r(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?c:t?s:u)(n,t))}},function(e,t,n){"use strict";function i(e,t,n,i,r,o){for(var l,s=0,u=t.length,c=o.length;s<c;++s)(l=t[s])?(l.__data__=o[s],i[s]=l):n[s]=new a.b(e,o[s]);for(;s<u;++s)(l=t[s])&&(r[s]=l)}function r(e,t,n,i,r,o,l){var u,c,_,d={},f=t.length,b=o.length,p=new Array(f);for(u=0;u<f;++u)(c=t[u])&&(p[u]=_=s+l.call(c,c.__data__,u,t),_ in d?r[u]=c:d[_]=c);for(u=0;u<b;++u)_=s+l.call(e,o[u],u,o),(c=d[_])?(i[u]=c,c.__data__=o[u],d[_]=null):n[u]=new a.b(e,o[u]);for(u=0;u<f;++u)(c=t[u])&&d[p[u]]===c&&(r[u]=c)}var o=n(4),a=n(107),l=n(247),s="$";t.a=function(e,t){if(!e)return g=new Array(this.size()),b=-1,this.each(function(e){g[++b]=e}),g;var a=t?r:i,s=this._parents,u=this._groups;"function"!==typeof e&&(e=n.i(l.a)(e));for(var c=u.length,_=new Array(c),d=new Array(c),f=new Array(c),b=0;b<c;++b){var p=s[b],m=u[b],h=m.length,g=e.call(p,p&&p.__data__,b,s),v=g.length,y=d[b]=new Array(v),x=_[b]=new Array(v);a(p,m,y,x,f[b]=new Array(h),g,t);for(var w,k,M=0,A=0;M<v;++M)if(w=y[M]){for(M>=A&&(A=M+1);!(k=x[A])&&++A<v;);w._next=k||null}}return _=new o.b(_,s),_._enter=d,_._exit=f,_}},function(e,t,n){"use strict";t.a=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},function(e,t,n){"use strict";function i(e,t,i){var r=n.i(a.a)(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,i):(o=r.document.createEvent("Event"),i?(o.initEvent(t,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function r(e,t){return function(){return i(this,e,t)}}function o(e,t){return function(){return i(this,e,t.apply(this,arguments))}}var a=n(52);t.a=function(e,t){return this.each(("function"===typeof t?o:r)(e,t))}},function(e,t,n){"use strict";t.a=function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],a=0,l=o.length;a<l;++a)(r=o[a])&&e.call(r,r.__data__,a,o);return this}},function(e,t,n){"use strict";t.a=function(){return!this.node()}},function(e,t,n){"use strict";var i=n(108),r=n(4);t.a=function(){return new r.b(this._exit||this._groups.map(i.a),this._parents)}},function(e,t,n){"use strict";var i=n(4),r=n(106);t.a=function(e){"function"!==typeof e&&(e=n.i(r.a)(e));for(var t=this._groups,o=t.length,a=new Array(o),l=0;l<o;++l)for(var s,u=t[l],c=u.length,_=a[l]=[],d=0;d<c;++d)(s=u[d])&&e.call(s,s.__data__,d,u)&&_.push(s);return new i.b(a,this._parents)}},function(e,t,n){"use strict";function i(){this.innerHTML=""}function r(e){return function(){this.innerHTML=e}}function o(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?i:("function"===typeof e?o:r)(e)):this.node().innerHTML}},function(e,t,n){"use strict";function i(){return null}var r=n(45),o=n(50);t.a=function(e,t){var a="function"===typeof e?e:n.i(r.a)(e),l=null==t?i:"function"===typeof t?t:n.i(o.a)(t);return this.select(function(){return this.insertBefore(a.apply(this,arguments),l.apply(this,arguments)||null)})}},function(e,t,n){"use strict";function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}t.a=function(){return this.each(i)}},function(e,t,n){"use strict";var i=n(4);t.a=function(e){for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),l=new Array(r),s=0;s<a;++s)for(var u,c=t[s],_=n[s],d=c.length,f=l[s]=new Array(d),b=0;b<d;++b)(u=c[b]||_[b])&&(f[b]=u);for(;s<r;++s)l[s]=t[s];return new i.b(l,this._parents)}},function(e,t,n){"use strict";t.a=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}},function(e,t,n){"use strict";t.a=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},function(e,t,n){"use strict";t.a=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this}},function(e,t,n){"use strict";function i(e){return function(){delete this[e]}}function r(e,t){return function(){this[e]=t}}function o(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}t.a=function(e,t){return arguments.length>1?this.each((null==t?i:"function"===typeof t?o:r)(e,t)):this.node()[e]}},function(e,t,n){"use strict";function i(){this.nextSibling&&this.parentNode.appendChild(this)}t.a=function(){return this.each(i)}},function(e,t,n){"use strict";function i(){var e=this.parentNode;e&&e.removeChild(this)}t.a=function(){return this.each(i)}},function(e,t,n){"use strict";var i=n(4),r=n(50);t.a=function(e){"function"!==typeof e&&(e=n.i(r.a)(e));for(var t=this._groups,o=t.length,a=new Array(o),l=0;l<o;++l)for(var s,u,c=t[l],_=c.length,d=a[l]=new Array(_),f=0;f<_;++f)(s=c[f])&&(u=e.call(s,s.__data__,f,c))&&("__data__"in s&&(u.__data__=s.__data__),d[f]=u);return new i.b(a,this._parents)}},function(e,t,n){"use strict";var i=n(4),r=n(110);t.a=function(e){"function"!==typeof e&&(e=n.i(r.a)(e));for(var t=this._groups,o=t.length,a=[],l=[],s=0;s<o;++s)for(var u,c=t[s],_=c.length,d=0;d<_;++d)(u=c[d])&&(a.push(e.call(u,u.__data__,d,c)),l.push(u));return new i.b(a,l)}},function(e,t,n){"use strict";t.a=function(){var e=0;return this.each(function(){++e}),e}},function(e,t,n){"use strict";function i(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var r=n(4);t.a=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=i);for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var s,u=n[l],c=u.length,_=a[l]=new Array(c),d=0;d<c;++d)(s=u[d])&&(_[d]=s);_.sort(t)}return new r.b(a,this._parents).order()}},function(e,t,n){"use strict";function i(){this.textContent=""}function r(e){return function(){this.textContent=e}}function o(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?i:("function"===typeof e?o:r)(e)):this.node().textContent}},function(e,t,n){"use strict";var i=n(51),r=n(48);t.a=function(e,t,o){arguments.length<3&&(o=t,t=n.i(i.a)().changedTouches);for(var a,l=0,s=t?t.length:0;l<s;++l)if((a=t[l]).identifier===o)return n.i(r.a)(e,a);return null}},function(e,t,n){"use strict";var i=n(51),r=n(48);t.a=function(e,t){null==t&&(t=n.i(i.a)().touches);for(var o=0,a=t?t.length:0,l=new Array(a);o<a;++o)l[o]=n.i(r.a)(e,t[o]);return l}},function(e,t,n){"use strict";function i(e){var t=new Date(e);return isNaN(t)?null:t}var r=n(112),o=n(53);+new Date("2000-01-01T00:00:00.000Z")||n.i(o.b)(r.a)},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r.d)/r.b},function(e){return e.getDate()-1});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){var t=e.getTimezoneOffset()*r.d%r.c;t<0&&(t+=r.c),e.setTime(Math.floor((+e-t)/r.c)*r.c+t)},function(e,t){e.setTime(+e+t*r.c)},function(e,t){return(t-e)/r.c},function(e){return e.getHours()});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n.i(i.a)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});r.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?n.i(i.a)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):r:null},t.a=r;r.range},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){e.setTime(Math.floor(e/r.d)*r.d)},function(e,t){e.setTime(+e+t*r.d)},function(e,t){return(t-e)/r.d},function(e){return e.getMinutes()});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n.i(i.a)(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()});t.a=r;r.range},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){e.setTime(Math.floor(e/r.e)*r.e)},function(e,t){e.setTime(+e+t*r.e)},function(e,t){return(t-e)/r.e},function(e){return e.getUTCSeconds()});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/r.b},function(e){return e.getUTCDate()-1});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*r.c)},function(e,t){return(t-e)/r.c},function(e){return e.getUTCHours()});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n(9),o=n.i(i.a)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*r.d)},function(e,t){return(t-e)/r.d},function(e){return e.getUTCMinutes()});t.a=o;o.range},function(e,t,n){"use strict";var i=n(3),r=n.i(i.a)(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()});t.a=r;r.range},function(e,t,n){"use strict";function i(e){return n.i(r.a)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/o.a})}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});var r=n(3),o=n(9),a=i(0),l=i(1),s=i(2),u=i(3),c=i(4),_=i(5),d=i(6);a.range,l.range,s.range,u.range,c.range,_.range,d.range},function(e,t,n){"use strict";var i=n(3),r=n.i(i.a)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});r.every=function(e){return isFinite(e=Math.floor(e))&&e>0?n.i(i.a)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null},t.a=r;r.range},function(e,t,n){"use strict";function i(e){return n.i(r.a)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.d)/o.a})}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});var r=n(3),o=n(9),a=i(0),l=i(1),s=i(2),u=i(3),c=i(4),_=i(5),d=i(6);a.range,l.range,s.range,u.range,c.range,_.range,d.range},function(e,t,n){"use strict";var i=n(3),r=n.i(i.a)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});r.every=function(e){return isFinite(e=Math.floor(e))&&e>0?n.i(i.a)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null},t.a=r;r.range},function(e,t,n){"use strict";n(55)},function(e,t,n){"use strict";var i=n(55);t.a=function(e,t,n){var r=new i.b;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r}},function(e,t,n){"use strict";n(11),n(5)},function(e,t,n){"use strict";var i=n(0),r=n(299),o=n(300);i.selection.prototype.interrupt=r.a,i.selection.prototype.transition=o.a},function(e,t,n){"use strict";var i=n(116);t.a=function(e){return this.each(function(){n.i(i.a)(this,e)})}},function(e,t,n){"use strict";function i(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))return s.time=n.i(l.c)(),s;return i}var r=n(11),o=n(5),a=n(200),l=n(114),s={time:null,delay:0,duration:250,ease:a.a};t.a=function(e){var t,a;e instanceof r.a?(t=e._id,e=e._name):(t=n.i(r.b)(),(a=s).time=n.i(l.c)(),e=null==e?null:e+"");for(var u=this._groups,c=u.length,_=0;_<c;++_)for(var d,f=u[_],b=f.length,p=0;p<b;++p)(d=f[p])&&n.i(o.h)(d,e,t,p,f,a||i(d,t));return new r.a(u,this._parents,e,t)}},function(e,t,n){"use strict";function i(e){return function(){this.removeAttribute(e)}}function r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o(e,t,n){var i,r;return function(){var o=this.getAttribute(e);return o===n?null:o===i?r:r=t(i=o,n)}}function a(e,t,n){var i,r;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===i?r:r=t(i=o,n)}}function l(e,t,n){var i,r,o;return function(){var a,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e),a===l?null:a===i&&l===r?o:o=t(i=a,r=l))}}function s(e,t,n){var i,r,o;return function(){var a,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),a===l?null:a===i&&l===r?o:o=t(i=a,r=l))}}var u=n(6),c=n(0),_=n(30),d=n(117);t.a=function(e,t){var f=n.i(c.namespace)(e),b="transform"===f?u.f:d.a;return this.attrTween(e,"function"===typeof t?(f.local?s:l)(f,b,n.i(_.b)(this,"attr."+e,t)):null==t?(f.local?r:i)(f):(f.local?a:o)(f,b,t+""))}},function(e,t,n){"use strict";function i(e,t){function n(){var n=this,i=t.apply(n,arguments);return i&&function(t){n.setAttributeNS(e.space,e.local,i(t))}}return n._value=t,n}function r(e,t){function n(){var n=this,i=t.apply(n,arguments);return i&&function(t){n.setAttribute(e,i(t))}}return n._value=t,n}var o=n(0);t.a=function(e,t){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!==typeof t)throw new Error;var l=n.i(o.namespace)(e);return this.tween(a,(l.local?i:r)(l,t))}},function(e,t,n){"use strict";function i(e,t){return function(){n.i(o.g)(this,e).delay=+t.apply(this,arguments)}}function r(e,t){return t=+t,function(){n.i(o.g)(this,e).delay=t}}var o=n(5);t.a=function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?i:r)(t,e)):n.i(o.f)(this.node(),t).delay}},function(e,t,n){"use strict";function i(e,t){return function(){n.i(o.e)(this,e).duration=+t.apply(this,arguments)}}function r(e,t){return t=+t,function(){n.i(o.e)(this,e).duration=t}}var o=n(5);t.a=function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?i:r)(t,e)):n.i(o.f)(this.node(),t).duration}},function(e,t,n){"use strict";function i(e,t){if("function"!==typeof t)throw new Error;return function(){n.i(r.e)(this,e).ease=t}}var r=n(5);t.a=function(e){var t=this._id;return arguments.length?this.each(i(t,e)):n.i(r.f)(this.node(),t).ease}},function(e,t,n){"use strict";var i=n(0),r=n(11);t.a=function(e){"function"!==typeof e&&(e=n.i(i.matcher)(e));for(var t=this._groups,o=t.length,a=new Array(o),l=0;l<o;++l)for(var s,u=t[l],c=u.length,_=a[l]=[],d=0;d<c;++d)(s=u[d])&&e.call(s,s.__data__,d,u)&&_.push(s);return new r.a(a,this._parents,this._name,this._id)}},function(e,t,n){"use strict";var i=n(11);t.a=function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),l=new Array(r),s=0;s<a;++s)for(var u,c=t[s],_=n[s],d=c.length,f=l[s]=new Array(d),b=0;b<d;++b)(u=c[b]||_[b])&&(f[b]=u);for(;s<r;++s)l[s]=t[s];return new i.a(l,this._parents,this._name,this._id)}},function(e,t,n){"use strict";function i(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function r(e,t,n){var r,a,l=i(t)?o.g:o.e;return function(){var i=l(this,e),o=i.on;o!==r&&(a=(r=o).copy()).on(t,n),i.on=a}}var o=n(5);t.a=function(e,t){var i=this._id;return arguments.length<2?n.i(o.f)(this.node(),i).on.on(e):this.each(r(i,e,t))}},function(e,t,n){"use strict";function i(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}t.a=function(){return this.on("end.remove",i(this._id))}},function(e,t,n){"use strict";var i=n(0),r=n(11),o=n(5);t.a=function(e){var t=this._name,a=this._id;"function"!==typeof e&&(e=n.i(i.selector)(e));for(var l=this._groups,s=l.length,u=new Array(s),c=0;c<s;++c)for(var _,d,f=l[c],b=f.length,p=u[c]=new Array(b),m=0;m<b;++m)(_=f[m])&&(d=e.call(_,_.__data__,m,f))&&("__data__"in _&&(d.__data__=_.__data__),p[m]=d,n.i(o.h)(p[m],t,a,m,p,n.i(o.f)(_,a)));return new r.a(u,this._parents,t,a)}},function(e,t,n){"use strict";var i=n(0),r=n(11),o=n(5);t.a=function(e){var t=this._name,a=this._id;"function"!==typeof e&&(e=n.i(i.selectorAll)(e));for(var l=this._groups,s=l.length,u=[],c=[],_=0;_<s;++_)for(var d,f=l[_],b=f.length,p=0;p<b;++p)if(d=f[p]){for(var m,h=e.call(d,d.__data__,p,f),g=n.i(o.f)(d,a),v=0,y=h.length;v<y;++v)(m=h[v])&&n.i(o.h)(m,t,a,v,h,g);u.push(h),c.push(d)}return new r.a(u,c,t,a)}},function(e,t,n){"use strict";var i=n(0),r=i.selection.prototype.constructor;t.a=function(){return new r(this._groups,this._parents)}},function(e,t,n){"use strict";function i(e,t){var i,r,o;return function(){var a=n.i(s.style)(this,e),l=(this.style.removeProperty(e),n.i(s.style)(this,e));return a===l?null:a===i&&l===r?o:o=t(i=a,r=l)}}function r(e){return function(){this.style.removeProperty(e)}}function o(e,t,i){var r,o;return function(){var a=n.i(s.style)(this,e);return a===i?null:a===r?o:o=t(r=a,i)}}function a(e,t,i){var r,o,a;return function(){var l=n.i(s.style)(this,e),u=i(this);return null==u&&(this.style.removeProperty(e),u=n.i(s.style)(this,e)),l===u?null:l===r&&u===o?a:a=t(r=l,o=u)}}var l=n(6),s=n(0),u=n(30),c=n(117);t.a=function(e,t,s){var _="transform"===(e+="")?l.b:c.a;return null==t?this.styleTween(e,i(e,_)).on("end.style."+e,r(e)):this.styleTween(e,"function"===typeof t?a(e,_,n.i(u.b)(this,"style."+e,t)):o(e,_,t+""),s)}},function(e,t,n){"use strict";function i(e,t,n){function i(){var i=this,r=t.apply(i,arguments);return r&&function(t){i.style.setProperty(e,r(t),n)}}return i._value=t,i}t.a=function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,i(e,t,null==n?"":n))}},function(e,t,n){"use strict";function i(e){return function(){this.textContent=e}}function r(e){return function(){var t=e(this);this.textContent=null==t?"":t}}var o=n(30);t.a=function(e){return this.tween("text","function"===typeof e?r(n.i(o.b)(this,"text",e)):i(null==e?"":e+""))}},function(e,t,n){"use strict";var i=n(11),r=n(5);t.a=function(){for(var e=this._name,t=this._id,o=n.i(i.b)(),a=this._groups,l=a.length,s=0;s<l;++s)for(var u,c=a[s],_=c.length,d=0;d<_;++d)if(u=c[d]){var f=n.i(r.f)(u,t);n.i(r.h)(u,e,o,d,c,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new i.a(a,this._parents,e,o)}},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";function i(e,t,n){this.target=e,this.type=t,this.transform=n}t.a=i},function(e,t,n){"use strict";function i(){r.event.stopImmediatePropagation()}t.b=i;var r=n(0);t.a=function(){r.event.preventDefault(),r.event.stopImmediatePropagation()}},function(e,t,n){"use strict";function i(){return!_.event.button}function r(){var e,t,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,e=n.width.baseVal.value,t=n.height.baseVal.value):(e=n.clientWidth,t=n.clientHeight),[[0,0],[e,t]]}function o(){return this.__zoom||p.b}function a(){return-_.event.deltaY*(_.event.deltaMode?120:1)/500}function l(){return"ontouchstart"in this}var s=n(21),u=n(16),c=n(6),_=n(0),d=n(115),f=n(317),b=n(318),p=n(118),m=n(319);t.a=function(){function e(e){e.property("__zoom",o).on("wheel.zoom",k).on("mousedown.zoom",M).on("dblclick.zoom",A).filter(l).on("touchstart.zoom",E).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(e,t){return t=Math.max(L,Math.min(T,t)),t===e.k?e:new p.c(t,e.x,e.y)}function h(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new p.c(e.k,i,r)}function g(e,t){var n=e.invertX(t[0][0])-I,i=e.invertX(t[1][0])-D,r=e.invertY(t[0][1])-F,o=e.invertY(t[1][1])-R;return e.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n){e.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var e=this,i=arguments,r=x(e,i),o=z.apply(e,i),a=n||v(o),l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),s=e.__zoom,u="function"===typeof t?t.apply(e,i):t,c=B(s.invert(a).concat(l/s.k),u.invert(a).concat(l/u.k));return function(e){if(1===e)e=u;else{var t=c(e),n=l/t[2];e=new p.c(n,a[0]-t[0]*n,a[1]-t[1]*n)}r.zoom(null,e)}})}function x(e,t){for(var n,i=0,r=q.length;i<r;++i)if((n=q[i]).that===e)return n;return new w(e,t)}function w(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=z.apply(e,t)}function k(){function e(){i.wheel=null,i.end()}if(S.apply(this,arguments)){var i=x(this,arguments),r=this.__zoom,o=Math.max(L,Math.min(T,r.k*Math.pow(2,N.apply(this,arguments)))),a=n.i(_.mouse)(this);if(i.wheel)i.mouse[0][0]===a[0]&&i.mouse[0][1]===a[1]||(i.mouse[1]=r.invert(i.mouse[0]=a)),clearTimeout(i.wheel);else{if(r.k===o)return;i.mouse=[a,r.invert(a)],n.i(d.a)(this),i.start()}n.i(m.a)(),i.wheel=setTimeout(e,V),i.zoom("mouse",g(h(t(r,o),i.mouse[0],i.mouse[1]),i.extent))}}function M(){function e(){if(n.i(m.a)(),!i.moved){var e=_.event.clientX-a,t=_.event.clientY-l;i.moved=e*e+t*t>X}i.zoom("mouse",g(h(i.that.__zoom,i.mouse[0]=n.i(_.mouse)(i.that),i.mouse[1]),i.extent))}function t(){r.on("mousemove.zoom mouseup.zoom",null),n.i(u.dragEnable)(_.event.view,i.moved),n.i(m.a)(),i.end()}if(!C&&S.apply(this,arguments)){var i=x(this,arguments),r=n.i(_.select)(_.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",t,!0),o=n.i(_.mouse)(this),a=_.event.clientX,l=_.event.clientY;n.i(u.dragDisable)(_.event.view),n.i(m.b)(),i.mouse=[o,this.__zoom.invert(o)],n.i(d.a)(this),i.start()}}function A(){if(S.apply(this,arguments)){var i=this.__zoom,r=n.i(_.mouse)(this),o=i.invert(r),a=i.k*(_.event.shiftKey?.5:2),l=g(h(t(i,a),r,o),z.apply(this,arguments));n.i(m.a)(),U>0?n.i(_.select)(this).transition().duration(U).call(y,l,r):n.i(_.select)(this).call(e.transform,l)}}function E(){if(S.apply(this,arguments)){var e,t,i,r,o=x(this,arguments),a=_.event.changedTouches,l=a.length;for(n.i(m.b)(),t=0;t<l;++t)i=a[t],r=n.i(_.touch)(this,a,i.identifier),r=[r,this.__zoom.invert(r),i.identifier],o.touch0?o.touch1||(o.touch1=r):(o.touch0=r,e=!0);if(O&&(O=clearTimeout(O),!o.touch1))return o.end(),void((r=n.i(_.select)(this).on("dblclick.zoom"))&&r.apply(this,arguments));e&&(O=setTimeout(function(){O=null},G),n.i(d.a)(this),o.start())}}function P(){var e,i,r,o,a=x(this,arguments),l=_.event.changedTouches,s=l.length;for(n.i(m.a)(),O&&(O=clearTimeout(O)),e=0;e<s;++e)i=l[e],r=n.i(_.touch)(this,l,i.identifier),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var u=a.touch0[0],c=a.touch0[1],d=a.touch1[0],f=a.touch1[1],b=(b=d[0]-u[0])*b+(b=d[1]-u[1])*b,p=(p=f[0]-c[0])*p+(p=f[1]-c[1])*p;i=t(i,Math.sqrt(b/p)),r=[(u[0]+d[0])/2,(u[1]+d[1])/2],o=[(c[0]+f[0])/2,(c[1]+f[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",g(h(i,r,o),a.extent))}function j(){var e,t,i=x(this,arguments),r=_.event.changedTouches,o=r.length;for(n.i(m.b)(),C&&clearTimeout(C),C=setTimeout(function(){C=null},G),e=0;e<o;++e)t=r[e],i.touch0&&i.touch0[2]===t.identifier?delete i.touch0:i.touch1&&i.touch1[2]===t.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}var O,C,S=i,z=r,N=a,L=0,T=1/0,I=-T,D=T,F=I,R=D,U=250,B=c.a,q=[],H=n.i(s.dispatch)("start","zoom","end"),G=500,V=150,X=0;return e.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",o),e!==n?y(e,t):n.interrupt().each(function(){x(this,arguments).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){return this.__zoom.k*("function"===typeof n?n.apply(this,arguments):n)})},e.scaleTo=function(n,i){e.transform(n,function(){var e=z.apply(this,arguments),n=this.__zoom,r=v(e),o=n.invert(r);return g(h(t(n,"function"===typeof i?i.apply(this,arguments):i),r,o),e)})},e.translateBy=function(t,n,i){e.transform(t,function(){return g(this.__zoom.translate("function"===typeof n?n.apply(this,arguments):n,"function"===typeof i?i.apply(this,arguments):i),z.apply(this,arguments))})},e.translateTo=function(t,n,i){e.transform(t,function(){var e=z.apply(this,arguments),t=this.__zoom,r=v(e);return g(p.b.translate(r[0],r[1]).scale(t.k).translate("function"===typeof n?-n.apply(this,arguments):-n,"function"===typeof i?-i.apply(this,arguments):-i),e)})},w.prototype={start:function(){return 1===++this.active&&(this.index=q.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(q.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){n.i(_.customEvent)(new b.a(e,t,this.that.__zoom),H.apply,H,[t,this.that,this.args])}},e.wheelDelta=function(t){return arguments.length?(N="function"===typeof t?t:n.i(f.a)(+t),e):N},e.filter=function(t){return arguments.length?(S="function"===typeof t?t:n.i(f.a)(!!t),e):S},e.extent=function(t){return arguments.length?(z="function"===typeof t?t:n.i(f.a)([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):z},e.scaleExtent=function(t){return arguments.length?(L=+t[0],T=+t[1],e):[L,T]},e.translateExtent=function(t){return arguments.length?(I=+t[0][0],D=+t[1][0],F=+t[0][1],R=+t[1][1],e):[[I,F],[D,R]]},e.duration=function(t){return arguments.length?(U=+t,e):U},e.interpolate=function(t){return arguments.length?(B=t,e):B},e.on=function(){var t=H.on.apply(H,arguments);return t===H?e:t},e.clickDistance=function(t){return arguments.length?(X=(t=+t)*t,e):Math.sqrt(X)},e}},function(e,t,n){var i,r=r||function(e){"use strict";if(!("undefined"===typeof e||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement)||e.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){var t=function(){"string"===typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},c=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var r=e["on"+t[i]];if("function"===typeof r)try{r.call(e,n||e)}catch(e){s(e)}}},_=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},d=function(t,s,d){d||(t=_(t));var f,b=this,p=t.type,m="application/octet-stream"===p,h=function(){c(b,"writestart progress write writeend".split(" "))};if(b.readyState=b.INIT,r)return f=n().createObjectURL(t),void setTimeout(function(){i.href=f,i.download=s,o(i),h(),u(f),b.readyState=b.DONE});!function(){if((l||m&&a)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=l?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,b.readyState=b.DONE,h()},i.readAsDataURL(t),void(b.readyState=b.INIT)}if(f||(f=n().createObjectURL(t)),m)e.location.href=f;else{e.open(f,"_blank")||(e.location.href=f)}b.readyState=b.DONE,h(),u(f)}()},f=d.prototype,b=function(e,t,n){return new d(e,t||e.name||"download",n)};return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=_(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,b)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof e&&e.exports?e.exports.saveAs=r:null!==n(60)&&null!==n(61)&&void 0!==(i=function(){return r}.call(t,n,t,e))&&(e.exports=i)},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(13),u=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.vertical,r=e.offset,o=e.style,a=e.disabled,u=e.min,c=e.max,_=e.value,d=i(e,["className","vertical","offset","style","disabled","min","max","value"]),f=n?{bottom:r+"%"}:{left:r+"%"},b=l({},o,f),p={};return void 0!==_&&(p=l({},p,{"aria-valuemin":u,"aria-valuemax":c,"aria-valuenow":_,"aria-disabled":!!a})),(0,s.h)("div",l({role:"slider","aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,tabIndex:"0"},p,d,{className:t,style:b}))},t}(s.Component);t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var i={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};i.isTextModifyingKeyEvent=function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=i.F1&&t<=i.F13)return!1;switch(t){case i.ALT:case i.CAPS_LOCK:case i.CONTEXT_MENU:case i.CTRL:case i.DOWN:case i.END:case i.ESC:case i.HOME:case i.INSERT:case i.LEFT:case i.MAC_FF_META:case i.META:case i.NUMLOCK:case i.NUM_CENTER:case i.PAGE_DOWN:case i.PAGE_UP:case i.PAUSE:case i.PRINT_SCREEN:case i.RIGHT:case i.SHIFT:case i.UP:case i.WIN_KEY:case i.WIN_KEY_RIGHT:return!1;default:return!0}},i.isCharacterKey=function(e){if(e>=i.ZERO&&e<=i.NINE)return!0;if(e>=i.NUM_ZERO&&e<=i.NUM_MULTIPLY)return!0;if(e>=i.A&&e<=i.Z)return!0;if(-1!==window.navigation.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case i.SPACE:case i.QUESTION_MARK:case i.NUM_PLUS:case i.NUM_MINUS:case i.NUM_PERIOD:case i.NUM_DIVISION:case i.SEMICOLON:case i.DASH:case i.EQUALS:case i.COMMA:case i.PERIOD:case i.SLASH:case i.APOSTROPHE:case i.SINGLE_QUOTE:case i.OPEN_SQUARE_BRACKET:case i.BACKSLASH:case i.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},t.default=i},function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(13),a=n(31),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e){var t=e.className,n=e.vertical,a=e.marks,s=e.included,u=e.upperBound,c=e.lowerBound,_=e.max,d=e.min,f=Object.keys(a),b=f.length,p=b>1?100/(b-1):100,m=.9*p,h=_-d,g=f.map(parseFloat).sort(function(e,t){return e-t}).map(function(e){var _,f=!s&&e===u||s&&e<=u&&e>=c,b=(0,l.default)((_={},_[t+"-text"]=!0,_[t+"-text-active"]=f,_)),p={marginBottom:"-50%",bottom:(e-d)/h*100+"%"},g={width:m+"%",marginLeft:-m/2+"%",left:(e-d)/h*100+"%"},v=n?p:g,y=a[e],x="object"===("undefined"===typeof y?"undefined":r(y)),w=x?y.label:y,k=x?i({},v,y.style):v;return(0,o.h)("span",{className:b,style:k,key:e},w)});return(0,o.h)("div",{className:t},g)};t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(13),u=n(31),c=i(u),_=n(333),d=i(_),f=n(121),b=i(f),p=n(122),m=i(p),h=n(57),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),v=function(e){function t(n){r(this,t);var i=o(this,e.call(this,n));i.onEnd=function(){i.setState({handle:null}),i.removeDocumentEvents(),i.props.onAfterChange(i.getValue())};var a=n.count,l=n.min,s=n.max,u=Array.apply(null,Array(a+1)).map(function(){return l}),c="defaultValue"in n?n.defaultValue:u,_=void 0!==n.value?n.value:c,d=_.map(function(e){return i.trimAlignValue(e)}),f=d[0]===s?0:d.length-1;return i.state={handle:null,recent:f,bounds:d},i}return a(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;if(("value"in e||"min"in e||"max"in e)&&(this.props.min!==e.min||this.props.max!==e.max||!(0,d.default)(this.props.value,e.value))){var n=this.state.bounds,i=e.value||n,r=i.map(function(n){return t.trimAlignValue(n,e)});r.length===n.length&&r.every(function(e,t){return e===n[t]})||(this.setState({bounds:r}),n.some(function(t){return g.isValueOutOfRange(t,e)})&&this.props.onChange(r))}},t.prototype.onChange=function(e){var t=this.props;"value"in t?void 0!==e.handle&&this.setState({handle:e.handle}):this.setState(e);var n=l({},this.state,e),i=n.bounds;t.onChange(i)},t.prototype.onStart=function(e){var t=this.props,n=this.state,i=this.getValue();t.onBeforeChange(i);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e;var o=this.getClosestBound(r),a=this.getBoundNeedMoving(r,o);if(this.setState({handle:a,recent:a}),r!==i[a]){var l=[].concat(n.bounds);l[a]=r,this.onChange({bounds:l})}},t.prototype.onMove=function(e,t){g.pauseEvent(e);var n=this.props,i=this.state,r=this.calcValueByPos(t);if(r!==i.bounds[i.handle]){var o=[].concat(i.bounds);o[i.handle]=r;var a=i.handle;if(!1!==n.pushable){var l=i.bounds[a];this.pushSurroundingHandles(o,a,l)}else n.allowCross&&(o.sort(function(e,t){return e-t}),a=o.indexOf(r));this.onChange({handle:a,bounds:o})}},t.prototype.onKeyboard=function(e){var t=this,n=g.getKeyboardValueMutator(e);if(n){var i=Object.keys(this.handlesRefs).reduce(function(e,n,i){return null!==e?e:t.handlesRefs[n].base===document.activeElement?i:e},null);if(null===i)return void console.log("No handle ref");g.pauseEvent(e);var r=this.state.bounds[i],o=n(r,this.props),a=this.trimAlignValue(o);if(a===r)return;var l=[].concat(this.state.bounds);l[i]=a;var s=i;if(!1!==this.props.pushable){var u=this.state.bounds[s];this.pushSurroundingHandles(l,s,u)}else this.props.allowCross&&(l.sort(function(e,t){return e-t}),s=l.indexOf(a));this.onChange({handle:s,bounds:l})}},t.prototype.getValue=function(){return this.state.bounds},t.prototype.getClosestBound=function(e){for(var t=this.state.bounds,n=0,i=1;i<t.length-1;++i)e>t[i]&&(n=i);return Math.abs(t[n+1]-e)<Math.abs(t[n]-e)&&(n+=1),n},t.prototype.getBoundNeedMoving=function(e,t){var n=this.state,i=n.bounds,r=n.recent,o=t,a=i[t+1]===i[t];return a&&(o=r),a&&e!==i[t+1]&&(o=e<i[t+1]?t:t+1),o},t.prototype.getLowerBound=function(){return this.state.bounds[0]},t.prototype.getUpperBound=function(){var e=this.state.bounds;return e[e.length-1]},t.prototype.getPoints=function(){var e=this.props,t=e.marks,n=e.step,i=e.min,r=e.max,o=this._getPointsCache;if(!o||o.marks!==t||o.step!==n){var a=l({},t);if(null!==n)for(var s=i;s<=r;s+=n)a[s]=s;var u=Object.keys(a).map(parseFloat);u.sort(function(e,t){return e-t}),this._getPointsCache={marks:t,step:n,points:u}}return this._getPointsCache.points},t.prototype.pushSurroundingHandles=function(e,t,n){var i=this.props.pushable,r=e[t],o=0;if(e[t+1]-r<i&&(o=1),r-e[t-1]<i&&(o=-1),0!==o){var a=t+o,l=o*(e[a]-r);this.pushHandle(e,a,o,i-l)||(e[t]=n)}},t.prototype.pushHandle=function(e,t,n,i){for(var r=e[t],o=e[t];n*(o-r)<i;){if(!this.pushHandleOnePoint(e,t,n))return e[t]=r,!1;o=e[t]}return!0},t.prototype.pushHandleOnePoint=function(e,t,n){var i=this.getPoints(),r=i.indexOf(e[t]),o=r+n;if(o>=i.length||o<0)return!1;var a=t+n,l=i[o],s=this.props.pushable,u=n*(e[a]-l);return!!this.pushHandle(e,a,n,s-u)&&(e[t]=l,!0)},t.prototype.trimAlignValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l({},this.props,t),i=g.ensureValueInRange(e,n),r=this.ensureValueNotConflict(i,n);return g.ensureValuePrecision(r,n)},t.prototype.ensureValueNotConflict=function(e,t){var n=t.allowCross,i=this.state||{},r=i.handle,o=i.bounds;if(!n&&null!=r){if(r>0&&e<=o[r-1])return o[r-1];if(r<o.length-1&&e>=o[r+1])return o[r+1]}return e},t.prototype.render=function(){var e=this,t=this.state,n=t.handle,i=t.bounds,r=this.props,o=r.prefixCls,a=r.vertical,l=r.included,u=r.disabled,_=r.min,d=r.max,f=r.handle,p=r.trackStyle,m=r.handleStyle,h=i.map(function(t){return e.calcOffset(t)}),g=o+"-handle",v=i.map(function(t,i){var r;return f({className:(0,c.default)((r={},r[g]=!0,r[g+"-"+(i+1)]=!0,r)),vertical:a,offset:h[i],value:t,dragging:n===i,index:i,min:_,max:d,disabled:u,style:m[i],ref:function(t){return e.saveHandle(i,t)}})});return{tracks:i.slice(0,-1).map(function(e,t){var n,i=t+1,r=(0,c.default)((n={},n[o+"-track"]=!0,n[o+"-track-"+i]=!0,n));return(0,s.h)(b.default,{className:r,vertical:a,included:l,offset:h[i-1],length:h[i]-h[i-1],style:p[t],key:i})}),handles:v}},t}(s.Component);v.defaultProps={count:1,allowCross:!0,pushable:!1},t.default=(0,m.default)(v)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(13),u=n(121),c=i(u),_=n(122),d=i(_),f=n(57),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=function(e){function t(n){r(this,t);var i=o(this,e.call(this,n));i.onEnd=function(){i.setState({dragging:!1}),i.removeDocumentEvents(),i.props.onAfterChange(i.getValue())};var a=void 0!==n.defaultValue?n.defaultValue:n.min,l=void 0!==n.value?n.value:a;return i.state={value:i.trimAlignValue(l),dragging:!1},i}return a(t,e),t.prototype.componentWillReceiveProps=function(e){if("value"in e||"min"in e||"max"in e){var t=this.state.value,n=void 0!==e.value?e.value:t,i=this.trimAlignValue(n,e);i!==t&&(this.setState({value:i}),b.isValueOutOfRange(n,e)&&this.props.onChange(i))}},t.prototype.onChange=function(e){var t=this.props;!("value"in t)&&this.setState(e);var n=e.value;t.onChange(n)},t.prototype.onStart=function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var i=this.calcValueByPos(e);this.startValue=i,this.startPosition=e,i!==n&&this.onChange({value:i})},t.prototype.onMove=function(e,t){b.pauseEvent(e);var n=this.state.value,i=this.calcValueByPos(t);i!==n&&this.onChange({value:i})},t.prototype.onKeyboard=function(e){var t=b.getKeyboardValueMutator(e);if(t){b.pauseEvent(e);var n=this.state,i=n.value,r=t(i,this.props),o=this.trimAlignValue(r);if(o===i)return;this.onChange({value:o})}},t.prototype.getValue=function(){return this.state.value},t.prototype.getLowerBound=function(){return this.props.min},t.prototype.getUpperBound=function(){return this.state.value},t.prototype.trimAlignValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l({},this.props,t),i=b.ensureValueInRange(e,n);return b.ensureValuePrecision(i,n)},t.prototype.render=function(){var e=this,t=this.props,n=t.prefixCls,i=t.vertical,r=t.included,o=t.disabled,a=t.minimumTrackStyle,u=t.trackStyle,_=t.handleStyle,d=t.min,f=t.max,b=t.handle,p=this.state,m=p.value,h=p.dragging,g=this.calcOffset(m),v=b({className:n+"-handle",vertical:i,offset:g,value:m,dragging:h,disabled:o,min:d,max:f,style:_[0]||_,ref:function(t){return e.saveHandle(0,t)}}),y=u[0]||u;return{tracks:(0,s.h)(c.default,{className:n+"-track",vertical:i,included:r,offset:0,length:g,style:l({},a,y)}),handles:v}},t}(s.Component);t.default=(0,d.default)(p)},function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(13),o=n(31),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(e,t,n,i,r,o){var a=Object.keys(t).map(parseFloat);if(n)for(var l=r;l<=o;l+=i)a.indexOf(l)>=0||a.push(l);return a},s=function(e){var t=e.prefixCls,n=e.vertical,o=e.marks,s=e.dots,u=e.step,c=e.included,_=e.lowerBound,d=e.upperBound,f=e.max,b=e.min,p=e.dotStyle,m=e.activeDotStyle,h=f-b,g=l(0,o,s,u,b,f).map(function(e){var o,l=Math.abs(e-b)/h*100+"%",s=!c&&e===d||c&&e<=d&&e>=_,u=n?i({bottom:l},p):i({left:l},p);s&&(u=i({},u,m));var f=(0,a.default)((o={},o[t+"-dot"]=!0,o[t+"-dot-active"]=s,o));return(0,r.h)("span",{className:f,style:u,key:e})});return(0,r.h)("div",{className:t+"-step"},g)};t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(326);Object.defineProperty(t,"Slider",{enumerable:!0,get:function(){return i(r).default}});var o=n(325);Object.defineProperty(t,"Range",{enumerable:!0,get:function(){return i(o).default}})},function(e,t,n){"use strict";function i(){return!1}function r(){return!0}function o(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),o.prototype={isEventObject:1,constructor:o,isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return null===e||void 0===e}function o(){return d}function a(){return f}function l(e){var t=e.type,n="function"===typeof e.stopPropagation||"boolean"===typeof e.cancelBubble;u.default.call(this),this.nativeEvent=e;var i=a;"defaultPrevented"in e?i=e.defaultPrevented?o:a:"getPreventDefault"in e?i=e.getPreventDefault()?o:a:"returnValue"in e&&(i=e.returnValue===f?o:a),this.isDefaultPrevented=i;var r=[],l=void 0,s=void 0,c=b.concat();for(p.forEach(function(e){t.match(e.reg)&&(c=c.concat(e.props),e.fix&&r.push(e.fix))}),l=c.length;l;)s=c[--l],this[s]=e[s];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),l=r.length;l;)(0,r[--l])(this,e);this.timeStamp=e.timeStamp||Date.now()}Object.defineProperty(t,"__esModule",{value:!0});var s=n(329),u=i(s),c=n(332),_=i(c),d=!0,f=!1,b=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],p=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){r(e.which)&&(e.which=r(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,i=void 0,r=void 0,o=t.wheelDelta,a=t.axis,l=t.wheelDeltaY,s=t.wheelDeltaX,u=t.detail;o&&(r=o/120),u&&(r=0-(u%3===0?u/3:u)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(i=0,n=0-r):a===e.VERTICAL_AXIS&&(n=0,i=r)),void 0!==l&&(i=l/120),void 0!==s&&(n=-1*s/120),n||i||(i=r),void 0!==n&&(e.deltaX=n),void 0!==i&&(e.deltaY=i),void 0!==r&&(e.delta=r)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,i=void 0,o=void 0,a=e.target,l=t.button;return a&&r(e.pageX)&&!r(t.clientX)&&(n=a.ownerDocument||document,i=n.documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===l||(e.which=1&l?1:2&l?3:4&l?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===a?e.toElement:e.fromElement),e}}],m=u.default.prototype;(0,_.default)(l.prototype,m,{constructor:l,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=f,m.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=d,m.stopPropagation.call(this)}}),t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){function i(t){var i=new o.default(t);n.call(e,i)}return e.addEventListener?(e.addEventListener(t,i,!1),{remove:function(){e.removeEventListener(t,i,!1)}}):e.attachEvent?(e.attachEvent("on"+t,i),{remove:function(){e.detachEvent("on"+t,i)}}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(330),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,l,s=i(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)o.call(n,c)&&(s[c]=n[c]);if(r){l=r(n);for(var _=0;_<l.length;_++)a.call(n,l[_])&&(s[l[_]]=n[l[_]])}}return s}},function(e,t){e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),s=0;s<o.length;s++){var u=o[s];if(!l(u))return!1;var c=e[u],_=t[u];if(!1===(r=n?n.call(i,c,_,u):void 0)||void 0===r&&c!==_)return!1}return!0}},function(e,t,n){n(123),e.exports=n(124)}]);
//# sourceMappingURL=main.d783b3f9.js.map